{
    "sourceFile": "src/pages/SellCar.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 19,
            "patches": [
                {
                    "date": 1759428067547,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1759428296925,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -321,9 +321,9 @@\n                     <Button variant=\"outline\" onClick={() => setStep(2)} className=\"w-full\">\r\n                       Back\r\n                     </Button>\r\n                     <Button\r\n-                      variant=\"accent\"\r\n+                      variant=\"default\"\r\n                       onClick={handleSubmit}\r\n                       className=\"w-full\"\r\n                       disabled={isSubmitting}\r\n                     >\r\n"
                },
                {
                    "date": 1759428304944,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,343 @@\n+import { useState, useEffect } from \"react\";\r\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useAuth } from \"@/contexts/AuthContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Input } from \"@/components/ui/input\";\r\n+import { Label } from \"@/components/ui/label\";\r\n+import { Textarea } from \"@/components/ui/textarea\";\r\n+import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\n+import { Checkbox } from \"@/components/ui/checkbox\";\r\n+import { toast } from \"@/hooks/use-toast\";\r\n+import { ArrowLeft, Upload } from \"lucide-react\";\r\n+\r\n+const platforms = [\r\n+  { id: \"edmunds\", name: \"Edmunds\" },\r\n+  { id: \"olx\", name: \"OLX\" },\r\n+  { id: \"facebook\", name: \"Facebook Marketplace\" },\r\n+  { id: \"autotrader\", name: \"AutoTrader\" },\r\n+  { id: \"cars\", name: \"Cars.com\" },\r\n+];\r\n+\r\n+const SellCar = () => {\r\n+  const { user } = useAuth();\r\n+  const navigate = useNavigate();\r\n+  const [step, setStep] = useState(1);\r\n+  const [isSubmitting, setIsSubmitting] = useState(false);\r\n+\r\n+  const [formData, setFormData] = useState({\r\n+    brand: \"\",\r\n+    model: \"\",\r\n+    year: \"\",\r\n+    mileage: \"\",\r\n+    price: \"\",\r\n+    condition: \"\",\r\n+    description: \"\",\r\n+    location: \"\",\r\n+    platforms: [] as string[],\r\n+  });\r\n+\r\n+  useEffect(() => {\r\n+    if (!user) {\r\n+      navigate(\"/auth?mode=login\");\r\n+    }\r\n+  }, [user, navigate]);\r\n+\r\n+  if (!user) {\r\n+    return null;\r\n+  }\r\n+\r\n+  const handleInputChange = (field: string, value: string) => {\r\n+    setFormData((prev) => ({ ...prev, [field]: value }));\r\n+  };\r\n+\r\n+  const handlePlatformToggle = (platformId: string) => {\r\n+    setFormData((prev) => ({\r\n+      ...prev,\r\n+      platforms: prev.platforms.includes(platformId)\r\n+        ? prev.platforms.filter((p) => p !== platformId)\r\n+        : [...prev.platforms, platformId],\r\n+    }));\r\n+  };\r\n+\r\n+  const handleNext = () => {\r\n+    if (step === 1) {\r\n+      if (!formData.brand || !formData.model || !formData.year || !formData.condition) {\r\n+        toast({\r\n+          title: \"Missing information\",\r\n+          description: \"Please fill in all required fields.\",\r\n+          variant: \"destructive\",\r\n+        });\r\n+        return;\r\n+      }\r\n+    }\r\n+    if (step === 2) {\r\n+      if (!formData.mileage || !formData.price || !formData.location) {\r\n+        toast({\r\n+          title: \"Missing information\",\r\n+          description: \"Please fill in all required fields.\",\r\n+          variant: \"destructive\",\r\n+        });\r\n+        return;\r\n+      }\r\n+    }\r\n+    setStep((prev) => prev + 1);\r\n+  };\r\n+\r\n+  const handleSubmit = async () => {\r\n+    if (!formData.description || formData.platforms.length === 0) {\r\n+      toast({\r\n+        title: \"Missing information\",\r\n+        description: \"Please complete all required fields.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+      return;\r\n+    }\r\n+\r\n+    setIsSubmitting(true);\r\n+    \r\n+    // Simulate API call\r\n+    await new Promise((resolve) => setTimeout(resolve, 2000));\r\n+    \r\n+    toast({\r\n+      title: \"Success!\",\r\n+      description: \"Your car has been listed successfully.\",\r\n+    });\r\n+    \r\n+    setIsSubmitting(false);\r\n+    navigate(\"/profile\");\r\n+  };\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <Button\r\n+          variant=\"ghost\"\r\n+          onClick={() => navigate(-1)}\r\n+          className=\"mb-6 gap-2\"\r\n+        >\r\n+          <ArrowLeft className=\"h-4 w-4\" />\r\n+          Back\r\n+        </Button>\r\n+\r\n+        <div className=\"mx-auto max-w-2xl\">\r\n+          <div className=\"mb-8 text-center\">\r\n+            <h1 className=\"text-4xl font-bold\">Sell Your Car</h1>\r\n+            <p className=\"mt-2 text-muted-foreground\">\r\n+              Step {step} of 3\r\n+            </p>\r\n+          </div>\r\n+\r\n+          {/* Progress Bar */}\r\n+          <div className=\"mb-8 flex gap-2\">\r\n+            {[1, 2, 3].map((s) => (\r\n+              <div\r\n+                key={s}\r\n+                className={`h-2 flex-1 rounded-full transition-smooth ${\r\n+                  s <= step ? \"bg-primary\" : \"bg-muted\"\r\n+                }`}\r\n+              />\r\n+            ))}\r\n+          </div>\r\n+\r\n+          <Card className=\"shadow-card\">\r\n+            {step === 1 && (\r\n+              <>\r\n+                <CardHeader>\r\n+                  <CardTitle>Car Details</CardTitle>\r\n+                  <CardDescription>\r\n+                    Tell us about your car\r\n+                  </CardDescription>\r\n+                </CardHeader>\r\n+                <CardContent className=\"space-y-4\">\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label htmlFor=\"brand\">Brand *</Label>\r\n+                      <Input\r\n+                        id=\"brand\"\r\n+                        placeholder=\"e.g., Toyota\"\r\n+                        value={formData.brand}\r\n+                        onChange={(e) => handleInputChange(\"brand\", e.target.value)}\r\n+                      />\r\n+                    </div>\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label htmlFor=\"model\">Model *</Label>\r\n+                      <Input\r\n+                        id=\"model\"\r\n+                        placeholder=\"e.g., Camry\"\r\n+                        value={formData.model}\r\n+                        onChange={(e) => handleInputChange(\"model\", e.target.value)}\r\n+                      />\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label htmlFor=\"year\">Year *</Label>\r\n+                      <Input\r\n+                        id=\"year\"\r\n+                        type=\"number\"\r\n+                        placeholder=\"2020\"\r\n+                        value={formData.year}\r\n+                        onChange={(e) => handleInputChange(\"year\", e.target.value)}\r\n+                      />\r\n+                    </div>\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label htmlFor=\"condition\">Condition *</Label>\r\n+                      <Select\r\n+                        value={formData.condition}\r\n+                        onValueChange={(value) => handleInputChange(\"condition\", value)}\r\n+                      >\r\n+                        <SelectTrigger>\r\n+                          <SelectValue placeholder=\"Select condition\" />\r\n+                        </SelectTrigger>\r\n+                        <SelectContent>\r\n+                          <SelectItem value=\"new\">New</SelectItem>\r\n+                          <SelectItem value=\"used\">Used</SelectItem>\r\n+                          <SelectItem value=\"certified\">Certified Pre-Owned</SelectItem>\r\n+                        </SelectContent>\r\n+                      </Select>\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <Button variant=\"default\" onClick={handleNext} className=\"w-full\">\r\n+                    Continue\r\n+                  </Button>\r\n+                </CardContent>\r\n+              </>\r\n+            )}\r\n+\r\n+            {step === 2 && (\r\n+              <>\r\n+                <CardHeader>\r\n+                  <CardTitle>Pricing & Location</CardTitle>\r\n+                  <CardDescription>\r\n+                    Set your price and location\r\n+                  </CardDescription>\r\n+                </CardHeader>\r\n+                <CardContent className=\"space-y-4\">\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label htmlFor=\"price\">Price ($) *</Label>\r\n+                      <Input\r\n+                        id=\"price\"\r\n+                        type=\"number\"\r\n+                        placeholder=\"25000\"\r\n+                        value={formData.price}\r\n+                        onChange={(e) => handleInputChange(\"price\", e.target.value)}\r\n+                      />\r\n+                    </div>\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label htmlFor=\"mileage\">Mileage (miles) *</Label>\r\n+                      <Input\r\n+                        id=\"mileage\"\r\n+                        type=\"number\"\r\n+                        placeholder=\"50000\"\r\n+                        value={formData.mileage}\r\n+                        onChange={(e) => handleInputChange(\"mileage\", e.target.value)}\r\n+                      />\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <div className=\"space-y-2\">\r\n+                    <Label htmlFor=\"location\">Location *</Label>\r\n+                    <Input\r\n+                      id=\"location\"\r\n+                      placeholder=\"City, State\"\r\n+                      value={formData.location}\r\n+                      onChange={(e) => handleInputChange(\"location\", e.target.value)}\r\n+                    />\r\n+                  </div>\r\n+\r\n+                  <div className=\"flex gap-2\">\r\n+                    <Button variant=\"outline\" onClick={() => setStep(1)} className=\"w-full\">\r\n+                      Back\r\n+                    </Button>\r\n+                    <Button variant=\"default\" onClick={handleNext} className=\"w-full\">\r\n+                      Continue\r\n+                    </Button>\r\n+                  </div>\r\n+                </CardContent>\r\n+              </>\r\n+            )}\r\n+\r\n+            {step === 3 && (\r\n+              <>\r\n+                <CardHeader>\r\n+                  <CardTitle>Description & Platforms</CardTitle>\r\n+                  <CardDescription>\r\n+                    Add details and choose where to list\r\n+                  </CardDescription>\r\n+                </CardHeader>\r\n+                <CardContent className=\"space-y-6\">\r\n+                  <div className=\"space-y-2\">\r\n+                    <Label htmlFor=\"description\">Description *</Label>\r\n+                    <Textarea\r\n+                      id=\"description\"\r\n+                      placeholder=\"Describe your car's features, condition, and history...\"\r\n+                      rows={4}\r\n+                      value={formData.description}\r\n+                      onChange={(e) => handleInputChange(\"description\", e.target.value)}\r\n+                    />\r\n+                  </div>\r\n+\r\n+                  <div className=\"space-y-3\">\r\n+                    <Label>List on Platforms *</Label>\r\n+                    <div className=\"space-y-3 rounded-lg border p-4\">\r\n+                      {platforms.map((platform) => (\r\n+                        <div key={platform.id} className=\"flex items-center space-x-2\">\r\n+                          <Checkbox\r\n+                            id={platform.id}\r\n+                            checked={formData.platforms.includes(platform.id)}\r\n+                            onCheckedChange={() => handlePlatformToggle(platform.id)}\r\n+                          />\r\n+                          <label\r\n+                            htmlFor={platform.id}\r\n+                            className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n+                          >\r\n+                            {platform.name}\r\n+                          </label>\r\n+                        </div>\r\n+                      ))}\r\n+                    </div>\r\n+                    <p className=\"text-xs text-muted-foreground\">\r\n+                      Select at least one platform to list your car\r\n+                    </p>\r\n+                  </div>\r\n+\r\n+                  <div className=\"space-y-2\">\r\n+                    <Label>Upload Images (Optional)</Label>\r\n+                    <div className=\"flex items-center justify-center rounded-lg border-2 border-dashed p-8 text-center transition-smooth hover:border-primary\">\r\n+                      <div>\r\n+                        <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n+                        <p className=\"text-sm text-muted-foreground\">\r\n+                          Click to upload car images\r\n+                        </p>\r\n+                      </div>\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <div className=\"flex gap-2\">\r\n+                    <Button variant=\"outline\" onClick={() => setStep(2)} className=\"w-full\">\r\n+                      Back\r\n+                    </Button>\r\n+                    <Button\r\n+                      variant=\"default\"\r\n+                      onClick={handleSubmit}\r\n+                      className=\"w-full\"\r\n+                      disabled={isSubmitting}\r\n+                    >\r\n+                      {isSubmitting ? \"Listing...\" : \"List Car\"}\r\n+                    </Button>\r\n+                  </div>\r\n+                </CardContent>\r\n+              </>\r\n+            )}\r\n+          </Card>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default SellCar;\r\n"
                },
                {
                    "date": 1759939571943,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,10 +7,11 @@\n import { Textarea } from \"@/components/ui/textarea\";\r\n import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\n import { Checkbox } from \"@/components/ui/checkbox\";\r\n+import MapPicker from \"@/components/MapPicker\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n-import { ArrowLeft, Upload } from \"lucide-react\";\r\n+import { ArrowLeft, Upload, MapPin, X } from \"lucide-react\";\r\n \r\n const platforms = [\r\n   { id: \"edmunds\", name: \"Edmunds\" },\r\n   { id: \"olx\", name: \"OLX\" },\r\n@@ -33,11 +34,15 @@\n     price: \"\",\r\n     condition: \"\",\r\n     description: \"\",\r\n     location: \"\",\r\n+    latitude: 0,\r\n+    longitude: 0,\r\n     platforms: [] as string[],\r\n   });\r\n \r\n+  const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n+\r\n   useEffect(() => {\r\n     if (!user) {\r\n       navigate(\"/auth?mode=login\");\r\n     }\r\n@@ -59,8 +64,33 @@\n         : [...prev.platforms, platformId],\r\n     }));\r\n   };\r\n \r\n+  const handleLocationSelect = (lat: number, lng: number, address: string) => {\r\n+    setFormData((prev) => ({\r\n+      ...prev,\r\n+      latitude: lat,\r\n+      longitude: lng,\r\n+      location: address,\r\n+    }));\r\n+  };\r\n+\r\n+  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n+    const files = e.target.files;\r\n+    if (files) {\r\n+      const newImages = Array.from(files).map((file) => URL.createObjectURL(file));\r\n+      setSelectedImages((prev) => [...prev, ...newImages]);\r\n+      toast({\r\n+        title: \"Images added\",\r\n+        description: `${files.length} image(s) ready for upload.`,\r\n+      });\r\n+    }\r\n+  };\r\n+\r\n+  const removeImage = (index: number) => {\r\n+    setSelectedImages((prev) => prev.filter((_, i) => i !== index));\r\n+  };\r\n+\r\n   const handleNext = () => {\r\n     if (step === 1) {\r\n       if (!formData.brand || !formData.model || !formData.year || !formData.condition) {\r\n         toast({\r\n@@ -199,9 +229,9 @@\n                       </Select>\r\n                     </div>\r\n                   </div>\r\n \r\n-                  <Button variant=\"default\" onClick={handleNext} className=\"w-full\">\r\n+                  <Button variant=\"accent\" onClick={handleNext} className=\"w-full\">\r\n                     Continue\r\n                   </Button>\r\n                 </CardContent>\r\n               </>\r\n@@ -238,23 +268,30 @@\n                       />\r\n                     </div>\r\n                   </div>\r\n \r\n-                  <div className=\"space-y-2\">\r\n-                    <Label htmlFor=\"location\">Location *</Label>\r\n-                    <Input\r\n-                      id=\"location\"\r\n-                      placeholder=\"City, State\"\r\n-                      value={formData.location}\r\n-                      onChange={(e) => handleInputChange(\"location\", e.target.value)}\r\n+                  <div className=\"space-y-3\">\r\n+                    <Label className=\"flex items-center gap-2\">\r\n+                      <MapPin className=\"h-4 w-4 text-primary\" />\r\n+                      Pick Location on Map *\r\n+                    </Label>\r\n+                    <MapPicker\r\n+                      onLocationSelect={handleLocationSelect}\r\n+                      initialLat={formData.latitude || 37.7749}\r\n+                      initialLng={formData.longitude || -122.4194}\r\n                     />\r\n+                    {formData.location && (\r\n+                      <p className=\"text-sm text-muted-foreground\">\r\n+                        Selected: {formData.location}\r\n+                      </p>\r\n+                    )}\r\n                   </div>\r\n \r\n                   <div className=\"flex gap-2\">\r\n                     <Button variant=\"outline\" onClick={() => setStep(1)} className=\"w-full\">\r\n                       Back\r\n                     </Button>\r\n-                    <Button variant=\"default\" onClick={handleNext} className=\"w-full\">\r\n+                    <Button variant=\"accent\" onClick={handleNext} className=\"w-full\">\r\n                       Continue\r\n                     </Button>\r\n                   </div>\r\n                 </CardContent>\r\n@@ -304,26 +341,63 @@\n                       Select at least one platform to list your car\r\n                     </p>\r\n                   </div>\r\n \r\n-                  <div className=\"space-y-2\">\r\n-                    <Label>Upload Images (Optional)</Label>\r\n-                    <div className=\"flex items-center justify-center rounded-lg border-2 border-dashed p-8 text-center transition-smooth hover:border-primary\">\r\n-                      <div>\r\n-                        <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n-                        <p className=\"text-sm text-muted-foreground\">\r\n-                          Click to upload car images\r\n-                        </p>\r\n-                      </div>\r\n+                  <div className=\"space-y-3\">\r\n+                    <Label>Upload Images</Label>\r\n+                    <div className=\"space-y-3\">\r\n+                      <label\r\n+                        htmlFor=\"image-upload\"\r\n+                        className=\"flex cursor-pointer items-center justify-center rounded-lg border-2 border-dashed p-8 text-center transition-smooth hover:border-primary hover:bg-primary/5\"\r\n+                      >\r\n+                        <div>\r\n+                          <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n+                          <p className=\"text-sm font-medium text-muted-foreground\">\r\n+                            Click to upload car images\r\n+                          </p>\r\n+                          <p className=\"text-xs text-muted-foreground mt-1\">\r\n+                            Upload up to 10 images (JPG, PNG)\r\n+                          </p>\r\n+                        </div>\r\n+                      </label>\r\n+                      <input\r\n+                        id=\"image-upload\"\r\n+                        type=\"file\"\r\n+                        accept=\"image/*\"\r\n+                        multiple\r\n+                        className=\"hidden\"\r\n+                        onChange={handleImageUpload}\r\n+                      />\r\n+\r\n+                      {selectedImages.length > 0 && (\r\n+                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n+                          {selectedImages.map((img, index) => (\r\n+                            <div key={index} className=\"relative group animate-scale-in\">\r\n+                              <img\r\n+                                src={img}\r\n+                                alt={`Preview ${index + 1}`}\r\n+                                className=\"h-24 w-full rounded-lg object-cover\"\r\n+                              />\r\n+                              <button\r\n+                                type=\"button\"\r\n+                                onClick={() => removeImage(index)}\r\n+                                className=\"absolute -right-2 -top-2 flex h-6 w-6 items-center justify-center rounded-full bg-destructive text-white opacity-0 group-hover:opacity-100 transition-smooth\"\r\n+                              >\r\n+                                <X className=\"h-4 w-4\" />\r\n+                              </button>\r\n+                            </div>\r\n+                          ))}\r\n+                        </div>\r\n+                      )}\r\n                     </div>\r\n                   </div>\r\n \r\n                   <div className=\"flex gap-2\">\r\n                     <Button variant=\"outline\" onClick={() => setStep(2)} className=\"w-full\">\r\n                       Back\r\n                     </Button>\r\n                     <Button\r\n-                      variant=\"default\"\r\n+                      variant=\"accent\"\r\n                       onClick={handleSubmit}\r\n                       className=\"w-full\"\r\n                       disabled={isSubmitting}\r\n                     >\r\n"
                },
                {
                    "date": 1759939580506,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -229,9 +229,9 @@\n                       </Select>\r\n                     </div>\r\n                   </div>\r\n \r\n-                  <Button variant=\"accent\" onClick={handleNext} className=\"w-full\">\r\n+                  <Button variant=\"default\" onClick={handleNext} className=\"w-full\">\r\n                     Continue\r\n                   </Button>\r\n                 </CardContent>\r\n               </>\r\n@@ -414,347 +414,4 @@\n   );\r\n };\r\n \r\n export default SellCar;\r\n-import { useState, useEffect } from \"react\";\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useAuth } from \"@/contexts/AuthContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Input } from \"@/components/ui/input\";\r\n-import { Label } from \"@/components/ui/label\";\r\n-import { Textarea } from \"@/components/ui/textarea\";\r\n-import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\n-import { Checkbox } from \"@/components/ui/checkbox\";\r\n-import { toast } from \"@/hooks/use-toast\";\r\n-import { ArrowLeft, Upload } from \"lucide-react\";\r\n-\r\n-const platforms = [\r\n-  { id: \"edmunds\", name: \"Edmunds\" },\r\n-  { id: \"olx\", name: \"OLX\" },\r\n-  { id: \"facebook\", name: \"Facebook Marketplace\" },\r\n-  { id: \"autotrader\", name: \"AutoTrader\" },\r\n-  { id: \"cars\", name: \"Cars.com\" },\r\n-];\r\n-\r\n-const SellCar = () => {\r\n-  const { user } = useAuth();\r\n-  const navigate = useNavigate();\r\n-  const [step, setStep] = useState(1);\r\n-  const [isSubmitting, setIsSubmitting] = useState(false);\r\n-\r\n-  const [formData, setFormData] = useState({\r\n-    brand: \"\",\r\n-    model: \"\",\r\n-    year: \"\",\r\n-    mileage: \"\",\r\n-    price: \"\",\r\n-    condition: \"\",\r\n-    description: \"\",\r\n-    location: \"\",\r\n-    platforms: [] as string[],\r\n-  });\r\n-\r\n-  useEffect(() => {\r\n-    if (!user) {\r\n-      navigate(\"/auth?mode=login\");\r\n-    }\r\n-  }, [user, navigate]);\r\n-\r\n-  if (!user) {\r\n-    return null;\r\n-  }\r\n-\r\n-  const handleInputChange = (field: string, value: string) => {\r\n-    setFormData((prev) => ({ ...prev, [field]: value }));\r\n-  };\r\n-\r\n-  const handlePlatformToggle = (platformId: string) => {\r\n-    setFormData((prev) => ({\r\n-      ...prev,\r\n-      platforms: prev.platforms.includes(platformId)\r\n-        ? prev.platforms.filter((p) => p !== platformId)\r\n-        : [...prev.platforms, platformId],\r\n-    }));\r\n-  };\r\n-\r\n-  const handleNext = () => {\r\n-    if (step === 1) {\r\n-      if (!formData.brand || !formData.model || !formData.year || !formData.condition) {\r\n-        toast({\r\n-          title: \"Missing information\",\r\n-          description: \"Please fill in all required fields.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-        return;\r\n-      }\r\n-    }\r\n-    if (step === 2) {\r\n-      if (!formData.mileage || !formData.price || !formData.location) {\r\n-        toast({\r\n-          title: \"Missing information\",\r\n-          description: \"Please fill in all required fields.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-        return;\r\n-      }\r\n-    }\r\n-    setStep((prev) => prev + 1);\r\n-  };\r\n-\r\n-  const handleSubmit = async () => {\r\n-    if (!formData.description || formData.platforms.length === 0) {\r\n-      toast({\r\n-        title: \"Missing information\",\r\n-        description: \"Please complete all required fields.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-      return;\r\n-    }\r\n-\r\n-    setIsSubmitting(true);\r\n-    \r\n-    // Simulate API call\r\n-    await new Promise((resolve) => setTimeout(resolve, 2000));\r\n-    \r\n-    toast({\r\n-      title: \"Success!\",\r\n-      description: \"Your car has been listed successfully.\",\r\n-    });\r\n-    \r\n-    setIsSubmitting(false);\r\n-    navigate(\"/profile\");\r\n-  };\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <Button\r\n-          variant=\"ghost\"\r\n-          onClick={() => navigate(-1)}\r\n-          className=\"mb-6 gap-2\"\r\n-        >\r\n-          <ArrowLeft className=\"h-4 w-4\" />\r\n-          Back\r\n-        </Button>\r\n-\r\n-        <div className=\"mx-auto max-w-2xl\">\r\n-          <div className=\"mb-8 text-center\">\r\n-            <h1 className=\"text-4xl font-bold\">Sell Your Car</h1>\r\n-            <p className=\"mt-2 text-muted-foreground\">\r\n-              Step {step} of 3\r\n-            </p>\r\n-          </div>\r\n-\r\n-          {/* Progress Bar */}\r\n-          <div className=\"mb-8 flex gap-2\">\r\n-            {[1, 2, 3].map((s) => (\r\n-              <div\r\n-                key={s}\r\n-                className={`h-2 flex-1 rounded-full transition-smooth ${\r\n-                  s <= step ? \"bg-primary\" : \"bg-muted\"\r\n-                }`}\r\n-              />\r\n-            ))}\r\n-          </div>\r\n-\r\n-          <Card className=\"shadow-card\">\r\n-            {step === 1 && (\r\n-              <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Car Details</CardTitle>\r\n-                  <CardDescription>\r\n-                    Tell us about your car\r\n-                  </CardDescription>\r\n-                </CardHeader>\r\n-                <CardContent className=\"space-y-4\">\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"brand\">Brand *</Label>\r\n-                      <Input\r\n-                        id=\"brand\"\r\n-                        placeholder=\"e.g., Toyota\"\r\n-                        value={formData.brand}\r\n-                        onChange={(e) => handleInputChange(\"brand\", e.target.value)}\r\n-                      />\r\n-                    </div>\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"model\">Model *</Label>\r\n-                      <Input\r\n-                        id=\"model\"\r\n-                        placeholder=\"e.g., Camry\"\r\n-                        value={formData.model}\r\n-                        onChange={(e) => handleInputChange(\"model\", e.target.value)}\r\n-                      />\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"year\">Year *</Label>\r\n-                      <Input\r\n-                        id=\"year\"\r\n-                        type=\"number\"\r\n-                        placeholder=\"2020\"\r\n-                        value={formData.year}\r\n-                        onChange={(e) => handleInputChange(\"year\", e.target.value)}\r\n-                      />\r\n-                    </div>\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"condition\">Condition *</Label>\r\n-                      <Select\r\n-                        value={formData.condition}\r\n-                        onValueChange={(value) => handleInputChange(\"condition\", value)}\r\n-                      >\r\n-                        <SelectTrigger>\r\n-                          <SelectValue placeholder=\"Select condition\" />\r\n-                        </SelectTrigger>\r\n-                        <SelectContent>\r\n-                          <SelectItem value=\"new\">New</SelectItem>\r\n-                          <SelectItem value=\"used\">Used</SelectItem>\r\n-                          <SelectItem value=\"certified\">Certified Pre-Owned</SelectItem>\r\n-                        </SelectContent>\r\n-                      </Select>\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <Button variant=\"accent\" onClick={handleNext} className=\"w-full\">\r\n-                    Continue\r\n-                  </Button>\r\n-                </CardContent>\r\n-              </>\r\n-            )}\r\n-\r\n-            {step === 2 && (\r\n-              <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Pricing & Location</CardTitle>\r\n-                  <CardDescription>\r\n-                    Set your price and location\r\n-                  </CardDescription>\r\n-                </CardHeader>\r\n-                <CardContent className=\"space-y-4\">\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"price\">Price ($) *</Label>\r\n-                      <Input\r\n-                        id=\"price\"\r\n-                        type=\"number\"\r\n-                        placeholder=\"25000\"\r\n-                        value={formData.price}\r\n-                        onChange={(e) => handleInputChange(\"price\", e.target.value)}\r\n-                      />\r\n-                    </div>\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"mileage\">Mileage (miles) *</Label>\r\n-                      <Input\r\n-                        id=\"mileage\"\r\n-                        type=\"number\"\r\n-                        placeholder=\"50000\"\r\n-                        value={formData.mileage}\r\n-                        onChange={(e) => handleInputChange(\"mileage\", e.target.value)}\r\n-                      />\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <div className=\"space-y-2\">\r\n-                    <Label htmlFor=\"location\">Location *</Label>\r\n-                    <Input\r\n-                      id=\"location\"\r\n-                      placeholder=\"City, State\"\r\n-                      value={formData.location}\r\n-                      onChange={(e) => handleInputChange(\"location\", e.target.value)}\r\n-                    />\r\n-                  </div>\r\n-\r\n-                  <div className=\"flex gap-2\">\r\n-                    <Button variant=\"outline\" onClick={() => setStep(1)} className=\"w-full\">\r\n-                      Back\r\n-                    </Button>\r\n-                    <Button variant=\"accent\" onClick={handleNext} className=\"w-full\">\r\n-                      Continue\r\n-                    </Button>\r\n-                  </div>\r\n-                </CardContent>\r\n-              </>\r\n-            )}\r\n-\r\n-            {step === 3 && (\r\n-              <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Description & Platforms</CardTitle>\r\n-                  <CardDescription>\r\n-                    Add details and choose where to list\r\n-                  </CardDescription>\r\n-                </CardHeader>\r\n-                <CardContent className=\"space-y-6\">\r\n-                  <div className=\"space-y-2\">\r\n-                    <Label htmlFor=\"description\">Description *</Label>\r\n-                    <Textarea\r\n-                      id=\"description\"\r\n-                      placeholder=\"Describe your car's features, condition, and history...\"\r\n-                      rows={4}\r\n-                      value={formData.description}\r\n-                      onChange={(e) => handleInputChange(\"description\", e.target.value)}\r\n-                    />\r\n-                  </div>\r\n-\r\n-                  <div className=\"space-y-3\">\r\n-                    <Label>List on Platforms *</Label>\r\n-                    <div className=\"space-y-3 rounded-lg border p-4\">\r\n-                      {platforms.map((platform) => (\r\n-                        <div key={platform.id} className=\"flex items-center space-x-2\">\r\n-                          <Checkbox\r\n-                            id={platform.id}\r\n-                            checked={formData.platforms.includes(platform.id)}\r\n-                            onCheckedChange={() => handlePlatformToggle(platform.id)}\r\n-                          />\r\n-                          <label\r\n-                            htmlFor={platform.id}\r\n-                            className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n-                          >\r\n-                            {platform.name}\r\n-                          </label>\r\n-                        </div>\r\n-                      ))}\r\n-                    </div>\r\n-                    <p className=\"text-xs text-muted-foreground\">\r\n-                      Select at least one platform to list your car\r\n-                    </p>\r\n-                  </div>\r\n-\r\n-                  <div className=\"space-y-2\">\r\n-                    <Label>Upload Images (Optional)</Label>\r\n-                    <div className=\"flex items-center justify-center rounded-lg border-2 border-dashed p-8 text-center transition-smooth hover:border-primary\">\r\n-                      <div>\r\n-                        <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n-                        <p className=\"text-sm text-muted-foreground\">\r\n-                          Click to upload car images\r\n-                        </p>\r\n-                      </div>\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <div className=\"flex gap-2\">\r\n-                    <Button variant=\"outline\" onClick={() => setStep(2)} className=\"w-full\">\r\n-                      Back\r\n-                    </Button>\r\n-                    <Button\r\n-                      variant=\"default\"\r\n-                      onClick={handleSubmit}\r\n-                      className=\"w-full\"\r\n-                      disabled={isSubmitting}\r\n-                    >\r\n-                      {isSubmitting ? \"Listing...\" : \"List Car\"}\r\n-                    </Button>\r\n-                  </div>\r\n-                </CardContent>\r\n-              </>\r\n-            )}\r\n-          </Card>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default SellCar;\r\n"
                },
                {
                    "date": 1759939586806,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -289,9 +289,9 @@\n                   <div className=\"flex gap-2\">\r\n                     <Button variant=\"outline\" onClick={() => setStep(1)} className=\"w-full\">\r\n                       Back\r\n                     </Button>\r\n-                    <Button variant=\"accent\" onClick={handleNext} className=\"w-full\">\r\n+                    <Button variant=\"default\" onClick={handleNext} className=\"w-full\">\r\n                       Continue\r\n                     </Button>\r\n                   </div>\r\n                 </CardContent>\r\n"
                },
                {
                    "date": 1759939592072,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -395,9 +395,9 @@\n                     <Button variant=\"outline\" onClick={() => setStep(2)} className=\"w-full\">\r\n                       Back\r\n                     </Button>\r\n                     <Button\r\n-                      variant=\"accent\"\r\n+                      variant=\"default\"\r\n                       onClick={handleSubmit}\r\n                       className=\"w-full\"\r\n                       disabled={isSubmitting}\r\n                     >\r\n"
                },
                {
                    "date": 1763630853929,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,5 @@\n+// src/pages/SellCar.tsx\r\n import { useState, useEffect } from \"react\";\r\n import { useNavigate } from \"react-router-dom\";\r\n import { useAuth } from \"@/contexts/AuthContext\";\r\n import { Button } from \"@/components/ui/button\";\r\n@@ -10,8 +11,9 @@\n import { Checkbox } from \"@/components/ui/checkbox\";\r\n import MapPicker from \"@/components/MapPicker\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n import { ArrowLeft, Upload, MapPin, X } from \"lucide-react\";\r\n+import { createCar } from \"@/api/cars\";\r\n \r\n const platforms = [\r\n   { id: \"edmunds\", name: \"Edmunds\" },\r\n   { id: \"olx\", name: \"OLX\" },\r\n@@ -22,8 +24,9 @@\n \r\n const SellCar = () => {\r\n   const { user } = useAuth();\r\n   const navigate = useNavigate();\r\n+\r\n   const [step, setStep] = useState(1);\r\n   const [isSubmitting, setIsSubmitting] = useState(false);\r\n \r\n   const [formData, setFormData] = useState({\r\n@@ -40,18 +43,17 @@\n     platforms: [] as string[],\r\n   });\r\n \r\n   const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n+  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\r\n \r\n   useEffect(() => {\r\n     if (!user) {\r\n       navigate(\"/auth?mode=login\");\r\n     }\r\n   }, [user, navigate]);\r\n \r\n-  if (!user) {\r\n-    return null;\r\n-  }\r\n+  if (!user) return null;\r\n \r\n   const handleInputChange = (field: string, value: string) => {\r\n     setFormData((prev) => ({ ...prev, [field]: value }));\r\n   };\r\n@@ -75,20 +77,24 @@\n   };\r\n \r\n   const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n     const files = e.target.files;\r\n-    if (files) {\r\n-      const newImages = Array.from(files).map((file) => URL.createObjectURL(file));\r\n-      setSelectedImages((prev) => [...prev, ...newImages]);\r\n-      toast({\r\n-        title: \"Images added\",\r\n-        description: `${files.length} image(s) ready for upload.`,\r\n-      });\r\n-    }\r\n+    if (!files) return;\r\n+\r\n+    const fileArr = Array.from(files);\r\n+    setSelectedFiles((prev) => [...prev, ...fileArr]);\r\n+    const previews = fileArr.map((file) => URL.createObjectURL(file));\r\n+    setSelectedImages((prev) => [...prev, ...previews]);\r\n+\r\n+    toast({\r\n+      title: \"Images added\",\r\n+      description: `${fileArr.length} image(s) ready for upload.`,\r\n+    });\r\n   };\r\n \r\n   const removeImage = (index: number) => {\r\n     setSelectedImages((prev) => prev.filter((_, i) => i !== index));\r\n+    setSelectedFiles((prev) => prev.filter((_, i) => i !== index));\r\n   };\r\n \r\n   const handleNext = () => {\r\n     if (step === 1) {\r\n@@ -101,9 +107,9 @@\n         return;\r\n       }\r\n     }\r\n     if (step === 2) {\r\n-      if (!formData.mileage || !formData.price || !formData.location) {\r\n+      if (!formData.price || !formData.mileage || !formData.location) {\r\n         toast({\r\n           title: \"Missing information\",\r\n           description: \"Please fill in all required fields.\",\r\n           variant: \"destructive\",\r\n@@ -123,81 +129,106 @@\n       });\r\n       return;\r\n     }\r\n \r\n+    if (selectedFiles.length === 0) {\r\n+      toast({\r\n+        title: \"Missing images\",\r\n+        description: \"Please upload at least one image.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+      return;\r\n+    }\r\n+\r\n     setIsSubmitting(true);\r\n-    \r\n-    // Simulate API call\r\n-    await new Promise((resolve) => setTimeout(resolve, 2000));\r\n-    \r\n-    toast({\r\n-      title: \"Success!\",\r\n-      description: \"Your car has been listed successfully.\",\r\n-    });\r\n-    \r\n+\r\n+    try {\r\n+      const fd = new FormData();\r\n+\r\n+      fd.append(\"brand\", formData.brand);\r\n+      fd.append(\"model\", formData.model);\r\n+      fd.append(\"year\", formData.year);\r\n+      fd.append(\"mileage\", formData.mileage);\r\n+      fd.append(\"price\", formData.price);\r\n+      fd.append(\"condition\", formData.condition);\r\n+      fd.append(\"description\", formData.description);\r\n+      fd.append(\"location\", formData.location);\r\n+      fd.append(\"latitude\", String(formData.latitude));\r\n+      fd.append(\"longitude\", String(formData.longitude));\r\n+\r\n+      formData.platforms.forEach((p) => fd.append(\"platforms\", p));\r\n+      selectedFiles.forEach((file) => fd.append(\"images\", file));\r\n+\r\n+      await createCar(fd, user.token);\r\n+\r\n+      toast({\r\n+        title: \"Success!\",\r\n+        description: \"Your car has been listed successfully.\",\r\n+      });\r\n+\r\n+      navigate(\"/profile\");\r\n+    } catch (error: any) {\r\n+      toast({\r\n+        title: \"Error\",\r\n+        description: error.response?.data?.message || \"Something went wrong.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+\r\n     setIsSubmitting(false);\r\n-    navigate(\"/profile\");\r\n   };\r\n \r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n-        <Button\r\n-          variant=\"ghost\"\r\n-          onClick={() => navigate(-1)}\r\n-          className=\"mb-6 gap-2\"\r\n-        >\r\n+        <Button variant=\"ghost\" onClick={() => navigate(-1)} className=\"mb-6 gap-2\">\r\n           <ArrowLeft className=\"h-4 w-4\" />\r\n           Back\r\n         </Button>\r\n \r\n         <div className=\"mx-auto max-w-2xl\">\r\n           <div className=\"mb-8 text-center\">\r\n             <h1 className=\"text-4xl font-bold\">Sell Your Car</h1>\r\n-            <p className=\"mt-2 text-muted-foreground\">\r\n-              Step {step} of 3\r\n-            </p>\r\n+            <p className=\"mt-2 text-muted-foreground\">Step {step} of 3</p>\r\n           </div>\r\n \r\n-          {/* Progress Bar */}\r\n           <div className=\"mb-8 flex gap-2\">\r\n             {[1, 2, 3].map((s) => (\r\n               <div\r\n                 key={s}\r\n-                className={`h-2 flex-1 rounded-full transition-smooth ${\r\n+                className={`h-2 flex-1 rounded-full ${\r\n                   s <= step ? \"bg-primary\" : \"bg-muted\"\r\n                 }`}\r\n               />\r\n             ))}\r\n           </div>\r\n \r\n           <Card className=\"shadow-card\">\r\n+            {/* Step 1 */}\r\n             {step === 1 && (\r\n               <>\r\n                 <CardHeader>\r\n                   <CardTitle>Car Details</CardTitle>\r\n-                  <CardDescription>\r\n-                    Tell us about your car\r\n-                  </CardDescription>\r\n+                  <CardDescription>Tell us about your car</CardDescription>\r\n                 </CardHeader>\r\n                 <CardContent className=\"space-y-4\">\r\n                   <div className=\"grid gap-4 md:grid-cols-2\">\r\n                     <div className=\"space-y-2\">\r\n                       <Label htmlFor=\"brand\">Brand *</Label>\r\n                       <Input\r\n                         id=\"brand\"\r\n-                        placeholder=\"e.g., Toyota\"\r\n                         value={formData.brand}\r\n                         onChange={(e) => handleInputChange(\"brand\", e.target.value)}\r\n+                        placeholder=\"e.g., Toyota\"\r\n                       />\r\n                     </div>\r\n                     <div className=\"space-y-2\">\r\n                       <Label htmlFor=\"model\">Model *</Label>\r\n                       <Input\r\n                         id=\"model\"\r\n-                        placeholder=\"e.g., Camry\"\r\n                         value={formData.model}\r\n                         onChange={(e) => handleInputChange(\"model\", e.target.value)}\r\n+                        placeholder=\"e.g., Camry\"\r\n                       />\r\n                     </div>\r\n                   </div>\r\n \r\n@@ -206,11 +237,11 @@\n                       <Label htmlFor=\"year\">Year *</Label>\r\n                       <Input\r\n                         id=\"year\"\r\n                         type=\"number\"\r\n-                        placeholder=\"2020\"\r\n                         value={formData.year}\r\n                         onChange={(e) => handleInputChange(\"year\", e.target.value)}\r\n+                        placeholder=\"2020\"\r\n                       />\r\n                     </div>\r\n                     <div className=\"space-y-2\">\r\n                       <Label htmlFor=\"condition\">Condition *</Label>\r\n@@ -229,31 +260,29 @@\n                       </Select>\r\n                     </div>\r\n                   </div>\r\n \r\n-                  <Button variant=\"default\" onClick={handleNext} className=\"w-full\">\r\n+                  <Button onClick={handleNext} className=\"w-full\">\r\n                     Continue\r\n                   </Button>\r\n                 </CardContent>\r\n               </>\r\n             )}\r\n \r\n+            {/* Step 2 */}\r\n             {step === 2 && (\r\n               <>\r\n                 <CardHeader>\r\n                   <CardTitle>Pricing & Location</CardTitle>\r\n-                  <CardDescription>\r\n-                    Set your price and location\r\n-                  </CardDescription>\r\n+                  <CardDescription>Set your price and location</CardDescription>\r\n                 </CardHeader>\r\n                 <CardContent className=\"space-y-4\">\r\n                   <div className=\"grid gap-4 md:grid-cols-2\">\r\n                     <div className=\"space-y-2\">\r\n                       <Label htmlFor=\"price\">Price ($) *</Label>\r\n                       <Input\r\n                         id=\"price\"\r\n                         type=\"number\"\r\n-                        placeholder=\"25000\"\r\n                         value={formData.price}\r\n                         onChange={(e) => handleInputChange(\"price\", e.target.value)}\r\n                       />\r\n                     </div>\r\n@@ -261,9 +290,8 @@\n                       <Label htmlFor=\"mileage\">Mileage (miles) *</Label>\r\n                       <Input\r\n                         id=\"mileage\"\r\n                         type=\"number\"\r\n-                        placeholder=\"50000\"\r\n                         value={formData.mileage}\r\n                         onChange={(e) => handleInputChange(\"mileage\", e.target.value)}\r\n                       />\r\n                     </div>\r\n@@ -271,14 +299,14 @@\n \r\n                   <div className=\"space-y-3\">\r\n                     <Label className=\"flex items-center gap-2\">\r\n                       <MapPin className=\"h-4 w-4 text-primary\" />\r\n-                      Pick Location on Map *\r\n+                      Pick Location *\r\n                     </Label>\r\n                     <MapPicker\r\n-                      onLocationSelect={handleLocationSelect}\r\n                       initialLat={formData.latitude || 37.7749}\r\n                       initialLng={formData.longitude || -122.4194}\r\n+                      onLocationSelect={handleLocationSelect}\r\n                     />\r\n                     {formData.location && (\r\n                       <p className=\"text-sm text-muted-foreground\">\r\n                         Selected: {formData.location}\r\n@@ -289,33 +317,33 @@\n                   <div className=\"flex gap-2\">\r\n                     <Button variant=\"outline\" onClick={() => setStep(1)} className=\"w-full\">\r\n                       Back\r\n                     </Button>\r\n-                    <Button variant=\"default\" onClick={handleNext} className=\"w-full\">\r\n+                    <Button onClick={handleNext} className=\"w-full\">\r\n                       Continue\r\n                     </Button>\r\n                   </div>\r\n                 </CardContent>\r\n               </>\r\n             )}\r\n \r\n+            {/* Step 3 */}\r\n             {step === 3 && (\r\n               <>\r\n                 <CardHeader>\r\n                   <CardTitle>Description & Platforms</CardTitle>\r\n-                  <CardDescription>\r\n-                    Add details and choose where to list\r\n-                  </CardDescription>\r\n+                  <CardDescription>Add details and where to list</CardDescription>\r\n                 </CardHeader>\r\n+\r\n                 <CardContent className=\"space-y-6\">\r\n                   <div className=\"space-y-2\">\r\n                     <Label htmlFor=\"description\">Description *</Label>\r\n                     <Textarea\r\n                       id=\"description\"\r\n-                      placeholder=\"Describe your car's features, condition, and history...\"\r\n                       rows={4}\r\n                       value={formData.description}\r\n                       onChange={(e) => handleInputChange(\"description\", e.target.value)}\r\n+                      placeholder=\"Describe your car...\"\r\n                     />\r\n                   </div>\r\n \r\n                   <div className=\"space-y-3\">\r\n@@ -327,81 +355,71 @@\n                             id={platform.id}\r\n                             checked={formData.platforms.includes(platform.id)}\r\n                             onCheckedChange={() => handlePlatformToggle(platform.id)}\r\n                           />\r\n-                          <label\r\n-                            htmlFor={platform.id}\r\n-                            className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n-                          >\r\n+                          <label htmlFor={platform.id} className=\"text-sm font-medium\">\r\n                             {platform.name}\r\n                           </label>\r\n                         </div>\r\n                       ))}\r\n                     </div>\r\n                     <p className=\"text-xs text-muted-foreground\">\r\n-                      Select at least one platform to list your car\r\n+                      Select at least one platform\r\n                     </p>\r\n                   </div>\r\n \r\n                   <div className=\"space-y-3\">\r\n                     <Label>Upload Images</Label>\r\n-                    <div className=\"space-y-3\">\r\n-                      <label\r\n-                        htmlFor=\"image-upload\"\r\n-                        className=\"flex cursor-pointer items-center justify-center rounded-lg border-2 border-dashed p-8 text-center transition-smooth hover:border-primary hover:bg-primary/5\"\r\n-                      >\r\n-                        <div>\r\n-                          <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n-                          <p className=\"text-sm font-medium text-muted-foreground\">\r\n-                            Click to upload car images\r\n-                          </p>\r\n-                          <p className=\"text-xs text-muted-foreground mt-1\">\r\n-                            Upload up to 10 images (JPG, PNG)\r\n-                          </p>\r\n-                        </div>\r\n-                      </label>\r\n-                      <input\r\n-                        id=\"image-upload\"\r\n-                        type=\"file\"\r\n-                        accept=\"image/*\"\r\n-                        multiple\r\n-                        className=\"hidden\"\r\n-                        onChange={handleImageUpload}\r\n-                      />\r\n \r\n-                      {selectedImages.length > 0 && (\r\n-                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n-                          {selectedImages.map((img, index) => (\r\n-                            <div key={index} className=\"relative group animate-scale-in\">\r\n-                              <img\r\n-                                src={img}\r\n-                                alt={`Preview ${index + 1}`}\r\n-                                className=\"h-24 w-full rounded-lg object-cover\"\r\n-                              />\r\n-                              <button\r\n-                                type=\"button\"\r\n-                                onClick={() => removeImage(index)}\r\n-                                className=\"absolute -right-2 -top-2 flex h-6 w-6 items-center justify-center rounded-full bg-destructive text-white opacity-0 group-hover:opacity-100 transition-smooth\"\r\n-                              >\r\n-                                <X className=\"h-4 w-4\" />\r\n-                              </button>\r\n-                            </div>\r\n-                          ))}\r\n-                        </div>\r\n-                      )}\r\n-                    </div>\r\n+                    <label\r\n+                      htmlFor=\"image-upload\"\r\n+                      className=\"flex cursor-pointer items-center justify-center rounded-lg border-2 border-dashed p-8 text-center hover:border-primary hover:bg-primary/5\"\r\n+                    >\r\n+                      <div>\r\n+                        <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n+                        <p className=\"text-sm\">Click to upload car images</p>\r\n+                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n+                          Upload up to 10 images\r\n+                        </p>\r\n+                      </div>\r\n+                    </label>\r\n+\r\n+                    <input\r\n+                      id=\"image-upload\"\r\n+                      type=\"file\"\r\n+                      accept=\"image/*\"\r\n+                      multiple\r\n+                      className=\"hidden\"\r\n+                      onChange={handleImageUpload}\r\n+                    />\r\n+\r\n+                    {selectedImages.length > 0 && (\r\n+                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n+                        {selectedImages.map((img, index) => (\r\n+                          <div key={index} className=\"relative group\">\r\n+                            <img\r\n+                              src={img}\r\n+                              alt={`Preview ${index + 1}`}\r\n+                              className=\"h-24 w-full rounded-lg object-cover\"\r\n+                            />\r\n+                            <button\r\n+                              type=\"button\"\r\n+                              onClick={() => removeImage(index)}\r\n+                              className=\"absolute -top-2 -right-2 h-6 w-6 flex items-center justify-center bg-destructive text-white rounded-full opacity-0 group-hover:opacity-100\"\r\n+                            >\r\n+                              <X className=\"h-4 w-4\" />\r\n+                            </button>\r\n+                          </div>\r\n+                        ))}\r\n+                      </div>\r\n+                    )}\r\n                   </div>\r\n \r\n                   <div className=\"flex gap-2\">\r\n                     <Button variant=\"outline\" onClick={() => setStep(2)} className=\"w-full\">\r\n                       Back\r\n                     </Button>\r\n-                    <Button\r\n-                      variant=\"default\"\r\n-                      onClick={handleSubmit}\r\n-                      className=\"w-full\"\r\n-                      disabled={isSubmitting}\r\n-                    >\r\n+                    <Button onClick={handleSubmit} disabled={isSubmitting} className=\"w-full\">\r\n                       {isSubmitting ? \"Listing...\" : \"List Car\"}\r\n                     </Button>\r\n                   </div>\r\n                 </CardContent>\r\n"
                },
                {
                    "date": 1763630885174,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,436 @@\n+// src/pages/SellCar.tsx\r\n+import { useState, useEffect } from \"react\";\r\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useAuth } from \"@/contexts/AuthContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Input } from \"@/components/ui/input\";\r\n+import { Label } from \"@/components/ui/label\";\r\n+import { Textarea } from \"@/components/ui/textarea\";\r\n+import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\n+import { Checkbox } from \"@/components/ui/checkbox\";\r\n+import MapPicker from \"@/components/MapPicker\";\r\n+import { toast } from \"@/hooks/use-toast\";\r\n+import { ArrowLeft, Upload, MapPin, X } from \"lucide-react\";\r\n+import { createCar } from \"@/api/cars\";\r\n+\r\n+const platforms = [\r\n+  { id: \"edmunds\", name: \"Edmunds\" },\r\n+  { id: \"olx\", name: \"OLX\" },\r\n+  { id: \"facebook\", name: \"Facebook Marketplace\" },\r\n+  { id: \"autotrader\", name: \"AutoTrader\" },\r\n+  { id: \"cars\", name: \"Cars.com\" },\r\n+];\r\n+\r\n+const SellCar = () => {\r\n+  const { user } = useAuth();\r\n+  const navigate = useNavigate();\r\n+\r\n+  const [step, setStep] = useState(1);\r\n+  const [isSubmitting, setIsSubmitting] = useState(false);\r\n+\r\n+  const [formData, setFormData] = useState({\r\n+    brand: \"\",\r\n+    model: \"\",\r\n+    year: \"\",\r\n+    mileage: \"\",\r\n+    price: \"\",\r\n+    condition: \"\",\r\n+    description: \"\",\r\n+    location: \"\",\r\n+    latitude: 0,\r\n+    longitude: 0,\r\n+    platforms: [] as string[],\r\n+  });\r\n+\r\n+  const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n+  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\r\n+\r\n+  useEffect(() => {\r\n+    if (!user) {\r\n+      navigate(\"/auth?mode=login\");\r\n+    }\r\n+  }, [user, navigate]);\r\n+\r\n+  if (!user) return null;\r\n+\r\n+  const handleInputChange = (field: string, value: string) => {\r\n+    setFormData((prev) => ({ ...prev, [field]: value }));\r\n+  };\r\n+\r\n+  const handlePlatformToggle = (platformId: string) => {\r\n+    setFormData((prev) => ({\r\n+      ...prev,\r\n+      platforms: prev.platforms.includes(platformId)\r\n+        ? prev.platforms.filter((p) => p !== platformId)\r\n+        : [...prev.platforms, platformId],\r\n+    }));\r\n+  };\r\n+\r\n+  const handleLocationSelect = (lat: number, lng: number, address: string) => {\r\n+    setFormData((prev) => ({\r\n+      ...prev,\r\n+      latitude: lat,\r\n+      longitude: lng,\r\n+      location: address,\r\n+    }));\r\n+  };\r\n+\r\n+  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n+    const files = e.target.files;\r\n+    if (!files) return;\r\n+\r\n+    const fileArr = Array.from(files);\r\n+    setSelectedFiles((prev) => [...prev, ...fileArr]);\r\n+    const previews = fileArr.map((file) => URL.createObjectURL(file));\r\n+    setSelectedImages((prev) => [...prev, ...previews]);\r\n+\r\n+    toast({\r\n+      title: \"Images added\",\r\n+      description: `${fileArr.length} image(s) ready for upload.`,\r\n+    });\r\n+  };\r\n+\r\n+  const removeImage = (index: number) => {\r\n+    setSelectedImages((prev) => prev.filter((_, i) => i !== index));\r\n+    setSelectedFiles((prev) => prev.filter((_, i) => i !== index));\r\n+  };\r\n+\r\n+  const handleNext = () => {\r\n+    if (step === 1) {\r\n+      if (!formData.brand || !formData.model || !formData.year || !formData.condition) {\r\n+        toast({\r\n+          title: \"Missing information\",\r\n+          description: \"Please fill in all required fields.\",\r\n+          variant: \"destructive\",\r\n+        });\r\n+        return;\r\n+      }\r\n+    }\r\n+    if (step === 2) {\r\n+      if (!formData.price || !formData.mileage || !formData.location) {\r\n+        toast({\r\n+          title: \"Missing information\",\r\n+          description: \"Please fill in all required fields.\",\r\n+          variant: \"destructive\",\r\n+        });\r\n+        return;\r\n+      }\r\n+    }\r\n+    setStep((prev) => prev + 1);\r\n+  };\r\n+\r\n+  const handleSubmit = async () => {\r\n+    if (!formData.description || formData.platforms.length === 0) {\r\n+      toast({\r\n+        title: \"Missing information\",\r\n+        description: \"Please complete all required fields.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+      return;\r\n+    }\r\n+\r\n+    if (selectedFiles.length === 0) {\r\n+      toast({\r\n+        title: \"Missing images\",\r\n+        description: \"Please upload at least one image.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+      return;\r\n+    }\r\n+\r\n+    setIsSubmitting(true);\r\n+\r\n+    try {\r\n+      const fd = new FormData();\r\n+\r\n+      fd.append(\"brand\", formData.brand);\r\n+      fd.append(\"model\", formData.model);\r\n+      fd.append(\"year\", formData.year);\r\n+      fd.append(\"mileage\", formData.mileage);\r\n+      fd.append(\"price\", formData.price);\r\n+      fd.append(\"condition\", formData.condition);\r\n+      fd.append(\"description\", formData.description);\r\n+      fd.append(\"location\", formData.location);\r\n+      fd.append(\"latitude\", String(formData.latitude));\r\n+      fd.append(\"longitude\", String(formData.longitude));\r\n+\r\n+      formData.platforms.forEach((p) => fd.append(\"platforms\", p));\r\n+      selectedFiles.forEach((file) => fd.append(\"images\", file));\r\n+\r\n+      await createCar(fd, user.token);\r\n+\r\n+      toast({\r\n+        title: \"Success!\",\r\n+        description: \"Your car has been listed successfully.\",\r\n+      });\r\n+\r\n+      navigate(\"/profile\");\r\n+    } catch (error) {\r\n+      const errorMessage = error instanceof Error ? error.message : \"Something went wrong.\";\r\n+      toast({\r\n+        title: \"Error\",\r\n+        description: errorMessage,\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+\r\n+    setIsSubmitting(false);\r\n+  };\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <Button variant=\"ghost\" onClick={() => navigate(-1)} className=\"mb-6 gap-2\">\r\n+          <ArrowLeft className=\"h-4 w-4\" />\r\n+          Back\r\n+        </Button>\r\n+\r\n+        <div className=\"mx-auto max-w-2xl\">\r\n+          <div className=\"mb-8 text-center\">\r\n+            <h1 className=\"text-4xl font-bold\">Sell Your Car</h1>\r\n+            <p className=\"mt-2 text-muted-foreground\">Step {step} of 3</p>\r\n+          </div>\r\n+\r\n+          <div className=\"mb-8 flex gap-2\">\r\n+            {[1, 2, 3].map((s) => (\r\n+              <div\r\n+                key={s}\r\n+                className={`h-2 flex-1 rounded-full ${\r\n+                  s <= step ? \"bg-primary\" : \"bg-muted\"\r\n+                }`}\r\n+              />\r\n+            ))}\r\n+          </div>\r\n+\r\n+          <Card className=\"shadow-card\">\r\n+            {/* Step 1 */}\r\n+            {step === 1 && (\r\n+              <>\r\n+                <CardHeader>\r\n+                  <CardTitle>Car Details</CardTitle>\r\n+                  <CardDescription>Tell us about your car</CardDescription>\r\n+                </CardHeader>\r\n+                <CardContent className=\"space-y-4\">\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label htmlFor=\"brand\">Brand *</Label>\r\n+                      <Input\r\n+                        id=\"brand\"\r\n+                        value={formData.brand}\r\n+                        onChange={(e) => handleInputChange(\"brand\", e.target.value)}\r\n+                        placeholder=\"e.g., Toyota\"\r\n+                      />\r\n+                    </div>\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label htmlFor=\"model\">Model *</Label>\r\n+                      <Input\r\n+                        id=\"model\"\r\n+                        value={formData.model}\r\n+                        onChange={(e) => handleInputChange(\"model\", e.target.value)}\r\n+                        placeholder=\"e.g., Camry\"\r\n+                      />\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label htmlFor=\"year\">Year *</Label>\r\n+                      <Input\r\n+                        id=\"year\"\r\n+                        type=\"number\"\r\n+                        value={formData.year}\r\n+                        onChange={(e) => handleInputChange(\"year\", e.target.value)}\r\n+                        placeholder=\"2020\"\r\n+                      />\r\n+                    </div>\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label htmlFor=\"condition\">Condition *</Label>\r\n+                      <Select\r\n+                        value={formData.condition}\r\n+                        onValueChange={(value) => handleInputChange(\"condition\", value)}\r\n+                      >\r\n+                        <SelectTrigger>\r\n+                          <SelectValue placeholder=\"Select condition\" />\r\n+                        </SelectTrigger>\r\n+                        <SelectContent>\r\n+                          <SelectItem value=\"new\">New</SelectItem>\r\n+                          <SelectItem value=\"used\">Used</SelectItem>\r\n+                          <SelectItem value=\"certified\">Certified Pre-Owned</SelectItem>\r\n+                        </SelectContent>\r\n+                      </Select>\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <Button onClick={handleNext} className=\"w-full\">\r\n+                    Continue\r\n+                  </Button>\r\n+                </CardContent>\r\n+              </>\r\n+            )}\r\n+\r\n+            {/* Step 2 */}\r\n+            {step === 2 && (\r\n+              <>\r\n+                <CardHeader>\r\n+                  <CardTitle>Pricing & Location</CardTitle>\r\n+                  <CardDescription>Set your price and location</CardDescription>\r\n+                </CardHeader>\r\n+                <CardContent className=\"space-y-4\">\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label htmlFor=\"price\">Price ($) *</Label>\r\n+                      <Input\r\n+                        id=\"price\"\r\n+                        type=\"number\"\r\n+                        value={formData.price}\r\n+                        onChange={(e) => handleInputChange(\"price\", e.target.value)}\r\n+                      />\r\n+                    </div>\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label htmlFor=\"mileage\">Mileage (miles) *</Label>\r\n+                      <Input\r\n+                        id=\"mileage\"\r\n+                        type=\"number\"\r\n+                        value={formData.mileage}\r\n+                        onChange={(e) => handleInputChange(\"mileage\", e.target.value)}\r\n+                      />\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <div className=\"space-y-3\">\r\n+                    <Label className=\"flex items-center gap-2\">\r\n+                      <MapPin className=\"h-4 w-4 text-primary\" />\r\n+                      Pick Location *\r\n+                    </Label>\r\n+                    <MapPicker\r\n+                      initialLat={formData.latitude || 37.7749}\r\n+                      initialLng={formData.longitude || -122.4194}\r\n+                      onLocationSelect={handleLocationSelect}\r\n+                    />\r\n+                    {formData.location && (\r\n+                      <p className=\"text-sm text-muted-foreground\">\r\n+                        Selected: {formData.location}\r\n+                      </p>\r\n+                    )}\r\n+                  </div>\r\n+\r\n+                  <div className=\"flex gap-2\">\r\n+                    <Button variant=\"outline\" onClick={() => setStep(1)} className=\"w-full\">\r\n+                      Back\r\n+                    </Button>\r\n+                    <Button onClick={handleNext} className=\"w-full\">\r\n+                      Continue\r\n+                    </Button>\r\n+                  </div>\r\n+                </CardContent>\r\n+              </>\r\n+            )}\r\n+\r\n+            {/* Step 3 */}\r\n+            {step === 3 && (\r\n+              <>\r\n+                <CardHeader>\r\n+                  <CardTitle>Description & Platforms</CardTitle>\r\n+                  <CardDescription>Add details and where to list</CardDescription>\r\n+                </CardHeader>\r\n+\r\n+                <CardContent className=\"space-y-6\">\r\n+                  <div className=\"space-y-2\">\r\n+                    <Label htmlFor=\"description\">Description *</Label>\r\n+                    <Textarea\r\n+                      id=\"description\"\r\n+                      rows={4}\r\n+                      value={formData.description}\r\n+                      onChange={(e) => handleInputChange(\"description\", e.target.value)}\r\n+                      placeholder=\"Describe your car...\"\r\n+                    />\r\n+                  </div>\r\n+\r\n+                  <div className=\"space-y-3\">\r\n+                    <Label>List on Platforms *</Label>\r\n+                    <div className=\"space-y-3 rounded-lg border p-4\">\r\n+                      {platforms.map((platform) => (\r\n+                        <div key={platform.id} className=\"flex items-center space-x-2\">\r\n+                          <Checkbox\r\n+                            id={platform.id}\r\n+                            checked={formData.platforms.includes(platform.id)}\r\n+                            onCheckedChange={() => handlePlatformToggle(platform.id)}\r\n+                          />\r\n+                          <label htmlFor={platform.id} className=\"text-sm font-medium\">\r\n+                            {platform.name}\r\n+                          </label>\r\n+                        </div>\r\n+                      ))}\r\n+                    </div>\r\n+                    <p className=\"text-xs text-muted-foreground\">\r\n+                      Select at least one platform\r\n+                    </p>\r\n+                  </div>\r\n+\r\n+                  <div className=\"space-y-3\">\r\n+                    <Label>Upload Images</Label>\r\n+\r\n+                    <label\r\n+                      htmlFor=\"image-upload\"\r\n+                      className=\"flex cursor-pointer items-center justify-center rounded-lg border-2 border-dashed p-8 text-center hover:border-primary hover:bg-primary/5\"\r\n+                    >\r\n+                      <div>\r\n+                        <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n+                        <p className=\"text-sm\">Click to upload car images</p>\r\n+                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n+                          Upload up to 10 images\r\n+                        </p>\r\n+                      </div>\r\n+                    </label>\r\n+\r\n+                    <input\r\n+                      id=\"image-upload\"\r\n+                      type=\"file\"\r\n+                      accept=\"image/*\"\r\n+                      multiple\r\n+                      className=\"hidden\"\r\n+                      onChange={handleImageUpload}\r\n+                    />\r\n+\r\n+                    {selectedImages.length > 0 && (\r\n+                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n+                        {selectedImages.map((img, index) => (\r\n+                          <div key={index} className=\"relative group\">\r\n+                            <img\r\n+                              src={img}\r\n+                              alt={`Preview ${index + 1}`}\r\n+                              className=\"h-24 w-full rounded-lg object-cover\"\r\n+                            />\r\n+                            <button\r\n+                              type=\"button\"\r\n+                              onClick={() => removeImage(index)}\r\n+                              className=\"absolute -top-2 -right-2 h-6 w-6 flex items-center justify-center bg-destructive text-white rounded-full opacity-0 group-hover:opacity-100\"\r\n+                            >\r\n+                              <X className=\"h-4 w-4\" />\r\n+                            </button>\r\n+                          </div>\r\n+                        ))}\r\n+                      </div>\r\n+                    )}\r\n+                  </div>\r\n+\r\n+                  <div className=\"flex gap-2\">\r\n+                    <Button variant=\"outline\" onClick={() => setStep(2)} className=\"w-full\">\r\n+                      Back\r\n+                    </Button>\r\n+                    <Button onClick={handleSubmit} disabled={isSubmitting} className=\"w-full\">\r\n+                      {isSubmitting ? \"Listing...\" : \"List Car\"}\r\n+                    </Button>\r\n+                  </div>\r\n+                </CardContent>\r\n+              </>\r\n+            )}\r\n+          </Card>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default SellCar;\r\n"
                },
                {
                    "date": 1763630982002,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n import { Textarea } from \"@/components/ui/textarea\";\r\n import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\n import { Checkbox } from \"@/components/ui/checkbox\";\r\n-import MapPicker from \"@/components/MapPicker\";\r\n+// import MapPicker from \"@/components/MapPicker\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n import { ArrowLeft, Upload, MapPin, X } from \"lucide-react\";\r\n import { createCar } from \"@/api/cars\";\r\n \r\n"
                },
                {
                    "date": 1763631103076,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -433,439 +433,4 @@\n   );\r\n };\r\n \r\n export default SellCar;\r\n-// src/pages/SellCar.tsx\r\n-import { useState, useEffect } from \"react\";\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useAuth } from \"@/contexts/AuthContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Input } from \"@/components/ui/input\";\r\n-import { Label } from \"@/components/ui/label\";\r\n-import { Textarea } from \"@/components/ui/textarea\";\r\n-import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\n-import { Checkbox } from \"@/components/ui/checkbox\";\r\n-import MapPicker from \"@/components/MapPicker\";\r\n-import { toast } from \"@/hooks/use-toast\";\r\n-import { ArrowLeft, Upload, MapPin, X } from \"lucide-react\";\r\n-import { createCar } from \"@/api/cars\";\r\n-\r\n-const platforms = [\r\n-  { id: \"edmunds\", name: \"Edmunds\" },\r\n-  { id: \"olx\", name: \"OLX\" },\r\n-  { id: \"facebook\", name: \"Facebook Marketplace\" },\r\n-  { id: \"autotrader\", name: \"AutoTrader\" },\r\n-  { id: \"cars\", name: \"Cars.com\" },\r\n-];\r\n-\r\n-const SellCar = () => {\r\n-  const { user } = useAuth();\r\n-  const navigate = useNavigate();\r\n-\r\n-  const [step, setStep] = useState(1);\r\n-  const [isSubmitting, setIsSubmitting] = useState(false);\r\n-\r\n-  const [formData, setFormData] = useState({\r\n-    brand: \"\",\r\n-    model: \"\",\r\n-    year: \"\",\r\n-    mileage: \"\",\r\n-    price: \"\",\r\n-    condition: \"\",\r\n-    description: \"\",\r\n-    location: \"\",\r\n-    latitude: 0,\r\n-    longitude: 0,\r\n-    platforms: [] as string[],\r\n-  });\r\n-\r\n-  const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n-  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\r\n-\r\n-  useEffect(() => {\r\n-    if (!user) {\r\n-      navigate(\"/auth?mode=login\");\r\n-    }\r\n-  }, [user, navigate]);\r\n-\r\n-  if (!user) return null;\r\n-\r\n-  const handleInputChange = (field: string, value: string) => {\r\n-    setFormData((prev) => ({ ...prev, [field]: value }));\r\n-  };\r\n-\r\n-  const handlePlatformToggle = (platformId: string) => {\r\n-    setFormData((prev) => ({\r\n-      ...prev,\r\n-      platforms: prev.platforms.includes(platformId)\r\n-        ? prev.platforms.filter((p) => p !== platformId)\r\n-        : [...prev.platforms, platformId],\r\n-    }));\r\n-  };\r\n-\r\n-  const handleLocationSelect = (lat: number, lng: number, address: string) => {\r\n-    setFormData((prev) => ({\r\n-      ...prev,\r\n-      latitude: lat,\r\n-      longitude: lng,\r\n-      location: address,\r\n-    }));\r\n-  };\r\n-\r\n-  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n-    const files = e.target.files;\r\n-    if (!files) return;\r\n-\r\n-    const fileArr = Array.from(files);\r\n-    setSelectedFiles((prev) => [...prev, ...fileArr]);\r\n-    const previews = fileArr.map((file) => URL.createObjectURL(file));\r\n-    setSelectedImages((prev) => [...prev, ...previews]);\r\n-\r\n-    toast({\r\n-      title: \"Images added\",\r\n-      description: `${fileArr.length} image(s) ready for upload.`,\r\n-    });\r\n-  };\r\n-\r\n-  const removeImage = (index: number) => {\r\n-    setSelectedImages((prev) => prev.filter((_, i) => i !== index));\r\n-    setSelectedFiles((prev) => prev.filter((_, i) => i !== index));\r\n-  };\r\n-\r\n-  const handleNext = () => {\r\n-    if (step === 1) {\r\n-      if (!formData.brand || !formData.model || !formData.year || !formData.condition) {\r\n-        toast({\r\n-          title: \"Missing information\",\r\n-          description: \"Please fill in all required fields.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-        return;\r\n-      }\r\n-    }\r\n-    if (step === 2) {\r\n-      if (!formData.price || !formData.mileage || !formData.location) {\r\n-        toast({\r\n-          title: \"Missing information\",\r\n-          description: \"Please fill in all required fields.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-        return;\r\n-      }\r\n-    }\r\n-    setStep((prev) => prev + 1);\r\n-  };\r\n-\r\n-  const handleSubmit = async () => {\r\n-    if (!formData.description || formData.platforms.length === 0) {\r\n-      toast({\r\n-        title: \"Missing information\",\r\n-        description: \"Please complete all required fields.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-      return;\r\n-    }\r\n-\r\n-    if (selectedFiles.length === 0) {\r\n-      toast({\r\n-        title: \"Missing images\",\r\n-        description: \"Please upload at least one image.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-      return;\r\n-    }\r\n-\r\n-    setIsSubmitting(true);\r\n-\r\n-    try {\r\n-      const fd = new FormData();\r\n-\r\n-      fd.append(\"brand\", formData.brand);\r\n-      fd.append(\"model\", formData.model);\r\n-      fd.append(\"year\", formData.year);\r\n-      fd.append(\"mileage\", formData.mileage);\r\n-      fd.append(\"price\", formData.price);\r\n-      fd.append(\"condition\", formData.condition);\r\n-      fd.append(\"description\", formData.description);\r\n-      fd.append(\"location\", formData.location);\r\n-      fd.append(\"latitude\", String(formData.latitude));\r\n-      fd.append(\"longitude\", String(formData.longitude));\r\n-\r\n-      formData.platforms.forEach((p) => fd.append(\"platforms\", p));\r\n-      selectedFiles.forEach((file) => fd.append(\"images\", file));\r\n-\r\n-      await createCar(fd, user.token);\r\n-\r\n-      toast({\r\n-        title: \"Success!\",\r\n-        description: \"Your car has been listed successfully.\",\r\n-      });\r\n-\r\n-      navigate(\"/profile\");\r\n-    } catch (error: any) {\r\n-      toast({\r\n-        title: \"Error\",\r\n-        description: error.response?.data?.message || \"Something went wrong.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-\r\n-    setIsSubmitting(false);\r\n-  };\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <Button variant=\"ghost\" onClick={() => navigate(-1)} className=\"mb-6 gap-2\">\r\n-          <ArrowLeft className=\"h-4 w-4\" />\r\n-          Back\r\n-        </Button>\r\n-\r\n-        <div className=\"mx-auto max-w-2xl\">\r\n-          <div className=\"mb-8 text-center\">\r\n-            <h1 className=\"text-4xl font-bold\">Sell Your Car</h1>\r\n-            <p className=\"mt-2 text-muted-foreground\">Step {step} of 3</p>\r\n-          </div>\r\n-\r\n-          <div className=\"mb-8 flex gap-2\">\r\n-            {[1, 2, 3].map((s) => (\r\n-              <div\r\n-                key={s}\r\n-                className={`h-2 flex-1 rounded-full ${\r\n-                  s <= step ? \"bg-primary\" : \"bg-muted\"\r\n-                }`}\r\n-              />\r\n-            ))}\r\n-          </div>\r\n-\r\n-          <Card className=\"shadow-card\">\r\n-            {/* Step 1 */}\r\n-            {step === 1 && (\r\n-              <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Car Details</CardTitle>\r\n-                  <CardDescription>Tell us about your car</CardDescription>\r\n-                </CardHeader>\r\n-                <CardContent className=\"space-y-4\">\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"brand\">Brand *</Label>\r\n-                      <Input\r\n-                        id=\"brand\"\r\n-                        value={formData.brand}\r\n-                        onChange={(e) => handleInputChange(\"brand\", e.target.value)}\r\n-                        placeholder=\"e.g., Toyota\"\r\n-                      />\r\n-                    </div>\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"model\">Model *</Label>\r\n-                      <Input\r\n-                        id=\"model\"\r\n-                        value={formData.model}\r\n-                        onChange={(e) => handleInputChange(\"model\", e.target.value)}\r\n-                        placeholder=\"e.g., Camry\"\r\n-                      />\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"year\">Year *</Label>\r\n-                      <Input\r\n-                        id=\"year\"\r\n-                        type=\"number\"\r\n-                        value={formData.year}\r\n-                        onChange={(e) => handleInputChange(\"year\", e.target.value)}\r\n-                        placeholder=\"2020\"\r\n-                      />\r\n-                    </div>\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"condition\">Condition *</Label>\r\n-                      <Select\r\n-                        value={formData.condition}\r\n-                        onValueChange={(value) => handleInputChange(\"condition\", value)}\r\n-                      >\r\n-                        <SelectTrigger>\r\n-                          <SelectValue placeholder=\"Select condition\" />\r\n-                        </SelectTrigger>\r\n-                        <SelectContent>\r\n-                          <SelectItem value=\"new\">New</SelectItem>\r\n-                          <SelectItem value=\"used\">Used</SelectItem>\r\n-                          <SelectItem value=\"certified\">Certified Pre-Owned</SelectItem>\r\n-                        </SelectContent>\r\n-                      </Select>\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <Button onClick={handleNext} className=\"w-full\">\r\n-                    Continue\r\n-                  </Button>\r\n-                </CardContent>\r\n-              </>\r\n-            )}\r\n-\r\n-            {/* Step 2 */}\r\n-            {step === 2 && (\r\n-              <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Pricing & Location</CardTitle>\r\n-                  <CardDescription>Set your price and location</CardDescription>\r\n-                </CardHeader>\r\n-                <CardContent className=\"space-y-4\">\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"price\">Price ($) *</Label>\r\n-                      <Input\r\n-                        id=\"price\"\r\n-                        type=\"number\"\r\n-                        value={formData.price}\r\n-                        onChange={(e) => handleInputChange(\"price\", e.target.value)}\r\n-                      />\r\n-                    </div>\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"mileage\">Mileage (miles) *</Label>\r\n-                      <Input\r\n-                        id=\"mileage\"\r\n-                        type=\"number\"\r\n-                        value={formData.mileage}\r\n-                        onChange={(e) => handleInputChange(\"mileage\", e.target.value)}\r\n-                      />\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <div className=\"space-y-3\">\r\n-                    <Label className=\"flex items-center gap-2\">\r\n-                      <MapPin className=\"h-4 w-4 text-primary\" />\r\n-                      Pick Location *\r\n-                    </Label>\r\n-                    <MapPicker\r\n-                      initialLat={formData.latitude || 37.7749}\r\n-                      initialLng={formData.longitude || -122.4194}\r\n-                      onLocationSelect={handleLocationSelect}\r\n-                    />\r\n-                    {formData.location && (\r\n-                      <p className=\"text-sm text-muted-foreground\">\r\n-                        Selected: {formData.location}\r\n-                      </p>\r\n-                    )}\r\n-                  </div>\r\n-\r\n-                  <div className=\"flex gap-2\">\r\n-                    <Button variant=\"outline\" onClick={() => setStep(1)} className=\"w-full\">\r\n-                      Back\r\n-                    </Button>\r\n-                    <Button onClick={handleNext} className=\"w-full\">\r\n-                      Continue\r\n-                    </Button>\r\n-                  </div>\r\n-                </CardContent>\r\n-              </>\r\n-            )}\r\n-\r\n-            {/* Step 3 */}\r\n-            {step === 3 && (\r\n-              <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Description & Platforms</CardTitle>\r\n-                  <CardDescription>Add details and where to list</CardDescription>\r\n-                </CardHeader>\r\n-\r\n-                <CardContent className=\"space-y-6\">\r\n-                  <div className=\"space-y-2\">\r\n-                    <Label htmlFor=\"description\">Description *</Label>\r\n-                    <Textarea\r\n-                      id=\"description\"\r\n-                      rows={4}\r\n-                      value={formData.description}\r\n-                      onChange={(e) => handleInputChange(\"description\", e.target.value)}\r\n-                      placeholder=\"Describe your car...\"\r\n-                    />\r\n-                  </div>\r\n-\r\n-                  <div className=\"space-y-3\">\r\n-                    <Label>List on Platforms *</Label>\r\n-                    <div className=\"space-y-3 rounded-lg border p-4\">\r\n-                      {platforms.map((platform) => (\r\n-                        <div key={platform.id} className=\"flex items-center space-x-2\">\r\n-                          <Checkbox\r\n-                            id={platform.id}\r\n-                            checked={formData.platforms.includes(platform.id)}\r\n-                            onCheckedChange={() => handlePlatformToggle(platform.id)}\r\n-                          />\r\n-                          <label htmlFor={platform.id} className=\"text-sm font-medium\">\r\n-                            {platform.name}\r\n-                          </label>\r\n-                        </div>\r\n-                      ))}\r\n-                    </div>\r\n-                    <p className=\"text-xs text-muted-foreground\">\r\n-                      Select at least one platform\r\n-                    </p>\r\n-                  </div>\r\n-\r\n-                  <div className=\"space-y-3\">\r\n-                    <Label>Upload Images</Label>\r\n-\r\n-                    <label\r\n-                      htmlFor=\"image-upload\"\r\n-                      className=\"flex cursor-pointer items-center justify-center rounded-lg border-2 border-dashed p-8 text-center hover:border-primary hover:bg-primary/5\"\r\n-                    >\r\n-                      <div>\r\n-                        <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n-                        <p className=\"text-sm\">Click to upload car images</p>\r\n-                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n-                          Upload up to 10 images\r\n-                        </p>\r\n-                      </div>\r\n-                    </label>\r\n-\r\n-                    <input\r\n-                      id=\"image-upload\"\r\n-                      type=\"file\"\r\n-                      accept=\"image/*\"\r\n-                      multiple\r\n-                      className=\"hidden\"\r\n-                      onChange={handleImageUpload}\r\n-                    />\r\n-\r\n-                    {selectedImages.length > 0 && (\r\n-                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n-                        {selectedImages.map((img, index) => (\r\n-                          <div key={index} className=\"relative group\">\r\n-                            <img\r\n-                              src={img}\r\n-                              alt={`Preview ${index + 1}`}\r\n-                              className=\"h-24 w-full rounded-lg object-cover\"\r\n-                            />\r\n-                            <button\r\n-                              type=\"button\"\r\n-                              onClick={() => removeImage(index)}\r\n-                              className=\"absolute -top-2 -right-2 h-6 w-6 flex items-center justify-center bg-destructive text-white rounded-full opacity-0 group-hover:opacity-100\"\r\n-                            >\r\n-                              <X className=\"h-4 w-4\" />\r\n-                            </button>\r\n-                          </div>\r\n-                        ))}\r\n-                      </div>\r\n-                    )}\r\n-                  </div>\r\n-\r\n-                  <div className=\"flex gap-2\">\r\n-                    <Button variant=\"outline\" onClick={() => setStep(2)} className=\"w-full\">\r\n-                      Back\r\n-                    </Button>\r\n-                    <Button onClick={handleSubmit} disabled={isSubmitting} className=\"w-full\">\r\n-                      {isSubmitting ? \"Listing...\" : \"List Car\"}\r\n-                    </Button>\r\n-                  </div>\r\n-                </CardContent>\r\n-              </>\r\n-            )}\r\n-          </Card>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default SellCar;\r\n"
                },
                {
                    "date": 1763631794240,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -302,13 +302,13 @@\n                     <Label className=\"flex items-center gap-2\">\r\n                       <MapPin className=\"h-4 w-4 text-primary\" />\r\n                       Pick Location *\r\n                     </Label>\r\n-                    <MapPicker\r\n+                    {/* <MapPicker\r\n                       initialLat={formData.latitude || 37.7749}\r\n                       initialLng={formData.longitude || -122.4194}\r\n                       onLocationSelect={handleLocationSelect}\r\n-                    />\r\n+                    /> */}\r\n                     {formData.location && (\r\n                       <p className=\"text-sm text-muted-foreground\">\r\n                         Selected: {formData.location}\r\n                       </p>\r\n"
                },
                {
                    "date": 1763632787431,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,11 +8,10 @@\n import { Textarea } from \"@/components/ui/textarea\";\r\n import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\n import { Checkbox } from \"@/components/ui/checkbox\";\r\n-// import MapPicker from \"@/components/MapPicker\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n-import { ArrowLeft, Upload, MapPin, X } from \"lucide-react\";\r\n+import { ArrowLeft, Upload, X } from \"lucide-react\";\r\n import { createCar } from \"@/api/cars\";\r\n \r\n const platforms = [\r\n   { id: \"edmunds\", name: \"Edmunds\" },\r\n@@ -36,21 +35,16 @@\n     mileage: \"\",\r\n     price: \"\",\r\n     condition: \"\",\r\n     description: \"\",\r\n-    location: \"\",\r\n-    latitude: 0,\r\n-    longitude: 0,\r\n     platforms: [] as string[],\r\n   });\r\n \r\n   const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n   const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\r\n \r\n   useEffect(() => {\r\n-    if (!user) {\r\n-      navigate(\"/auth?mode=login\");\r\n-    }\r\n+    if (!user) navigate(\"/auth?mode=login\");\r\n   }, [user, navigate]);\r\n \r\n   if (!user) return null;\r\n \r\n@@ -66,29 +60,21 @@\n         : [...prev.platforms, platformId],\r\n     }));\r\n   };\r\n \r\n-  const handleLocationSelect = (lat: number, lng: number, address: string) => {\r\n-    setFormData((prev) => ({\r\n-      ...prev,\r\n-      latitude: lat,\r\n-      longitude: lng,\r\n-      location: address,\r\n-    }));\r\n-  };\r\n-\r\n   const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n     const files = e.target.files;\r\n     if (!files) return;\r\n \r\n-    const fileArr = Array.from(files);\r\n-    setSelectedFiles((prev) => [...prev, ...fileArr]);\r\n-    const previews = fileArr.map((file) => URL.createObjectURL(file));\r\n+    const newFiles = Array.from(files);\r\n+    setSelectedFiles((prev) => [...prev, ...newFiles]);\r\n+\r\n+    const previews = newFiles.map((file) => URL.createObjectURL(file));\r\n     setSelectedImages((prev) => [...prev, ...previews]);\r\n \r\n     toast({\r\n       title: \"Images added\",\r\n-      description: `${fileArr.length} image(s) ready for upload.`,\r\n+      description: `${newFiles.length} image(s) ready for upload.`,\r\n     });\r\n   };\r\n \r\n   const removeImage = (index: number) => {\r\n@@ -98,46 +84,44 @@\n \r\n   const handleNext = () => {\r\n     if (step === 1) {\r\n       if (!formData.brand || !formData.model || !formData.year || !formData.condition) {\r\n-        toast({\r\n+        return toast({\r\n           title: \"Missing information\",\r\n           description: \"Please fill in all required fields.\",\r\n           variant: \"destructive\",\r\n         });\r\n-        return;\r\n       }\r\n     }\r\n+\r\n     if (step === 2) {\r\n-      if (!formData.price || !formData.mileage || !formData.location) {\r\n-        toast({\r\n+      if (!formData.price || !formData.mileage) {\r\n+        return toast({\r\n           title: \"Missing information\",\r\n           description: \"Please fill in all required fields.\",\r\n           variant: \"destructive\",\r\n         });\r\n-        return;\r\n       }\r\n     }\r\n+\r\n     setStep((prev) => prev + 1);\r\n   };\r\n \r\n   const handleSubmit = async () => {\r\n     if (!formData.description || formData.platforms.length === 0) {\r\n-      toast({\r\n+      return toast({\r\n         title: \"Missing information\",\r\n         description: \"Please complete all required fields.\",\r\n         variant: \"destructive\",\r\n       });\r\n-      return;\r\n     }\r\n \r\n     if (selectedFiles.length === 0) {\r\n-      toast({\r\n+      return toast({\r\n         title: \"Missing images\",\r\n         description: \"Please upload at least one image.\",\r\n         variant: \"destructive\",\r\n       });\r\n-      return;\r\n     }\r\n \r\n     setIsSubmitting(true);\r\n \r\n@@ -150,11 +134,8 @@\n       fd.append(\"mileage\", formData.mileage);\r\n       fd.append(\"price\", formData.price);\r\n       fd.append(\"condition\", formData.condition);\r\n       fd.append(\"description\", formData.description);\r\n-      fd.append(\"location\", formData.location);\r\n-      fd.append(\"latitude\", String(formData.latitude));\r\n-      fd.append(\"longitude\", String(formData.longitude));\r\n \r\n       formData.platforms.forEach((p) => fd.append(\"platforms\", p));\r\n       selectedFiles.forEach((file) => fd.append(\"images\", file));\r\n \r\n@@ -166,12 +147,11 @@\n       });\r\n \r\n       navigate(\"/profile\");\r\n     } catch (error) {\r\n-      const errorMessage = error instanceof Error ? error.message : \"Something went wrong.\";\r\n       toast({\r\n         title: \"Error\",\r\n-        description: errorMessage,\r\n+        description: error instanceof Error ? error.message : \"Something went wrong.\",\r\n         variant: \"destructive\",\r\n       });\r\n     }\r\n \r\n@@ -213,20 +193,19 @@\n                 </CardHeader>\r\n                 <CardContent className=\"space-y-4\">\r\n                   <div className=\"grid gap-4 md:grid-cols-2\">\r\n                     <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"brand\">Brand *</Label>\r\n+                      <Label>Brand *</Label>\r\n                       <Input\r\n-                        id=\"brand\"\r\n                         value={formData.brand}\r\n                         onChange={(e) => handleInputChange(\"brand\", e.target.value)}\r\n                         placeholder=\"e.g., Toyota\"\r\n                       />\r\n                     </div>\r\n+\r\n                     <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"model\">Model *</Label>\r\n+                      <Label>Model *</Label>\r\n                       <Input\r\n-                        id=\"model\"\r\n                         value={formData.model}\r\n                         onChange={(e) => handleInputChange(\"model\", e.target.value)}\r\n                         placeholder=\"e.g., Camry\"\r\n                       />\r\n@@ -234,19 +213,19 @@\n                   </div>\r\n \r\n                   <div className=\"grid gap-4 md:grid-cols-2\">\r\n                     <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"year\">Year *</Label>\r\n+                      <Label>Year *</Label>\r\n                       <Input\r\n-                        id=\"year\"\r\n                         type=\"number\"\r\n                         value={formData.year}\r\n                         onChange={(e) => handleInputChange(\"year\", e.target.value)}\r\n                         placeholder=\"2020\"\r\n                       />\r\n                     </div>\r\n+\r\n                     <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"condition\">Condition *</Label>\r\n+                      <Label>Condition *</Label>\r\n                       <Select\r\n                         value={formData.condition}\r\n                         onValueChange={(value) => handleInputChange(\"condition\", value)}\r\n                       >\r\n@@ -268,54 +247,37 @@\n                 </CardContent>\r\n               </>\r\n             )}\r\n \r\n-            {/* Step 2 */}\r\n+            {/* Step 2  Pricing (Location removed) */}\r\n             {step === 2 && (\r\n               <>\r\n                 <CardHeader>\r\n-                  <CardTitle>Pricing & Location</CardTitle>\r\n-                  <CardDescription>Set your price and location</CardDescription>\r\n+                  <CardTitle>Pricing</CardTitle>\r\n+                  <CardDescription>Set your price and mileage</CardDescription>\r\n                 </CardHeader>\r\n+\r\n                 <CardContent className=\"space-y-4\">\r\n                   <div className=\"grid gap-4 md:grid-cols-2\">\r\n                     <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"price\">Price ($) *</Label>\r\n+                      <Label>Price ($) *</Label>\r\n                       <Input\r\n-                        id=\"price\"\r\n                         type=\"number\"\r\n                         value={formData.price}\r\n                         onChange={(e) => handleInputChange(\"price\", e.target.value)}\r\n                       />\r\n                     </div>\r\n+\r\n                     <div className=\"space-y-2\">\r\n-                      <Label htmlFor=\"mileage\">Mileage (miles) *</Label>\r\n+                      <Label>Mileage (miles) *</Label>\r\n                       <Input\r\n-                        id=\"mileage\"\r\n                         type=\"number\"\r\n                         value={formData.mileage}\r\n                         onChange={(e) => handleInputChange(\"mileage\", e.target.value)}\r\n                       />\r\n                     </div>\r\n                   </div>\r\n \r\n-                  <div className=\"space-y-3\">\r\n-                    <Label className=\"flex items-center gap-2\">\r\n-                      <MapPin className=\"h-4 w-4 text-primary\" />\r\n-                      Pick Location *\r\n-                    </Label>\r\n-                    {/* <MapPicker\r\n-                      initialLat={formData.latitude || 37.7749}\r\n-                      initialLng={formData.longitude || -122.4194}\r\n-                      onLocationSelect={handleLocationSelect}\r\n-                    /> */}\r\n-                    {formData.location && (\r\n-                      <p className=\"text-sm text-muted-foreground\">\r\n-                        Selected: {formData.location}\r\n-                      </p>\r\n-                    )}\r\n-                  </div>\r\n-\r\n                   <div className=\"flex gap-2\">\r\n                     <Button variant=\"outline\" onClick={() => setStep(1)} className=\"w-full\">\r\n                       Back\r\n                     </Button>\r\n@@ -336,11 +298,10 @@\n                 </CardHeader>\r\n \r\n                 <CardContent className=\"space-y-6\">\r\n                   <div className=\"space-y-2\">\r\n-                    <Label htmlFor=\"description\">Description *</Label>\r\n+                    <Label>Description *</Label>\r\n                     <Textarea\r\n-                      id=\"description\"\r\n                       rows={4}\r\n                       value={formData.description}\r\n                       onChange={(e) => handleInputChange(\"description\", e.target.value)}\r\n                       placeholder=\"Describe your car...\"\r\n@@ -352,25 +313,19 @@\n                     <div className=\"space-y-3 rounded-lg border p-4\">\r\n                       {platforms.map((platform) => (\r\n                         <div key={platform.id} className=\"flex items-center space-x-2\">\r\n                           <Checkbox\r\n-                            id={platform.id}\r\n                             checked={formData.platforms.includes(platform.id)}\r\n                             onCheckedChange={() => handlePlatformToggle(platform.id)}\r\n                           />\r\n-                          <label htmlFor={platform.id} className=\"text-sm font-medium\">\r\n-                            {platform.name}\r\n-                          </label>\r\n+                          <label className=\"text-sm font-medium\">{platform.name}</label>\r\n                         </div>\r\n                       ))}\r\n                     </div>\r\n-                    <p className=\"text-xs text-muted-foreground\">\r\n-                      Select at least one platform\r\n-                    </p>\r\n                   </div>\r\n \r\n                   <div className=\"space-y-3\">\r\n-                    <Label>Upload Images</Label>\r\n+                    <Label>Upload Images *</Label>\r\n \r\n                     <label\r\n                       htmlFor=\"image-upload\"\r\n                       className=\"flex cursor-pointer items-center justify-center rounded-lg border-2 border-dashed p-8 text-center hover:border-primary hover:bg-primary/5\"\r\n@@ -398,9 +353,8 @@\n                         {selectedImages.map((img, index) => (\r\n                           <div key={index} className=\"relative group\">\r\n                             <img\r\n                               src={img}\r\n-                              alt={`Preview ${index + 1}`}\r\n                               className=\"h-24 w-full rounded-lg object-cover\"\r\n                             />\r\n                             <button\r\n                               type=\"button\"\r\n"
                },
                {
                    "date": 1763934436552,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,14 +5,27 @@\n import { Button } from \"@/components/ui/button\";\r\n import { Input } from \"@/components/ui/input\";\r\n import { Label } from \"@/components/ui/label\";\r\n import { Textarea } from \"@/components/ui/textarea\";\r\n-import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\n+import {\r\n+  Card,\r\n+  CardContent,\r\n+  CardDescription,\r\n+  CardHeader,\r\n+  CardTitle,\r\n+} from \"@/components/ui/card\";\r\n+import {\r\n+  Select,\r\n+  SelectContent,\r\n+  SelectItem,\r\n+  SelectTrigger,\r\n+  SelectValue,\r\n+} from \"@/components/ui/select\";\r\n import { Checkbox } from \"@/components/ui/checkbox\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n-import { ArrowLeft, Upload, X } from \"lucide-react\";\r\n+import { ArrowLeft, Upload, X, Link2, Loader2 } from \"lucide-react\";\r\n import { createCar } from \"@/api/cars\";\r\n+import axios from \"axios\";\r\n \r\n const platforms = [\r\n   { id: \"edmunds\", name: \"Edmunds\" },\r\n   { id: \"olx\", name: \"OLX\" },\r\n@@ -20,8 +33,26 @@\n   { id: \"autotrader\", name: \"AutoTrader\" },\r\n   { id: \"cars\", name: \"Cars.com\" },\r\n ];\r\n \r\n+//  CHANGE THIS if your backend route is different\r\n+const FB_SCRAPE_URL = \"http://127.0.0.1:5000/api/scrape/facebook\";\r\n+\r\n+// Expected response shape from backend scraper\r\n+type FacebookScrapeResult = Partial<{\r\n+  brand: string;\r\n+  model: string;\r\n+  year: number | string;\r\n+  price: number | string;\r\n+  mileage: number | string;\r\n+  condition: \"new\" | \"used\" | \"certified\" | string;\r\n+  description: string;\r\n+  // images as URLs from Facebook\r\n+  images: string[];\r\n+  // optional platforms array from scraper\r\n+  platforms: string[];\r\n+}>;\r\n+\r\n const SellCar = () => {\r\n   const { user } = useAuth();\r\n   const navigate = useNavigate();\r\n \r\n@@ -41,8 +72,12 @@\n \r\n   const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n   const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\r\n \r\n+  //  Facebook import state\r\n+  const [fbUrl, setFbUrl] = useState(\"\");\r\n+  const [isImportingFb, setIsImportingFb] = useState(false);\r\n+\r\n   useEffect(() => {\r\n     if (!user) navigate(\"/auth?mode=login\");\r\n   }, [user, navigate]);\r\n \r\n@@ -83,9 +118,14 @@\n   };\r\n \r\n   const handleNext = () => {\r\n     if (step === 1) {\r\n-      if (!formData.brand || !formData.model || !formData.year || !formData.condition) {\r\n+      if (\r\n+        !formData.brand ||\r\n+        !formData.model ||\r\n+        !formData.year ||\r\n+        !formData.condition\r\n+      ) {\r\n         return toast({\r\n           title: \"Missing information\",\r\n           description: \"Please fill in all required fields.\",\r\n           variant: \"destructive\",\r\n@@ -105,8 +145,88 @@\n \r\n     setStep((prev) => prev + 1);\r\n   };\r\n \r\n+  //  Import from Facebook Marketplace\r\n+  const handleImportFromFacebook = async () => {\r\n+    if (!fbUrl.trim()) {\r\n+      return toast({\r\n+        title: \"Missing URL\",\r\n+        description: \"Paste a Facebook Marketplace car link first.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+\r\n+    setIsImportingFb(true);\r\n+\r\n+    try {\r\n+      const res = await axios.post<FacebookScrapeResult>(FB_SCRAPE_URL, {\r\n+        url: fbUrl.trim(),\r\n+      });\r\n+\r\n+      const data = res.data;\r\n+\r\n+      setFormData((prev) => ({\r\n+        ...prev,\r\n+        brand: data.brand ?? prev.brand,\r\n+        model: data.model ?? prev.model,\r\n+        year:\r\n+          data.year !== undefined && data.year !== null\r\n+            ? String(data.year)\r\n+            : prev.year,\r\n+        price:\r\n+          data.price !== undefined && data.price !== null\r\n+            ? String(data.price)\r\n+            : prev.price,\r\n+        mileage:\r\n+          data.mileage !== undefined && data.mileage !== null\r\n+            ? String(data.mileage)\r\n+            : prev.mileage,\r\n+        condition: (data.condition as any) ?? prev.condition,\r\n+        description: data.description ?? prev.description,\r\n+        platforms:\r\n+          data.platforms && data.platforms.length > 0\r\n+            ? data.platforms\r\n+            : prev.platforms.includes(\"facebook\")\r\n+            ? prev.platforms\r\n+            : [...prev.platforms, \"facebook\"],\r\n+      }));\r\n+\r\n+      // show imported image URLs as previews\r\n+      if (data.images?.length) {\r\n+        setSelectedImages((prevImgs) => [\r\n+          ...data.images!,\r\n+          ...prevImgs.filter((x) => !data.images!.includes(x)),\r\n+        ]);\r\n+\r\n+        toast({\r\n+          title: \"Facebook images imported\",\r\n+          description:\r\n+            \"Images were added as previews. Please upload at least one real image before listing.\",\r\n+        });\r\n+      }\r\n+\r\n+      toast({\r\n+        title: \"Imported from Facebook\",\r\n+        description: \"Fields auto-filled successfully.\",\r\n+      });\r\n+    } catch (err: unknown) {\r\n+      const message =\r\n+        err && typeof err === \"object\" && \"response\" in err\r\n+          ? (err as { response?: { data?: { message?: string } } }).response?.data\r\n+              ?.message || \"Failed to import Facebook listing.\"\r\n+          : \"Failed to import Facebook listing.\";\r\n+\r\n+      toast({\r\n+        title: \"Import failed\",\r\n+        description: message,\r\n+        variant: \"destructive\",\r\n+      });\r\n+    } finally {\r\n+      setIsImportingFb(false);\r\n+    }\r\n+  };\r\n+\r\n   const handleSubmit = async () => {\r\n     if (!formData.description || formData.platforms.length === 0) {\r\n       return toast({\r\n         title: \"Missing information\",\r\n@@ -114,12 +234,14 @@\n         variant: \"destructive\",\r\n       });\r\n     }\r\n \r\n+    // still require real files because backend expects multipart images\r\n     if (selectedFiles.length === 0) {\r\n       return toast({\r\n         title: \"Missing images\",\r\n-        description: \"Please upload at least one image.\",\r\n+        description:\r\n+          \"Please upload at least one real image (Facebook previews don't count).\",\r\n         variant: \"destructive\",\r\n       });\r\n     }\r\n \r\n@@ -149,9 +271,10 @@\n       navigate(\"/profile\");\r\n     } catch (error) {\r\n       toast({\r\n         title: \"Error\",\r\n-        description: error instanceof Error ? error.message : \"Something went wrong.\",\r\n+        description:\r\n+          error instanceof Error ? error.message : \"Something went wrong.\",\r\n         variant: \"destructive\",\r\n       });\r\n     }\r\n \r\n@@ -160,9 +283,13 @@\n \r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n-        <Button variant=\"ghost\" onClick={() => navigate(-1)} className=\"mb-6 gap-2\">\r\n+        <Button\r\n+          variant=\"ghost\"\r\n+          onClick={() => navigate(-1)}\r\n+          className=\"mb-6 gap-2\"\r\n+        >\r\n           <ArrowLeft className=\"h-4 w-4\" />\r\n           Back\r\n         </Button>\r\n \r\n@@ -190,24 +317,61 @@\n                 <CardHeader>\r\n                   <CardTitle>Car Details</CardTitle>\r\n                   <CardDescription>Tell us about your car</CardDescription>\r\n                 </CardHeader>\r\n-                <CardContent className=\"space-y-4\">\r\n+\r\n+                <CardContent className=\"space-y-5\">\r\n+                  {/*  Facebook Import Box */}\r\n+                  <div className=\"rounded-lg border bg-card p-4 space-y-3\">\r\n+                    <Label className=\"flex items-center gap-2\">\r\n+                      <Link2 className=\"h-4 w-4\" />\r\n+                      Import from Facebook Marketplace (optional)\r\n+                    </Label>\r\n+\r\n+                    <div className=\"flex flex-col sm:flex-row gap-2\">\r\n+                      <Input\r\n+                        value={fbUrl}\r\n+                        onChange={(e) => setFbUrl(e.target.value)}\r\n+                        placeholder=\"Paste Facebook Marketplace car link...\"\r\n+                      />\r\n+                      <Button\r\n+                        type=\"button\"\r\n+                        onClick={handleImportFromFacebook}\r\n+                        disabled={isImportingFb}\r\n+                        className=\"gap-2\"\r\n+                      >\r\n+                        {isImportingFb && (\r\n+                          <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n+                        )}\r\n+                        {isImportingFb ? \"Importing...\" : \"Import\"}\r\n+                      </Button>\r\n+                    </div>\r\n+\r\n+                    <p className=\"text-xs text-muted-foreground\">\r\n+                      This will auto-fill brand, model, year, price, mileage,\r\n+                      description, platforms, and preview images if available.\r\n+                    </p>\r\n+                  </div>\r\n+\r\n                   <div className=\"grid gap-4 md:grid-cols-2\">\r\n                     <div className=\"space-y-2\">\r\n                       <Label>Brand *</Label>\r\n                       <Input\r\n                         value={formData.brand}\r\n-                        onChange={(e) => handleInputChange(\"brand\", e.target.value)}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"brand\", e.target.value)\r\n+                        }\r\n                         placeholder=\"e.g., Toyota\"\r\n                       />\r\n                     </div>\r\n \r\n                     <div className=\"space-y-2\">\r\n                       <Label>Model *</Label>\r\n                       <Input\r\n                         value={formData.model}\r\n-                        onChange={(e) => handleInputChange(\"model\", e.target.value)}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"model\", e.target.value)\r\n+                        }\r\n                         placeholder=\"e.g., Camry\"\r\n                       />\r\n                     </div>\r\n                   </div>\r\n@@ -217,26 +381,32 @@\n                       <Label>Year *</Label>\r\n                       <Input\r\n                         type=\"number\"\r\n                         value={formData.year}\r\n-                        onChange={(e) => handleInputChange(\"year\", e.target.value)}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"year\", e.target.value)\r\n+                        }\r\n                         placeholder=\"2020\"\r\n                       />\r\n                     </div>\r\n \r\n                     <div className=\"space-y-2\">\r\n                       <Label>Condition *</Label>\r\n                       <Select\r\n                         value={formData.condition}\r\n-                        onValueChange={(value) => handleInputChange(\"condition\", value)}\r\n+                        onValueChange={(value) =>\r\n+                          handleInputChange(\"condition\", value)\r\n+                        }\r\n                       >\r\n                         <SelectTrigger>\r\n                           <SelectValue placeholder=\"Select condition\" />\r\n                         </SelectTrigger>\r\n                         <SelectContent>\r\n                           <SelectItem value=\"new\">New</SelectItem>\r\n                           <SelectItem value=\"used\">Used</SelectItem>\r\n-                          <SelectItem value=\"certified\">Certified Pre-Owned</SelectItem>\r\n+                          <SelectItem value=\"certified\">\r\n+                            Certified Pre-Owned\r\n+                          </SelectItem>\r\n                         </SelectContent>\r\n                       </Select>\r\n                     </div>\r\n                   </div>\r\n@@ -247,9 +417,9 @@\n                 </CardContent>\r\n               </>\r\n             )}\r\n \r\n-            {/* Step 2  Pricing (Location removed) */}\r\n+            {/* Step 2  Pricing */}\r\n             {step === 2 && (\r\n               <>\r\n                 <CardHeader>\r\n                   <CardTitle>Pricing</CardTitle>\r\n@@ -262,24 +432,32 @@\n                       <Label>Price ($) *</Label>\r\n                       <Input\r\n                         type=\"number\"\r\n                         value={formData.price}\r\n-                        onChange={(e) => handleInputChange(\"price\", e.target.value)}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"price\", e.target.value)\r\n+                        }\r\n                       />\r\n                     </div>\r\n \r\n                     <div className=\"space-y-2\">\r\n                       <Label>Mileage (miles) *</Label>\r\n                       <Input\r\n                         type=\"number\"\r\n                         value={formData.mileage}\r\n-                        onChange={(e) => handleInputChange(\"mileage\", e.target.value)}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"mileage\", e.target.value)\r\n+                        }\r\n                       />\r\n                     </div>\r\n                   </div>\r\n \r\n                   <div className=\"flex gap-2\">\r\n-                    <Button variant=\"outline\" onClick={() => setStep(1)} className=\"w-full\">\r\n+                    <Button\r\n+                      variant=\"outline\"\r\n+                      onClick={() => setStep(1)}\r\n+                      className=\"w-full\"\r\n+                    >\r\n                       Back\r\n                     </Button>\r\n                     <Button onClick={handleNext} className=\"w-full\">\r\n                       Continue\r\n@@ -293,32 +471,43 @@\n             {step === 3 && (\r\n               <>\r\n                 <CardHeader>\r\n                   <CardTitle>Description & Platforms</CardTitle>\r\n-                  <CardDescription>Add details and where to list</CardDescription>\r\n+                  <CardDescription>\r\n+                    Add details and where to list\r\n+                  </CardDescription>\r\n                 </CardHeader>\r\n \r\n                 <CardContent className=\"space-y-6\">\r\n                   <div className=\"space-y-2\">\r\n                     <Label>Description *</Label>\r\n                     <Textarea\r\n                       rows={4}\r\n                       value={formData.description}\r\n-                      onChange={(e) => handleInputChange(\"description\", e.target.value)}\r\n+                      onChange={(e) =>\r\n+                        handleInputChange(\"description\", e.target.value)\r\n+                      }\r\n                       placeholder=\"Describe your car...\"\r\n                     />\r\n                   </div>\r\n \r\n                   <div className=\"space-y-3\">\r\n                     <Label>List on Platforms *</Label>\r\n                     <div className=\"space-y-3 rounded-lg border p-4\">\r\n                       {platforms.map((platform) => (\r\n-                        <div key={platform.id} className=\"flex items-center space-x-2\">\r\n+                        <div\r\n+                          key={platform.id}\r\n+                          className=\"flex items-center space-x-2\"\r\n+                        >\r\n                           <Checkbox\r\n                             checked={formData.platforms.includes(platform.id)}\r\n-                            onCheckedChange={() => handlePlatformToggle(platform.id)}\r\n+                            onCheckedChange={() =>\r\n+                              handlePlatformToggle(platform.id)\r\n+                            }\r\n                           />\r\n-                          <label className=\"text-sm font-medium\">{platform.name}</label>\r\n+                          <label className=\"text-sm font-medium\">\r\n+                            {platform.name}\r\n+                          </label>\r\n                         </div>\r\n                       ))}\r\n                     </div>\r\n                   </div>\r\n@@ -354,8 +543,9 @@\n                           <div key={index} className=\"relative group\">\r\n                             <img\r\n                               src={img}\r\n                               className=\"h-24 w-full rounded-lg object-cover\"\r\n+                              alt={`car-${index}`}\r\n                             />\r\n                             <button\r\n                               type=\"button\"\r\n                               onClick={() => removeImage(index)}\r\n@@ -369,12 +559,20 @@\n                     )}\r\n                   </div>\r\n \r\n                   <div className=\"flex gap-2\">\r\n-                    <Button variant=\"outline\" onClick={() => setStep(2)} className=\"w-full\">\r\n+                    <Button\r\n+                      variant=\"outline\"\r\n+                      onClick={() => setStep(2)}\r\n+                      className=\"w-full\"\r\n+                    >\r\n                       Back\r\n                     </Button>\r\n-                    <Button onClick={handleSubmit} disabled={isSubmitting} className=\"w-full\">\r\n+                    <Button\r\n+                      onClick={handleSubmit}\r\n+                      disabled={isSubmitting}\r\n+                      className=\"w-full\"\r\n+                    >\r\n                       {isSubmitting ? \"Listing...\" : \"List Car\"}\r\n                     </Button>\r\n                   </div>\r\n                 </CardContent>\r\n"
                },
                {
                    "date": 1763934474313,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,594 @@\n+// src/pages/SellCar.tsx\r\n+import { useState, useEffect } from \"react\";\r\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useAuth } from \"@/contexts/AuthContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Input } from \"@/components/ui/input\";\r\n+import { Label } from \"@/components/ui/label\";\r\n+import { Textarea } from \"@/components/ui/textarea\";\r\n+import {\r\n+  Card,\r\n+  CardContent,\r\n+  CardDescription,\r\n+  CardHeader,\r\n+  CardTitle,\r\n+} from \"@/components/ui/card\";\r\n+import {\r\n+  Select,\r\n+  SelectContent,\r\n+  SelectItem,\r\n+  SelectTrigger,\r\n+  SelectValue,\r\n+} from \"@/components/ui/select\";\r\n+import { Checkbox } from \"@/components/ui/checkbox\";\r\n+import { toast } from \"@/hooks/use-toast\";\r\n+import { ArrowLeft, Upload, X, Link2, Loader2 } from \"lucide-react\";\r\n+import { createCar } from \"@/api/cars\";\r\n+import axios from \"axios\";\r\n+\r\n+const platforms = [\r\n+  { id: \"edmunds\", name: \"Edmunds\" },\r\n+  { id: \"olx\", name: \"OLX\" },\r\n+  { id: \"facebook\", name: \"Facebook Marketplace\" },\r\n+  { id: \"autotrader\", name: \"AutoTrader\" },\r\n+  { id: \"cars\", name: \"Cars.com\" },\r\n+];\r\n+\r\n+//  CHANGE THIS if your backend route is different\r\n+const FB_SCRAPE_URL = \"http://127.0.0.1:5000/api/scrape/facebook\";\r\n+\r\n+// Expected response shape from backend scraper\r\n+type FacebookScrapeResult = Partial<{\r\n+  brand: string;\r\n+  model: string;\r\n+  year: number | string;\r\n+  price: number | string;\r\n+  mileage: number | string;\r\n+  condition: \"new\" | \"used\" | \"certified\" | string;\r\n+  description: string;\r\n+  // images as URLs from Facebook\r\n+  images: string[];\r\n+  // optional platforms array from scraper\r\n+  platforms: string[];\r\n+}>;\r\n+\r\n+const SellCar = () => {\r\n+  const { user } = useAuth();\r\n+  const navigate = useNavigate();\r\n+\r\n+  const [step, setStep] = useState(1);\r\n+  const [isSubmitting, setIsSubmitting] = useState(false);\r\n+\r\n+  const [formData, setFormData] = useState({\r\n+    brand: \"\",\r\n+    model: \"\",\r\n+    year: \"\",\r\n+    mileage: \"\",\r\n+    price: \"\",\r\n+    condition: \"\",\r\n+    description: \"\",\r\n+    platforms: [] as string[],\r\n+  });\r\n+\r\n+  const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n+  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\r\n+\r\n+  //  Facebook import state\r\n+  const [fbUrl, setFbUrl] = useState(\"\");\r\n+  const [isImportingFb, setIsImportingFb] = useState(false);\r\n+\r\n+  useEffect(() => {\r\n+    if (!user) navigate(\"/auth?mode=login\");\r\n+  }, [user, navigate]);\r\n+\r\n+  if (!user) return null;\r\n+\r\n+  const handleInputChange = (field: string, value: string) => {\r\n+    setFormData((prev) => ({ ...prev, [field]: value }));\r\n+  };\r\n+\r\n+  const handlePlatformToggle = (platformId: string) => {\r\n+    setFormData((prev) => ({\r\n+      ...prev,\r\n+      platforms: prev.platforms.includes(platformId)\r\n+        ? prev.platforms.filter((p) => p !== platformId)\r\n+        : [...prev.platforms, platformId],\r\n+    }));\r\n+  };\r\n+\r\n+  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n+    const files = e.target.files;\r\n+    if (!files) return;\r\n+\r\n+    const newFiles = Array.from(files);\r\n+    setSelectedFiles((prev) => [...prev, ...newFiles]);\r\n+\r\n+    const previews = newFiles.map((file) => URL.createObjectURL(file));\r\n+    setSelectedImages((prev) => [...prev, ...previews]);\r\n+\r\n+    toast({\r\n+      title: \"Images added\",\r\n+      description: `${newFiles.length} image(s) ready for upload.`,\r\n+    });\r\n+  };\r\n+\r\n+  const removeImage = (index: number) => {\r\n+    setSelectedImages((prev) => prev.filter((_, i) => i !== index));\r\n+    setSelectedFiles((prev) => prev.filter((_, i) => i !== index));\r\n+  };\r\n+\r\n+  const handleNext = () => {\r\n+    if (step === 1) {\r\n+      if (\r\n+        !formData.brand ||\r\n+        !formData.model ||\r\n+        !formData.year ||\r\n+        !formData.condition\r\n+      ) {\r\n+        return toast({\r\n+          title: \"Missing information\",\r\n+          description: \"Please fill in all required fields.\",\r\n+          variant: \"destructive\",\r\n+        });\r\n+      }\r\n+    }\r\n+\r\n+    if (step === 2) {\r\n+      if (!formData.price || !formData.mileage) {\r\n+        return toast({\r\n+          title: \"Missing information\",\r\n+          description: \"Please fill in all required fields.\",\r\n+          variant: \"destructive\",\r\n+        });\r\n+      }\r\n+    }\r\n+\r\n+    setStep((prev) => prev + 1);\r\n+  };\r\n+\r\n+  //  Import from Facebook Marketplace\r\n+  const handleImportFromFacebook = async () => {\r\n+    if (!fbUrl.trim()) {\r\n+      return toast({\r\n+        title: \"Missing URL\",\r\n+        description: \"Paste a Facebook Marketplace car link first.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+\r\n+    setIsImportingFb(true);\r\n+\r\n+    try {\r\n+      const res = await axios.post<FacebookScrapeResult>(FB_SCRAPE_URL, {\r\n+        url: fbUrl.trim(),\r\n+      });\r\n+\r\n+      const data = res.data;\r\n+\r\n+      setFormData((prev) => ({\r\n+        ...prev,\r\n+        brand: data.brand ?? prev.brand,\r\n+        model: data.model ?? prev.model,\r\n+        year:\r\n+          data.year !== undefined && data.year !== null\r\n+            ? String(data.year)\r\n+            : prev.year,\r\n+        price:\r\n+          data.price !== undefined && data.price !== null\r\n+            ? String(data.price)\r\n+            : prev.price,\r\n+        mileage:\r\n+          data.mileage !== undefined && data.mileage !== null\r\n+            ? String(data.mileage)\r\n+            : prev.mileage,\r\n+        condition:\r\n+  data.condition === \"new\" ||\r\n+  data.condition === \"used\" ||\r\n+  data.condition === \"certified\"\r\n+    ? data.condition\r\n+    : prev.condition,\r\n+\r\n+        description: data.description ?? prev.description,\r\n+        platforms:\r\n+          data.platforms && data.platforms.length > 0\r\n+            ? data.platforms\r\n+            : prev.platforms.includes(\"facebook\")\r\n+            ? prev.platforms\r\n+            : [...prev.platforms, \"facebook\"],\r\n+      }));\r\n+\r\n+      // show imported image URLs as previews\r\n+      if (data.images?.length) {\r\n+        setSelectedImages((prevImgs) => [\r\n+          ...data.images!,\r\n+          ...prevImgs.filter((x) => !data.images!.includes(x)),\r\n+        ]);\r\n+\r\n+        toast({\r\n+          title: \"Facebook images imported\",\r\n+          description:\r\n+            \"Images were added as previews. Please upload at least one real image before listing.\",\r\n+        });\r\n+      }\r\n+\r\n+      toast({\r\n+        title: \"Imported from Facebook\",\r\n+        description: \"Fields auto-filled successfully.\",\r\n+      });\r\n+    } catch (err: unknown) {\r\n+      const message =\r\n+        err && typeof err === \"object\" && \"response\" in err\r\n+          ? (err as { response?: { data?: { message?: string } } }).response?.data\r\n+              ?.message || \"Failed to import Facebook listing.\"\r\n+          : \"Failed to import Facebook listing.\";\r\n+\r\n+      toast({\r\n+        title: \"Import failed\",\r\n+        description: message,\r\n+        variant: \"destructive\",\r\n+      });\r\n+    } finally {\r\n+      setIsImportingFb(false);\r\n+    }\r\n+  };\r\n+\r\n+  const handleSubmit = async () => {\r\n+    if (!formData.description || formData.platforms.length === 0) {\r\n+      return toast({\r\n+        title: \"Missing information\",\r\n+        description: \"Please complete all required fields.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+\r\n+    // still require real files because backend expects multipart images\r\n+    if (selectedFiles.length === 0) {\r\n+      return toast({\r\n+        title: \"Missing images\",\r\n+        description:\r\n+          \"Please upload at least one real image (Facebook previews don't count).\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+\r\n+    setIsSubmitting(true);\r\n+\r\n+    try {\r\n+      const fd = new FormData();\r\n+\r\n+      fd.append(\"brand\", formData.brand);\r\n+      fd.append(\"model\", formData.model);\r\n+      fd.append(\"year\", formData.year);\r\n+      fd.append(\"mileage\", formData.mileage);\r\n+      fd.append(\"price\", formData.price);\r\n+      fd.append(\"condition\", formData.condition);\r\n+      fd.append(\"description\", formData.description);\r\n+\r\n+      formData.platforms.forEach((p) => fd.append(\"platforms\", p));\r\n+      selectedFiles.forEach((file) => fd.append(\"images\", file));\r\n+\r\n+      await createCar(fd, user.token);\r\n+\r\n+      toast({\r\n+        title: \"Success!\",\r\n+        description: \"Your car has been listed successfully.\",\r\n+      });\r\n+\r\n+      navigate(\"/profile\");\r\n+    } catch (error) {\r\n+      toast({\r\n+        title: \"Error\",\r\n+        description:\r\n+          error instanceof Error ? error.message : \"Something went wrong.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+\r\n+    setIsSubmitting(false);\r\n+  };\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <Button\r\n+          variant=\"ghost\"\r\n+          onClick={() => navigate(-1)}\r\n+          className=\"mb-6 gap-2\"\r\n+        >\r\n+          <ArrowLeft className=\"h-4 w-4\" />\r\n+          Back\r\n+        </Button>\r\n+\r\n+        <div className=\"mx-auto max-w-2xl\">\r\n+          <div className=\"mb-8 text-center\">\r\n+            <h1 className=\"text-4xl font-bold\">Sell Your Car</h1>\r\n+            <p className=\"mt-2 text-muted-foreground\">Step {step} of 3</p>\r\n+          </div>\r\n+\r\n+          <div className=\"mb-8 flex gap-2\">\r\n+            {[1, 2, 3].map((s) => (\r\n+              <div\r\n+                key={s}\r\n+                className={`h-2 flex-1 rounded-full ${\r\n+                  s <= step ? \"bg-primary\" : \"bg-muted\"\r\n+                }`}\r\n+              />\r\n+            ))}\r\n+          </div>\r\n+\r\n+          <Card className=\"shadow-card\">\r\n+            {/* Step 1 */}\r\n+            {step === 1 && (\r\n+              <>\r\n+                <CardHeader>\r\n+                  <CardTitle>Car Details</CardTitle>\r\n+                  <CardDescription>Tell us about your car</CardDescription>\r\n+                </CardHeader>\r\n+\r\n+                <CardContent className=\"space-y-5\">\r\n+                  {/*  Facebook Import Box */}\r\n+                  <div className=\"rounded-lg border bg-card p-4 space-y-3\">\r\n+                    <Label className=\"flex items-center gap-2\">\r\n+                      <Link2 className=\"h-4 w-4\" />\r\n+                      Import from Facebook Marketplace (optional)\r\n+                    </Label>\r\n+\r\n+                    <div className=\"flex flex-col sm:flex-row gap-2\">\r\n+                      <Input\r\n+                        value={fbUrl}\r\n+                        onChange={(e) => setFbUrl(e.target.value)}\r\n+                        placeholder=\"Paste Facebook Marketplace car link...\"\r\n+                      />\r\n+                      <Button\r\n+                        type=\"button\"\r\n+                        onClick={handleImportFromFacebook}\r\n+                        disabled={isImportingFb}\r\n+                        className=\"gap-2\"\r\n+                      >\r\n+                        {isImportingFb && (\r\n+                          <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n+                        )}\r\n+                        {isImportingFb ? \"Importing...\" : \"Import\"}\r\n+                      </Button>\r\n+                    </div>\r\n+\r\n+                    <p className=\"text-xs text-muted-foreground\">\r\n+                      This will auto-fill brand, model, year, price, mileage,\r\n+                      description, platforms, and preview images if available.\r\n+                    </p>\r\n+                  </div>\r\n+\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label>Brand *</Label>\r\n+                      <Input\r\n+                        value={formData.brand}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"brand\", e.target.value)\r\n+                        }\r\n+                        placeholder=\"e.g., Toyota\"\r\n+                      />\r\n+                    </div>\r\n+\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label>Model *</Label>\r\n+                      <Input\r\n+                        value={formData.model}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"model\", e.target.value)\r\n+                        }\r\n+                        placeholder=\"e.g., Camry\"\r\n+                      />\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label>Year *</Label>\r\n+                      <Input\r\n+                        type=\"number\"\r\n+                        value={formData.year}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"year\", e.target.value)\r\n+                        }\r\n+                        placeholder=\"2020\"\r\n+                      />\r\n+                    </div>\r\n+\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label>Condition *</Label>\r\n+                      <Select\r\n+                        value={formData.condition}\r\n+                        onValueChange={(value) =>\r\n+                          handleInputChange(\"condition\", value)\r\n+                        }\r\n+                      >\r\n+                        <SelectTrigger>\r\n+                          <SelectValue placeholder=\"Select condition\" />\r\n+                        </SelectTrigger>\r\n+                        <SelectContent>\r\n+                          <SelectItem value=\"new\">New</SelectItem>\r\n+                          <SelectItem value=\"used\">Used</SelectItem>\r\n+                          <SelectItem value=\"certified\">\r\n+                            Certified Pre-Owned\r\n+                          </SelectItem>\r\n+                        </SelectContent>\r\n+                      </Select>\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <Button onClick={handleNext} className=\"w-full\">\r\n+                    Continue\r\n+                  </Button>\r\n+                </CardContent>\r\n+              </>\r\n+            )}\r\n+\r\n+            {/* Step 2  Pricing */}\r\n+            {step === 2 && (\r\n+              <>\r\n+                <CardHeader>\r\n+                  <CardTitle>Pricing</CardTitle>\r\n+                  <CardDescription>Set your price and mileage</CardDescription>\r\n+                </CardHeader>\r\n+\r\n+                <CardContent className=\"space-y-4\">\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label>Price ($) *</Label>\r\n+                      <Input\r\n+                        type=\"number\"\r\n+                        value={formData.price}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"price\", e.target.value)\r\n+                        }\r\n+                      />\r\n+                    </div>\r\n+\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label>Mileage (miles) *</Label>\r\n+                      <Input\r\n+                        type=\"number\"\r\n+                        value={formData.mileage}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"mileage\", e.target.value)\r\n+                        }\r\n+                      />\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <div className=\"flex gap-2\">\r\n+                    <Button\r\n+                      variant=\"outline\"\r\n+                      onClick={() => setStep(1)}\r\n+                      className=\"w-full\"\r\n+                    >\r\n+                      Back\r\n+                    </Button>\r\n+                    <Button onClick={handleNext} className=\"w-full\">\r\n+                      Continue\r\n+                    </Button>\r\n+                  </div>\r\n+                </CardContent>\r\n+              </>\r\n+            )}\r\n+\r\n+            {/* Step 3 */}\r\n+            {step === 3 && (\r\n+              <>\r\n+                <CardHeader>\r\n+                  <CardTitle>Description & Platforms</CardTitle>\r\n+                  <CardDescription>\r\n+                    Add details and where to list\r\n+                  </CardDescription>\r\n+                </CardHeader>\r\n+\r\n+                <CardContent className=\"space-y-6\">\r\n+                  <div className=\"space-y-2\">\r\n+                    <Label>Description *</Label>\r\n+                    <Textarea\r\n+                      rows={4}\r\n+                      value={formData.description}\r\n+                      onChange={(e) =>\r\n+                        handleInputChange(\"description\", e.target.value)\r\n+                      }\r\n+                      placeholder=\"Describe your car...\"\r\n+                    />\r\n+                  </div>\r\n+\r\n+                  <div className=\"space-y-3\">\r\n+                    <Label>List on Platforms *</Label>\r\n+                    <div className=\"space-y-3 rounded-lg border p-4\">\r\n+                      {platforms.map((platform) => (\r\n+                        <div\r\n+                          key={platform.id}\r\n+                          className=\"flex items-center space-x-2\"\r\n+                        >\r\n+                          <Checkbox\r\n+                            checked={formData.platforms.includes(platform.id)}\r\n+                            onCheckedChange={() =>\r\n+                              handlePlatformToggle(platform.id)\r\n+                            }\r\n+                          />\r\n+                          <label className=\"text-sm font-medium\">\r\n+                            {platform.name}\r\n+                          </label>\r\n+                        </div>\r\n+                      ))}\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <div className=\"space-y-3\">\r\n+                    <Label>Upload Images *</Label>\r\n+\r\n+                    <label\r\n+                      htmlFor=\"image-upload\"\r\n+                      className=\"flex cursor-pointer items-center justify-center rounded-lg border-2 border-dashed p-8 text-center hover:border-primary hover:bg-primary/5\"\r\n+                    >\r\n+                      <div>\r\n+                        <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n+                        <p className=\"text-sm\">Click to upload car images</p>\r\n+                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n+                          Upload up to 10 images\r\n+                        </p>\r\n+                      </div>\r\n+                    </label>\r\n+\r\n+                    <input\r\n+                      id=\"image-upload\"\r\n+                      type=\"file\"\r\n+                      accept=\"image/*\"\r\n+                      multiple\r\n+                      className=\"hidden\"\r\n+                      onChange={handleImageUpload}\r\n+                    />\r\n+\r\n+                    {selectedImages.length > 0 && (\r\n+                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n+                        {selectedImages.map((img, index) => (\r\n+                          <div key={index} className=\"relative group\">\r\n+                            <img\r\n+                              src={img}\r\n+                              className=\"h-24 w-full rounded-lg object-cover\"\r\n+                              alt={`car-${index}`}\r\n+                            />\r\n+                            <button\r\n+                              type=\"button\"\r\n+                              onClick={() => removeImage(index)}\r\n+                              className=\"absolute -top-2 -right-2 h-6 w-6 flex items-center justify-center bg-destructive text-white rounded-full opacity-0 group-hover:opacity-100\"\r\n+                            >\r\n+                              <X className=\"h-4 w-4\" />\r\n+                            </button>\r\n+                          </div>\r\n+                        ))}\r\n+                      </div>\r\n+                    )}\r\n+                  </div>\r\n+\r\n+                  <div className=\"flex gap-2\">\r\n+                    <Button\r\n+                      variant=\"outline\"\r\n+                      onClick={() => setStep(2)}\r\n+                      className=\"w-full\"\r\n+                    >\r\n+                      Back\r\n+                    </Button>\r\n+                    <Button\r\n+                      onClick={handleSubmit}\r\n+                      disabled={isSubmitting}\r\n+                      className=\"w-full\"\r\n+                    >\r\n+                      {isSubmitting ? \"Listing...\" : \"List Car\"}\r\n+                    </Button>\r\n+                  </div>\r\n+                </CardContent>\r\n+              </>\r\n+            )}\r\n+          </Card>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default SellCar;\r\n"
                },
                {
                    "date": 1763934817164,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -591,592 +591,4 @@\n   );\r\n };\r\n \r\n export default SellCar;\r\n-// src/pages/SellCar.tsx\r\n-import { useState, useEffect } from \"react\";\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useAuth } from \"@/contexts/AuthContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Input } from \"@/components/ui/input\";\r\n-import { Label } from \"@/components/ui/label\";\r\n-import { Textarea } from \"@/components/ui/textarea\";\r\n-import {\r\n-  Card,\r\n-  CardContent,\r\n-  CardDescription,\r\n-  CardHeader,\r\n-  CardTitle,\r\n-} from \"@/components/ui/card\";\r\n-import {\r\n-  Select,\r\n-  SelectContent,\r\n-  SelectItem,\r\n-  SelectTrigger,\r\n-  SelectValue,\r\n-} from \"@/components/ui/select\";\r\n-import { Checkbox } from \"@/components/ui/checkbox\";\r\n-import { toast } from \"@/hooks/use-toast\";\r\n-import { ArrowLeft, Upload, X, Link2, Loader2 } from \"lucide-react\";\r\n-import { createCar } from \"@/api/cars\";\r\n-import axios from \"axios\";\r\n-\r\n-const platforms = [\r\n-  { id: \"edmunds\", name: \"Edmunds\" },\r\n-  { id: \"olx\", name: \"OLX\" },\r\n-  { id: \"facebook\", name: \"Facebook Marketplace\" },\r\n-  { id: \"autotrader\", name: \"AutoTrader\" },\r\n-  { id: \"cars\", name: \"Cars.com\" },\r\n-];\r\n-\r\n-//  CHANGE THIS if your backend route is different\r\n-const FB_SCRAPE_URL = \"http://127.0.0.1:5000/api/scrape/facebook\";\r\n-\r\n-// Expected response shape from backend scraper\r\n-type FacebookScrapeResult = Partial<{\r\n-  brand: string;\r\n-  model: string;\r\n-  year: number | string;\r\n-  price: number | string;\r\n-  mileage: number | string;\r\n-  condition: \"new\" | \"used\" | \"certified\" | string;\r\n-  description: string;\r\n-  // images as URLs from Facebook\r\n-  images: string[];\r\n-  // optional platforms array from scraper\r\n-  platforms: string[];\r\n-}>;\r\n-\r\n-const SellCar = () => {\r\n-  const { user } = useAuth();\r\n-  const navigate = useNavigate();\r\n-\r\n-  const [step, setStep] = useState(1);\r\n-  const [isSubmitting, setIsSubmitting] = useState(false);\r\n-\r\n-  const [formData, setFormData] = useState({\r\n-    brand: \"\",\r\n-    model: \"\",\r\n-    year: \"\",\r\n-    mileage: \"\",\r\n-    price: \"\",\r\n-    condition: \"\",\r\n-    description: \"\",\r\n-    platforms: [] as string[],\r\n-  });\r\n-\r\n-  const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n-  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\r\n-\r\n-  //  Facebook import state\r\n-  const [fbUrl, setFbUrl] = useState(\"\");\r\n-  const [isImportingFb, setIsImportingFb] = useState(false);\r\n-\r\n-  useEffect(() => {\r\n-    if (!user) navigate(\"/auth?mode=login\");\r\n-  }, [user, navigate]);\r\n-\r\n-  if (!user) return null;\r\n-\r\n-  const handleInputChange = (field: string, value: string) => {\r\n-    setFormData((prev) => ({ ...prev, [field]: value }));\r\n-  };\r\n-\r\n-  const handlePlatformToggle = (platformId: string) => {\r\n-    setFormData((prev) => ({\r\n-      ...prev,\r\n-      platforms: prev.platforms.includes(platformId)\r\n-        ? prev.platforms.filter((p) => p !== platformId)\r\n-        : [...prev.platforms, platformId],\r\n-    }));\r\n-  };\r\n-\r\n-  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n-    const files = e.target.files;\r\n-    if (!files) return;\r\n-\r\n-    const newFiles = Array.from(files);\r\n-    setSelectedFiles((prev) => [...prev, ...newFiles]);\r\n-\r\n-    const previews = newFiles.map((file) => URL.createObjectURL(file));\r\n-    setSelectedImages((prev) => [...prev, ...previews]);\r\n-\r\n-    toast({\r\n-      title: \"Images added\",\r\n-      description: `${newFiles.length} image(s) ready for upload.`,\r\n-    });\r\n-  };\r\n-\r\n-  const removeImage = (index: number) => {\r\n-    setSelectedImages((prev) => prev.filter((_, i) => i !== index));\r\n-    setSelectedFiles((prev) => prev.filter((_, i) => i !== index));\r\n-  };\r\n-\r\n-  const handleNext = () => {\r\n-    if (step === 1) {\r\n-      if (\r\n-        !formData.brand ||\r\n-        !formData.model ||\r\n-        !formData.year ||\r\n-        !formData.condition\r\n-      ) {\r\n-        return toast({\r\n-          title: \"Missing information\",\r\n-          description: \"Please fill in all required fields.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-      }\r\n-    }\r\n-\r\n-    if (step === 2) {\r\n-      if (!formData.price || !formData.mileage) {\r\n-        return toast({\r\n-          title: \"Missing information\",\r\n-          description: \"Please fill in all required fields.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-      }\r\n-    }\r\n-\r\n-    setStep((prev) => prev + 1);\r\n-  };\r\n-\r\n-  //  Import from Facebook Marketplace\r\n-  const handleImportFromFacebook = async () => {\r\n-    if (!fbUrl.trim()) {\r\n-      return toast({\r\n-        title: \"Missing URL\",\r\n-        description: \"Paste a Facebook Marketplace car link first.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-\r\n-    setIsImportingFb(true);\r\n-\r\n-    try {\r\n-      const res = await axios.post<FacebookScrapeResult>(FB_SCRAPE_URL, {\r\n-        url: fbUrl.trim(),\r\n-      });\r\n-\r\n-      const data = res.data;\r\n-\r\n-      setFormData((prev) => ({\r\n-        ...prev,\r\n-        brand: data.brand ?? prev.brand,\r\n-        model: data.model ?? prev.model,\r\n-        year:\r\n-          data.year !== undefined && data.year !== null\r\n-            ? String(data.year)\r\n-            : prev.year,\r\n-        price:\r\n-          data.price !== undefined && data.price !== null\r\n-            ? String(data.price)\r\n-            : prev.price,\r\n-        mileage:\r\n-          data.mileage !== undefined && data.mileage !== null\r\n-            ? String(data.mileage)\r\n-            : prev.mileage,\r\n-        condition: (data.condition as any) ?? prev.condition,\r\n-        description: data.description ?? prev.description,\r\n-        platforms:\r\n-          data.platforms && data.platforms.length > 0\r\n-            ? data.platforms\r\n-            : prev.platforms.includes(\"facebook\")\r\n-            ? prev.platforms\r\n-            : [...prev.platforms, \"facebook\"],\r\n-      }));\r\n-\r\n-      // show imported image URLs as previews\r\n-      if (data.images?.length) {\r\n-        setSelectedImages((prevImgs) => [\r\n-          ...data.images!,\r\n-          ...prevImgs.filter((x) => !data.images!.includes(x)),\r\n-        ]);\r\n-\r\n-        toast({\r\n-          title: \"Facebook images imported\",\r\n-          description:\r\n-            \"Images were added as previews. Please upload at least one real image before listing.\",\r\n-        });\r\n-      }\r\n-\r\n-      toast({\r\n-        title: \"Imported from Facebook\",\r\n-        description: \"Fields auto-filled successfully.\",\r\n-      });\r\n-    } catch (err: unknown) {\r\n-      const message =\r\n-        err && typeof err === \"object\" && \"response\" in err\r\n-          ? (err as { response?: { data?: { message?: string } } }).response?.data\r\n-              ?.message || \"Failed to import Facebook listing.\"\r\n-          : \"Failed to import Facebook listing.\";\r\n-\r\n-      toast({\r\n-        title: \"Import failed\",\r\n-        description: message,\r\n-        variant: \"destructive\",\r\n-      });\r\n-    } finally {\r\n-      setIsImportingFb(false);\r\n-    }\r\n-  };\r\n-\r\n-  const handleSubmit = async () => {\r\n-    if (!formData.description || formData.platforms.length === 0) {\r\n-      return toast({\r\n-        title: \"Missing information\",\r\n-        description: \"Please complete all required fields.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-\r\n-    // still require real files because backend expects multipart images\r\n-    if (selectedFiles.length === 0) {\r\n-      return toast({\r\n-        title: \"Missing images\",\r\n-        description:\r\n-          \"Please upload at least one real image (Facebook previews don't count).\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-\r\n-    setIsSubmitting(true);\r\n-\r\n-    try {\r\n-      const fd = new FormData();\r\n-\r\n-      fd.append(\"brand\", formData.brand);\r\n-      fd.append(\"model\", formData.model);\r\n-      fd.append(\"year\", formData.year);\r\n-      fd.append(\"mileage\", formData.mileage);\r\n-      fd.append(\"price\", formData.price);\r\n-      fd.append(\"condition\", formData.condition);\r\n-      fd.append(\"description\", formData.description);\r\n-\r\n-      formData.platforms.forEach((p) => fd.append(\"platforms\", p));\r\n-      selectedFiles.forEach((file) => fd.append(\"images\", file));\r\n-\r\n-      await createCar(fd, user.token);\r\n-\r\n-      toast({\r\n-        title: \"Success!\",\r\n-        description: \"Your car has been listed successfully.\",\r\n-      });\r\n-\r\n-      navigate(\"/profile\");\r\n-    } catch (error) {\r\n-      toast({\r\n-        title: \"Error\",\r\n-        description:\r\n-          error instanceof Error ? error.message : \"Something went wrong.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-\r\n-    setIsSubmitting(false);\r\n-  };\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <Button\r\n-          variant=\"ghost\"\r\n-          onClick={() => navigate(-1)}\r\n-          className=\"mb-6 gap-2\"\r\n-        >\r\n-          <ArrowLeft className=\"h-4 w-4\" />\r\n-          Back\r\n-        </Button>\r\n-\r\n-        <div className=\"mx-auto max-w-2xl\">\r\n-          <div className=\"mb-8 text-center\">\r\n-            <h1 className=\"text-4xl font-bold\">Sell Your Car</h1>\r\n-            <p className=\"mt-2 text-muted-foreground\">Step {step} of 3</p>\r\n-          </div>\r\n-\r\n-          <div className=\"mb-8 flex gap-2\">\r\n-            {[1, 2, 3].map((s) => (\r\n-              <div\r\n-                key={s}\r\n-                className={`h-2 flex-1 rounded-full ${\r\n-                  s <= step ? \"bg-primary\" : \"bg-muted\"\r\n-                }`}\r\n-              />\r\n-            ))}\r\n-          </div>\r\n-\r\n-          <Card className=\"shadow-card\">\r\n-            {/* Step 1 */}\r\n-            {step === 1 && (\r\n-              <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Car Details</CardTitle>\r\n-                  <CardDescription>Tell us about your car</CardDescription>\r\n-                </CardHeader>\r\n-\r\n-                <CardContent className=\"space-y-5\">\r\n-                  {/*  Facebook Import Box */}\r\n-                  <div className=\"rounded-lg border bg-card p-4 space-y-3\">\r\n-                    <Label className=\"flex items-center gap-2\">\r\n-                      <Link2 className=\"h-4 w-4\" />\r\n-                      Import from Facebook Marketplace (optional)\r\n-                    </Label>\r\n-\r\n-                    <div className=\"flex flex-col sm:flex-row gap-2\">\r\n-                      <Input\r\n-                        value={fbUrl}\r\n-                        onChange={(e) => setFbUrl(e.target.value)}\r\n-                        placeholder=\"Paste Facebook Marketplace car link...\"\r\n-                      />\r\n-                      <Button\r\n-                        type=\"button\"\r\n-                        onClick={handleImportFromFacebook}\r\n-                        disabled={isImportingFb}\r\n-                        className=\"gap-2\"\r\n-                      >\r\n-                        {isImportingFb && (\r\n-                          <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n-                        )}\r\n-                        {isImportingFb ? \"Importing...\" : \"Import\"}\r\n-                      </Button>\r\n-                    </div>\r\n-\r\n-                    <p className=\"text-xs text-muted-foreground\">\r\n-                      This will auto-fill brand, model, year, price, mileage,\r\n-                      description, platforms, and preview images if available.\r\n-                    </p>\r\n-                  </div>\r\n-\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Brand *</Label>\r\n-                      <Input\r\n-                        value={formData.brand}\r\n-                        onChange={(e) =>\r\n-                          handleInputChange(\"brand\", e.target.value)\r\n-                        }\r\n-                        placeholder=\"e.g., Toyota\"\r\n-                      />\r\n-                    </div>\r\n-\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Model *</Label>\r\n-                      <Input\r\n-                        value={formData.model}\r\n-                        onChange={(e) =>\r\n-                          handleInputChange(\"model\", e.target.value)\r\n-                        }\r\n-                        placeholder=\"e.g., Camry\"\r\n-                      />\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Year *</Label>\r\n-                      <Input\r\n-                        type=\"number\"\r\n-                        value={formData.year}\r\n-                        onChange={(e) =>\r\n-                          handleInputChange(\"year\", e.target.value)\r\n-                        }\r\n-                        placeholder=\"2020\"\r\n-                      />\r\n-                    </div>\r\n-\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Condition *</Label>\r\n-                      <Select\r\n-                        value={formData.condition}\r\n-                        onValueChange={(value) =>\r\n-                          handleInputChange(\"condition\", value)\r\n-                        }\r\n-                      >\r\n-                        <SelectTrigger>\r\n-                          <SelectValue placeholder=\"Select condition\" />\r\n-                        </SelectTrigger>\r\n-                        <SelectContent>\r\n-                          <SelectItem value=\"new\">New</SelectItem>\r\n-                          <SelectItem value=\"used\">Used</SelectItem>\r\n-                          <SelectItem value=\"certified\">\r\n-                            Certified Pre-Owned\r\n-                          </SelectItem>\r\n-                        </SelectContent>\r\n-                      </Select>\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <Button onClick={handleNext} className=\"w-full\">\r\n-                    Continue\r\n-                  </Button>\r\n-                </CardContent>\r\n-              </>\r\n-            )}\r\n-\r\n-            {/* Step 2  Pricing */}\r\n-            {step === 2 && (\r\n-              <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Pricing</CardTitle>\r\n-                  <CardDescription>Set your price and mileage</CardDescription>\r\n-                </CardHeader>\r\n-\r\n-                <CardContent className=\"space-y-4\">\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Price ($) *</Label>\r\n-                      <Input\r\n-                        type=\"number\"\r\n-                        value={formData.price}\r\n-                        onChange={(e) =>\r\n-                          handleInputChange(\"price\", e.target.value)\r\n-                        }\r\n-                      />\r\n-                    </div>\r\n-\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Mileage (miles) *</Label>\r\n-                      <Input\r\n-                        type=\"number\"\r\n-                        value={formData.mileage}\r\n-                        onChange={(e) =>\r\n-                          handleInputChange(\"mileage\", e.target.value)\r\n-                        }\r\n-                      />\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <div className=\"flex gap-2\">\r\n-                    <Button\r\n-                      variant=\"outline\"\r\n-                      onClick={() => setStep(1)}\r\n-                      className=\"w-full\"\r\n-                    >\r\n-                      Back\r\n-                    </Button>\r\n-                    <Button onClick={handleNext} className=\"w-full\">\r\n-                      Continue\r\n-                    </Button>\r\n-                  </div>\r\n-                </CardContent>\r\n-              </>\r\n-            )}\r\n-\r\n-            {/* Step 3 */}\r\n-            {step === 3 && (\r\n-              <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Description & Platforms</CardTitle>\r\n-                  <CardDescription>\r\n-                    Add details and where to list\r\n-                  </CardDescription>\r\n-                </CardHeader>\r\n-\r\n-                <CardContent className=\"space-y-6\">\r\n-                  <div className=\"space-y-2\">\r\n-                    <Label>Description *</Label>\r\n-                    <Textarea\r\n-                      rows={4}\r\n-                      value={formData.description}\r\n-                      onChange={(e) =>\r\n-                        handleInputChange(\"description\", e.target.value)\r\n-                      }\r\n-                      placeholder=\"Describe your car...\"\r\n-                    />\r\n-                  </div>\r\n-\r\n-                  <div className=\"space-y-3\">\r\n-                    <Label>List on Platforms *</Label>\r\n-                    <div className=\"space-y-3 rounded-lg border p-4\">\r\n-                      {platforms.map((platform) => (\r\n-                        <div\r\n-                          key={platform.id}\r\n-                          className=\"flex items-center space-x-2\"\r\n-                        >\r\n-                          <Checkbox\r\n-                            checked={formData.platforms.includes(platform.id)}\r\n-                            onCheckedChange={() =>\r\n-                              handlePlatformToggle(platform.id)\r\n-                            }\r\n-                          />\r\n-                          <label className=\"text-sm font-medium\">\r\n-                            {platform.name}\r\n-                          </label>\r\n-                        </div>\r\n-                      ))}\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <div className=\"space-y-3\">\r\n-                    <Label>Upload Images *</Label>\r\n-\r\n-                    <label\r\n-                      htmlFor=\"image-upload\"\r\n-                      className=\"flex cursor-pointer items-center justify-center rounded-lg border-2 border-dashed p-8 text-center hover:border-primary hover:bg-primary/5\"\r\n-                    >\r\n-                      <div>\r\n-                        <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n-                        <p className=\"text-sm\">Click to upload car images</p>\r\n-                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n-                          Upload up to 10 images\r\n-                        </p>\r\n-                      </div>\r\n-                    </label>\r\n-\r\n-                    <input\r\n-                      id=\"image-upload\"\r\n-                      type=\"file\"\r\n-                      accept=\"image/*\"\r\n-                      multiple\r\n-                      className=\"hidden\"\r\n-                      onChange={handleImageUpload}\r\n-                    />\r\n-\r\n-                    {selectedImages.length > 0 && (\r\n-                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n-                        {selectedImages.map((img, index) => (\r\n-                          <div key={index} className=\"relative group\">\r\n-                            <img\r\n-                              src={img}\r\n-                              className=\"h-24 w-full rounded-lg object-cover\"\r\n-                              alt={`car-${index}`}\r\n-                            />\r\n-                            <button\r\n-                              type=\"button\"\r\n-                              onClick={() => removeImage(index)}\r\n-                              className=\"absolute -top-2 -right-2 h-6 w-6 flex items-center justify-center bg-destructive text-white rounded-full opacity-0 group-hover:opacity-100\"\r\n-                            >\r\n-                              <X className=\"h-4 w-4\" />\r\n-                            </button>\r\n-                          </div>\r\n-                        ))}\r\n-                      </div>\r\n-                    )}\r\n-                  </div>\r\n-\r\n-                  <div className=\"flex gap-2\">\r\n-                    <Button\r\n-                      variant=\"outline\"\r\n-                      onClick={() => setStep(2)}\r\n-                      className=\"w-full\"\r\n-                    >\r\n-                      Back\r\n-                    </Button>\r\n-                    <Button\r\n-                      onClick={handleSubmit}\r\n-                      disabled={isSubmitting}\r\n-                      className=\"w-full\"\r\n-                    >\r\n-                      {isSubmitting ? \"Listing...\" : \"List Car\"}\r\n-                    </Button>\r\n-                  </div>\r\n-                </CardContent>\r\n-              </>\r\n-            )}\r\n-          </Card>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default SellCar;\r\n"
                },
                {
                    "date": 1764509546399,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,8 +24,9 @@\n import { toast } from \"@/hooks/use-toast\";\r\n import { ArrowLeft, Upload, X, Link2, Loader2 } from \"lucide-react\";\r\n import { createCar } from \"@/api/cars\";\r\n import axios from \"axios\";\r\n+import { predictCarPrice } from \"@/services/aiService\"; //  NEW\r\n \r\n const platforms = [\r\n   { id: \"edmunds\", name: \"Edmunds\" },\r\n   { id: \"olx\", name: \"OLX\" },\r\n@@ -33,23 +34,19 @@\n   { id: \"autotrader\", name: \"AutoTrader\" },\r\n   { id: \"cars\", name: \"Cars.com\" },\r\n ];\r\n \r\n-//  CHANGE THIS if your backend route is different\r\n const FB_SCRAPE_URL = \"http://127.0.0.1:5000/api/scrape/facebook\";\r\n \r\n-// Expected response shape from backend scraper\r\n type FacebookScrapeResult = Partial<{\r\n   brand: string;\r\n   model: string;\r\n   year: number | string;\r\n   price: number | string;\r\n   mileage: number | string;\r\n   condition: \"new\" | \"used\" | \"certified\" | string;\r\n   description: string;\r\n-  // images as URLs from Facebook\r\n   images: string[];\r\n-  // optional platforms array from scraper\r\n   platforms: string[];\r\n }>;\r\n \r\n const SellCar = () => {\r\n@@ -72,30 +69,31 @@\n \r\n   const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n   const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\r\n \r\n-  //  Facebook import state\r\n   const [fbUrl, setFbUrl] = useState(\"\");\r\n   const [isImportingFb, setIsImportingFb] = useState(false);\r\n \r\n+  //  NEW AI States\r\n+  const [aiLoading, setAiLoading] = useState(false);\r\n+  const [aiResult, setAiResult] = useState<any>(null);\r\n+\r\n   useEffect(() => {\r\n     if (!user) navigate(\"/auth?mode=login\");\r\n   }, [user, navigate]);\r\n \r\n   if (!user) return null;\r\n \r\n-  const handleInputChange = (field: string, value: string) => {\r\n+  const handleInputChange = (field: string, value: string) =>\r\n     setFormData((prev) => ({ ...prev, [field]: value }));\r\n-  };\r\n \r\n-  const handlePlatformToggle = (platformId: string) => {\r\n+  const handlePlatformToggle = (platformId: string) =>\r\n     setFormData((prev) => ({\r\n       ...prev,\r\n       platforms: prev.platforms.includes(platformId)\r\n         ? prev.platforms.filter((p) => p !== platformId)\r\n         : [...prev.platforms, platformId],\r\n     }));\r\n-  };\r\n \r\n   const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n     const files = e.target.files;\r\n     if (!files) return;\r\n@@ -116,38 +114,57 @@\n     setSelectedImages((prev) => prev.filter((_, i) => i !== index));\r\n     setSelectedFiles((prev) => prev.filter((_, i) => i !== index));\r\n   };\r\n \r\n-  const handleNext = () => {\r\n-    if (step === 1) {\r\n-      if (\r\n-        !formData.brand ||\r\n-        !formData.model ||\r\n-        !formData.year ||\r\n-        !formData.condition\r\n-      ) {\r\n-        return toast({\r\n-          title: \"Missing information\",\r\n-          description: \"Please fill in all required fields.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-      }\r\n+  // ------------------------------------\r\n+  //  AI Price Prediction Handler\r\n+  // ------------------------------------\r\n+  const handleAIPredict = async () => {\r\n+    if (!formData.brand || !formData.model || !formData.year || !formData.mileage || !formData.condition) {\r\n+      return toast({\r\n+        title: \"Missing information\",\r\n+        description: \"Please fill car details first (brand, model, year, mileage).\",\r\n+        variant: \"destructive\",\r\n+      });\r\n     }\r\n \r\n-    if (step === 2) {\r\n-      if (!formData.price || !formData.mileage) {\r\n-        return toast({\r\n-          title: \"Missing information\",\r\n-          description: \"Please fill in all required fields.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-      }\r\n+    try {\r\n+      setAiLoading(true);\r\n+\r\n+      const result = await predictCarPrice({\r\n+        brand: formData.brand,\r\n+        model: formData.model,\r\n+        year: formData.year,\r\n+        mileage: formData.mileage,\r\n+        condition: formData.condition,\r\n+      });\r\n+\r\n+      setAiResult(result);\r\n+\r\n+      // Autofill recommended price\r\n+      setFormData((prev) => ({\r\n+        ...prev,\r\n+        price: result.recommendedPrice,\r\n+      }));\r\n+\r\n+      toast({\r\n+        title: \"AI Price Estimated\",\r\n+        description: \"A smart price recommendation has been generated.\",\r\n+      });\r\n+    } catch (error) {\r\n+      toast({\r\n+        title: \"AI Error\",\r\n+        description: \"Failed to predict price. Please try again.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    } finally {\r\n+      setAiLoading(false);\r\n     }\r\n-\r\n-    setStep((prev) => prev + 1);\r\n   };\r\n \r\n-  //  Import from Facebook Marketplace\r\n+  // ------------------------------------\r\n+  // Facebook Import Handler\r\n+  // ------------------------------------\r\n   const handleImportFromFacebook = async () => {\r\n     if (!fbUrl.trim()) {\r\n       return toast({\r\n         title: \"Missing URL\",\r\n@@ -168,27 +185,17 @@\n       setFormData((prev) => ({\r\n         ...prev,\r\n         brand: data.brand ?? prev.brand,\r\n         model: data.model ?? prev.model,\r\n-        year:\r\n-          data.year !== undefined && data.year !== null\r\n-            ? String(data.year)\r\n-            : prev.year,\r\n-        price:\r\n-          data.price !== undefined && data.price !== null\r\n-            ? String(data.price)\r\n-            : prev.price,\r\n-        mileage:\r\n-          data.mileage !== undefined && data.mileage !== null\r\n-            ? String(data.mileage)\r\n-            : prev.mileage,\r\n+        year: data.year ? String(data.year) : prev.year,\r\n+        price: data.price ? String(data.price) : prev.price,\r\n+        mileage: data.mileage ? String(data.mileage) : prev.mileage,\r\n         condition:\r\n-  data.condition === \"new\" ||\r\n-  data.condition === \"used\" ||\r\n-  data.condition === \"certified\"\r\n-    ? data.condition\r\n-    : prev.condition,\r\n-\r\n+          data.condition === \"new\" ||\r\n+          data.condition === \"used\" ||\r\n+          data.condition === \"certified\"\r\n+            ? data.condition\r\n+            : prev.condition,\r\n         description: data.description ?? prev.description,\r\n         platforms:\r\n           data.platforms && data.platforms.length > 0\r\n             ? data.platforms\r\n@@ -196,58 +203,52 @@\n             ? prev.platforms\r\n             : [...prev.platforms, \"facebook\"],\r\n       }));\r\n \r\n-      // show imported image URLs as previews\r\n+      // imported image previews\r\n       if (data.images?.length) {\r\n         setSelectedImages((prevImgs) => [\r\n           ...data.images!,\r\n           ...prevImgs.filter((x) => !data.images!.includes(x)),\r\n         ]);\r\n \r\n         toast({\r\n           title: \"Facebook images imported\",\r\n-          description:\r\n-            \"Images were added as previews. Please upload at least one real image before listing.\",\r\n+          description: \"Preview images added.\",\r\n         });\r\n       }\r\n \r\n       toast({\r\n-        title: \"Imported from Facebook\",\r\n-        description: \"Fields auto-filled successfully.\",\r\n+        title: \"Imported successfully\",\r\n+        description: \"Fields auto-filled from Facebook.\",\r\n       });\r\n-    } catch (err: unknown) {\r\n-      const message =\r\n-        err && typeof err === \"object\" && \"response\" in err\r\n-          ? (err as { response?: { data?: { message?: string } } }).response?.data\r\n-              ?.message || \"Failed to import Facebook listing.\"\r\n-          : \"Failed to import Facebook listing.\";\r\n-\r\n+    } catch (err) {\r\n       toast({\r\n         title: \"Import failed\",\r\n-        description: message,\r\n+        description: \"Could not import from Facebook.\",\r\n         variant: \"destructive\",\r\n       });\r\n     } finally {\r\n       setIsImportingFb(false);\r\n     }\r\n   };\r\n \r\n+  // ------------------------------------\r\n+  // Submit Car Listing\r\n+  // ------------------------------------\r\n   const handleSubmit = async () => {\r\n     if (!formData.description || formData.platforms.length === 0) {\r\n       return toast({\r\n         title: \"Missing information\",\r\n-        description: \"Please complete all required fields.\",\r\n+        description: \"Please fill all required fields.\",\r\n         variant: \"destructive\",\r\n       });\r\n     }\r\n \r\n-    // still require real files because backend expects multipart images\r\n     if (selectedFiles.length === 0) {\r\n       return toast({\r\n         title: \"Missing images\",\r\n-        description:\r\n-          \"Please upload at least one real image (Facebook previews don't count).\",\r\n+        description: \"Please upload at least one real image.\",\r\n         variant: \"destructive\",\r\n       });\r\n     }\r\n \r\n@@ -255,39 +256,41 @@\n \r\n     try {\r\n       const fd = new FormData();\r\n \r\n-      fd.append(\"brand\", formData.brand);\r\n-      fd.append(\"model\", formData.model);\r\n-      fd.append(\"year\", formData.year);\r\n-      fd.append(\"mileage\", formData.mileage);\r\n-      fd.append(\"price\", formData.price);\r\n-      fd.append(\"condition\", formData.condition);\r\n-      fd.append(\"description\", formData.description);\r\n+      Object.entries(formData).forEach(([key, value]) => {\r\n+        if (key === \"platforms\") {\r\n+          formData.platforms.forEach((p) => fd.append(\"platforms\", p));\r\n+        } else {\r\n+          fd.append(key, value as string);\r\n+        }\r\n+      });\r\n \r\n-      formData.platforms.forEach((p) => fd.append(\"platforms\", p));\r\n       selectedFiles.forEach((file) => fd.append(\"images\", file));\r\n \r\n       await createCar(fd, user.token);\r\n \r\n       toast({\r\n         title: \"Success!\",\r\n-        description: \"Your car has been listed successfully.\",\r\n+        description: \"Your car has been listed.\",\r\n       });\r\n \r\n       navigate(\"/profile\");\r\n     } catch (error) {\r\n       toast({\r\n         title: \"Error\",\r\n-        description:\r\n-          error instanceof Error ? error.message : \"Something went wrong.\",\r\n+        description: \"Something went wrong.\",\r\n         variant: \"destructive\",\r\n       });\r\n     }\r\n \r\n     setIsSubmitting(false);\r\n   };\r\n \r\n+  // ------------------------------------\r\n+  // UI & Steps Rendering\r\n+  // ------------------------------------\r\n+\r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n         <Button\r\n@@ -316,18 +319,19 @@\n             ))}\r\n           </div>\r\n \r\n           <Card className=\"shadow-card\">\r\n-            {/* Step 1 */}\r\n+            {/* -------------- STEP 1 -------------- */}\r\n             {step === 1 && (\r\n               <>\r\n                 <CardHeader>\r\n                   <CardTitle>Car Details</CardTitle>\r\n                   <CardDescription>Tell us about your car</CardDescription>\r\n                 </CardHeader>\r\n \r\n                 <CardContent className=\"space-y-5\">\r\n-                  {/*  Facebook Import Box */}\r\n+\r\n+                  {/* FACEBOOK IMPORT */}\r\n                   <div className=\"rounded-lg border bg-card p-4 space-y-3\">\r\n                     <Label className=\"flex items-center gap-2\">\r\n                       <Link2 className=\"h-4 w-4\" />\r\n                       Import from Facebook Marketplace (optional)\r\n@@ -352,13 +356,13 @@\n                       </Button>\r\n                     </div>\r\n \r\n                     <p className=\"text-xs text-muted-foreground\">\r\n-                      This will auto-fill brand, model, year, price, mileage,\r\n-                      description, platforms, and preview images if available.\r\n+                      Auto-fills year, mileage, price, description, and images.\r\n                     </p>\r\n                   </div>\r\n \r\n+                  {/* BRAND / MODEL */}\r\n                   <div className=\"grid gap-4 md:grid-cols-2\">\r\n                     <div className=\"space-y-2\">\r\n                       <Label>Brand *</Label>\r\n                       <Input\r\n@@ -381,8 +385,9 @@\n                       />\r\n                     </div>\r\n                   </div>\r\n \r\n+                  {/* YEAR / CONDITION */}\r\n                   <div className=\"grid gap-4 md:grid-cols-2\">\r\n                     <div className=\"space-y-2\">\r\n                       <Label>Year *</Label>\r\n                       <Input\r\n@@ -416,16 +421,16 @@\n                       </Select>\r\n                     </div>\r\n                   </div>\r\n \r\n-                  <Button onClick={handleNext} className=\"w-full\">\r\n+                  <Button onClick={() => setStep(2)} className=\"w-full\">\r\n                     Continue\r\n                   </Button>\r\n                 </CardContent>\r\n               </>\r\n             )}\r\n \r\n-            {/* Step 2  Pricing */}\r\n+            {/* -------------- STEP 2 -------------- */}\r\n             {step === 2 && (\r\n               <>\r\n                 <CardHeader>\r\n                   <CardTitle>Pricing</CardTitle>\r\n@@ -456,25 +461,60 @@\n                       />\r\n                     </div>\r\n                   </div>\r\n \r\n+                  {/*  AI PRICE PREDICTION BUTTON */}\r\n+                  <Button\r\n+                    type=\"button\"\r\n+                    onClick={handleAIPredict}\r\n+                    disabled={aiLoading}\r\n+                    className=\"w-full bg-green-600 hover:bg-green-700\"\r\n+                  >\r\n+                    {aiLoading ? (\r\n+                      <div className=\"flex items-center gap-2\">\r\n+                        <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n+                        Predicting Price...\r\n+                      </div>\r\n+                    ) : (\r\n+                      \"AI Predict Price\"\r\n+                    )}\r\n+                  </Button>\r\n+\r\n+                  {/* AI PRICE RESULT CARD */}\r\n+                  {aiResult && (\r\n+                    <div className=\"mt-4 p-4 rounded-lg border bg-muted/40 shadow-sm\">\r\n+                      <h3 className=\"text-lg font-semibold mb-2\">\r\n+                        AI Price Estimate\r\n+                      </h3>\r\n+\r\n+                      <p><strong>Min:</strong> ${aiResult.minPrice}</p>\r\n+                      <p><strong>Max:</strong> ${aiResult.maxPrice}</p>\r\n+                      <p><strong>Recommended:</strong> ${aiResult.recommendedPrice}</p>\r\n+\r\n+                      <p className=\"mt-2 text-gray-700\">\r\n+                        <strong>Market Summary:</strong><br />\r\n+                        {aiResult.marketSummary}\r\n+                      </p>\r\n+                    </div>\r\n+                  )}\r\n+\r\n                   <div className=\"flex gap-2\">\r\n                     <Button\r\n                       variant=\"outline\"\r\n                       onClick={() => setStep(1)}\r\n                       className=\"w-full\"\r\n                     >\r\n                       Back\r\n                     </Button>\r\n-                    <Button onClick={handleNext} className=\"w-full\">\r\n+                    <Button onClick={() => setStep(3)} className=\"w-full\">\r\n                       Continue\r\n                     </Button>\r\n                   </div>\r\n                 </CardContent>\r\n               </>\r\n             )}\r\n \r\n-            {/* Step 3 */}\r\n+            {/* -------------- STEP 3 -------------- */}\r\n             {step === 3 && (\r\n               <>\r\n                 <CardHeader>\r\n                   <CardTitle>Description & Platforms</CardTitle>\r\n@@ -483,8 +523,10 @@\n                   </CardDescription>\r\n                 </CardHeader>\r\n \r\n                 <CardContent className=\"space-y-6\">\r\n+\r\n+                  {/* DESCRIPTION */}\r\n                   <div className=\"space-y-2\">\r\n                     <Label>Description *</Label>\r\n                     <Textarea\r\n                       rows={4}\r\n@@ -495,8 +537,9 @@\n                       placeholder=\"Describe your car...\"\r\n                     />\r\n                   </div>\r\n \r\n+                  {/* PLATFORMS */}\r\n                   <div className=\"space-y-3\">\r\n                     <Label>List on Platforms *</Label>\r\n                     <div className=\"space-y-3 rounded-lg border p-4\">\r\n                       {platforms.map((platform) => (\r\n@@ -517,8 +560,9 @@\n                       ))}\r\n                     </div>\r\n                   </div>\r\n \r\n+                  {/* IMAGES */}\r\n                   <div className=\"space-y-3\">\r\n                     <Label>Upload Images *</Label>\r\n \r\n                     <label\r\n@@ -564,8 +608,9 @@\n                       </div>\r\n                     )}\r\n                   </div>\r\n \r\n+                  {/* SUBMIT */}\r\n                   <div className=\"flex gap-2\">\r\n                     <Button\r\n                       variant=\"outline\"\r\n                       onClick={() => setStep(2)}\r\n"
                },
                {
                    "date": 1764509583454,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,648 @@\n+// src/pages/SellCar.tsx\r\n+import { useState, useEffect } from \"react\";\r\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useAuth } from \"@/contexts/AuthContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Input } from \"@/components/ui/input\";\r\n+import { Label } from \"@/components/ui/label\";\r\n+import { Textarea } from \"@/components/ui/textarea\";\r\n+import {\r\n+  Card,\r\n+  CardContent,\r\n+  CardDescription,\r\n+  CardHeader,\r\n+  CardTitle,\r\n+} from \"@/components/ui/card\";\r\n+import {\r\n+  Select,\r\n+  SelectContent,\r\n+  SelectItem,\r\n+  SelectTrigger,\r\n+  SelectValue,\r\n+} from \"@/components/ui/select\";\r\n+import { Checkbox } from \"@/components/ui/checkbox\";\r\n+import { toast } from \"@/hooks/use-toast\";\r\n+import { ArrowLeft, Upload, X, Link2, Loader2 } from \"lucide-react\";\r\n+import { createCar } from \"@/api/cars\";\r\n+import axios from \"axios\";\r\n+import { predictCarPrice } from \"@/services/aiService\"; //  NEW\r\n+\r\n+const platforms = [\r\n+  { id: \"edmunds\", name: \"Edmunds\" },\r\n+  { id: \"olx\", name: \"OLX\" },\r\n+  { id: \"facebook\", name: \"Facebook Marketplace\" },\r\n+  { id: \"autotrader\", name: \"AutoTrader\" },\r\n+  { id: \"cars\", name: \"Cars.com\" },\r\n+];\r\n+\r\n+const FB_SCRAPE_URL = \"http://127.0.0.1:5000/api/scrape/facebook\";\r\n+\r\n+type FacebookScrapeResult = Partial<{\r\n+  brand: string;\r\n+  model: string;\r\n+  year: number | string;\r\n+  price: number | string;\r\n+  mileage: number | string;\r\n+  condition: \"new\" | \"used\" | \"certified\" | string;\r\n+  description: string;\r\n+  images: string[];\r\n+  platforms: string[];\r\n+}>;\r\n+\r\n+const SellCar = () => {\r\n+  const { user } = useAuth();\r\n+  const navigate = useNavigate();\r\n+\r\n+  const [step, setStep] = useState(1);\r\n+  const [isSubmitting, setIsSubmitting] = useState(false);\r\n+\r\n+  const [formData, setFormData] = useState({\r\n+    brand: \"\",\r\n+    model: \"\",\r\n+    year: \"\",\r\n+    mileage: \"\",\r\n+    price: \"\",\r\n+    condition: \"\",\r\n+    description: \"\",\r\n+    platforms: [] as string[],\r\n+  });\r\n+\r\n+  const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n+  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\r\n+\r\n+  const [fbUrl, setFbUrl] = useState(\"\");\r\n+  const [isImportingFb, setIsImportingFb] = useState(false);\r\n+\r\n+// Type for AI response\r\n+type AiPriceResult = {\r\n+  minPrice: number;\r\n+  maxPrice: number;\r\n+  recommendedPrice: number;\r\n+  marketSummary: string;\r\n+};\r\n+\r\n+// AI States\r\n+const [aiLoading, setAiLoading] = useState(false);\r\n+const [aiResult, setAiResult] = useState<AiPriceResult | null>(null);\r\n+\r\n+\r\n+  useEffect(() => {\r\n+    if (!user) navigate(\"/auth?mode=login\");\r\n+  }, [user, navigate]);\r\n+\r\n+  if (!user) return null;\r\n+\r\n+  const handleInputChange = (field: string, value: string) =>\r\n+    setFormData((prev) => ({ ...prev, [field]: value }));\r\n+\r\n+  const handlePlatformToggle = (platformId: string) =>\r\n+    setFormData((prev) => ({\r\n+      ...prev,\r\n+      platforms: prev.platforms.includes(platformId)\r\n+        ? prev.platforms.filter((p) => p !== platformId)\r\n+        : [...prev.platforms, platformId],\r\n+    }));\r\n+\r\n+  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n+    const files = e.target.files;\r\n+    if (!files) return;\r\n+\r\n+    const newFiles = Array.from(files);\r\n+    setSelectedFiles((prev) => [...prev, ...newFiles]);\r\n+\r\n+    const previews = newFiles.map((file) => URL.createObjectURL(file));\r\n+    setSelectedImages((prev) => [...prev, ...previews]);\r\n+\r\n+    toast({\r\n+      title: \"Images added\",\r\n+      description: `${newFiles.length} image(s) ready for upload.`,\r\n+    });\r\n+  };\r\n+\r\n+  const removeImage = (index: number) => {\r\n+    setSelectedImages((prev) => prev.filter((_, i) => i !== index));\r\n+    setSelectedFiles((prev) => prev.filter((_, i) => i !== index));\r\n+  };\r\n+\r\n+  // ------------------------------------\r\n+  //  AI Price Prediction Handler\r\n+  // ------------------------------------\r\n+  const handleAIPredict = async () => {\r\n+    if (!formData.brand || !formData.model || !formData.year || !formData.mileage || !formData.condition) {\r\n+      return toast({\r\n+        title: \"Missing information\",\r\n+        description: \"Please fill car details first (brand, model, year, mileage).\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+\r\n+    try {\r\n+      setAiLoading(true);\r\n+\r\n+      const result = await predictCarPrice({\r\n+        brand: formData.brand,\r\n+        model: formData.model,\r\n+        year: formData.year,\r\n+        mileage: formData.mileage,\r\n+        condition: formData.condition,\r\n+      });\r\n+\r\n+      setAiResult(result);\r\n+\r\n+      // Autofill recommended price\r\n+      setFormData((prev) => ({\r\n+        ...prev,\r\n+        price: result.recommendedPrice,\r\n+      }));\r\n+\r\n+      toast({\r\n+        title: \"AI Price Estimated\",\r\n+        description: \"A smart price recommendation has been generated.\",\r\n+      });\r\n+    } catch (error) {\r\n+      toast({\r\n+        title: \"AI Error\",\r\n+        description: \"Failed to predict price. Please try again.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    } finally {\r\n+      setAiLoading(false);\r\n+    }\r\n+  };\r\n+\r\n+  // ------------------------------------\r\n+  // Facebook Import Handler\r\n+  // ------------------------------------\r\n+  const handleImportFromFacebook = async () => {\r\n+    if (!fbUrl.trim()) {\r\n+      return toast({\r\n+        title: \"Missing URL\",\r\n+        description: \"Paste a Facebook Marketplace car link first.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+\r\n+    setIsImportingFb(true);\r\n+\r\n+    try {\r\n+      const res = await axios.post<FacebookScrapeResult>(FB_SCRAPE_URL, {\r\n+        url: fbUrl.trim(),\r\n+      });\r\n+\r\n+      const data = res.data;\r\n+\r\n+      setFormData((prev) => ({\r\n+        ...prev,\r\n+        brand: data.brand ?? prev.brand,\r\n+        model: data.model ?? prev.model,\r\n+        year: data.year ? String(data.year) : prev.year,\r\n+        price: data.price ? String(data.price) : prev.price,\r\n+        mileage: data.mileage ? String(data.mileage) : prev.mileage,\r\n+        condition:\r\n+          data.condition === \"new\" ||\r\n+          data.condition === \"used\" ||\r\n+          data.condition === \"certified\"\r\n+            ? data.condition\r\n+            : prev.condition,\r\n+        description: data.description ?? prev.description,\r\n+        platforms:\r\n+          data.platforms && data.platforms.length > 0\r\n+            ? data.platforms\r\n+            : prev.platforms.includes(\"facebook\")\r\n+            ? prev.platforms\r\n+            : [...prev.platforms, \"facebook\"],\r\n+      }));\r\n+\r\n+      // imported image previews\r\n+      if (data.images?.length) {\r\n+        setSelectedImages((prevImgs) => [\r\n+          ...data.images!,\r\n+          ...prevImgs.filter((x) => !data.images!.includes(x)),\r\n+        ]);\r\n+\r\n+        toast({\r\n+          title: \"Facebook images imported\",\r\n+          description: \"Preview images added.\",\r\n+        });\r\n+      }\r\n+\r\n+      toast({\r\n+        title: \"Imported successfully\",\r\n+        description: \"Fields auto-filled from Facebook.\",\r\n+      });\r\n+    } catch (err) {\r\n+      toast({\r\n+        title: \"Import failed\",\r\n+        description: \"Could not import from Facebook.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    } finally {\r\n+      setIsImportingFb(false);\r\n+    }\r\n+  };\r\n+\r\n+  // ------------------------------------\r\n+  // Submit Car Listing\r\n+  // ------------------------------------\r\n+  const handleSubmit = async () => {\r\n+    if (!formData.description || formData.platforms.length === 0) {\r\n+      return toast({\r\n+        title: \"Missing information\",\r\n+        description: \"Please fill all required fields.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+\r\n+    if (selectedFiles.length === 0) {\r\n+      return toast({\r\n+        title: \"Missing images\",\r\n+        description: \"Please upload at least one real image.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+\r\n+    setIsSubmitting(true);\r\n+\r\n+    try {\r\n+      const fd = new FormData();\r\n+\r\n+      Object.entries(formData).forEach(([key, value]) => {\r\n+        if (key === \"platforms\") {\r\n+          formData.platforms.forEach((p) => fd.append(\"platforms\", p));\r\n+        } else {\r\n+          fd.append(key, value as string);\r\n+        }\r\n+      });\r\n+\r\n+      selectedFiles.forEach((file) => fd.append(\"images\", file));\r\n+\r\n+      await createCar(fd, user.token);\r\n+\r\n+      toast({\r\n+        title: \"Success!\",\r\n+        description: \"Your car has been listed.\",\r\n+      });\r\n+\r\n+      navigate(\"/profile\");\r\n+    } catch (error) {\r\n+      toast({\r\n+        title: \"Error\",\r\n+        description: \"Something went wrong.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+\r\n+    setIsSubmitting(false);\r\n+  };\r\n+\r\n+  // ------------------------------------\r\n+  // UI & Steps Rendering\r\n+  // ------------------------------------\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <Button\r\n+          variant=\"ghost\"\r\n+          onClick={() => navigate(-1)}\r\n+          className=\"mb-6 gap-2\"\r\n+        >\r\n+          <ArrowLeft className=\"h-4 w-4\" />\r\n+          Back\r\n+        </Button>\r\n+\r\n+        <div className=\"mx-auto max-w-2xl\">\r\n+          <div className=\"mb-8 text-center\">\r\n+            <h1 className=\"text-4xl font-bold\">Sell Your Car</h1>\r\n+            <p className=\"mt-2 text-muted-foreground\">Step {step} of 3</p>\r\n+          </div>\r\n+\r\n+          <div className=\"mb-8 flex gap-2\">\r\n+            {[1, 2, 3].map((s) => (\r\n+              <div\r\n+                key={s}\r\n+                className={`h-2 flex-1 rounded-full ${\r\n+                  s <= step ? \"bg-primary\" : \"bg-muted\"\r\n+                }`}\r\n+              />\r\n+            ))}\r\n+          </div>\r\n+\r\n+          <Card className=\"shadow-card\">\r\n+            {/* -------------- STEP 1 -------------- */}\r\n+            {step === 1 && (\r\n+              <>\r\n+                <CardHeader>\r\n+                  <CardTitle>Car Details</CardTitle>\r\n+                  <CardDescription>Tell us about your car</CardDescription>\r\n+                </CardHeader>\r\n+\r\n+                <CardContent className=\"space-y-5\">\r\n+\r\n+                  {/* FACEBOOK IMPORT */}\r\n+                  <div className=\"rounded-lg border bg-card p-4 space-y-3\">\r\n+                    <Label className=\"flex items-center gap-2\">\r\n+                      <Link2 className=\"h-4 w-4\" />\r\n+                      Import from Facebook Marketplace (optional)\r\n+                    </Label>\r\n+\r\n+                    <div className=\"flex flex-col sm:flex-row gap-2\">\r\n+                      <Input\r\n+                        value={fbUrl}\r\n+                        onChange={(e) => setFbUrl(e.target.value)}\r\n+                        placeholder=\"Paste Facebook Marketplace car link...\"\r\n+                      />\r\n+                      <Button\r\n+                        type=\"button\"\r\n+                        onClick={handleImportFromFacebook}\r\n+                        disabled={isImportingFb}\r\n+                        className=\"gap-2\"\r\n+                      >\r\n+                        {isImportingFb && (\r\n+                          <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n+                        )}\r\n+                        {isImportingFb ? \"Importing...\" : \"Import\"}\r\n+                      </Button>\r\n+                    </div>\r\n+\r\n+                    <p className=\"text-xs text-muted-foreground\">\r\n+                      Auto-fills year, mileage, price, description, and images.\r\n+                    </p>\r\n+                  </div>\r\n+\r\n+                  {/* BRAND / MODEL */}\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label>Brand *</Label>\r\n+                      <Input\r\n+                        value={formData.brand}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"brand\", e.target.value)\r\n+                        }\r\n+                        placeholder=\"e.g., Toyota\"\r\n+                      />\r\n+                    </div>\r\n+\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label>Model *</Label>\r\n+                      <Input\r\n+                        value={formData.model}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"model\", e.target.value)\r\n+                        }\r\n+                        placeholder=\"e.g., Camry\"\r\n+                      />\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  {/* YEAR / CONDITION */}\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label>Year *</Label>\r\n+                      <Input\r\n+                        type=\"number\"\r\n+                        value={formData.year}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"year\", e.target.value)\r\n+                        }\r\n+                        placeholder=\"2020\"\r\n+                      />\r\n+                    </div>\r\n+\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label>Condition *</Label>\r\n+                      <Select\r\n+                        value={formData.condition}\r\n+                        onValueChange={(value) =>\r\n+                          handleInputChange(\"condition\", value)\r\n+                        }\r\n+                      >\r\n+                        <SelectTrigger>\r\n+                          <SelectValue placeholder=\"Select condition\" />\r\n+                        </SelectTrigger>\r\n+                        <SelectContent>\r\n+                          <SelectItem value=\"new\">New</SelectItem>\r\n+                          <SelectItem value=\"used\">Used</SelectItem>\r\n+                          <SelectItem value=\"certified\">\r\n+                            Certified Pre-Owned\r\n+                          </SelectItem>\r\n+                        </SelectContent>\r\n+                      </Select>\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <Button onClick={() => setStep(2)} className=\"w-full\">\r\n+                    Continue\r\n+                  </Button>\r\n+                </CardContent>\r\n+              </>\r\n+            )}\r\n+\r\n+            {/* -------------- STEP 2 -------------- */}\r\n+            {step === 2 && (\r\n+              <>\r\n+                <CardHeader>\r\n+                  <CardTitle>Pricing</CardTitle>\r\n+                  <CardDescription>Set your price and mileage</CardDescription>\r\n+                </CardHeader>\r\n+\r\n+                <CardContent className=\"space-y-4\">\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label>Price ($) *</Label>\r\n+                      <Input\r\n+                        type=\"number\"\r\n+                        value={formData.price}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"price\", e.target.value)\r\n+                        }\r\n+                      />\r\n+                    </div>\r\n+\r\n+                    <div className=\"space-y-2\">\r\n+                      <Label>Mileage (miles) *</Label>\r\n+                      <Input\r\n+                        type=\"number\"\r\n+                        value={formData.mileage}\r\n+                        onChange={(e) =>\r\n+                          handleInputChange(\"mileage\", e.target.value)\r\n+                        }\r\n+                      />\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  {/*  AI PRICE PREDICTION BUTTON */}\r\n+                  <Button\r\n+                    type=\"button\"\r\n+                    onClick={handleAIPredict}\r\n+                    disabled={aiLoading}\r\n+                    className=\"w-full bg-green-600 hover:bg-green-700\"\r\n+                  >\r\n+                    {aiLoading ? (\r\n+                      <div className=\"flex items-center gap-2\">\r\n+                        <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n+                        Predicting Price...\r\n+                      </div>\r\n+                    ) : (\r\n+                      \"AI Predict Price\"\r\n+                    )}\r\n+                  </Button>\r\n+\r\n+                  {/* AI PRICE RESULT CARD */}\r\n+                  {aiResult && (\r\n+                    <div className=\"mt-4 p-4 rounded-lg border bg-muted/40 shadow-sm\">\r\n+                      <h3 className=\"text-lg font-semibold mb-2\">\r\n+                        AI Price Estimate\r\n+                      </h3>\r\n+\r\n+                      <p><strong>Min:</strong> ${aiResult.minPrice}</p>\r\n+                      <p><strong>Max:</strong> ${aiResult.maxPrice}</p>\r\n+                      <p><strong>Recommended:</strong> ${aiResult.recommendedPrice}</p>\r\n+\r\n+                      <p className=\"mt-2 text-gray-700\">\r\n+                        <strong>Market Summary:</strong><br />\r\n+                        {aiResult.marketSummary}\r\n+                      </p>\r\n+                    </div>\r\n+                  )}\r\n+\r\n+                  <div className=\"flex gap-2\">\r\n+                    <Button\r\n+                      variant=\"outline\"\r\n+                      onClick={() => setStep(1)}\r\n+                      className=\"w-full\"\r\n+                    >\r\n+                      Back\r\n+                    </Button>\r\n+                    <Button onClick={() => setStep(3)} className=\"w-full\">\r\n+                      Continue\r\n+                    </Button>\r\n+                  </div>\r\n+                </CardContent>\r\n+              </>\r\n+            )}\r\n+\r\n+            {/* -------------- STEP 3 -------------- */}\r\n+            {step === 3 && (\r\n+              <>\r\n+                <CardHeader>\r\n+                  <CardTitle>Description & Platforms</CardTitle>\r\n+                  <CardDescription>\r\n+                    Add details and where to list\r\n+                  </CardDescription>\r\n+                </CardHeader>\r\n+\r\n+                <CardContent className=\"space-y-6\">\r\n+\r\n+                  {/* DESCRIPTION */}\r\n+                  <div className=\"space-y-2\">\r\n+                    <Label>Description *</Label>\r\n+                    <Textarea\r\n+                      rows={4}\r\n+                      value={formData.description}\r\n+                      onChange={(e) =>\r\n+                        handleInputChange(\"description\", e.target.value)\r\n+                      }\r\n+                      placeholder=\"Describe your car...\"\r\n+                    />\r\n+                  </div>\r\n+\r\n+                  {/* PLATFORMS */}\r\n+                  <div className=\"space-y-3\">\r\n+                    <Label>List on Platforms *</Label>\r\n+                    <div className=\"space-y-3 rounded-lg border p-4\">\r\n+                      {platforms.map((platform) => (\r\n+                        <div\r\n+                          key={platform.id}\r\n+                          className=\"flex items-center space-x-2\"\r\n+                        >\r\n+                          <Checkbox\r\n+                            checked={formData.platforms.includes(platform.id)}\r\n+                            onCheckedChange={() =>\r\n+                              handlePlatformToggle(platform.id)\r\n+                            }\r\n+                          />\r\n+                          <label className=\"text-sm font-medium\">\r\n+                            {platform.name}\r\n+                          </label>\r\n+                        </div>\r\n+                      ))}\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  {/* IMAGES */}\r\n+                  <div className=\"space-y-3\">\r\n+                    <Label>Upload Images *</Label>\r\n+\r\n+                    <label\r\n+                      htmlFor=\"image-upload\"\r\n+                      className=\"flex cursor-pointer items-center justify-center rounded-lg border-2 border-dashed p-8 text-center hover:border-primary hover:bg-primary/5\"\r\n+                    >\r\n+                      <div>\r\n+                        <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n+                        <p className=\"text-sm\">Click to upload car images</p>\r\n+                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n+                          Upload up to 10 images\r\n+                        </p>\r\n+                      </div>\r\n+                    </label>\r\n+\r\n+                    <input\r\n+                      id=\"image-upload\"\r\n+                      type=\"file\"\r\n+                      accept=\"image/*\"\r\n+                      multiple\r\n+                      className=\"hidden\"\r\n+                      onChange={handleImageUpload}\r\n+                    />\r\n+\r\n+                    {selectedImages.length > 0 && (\r\n+                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n+                        {selectedImages.map((img, index) => (\r\n+                          <div key={index} className=\"relative group\">\r\n+                            <img\r\n+                              src={img}\r\n+                              className=\"h-24 w-full rounded-lg object-cover\"\r\n+                              alt={`car-${index}`}\r\n+                            />\r\n+                            <button\r\n+                              type=\"button\"\r\n+                              onClick={() => removeImage(index)}\r\n+                              className=\"absolute -top-2 -right-2 h-6 w-6 flex items-center justify-center bg-destructive text-white rounded-full opacity-0 group-hover:opacity-100\"\r\n+                            >\r\n+                              <X className=\"h-4 w-4\" />\r\n+                            </button>\r\n+                          </div>\r\n+                        ))}\r\n+                      </div>\r\n+                    )}\r\n+                  </div>\r\n+\r\n+                  {/* SUBMIT */}\r\n+                  <div className=\"flex gap-2\">\r\n+                    <Button\r\n+                      variant=\"outline\"\r\n+                      onClick={() => setStep(2)}\r\n+                      className=\"w-full\"\r\n+                    >\r\n+                      Back\r\n+                    </Button>\r\n+                    <Button\r\n+                      onClick={handleSubmit}\r\n+                      disabled={isSubmitting}\r\n+                      className=\"w-full\"\r\n+                    >\r\n+                      {isSubmitting ? \"Listing...\" : \"List Car\"}\r\n+                    </Button>\r\n+                  </div>\r\n+                </CardContent>\r\n+              </>\r\n+            )}\r\n+          </Card>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default SellCar;\r\n"
                },
                {
                    "date": 1764509785159,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -149,13 +149,14 @@\n \r\n       setAiResult(result);\r\n \r\n       // Autofill recommended price\r\n-      setFormData((prev) => ({\r\n-        ...prev,\r\n-        price: result.recommendedPrice,\r\n-      }));\r\n+     setFormData((prev) => ({\r\n+  ...prev,\r\n+  price: String(result.recommendedPrice), //  FIXED\r\n+}));\r\n \r\n+\r\n       toast({\r\n         title: \"AI Price Estimated\",\r\n         description: \"A smart price recommendation has been generated.\",\r\n       });\r\n"
                },
                {
                    "date": 1764594365017,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,32 +1,45 @@\n-// src/pages/SellCar.tsx\r\n+// src/pages/SellCar.tsx (MOBILE OPTIMIZED)\r\n+\r\n import { useState, useEffect } from \"react\";\r\n import { useNavigate } from \"react-router-dom\";\r\n import { useAuth } from \"@/contexts/AuthContext\";\r\n+\r\n import { Button } from \"@/components/ui/button\";\r\n import { Input } from \"@/components/ui/input\";\r\n import { Label } from \"@/components/ui/label\";\r\n import { Textarea } from \"@/components/ui/textarea\";\r\n+\r\n import {\r\n   Card,\r\n   CardContent,\r\n   CardDescription,\r\n   CardHeader,\r\n   CardTitle,\r\n } from \"@/components/ui/card\";\r\n+\r\n import {\r\n   Select,\r\n   SelectContent,\r\n   SelectItem,\r\n   SelectTrigger,\r\n   SelectValue,\r\n } from \"@/components/ui/select\";\r\n+\r\n import { Checkbox } from \"@/components/ui/checkbox\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n-import { ArrowLeft, Upload, X, Link2, Loader2 } from \"lucide-react\";\r\n+\r\n+import {\r\n+  ArrowLeft,\r\n+  Upload,\r\n+  X,\r\n+  Link2,\r\n+  Loader2,\r\n+} from \"lucide-react\";\r\n+\r\n import { createCar } from \"@/api/cars\";\r\n import axios from \"axios\";\r\n-import { predictCarPrice } from \"@/services/aiService\"; //  NEW\r\n+import { predictCarPrice } from \"@/services/aiService\";\r\n \r\n const platforms = [\r\n   { id: \"edmunds\", name: \"Edmunds\" },\r\n   { id: \"olx\", name: \"OLX\" },\r\n@@ -48,657 +61,15 @@\n   images: string[];\r\n   platforms: string[];\r\n }>;\r\n \r\n-const SellCar = () => {\r\n-  const { user } = useAuth();\r\n-  const navigate = useNavigate();\r\n-\r\n-  const [step, setStep] = useState(1);\r\n-  const [isSubmitting, setIsSubmitting] = useState(false);\r\n-\r\n-  const [formData, setFormData] = useState({\r\n-    brand: \"\",\r\n-    model: \"\",\r\n-    year: \"\",\r\n-    mileage: \"\",\r\n-    price: \"\",\r\n-    condition: \"\",\r\n-    description: \"\",\r\n-    platforms: [] as string[],\r\n-  });\r\n-\r\n-  const [selectedImages, setSelectedImages] = useState<string[]>([]);\r\n-  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\r\n-\r\n-  const [fbUrl, setFbUrl] = useState(\"\");\r\n-  const [isImportingFb, setIsImportingFb] = useState(false);\r\n-\r\n-// Type for AI response\r\n type AiPriceResult = {\r\n   minPrice: number;\r\n   maxPrice: number;\r\n   recommendedPrice: number;\r\n   marketSummary: string;\r\n };\r\n \r\n-// AI States\r\n-const [aiLoading, setAiLoading] = useState(false);\r\n-const [aiResult, setAiResult] = useState<AiPriceResult | null>(null);\r\n-\r\n-\r\n-  useEffect(() => {\r\n-    if (!user) navigate(\"/auth?mode=login\");\r\n-  }, [user, navigate]);\r\n-\r\n-  if (!user) return null;\r\n-\r\n-  const handleInputChange = (field: string, value: string) =>\r\n-    setFormData((prev) => ({ ...prev, [field]: value }));\r\n-\r\n-  const handlePlatformToggle = (platformId: string) =>\r\n-    setFormData((prev) => ({\r\n-      ...prev,\r\n-      platforms: prev.platforms.includes(platformId)\r\n-        ? prev.platforms.filter((p) => p !== platformId)\r\n-        : [...prev.platforms, platformId],\r\n-    }));\r\n-\r\n-  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n-    const files = e.target.files;\r\n-    if (!files) return;\r\n-\r\n-    const newFiles = Array.from(files);\r\n-    setSelectedFiles((prev) => [...prev, ...newFiles]);\r\n-\r\n-    const previews = newFiles.map((file) => URL.createObjectURL(file));\r\n-    setSelectedImages((prev) => [...prev, ...previews]);\r\n-\r\n-    toast({\r\n-      title: \"Images added\",\r\n-      description: `${newFiles.length} image(s) ready for upload.`,\r\n-    });\r\n-  };\r\n-\r\n-  const removeImage = (index: number) => {\r\n-    setSelectedImages((prev) => prev.filter((_, i) => i !== index));\r\n-    setSelectedFiles((prev) => prev.filter((_, i) => i !== index));\r\n-  };\r\n-\r\n-  // ------------------------------------\r\n-  //  AI Price Prediction Handler\r\n-  // ------------------------------------\r\n-  const handleAIPredict = async () => {\r\n-    if (!formData.brand || !formData.model || !formData.year || !formData.mileage || !formData.condition) {\r\n-      return toast({\r\n-        title: \"Missing information\",\r\n-        description: \"Please fill car details first (brand, model, year, mileage).\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-\r\n-    try {\r\n-      setAiLoading(true);\r\n-\r\n-      const result = await predictCarPrice({\r\n-        brand: formData.brand,\r\n-        model: formData.model,\r\n-        year: formData.year,\r\n-        mileage: formData.mileage,\r\n-        condition: formData.condition,\r\n-      });\r\n-\r\n-      setAiResult(result);\r\n-\r\n-      // Autofill recommended price\r\n-     setFormData((prev) => ({\r\n-  ...prev,\r\n-  price: String(result.recommendedPrice), //  FIXED\r\n-}));\r\n-\r\n-\r\n-      toast({\r\n-        title: \"AI Price Estimated\",\r\n-        description: \"A smart price recommendation has been generated.\",\r\n-      });\r\n-    } catch (error) {\r\n-      toast({\r\n-        title: \"AI Error\",\r\n-        description: \"Failed to predict price. Please try again.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    } finally {\r\n-      setAiLoading(false);\r\n-    }\r\n-  };\r\n-\r\n-  // ------------------------------------\r\n-  // Facebook Import Handler\r\n-  // ------------------------------------\r\n-  const handleImportFromFacebook = async () => {\r\n-    if (!fbUrl.trim()) {\r\n-      return toast({\r\n-        title: \"Missing URL\",\r\n-        description: \"Paste a Facebook Marketplace car link first.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-\r\n-    setIsImportingFb(true);\r\n-\r\n-    try {\r\n-      const res = await axios.post<FacebookScrapeResult>(FB_SCRAPE_URL, {\r\n-        url: fbUrl.trim(),\r\n-      });\r\n-\r\n-      const data = res.data;\r\n-\r\n-      setFormData((prev) => ({\r\n-        ...prev,\r\n-        brand: data.brand ?? prev.brand,\r\n-        model: data.model ?? prev.model,\r\n-        year: data.year ? String(data.year) : prev.year,\r\n-        price: data.price ? String(data.price) : prev.price,\r\n-        mileage: data.mileage ? String(data.mileage) : prev.mileage,\r\n-        condition:\r\n-          data.condition === \"new\" ||\r\n-          data.condition === \"used\" ||\r\n-          data.condition === \"certified\"\r\n-            ? data.condition\r\n-            : prev.condition,\r\n-        description: data.description ?? prev.description,\r\n-        platforms:\r\n-          data.platforms && data.platforms.length > 0\r\n-            ? data.platforms\r\n-            : prev.platforms.includes(\"facebook\")\r\n-            ? prev.platforms\r\n-            : [...prev.platforms, \"facebook\"],\r\n-      }));\r\n-\r\n-      // imported image previews\r\n-      if (data.images?.length) {\r\n-        setSelectedImages((prevImgs) => [\r\n-          ...data.images!,\r\n-          ...prevImgs.filter((x) => !data.images!.includes(x)),\r\n-        ]);\r\n-\r\n-        toast({\r\n-          title: \"Facebook images imported\",\r\n-          description: \"Preview images added.\",\r\n-        });\r\n-      }\r\n-\r\n-      toast({\r\n-        title: \"Imported successfully\",\r\n-        description: \"Fields auto-filled from Facebook.\",\r\n-      });\r\n-    } catch (err) {\r\n-      toast({\r\n-        title: \"Import failed\",\r\n-        description: \"Could not import from Facebook.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    } finally {\r\n-      setIsImportingFb(false);\r\n-    }\r\n-  };\r\n-\r\n-  // ------------------------------------\r\n-  // Submit Car Listing\r\n-  // ------------------------------------\r\n-  const handleSubmit = async () => {\r\n-    if (!formData.description || formData.platforms.length === 0) {\r\n-      return toast({\r\n-        title: \"Missing information\",\r\n-        description: \"Please fill all required fields.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-\r\n-    if (selectedFiles.length === 0) {\r\n-      return toast({\r\n-        title: \"Missing images\",\r\n-        description: \"Please upload at least one real image.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-\r\n-    setIsSubmitting(true);\r\n-\r\n-    try {\r\n-      const fd = new FormData();\r\n-\r\n-      Object.entries(formData).forEach(([key, value]) => {\r\n-        if (key === \"platforms\") {\r\n-          formData.platforms.forEach((p) => fd.append(\"platforms\", p));\r\n-        } else {\r\n-          fd.append(key, value as string);\r\n-        }\r\n-      });\r\n-\r\n-      selectedFiles.forEach((file) => fd.append(\"images\", file));\r\n-\r\n-      await createCar(fd, user.token);\r\n-\r\n-      toast({\r\n-        title: \"Success!\",\r\n-        description: \"Your car has been listed.\",\r\n-      });\r\n-\r\n-      navigate(\"/profile\");\r\n-    } catch (error) {\r\n-      toast({\r\n-        title: \"Error\",\r\n-        description: \"Something went wrong.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-\r\n-    setIsSubmitting(false);\r\n-  };\r\n-\r\n-  // ------------------------------------\r\n-  // UI & Steps Rendering\r\n-  // ------------------------------------\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <Button\r\n-          variant=\"ghost\"\r\n-          onClick={() => navigate(-1)}\r\n-          className=\"mb-6 gap-2\"\r\n-        >\r\n-          <ArrowLeft className=\"h-4 w-4\" />\r\n-          Back\r\n-        </Button>\r\n-\r\n-        <div className=\"mx-auto max-w-2xl\">\r\n-          <div className=\"mb-8 text-center\">\r\n-            <h1 className=\"text-4xl font-bold\">Sell Your Car</h1>\r\n-            <p className=\"mt-2 text-muted-foreground\">Step {step} of 3</p>\r\n-          </div>\r\n-\r\n-          <div className=\"mb-8 flex gap-2\">\r\n-            {[1, 2, 3].map((s) => (\r\n-              <div\r\n-                key={s}\r\n-                className={`h-2 flex-1 rounded-full ${\r\n-                  s <= step ? \"bg-primary\" : \"bg-muted\"\r\n-                }`}\r\n-              />\r\n-            ))}\r\n-          </div>\r\n-\r\n-          <Card className=\"shadow-card\">\r\n-            {/* -------------- STEP 1 -------------- */}\r\n-            {step === 1 && (\r\n-              <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Car Details</CardTitle>\r\n-                  <CardDescription>Tell us about your car</CardDescription>\r\n-                </CardHeader>\r\n-\r\n-                <CardContent className=\"space-y-5\">\r\n-\r\n-                  {/* FACEBOOK IMPORT */}\r\n-                  <div className=\"rounded-lg border bg-card p-4 space-y-3\">\r\n-                    <Label className=\"flex items-center gap-2\">\r\n-                      <Link2 className=\"h-4 w-4\" />\r\n-                      Import from Facebook Marketplace (optional)\r\n-                    </Label>\r\n-\r\n-                    <div className=\"flex flex-col sm:flex-row gap-2\">\r\n-                      <Input\r\n-                        value={fbUrl}\r\n-                        onChange={(e) => setFbUrl(e.target.value)}\r\n-                        placeholder=\"Paste Facebook Marketplace car link...\"\r\n-                      />\r\n-                      <Button\r\n-                        type=\"button\"\r\n-                        onClick={handleImportFromFacebook}\r\n-                        disabled={isImportingFb}\r\n-                        className=\"gap-2\"\r\n-                      >\r\n-                        {isImportingFb && (\r\n-                          <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n-                        )}\r\n-                        {isImportingFb ? \"Importing...\" : \"Import\"}\r\n-                      </Button>\r\n-                    </div>\r\n-\r\n-                    <p className=\"text-xs text-muted-foreground\">\r\n-                      Auto-fills year, mileage, price, description, and images.\r\n-                    </p>\r\n-                  </div>\r\n-\r\n-                  {/* BRAND / MODEL */}\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Brand *</Label>\r\n-                      <Input\r\n-                        value={formData.brand}\r\n-                        onChange={(e) =>\r\n-                          handleInputChange(\"brand\", e.target.value)\r\n-                        }\r\n-                        placeholder=\"e.g., Toyota\"\r\n-                      />\r\n-                    </div>\r\n-\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Model *</Label>\r\n-                      <Input\r\n-                        value={formData.model}\r\n-                        onChange={(e) =>\r\n-                          handleInputChange(\"model\", e.target.value)\r\n-                        }\r\n-                        placeholder=\"e.g., Camry\"\r\n-                      />\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  {/* YEAR / CONDITION */}\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Year *</Label>\r\n-                      <Input\r\n-                        type=\"number\"\r\n-                        value={formData.year}\r\n-                        onChange={(e) =>\r\n-                          handleInputChange(\"year\", e.target.value)\r\n-                        }\r\n-                        placeholder=\"2020\"\r\n-                      />\r\n-                    </div>\r\n-\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Condition *</Label>\r\n-                      <Select\r\n-                        value={formData.condition}\r\n-                        onValueChange={(value) =>\r\n-                          handleInputChange(\"condition\", value)\r\n-                        }\r\n-                      >\r\n-                        <SelectTrigger>\r\n-                          <SelectValue placeholder=\"Select condition\" />\r\n-                        </SelectTrigger>\r\n-                        <SelectContent>\r\n-                          <SelectItem value=\"new\">New</SelectItem>\r\n-                          <SelectItem value=\"used\">Used</SelectItem>\r\n-                          <SelectItem value=\"certified\">\r\n-                            Certified Pre-Owned\r\n-                          </SelectItem>\r\n-                        </SelectContent>\r\n-                      </Select>\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <Button onClick={() => setStep(2)} className=\"w-full\">\r\n-                    Continue\r\n-                  </Button>\r\n-                </CardContent>\r\n-              </>\r\n-            )}\r\n-\r\n-            {/* -------------- STEP 2 -------------- */}\r\n-            {step === 2 && (\r\n-              <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Pricing</CardTitle>\r\n-                  <CardDescription>Set your price and mileage</CardDescription>\r\n-                </CardHeader>\r\n-\r\n-                <CardContent className=\"space-y-4\">\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Price ($) *</Label>\r\n-                      <Input\r\n-                        type=\"number\"\r\n-                        value={formData.price}\r\n-                        onChange={(e) =>\r\n-                          handleInputChange(\"price\", e.target.value)\r\n-                        }\r\n-                      />\r\n-                    </div>\r\n-\r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Mileage (miles) *</Label>\r\n-                      <Input\r\n-                        type=\"number\"\r\n-                        value={formData.mileage}\r\n-                        onChange={(e) =>\r\n-                          handleInputChange(\"mileage\", e.target.value)\r\n-                        }\r\n-                      />\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  {/*  AI PRICE PREDICTION BUTTON */}\r\n-                  <Button\r\n-                    type=\"button\"\r\n-                    onClick={handleAIPredict}\r\n-                    disabled={aiLoading}\r\n-                    className=\"w-full bg-green-600 hover:bg-green-700\"\r\n-                  >\r\n-                    {aiLoading ? (\r\n-                      <div className=\"flex items-center gap-2\">\r\n-                        <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n-                        Predicting Price...\r\n-                      </div>\r\n-                    ) : (\r\n-                      \"AI Predict Price\"\r\n-                    )}\r\n-                  </Button>\r\n-\r\n-                  {/* AI PRICE RESULT CARD */}\r\n-                  {aiResult && (\r\n-                    <div className=\"mt-4 p-4 rounded-lg border bg-muted/40 shadow-sm\">\r\n-                      <h3 className=\"text-lg font-semibold mb-2\">\r\n-                        AI Price Estimate\r\n-                      </h3>\r\n-\r\n-                      <p><strong>Min:</strong> ${aiResult.minPrice}</p>\r\n-                      <p><strong>Max:</strong> ${aiResult.maxPrice}</p>\r\n-                      <p><strong>Recommended:</strong> ${aiResult.recommendedPrice}</p>\r\n-\r\n-                      <p className=\"mt-2 text-gray-700\">\r\n-                        <strong>Market Summary:</strong><br />\r\n-                        {aiResult.marketSummary}\r\n-                      </p>\r\n-                    </div>\r\n-                  )}\r\n-\r\n-                  <div className=\"flex gap-2\">\r\n-                    <Button\r\n-                      variant=\"outline\"\r\n-                      onClick={() => setStep(1)}\r\n-                      className=\"w-full\"\r\n-                    >\r\n-                      Back\r\n-                    </Button>\r\n-                    <Button onClick={() => setStep(3)} className=\"w-full\">\r\n-                      Continue\r\n-                    </Button>\r\n-                  </div>\r\n-                </CardContent>\r\n-              </>\r\n-            )}\r\n-\r\n-            {/* -------------- STEP 3 -------------- */}\r\n-            {step === 3 && (\r\n-              <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Description & Platforms</CardTitle>\r\n-                  <CardDescription>\r\n-                    Add details and where to list\r\n-                  </CardDescription>\r\n-                </CardHeader>\r\n-\r\n-                <CardContent className=\"space-y-6\">\r\n-\r\n-                  {/* DESCRIPTION */}\r\n-                  <div className=\"space-y-2\">\r\n-                    <Label>Description *</Label>\r\n-                    <Textarea\r\n-                      rows={4}\r\n-                      value={formData.description}\r\n-                      onChange={(e) =>\r\n-                        handleInputChange(\"description\", e.target.value)\r\n-                      }\r\n-                      placeholder=\"Describe your car...\"\r\n-                    />\r\n-                  </div>\r\n-\r\n-                  {/* PLATFORMS */}\r\n-                  <div className=\"space-y-3\">\r\n-                    <Label>List on Platforms *</Label>\r\n-                    <div className=\"space-y-3 rounded-lg border p-4\">\r\n-                      {platforms.map((platform) => (\r\n-                        <div\r\n-                          key={platform.id}\r\n-                          className=\"flex items-center space-x-2\"\r\n-                        >\r\n-                          <Checkbox\r\n-                            checked={formData.platforms.includes(platform.id)}\r\n-                            onCheckedChange={() =>\r\n-                              handlePlatformToggle(platform.id)\r\n-                            }\r\n-                          />\r\n-                          <label className=\"text-sm font-medium\">\r\n-                            {platform.name}\r\n-                          </label>\r\n-                        </div>\r\n-                      ))}\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  {/* IMAGES */}\r\n-                  <div className=\"space-y-3\">\r\n-                    <Label>Upload Images *</Label>\r\n-\r\n-                    <label\r\n-                      htmlFor=\"image-upload\"\r\n-                      className=\"flex cursor-pointer items-center justify-center rounded-lg border-2 border-dashed p-8 text-center hover:border-primary hover:bg-primary/5\"\r\n-                    >\r\n-                      <div>\r\n-                        <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n-                        <p className=\"text-sm\">Click to upload car images</p>\r\n-                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n-                          Upload up to 10 images\r\n-                        </p>\r\n-                      </div>\r\n-                    </label>\r\n-\r\n-                    <input\r\n-                      id=\"image-upload\"\r\n-                      type=\"file\"\r\n-                      accept=\"image/*\"\r\n-                      multiple\r\n-                      className=\"hidden\"\r\n-                      onChange={handleImageUpload}\r\n-                    />\r\n-\r\n-                    {selectedImages.length > 0 && (\r\n-                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n-                        {selectedImages.map((img, index) => (\r\n-                          <div key={index} className=\"relative group\">\r\n-                            <img\r\n-                              src={img}\r\n-                              className=\"h-24 w-full rounded-lg object-cover\"\r\n-                              alt={`car-${index}`}\r\n-                            />\r\n-                            <button\r\n-                              type=\"button\"\r\n-                              onClick={() => removeImage(index)}\r\n-                              className=\"absolute -top-2 -right-2 h-6 w-6 flex items-center justify-center bg-destructive text-white rounded-full opacity-0 group-hover:opacity-100\"\r\n-                            >\r\n-                              <X className=\"h-4 w-4\" />\r\n-                            </button>\r\n-                          </div>\r\n-                        ))}\r\n-                      </div>\r\n-                    )}\r\n-                  </div>\r\n-\r\n-                  {/* SUBMIT */}\r\n-                  <div className=\"flex gap-2\">\r\n-                    <Button\r\n-                      variant=\"outline\"\r\n-                      onClick={() => setStep(2)}\r\n-                      className=\"w-full\"\r\n-                    >\r\n-                      Back\r\n-                    </Button>\r\n-                    <Button\r\n-                      onClick={handleSubmit}\r\n-                      disabled={isSubmitting}\r\n-                      className=\"w-full\"\r\n-                    >\r\n-                      {isSubmitting ? \"Listing...\" : \"List Car\"}\r\n-                    </Button>\r\n-                  </div>\r\n-                </CardContent>\r\n-              </>\r\n-            )}\r\n-          </Card>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default SellCar;\r\n-// src/pages/SellCar.tsx\r\n-import { useState, useEffect } from \"react\";\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useAuth } from \"@/contexts/AuthContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Input } from \"@/components/ui/input\";\r\n-import { Label } from \"@/components/ui/label\";\r\n-import { Textarea } from \"@/components/ui/textarea\";\r\n-import {\r\n-  Card,\r\n-  CardContent,\r\n-  CardDescription,\r\n-  CardHeader,\r\n-  CardTitle,\r\n-} from \"@/components/ui/card\";\r\n-import {\r\n-  Select,\r\n-  SelectContent,\r\n-  SelectItem,\r\n-  SelectTrigger,\r\n-  SelectValue,\r\n-} from \"@/components/ui/select\";\r\n-import { Checkbox } from \"@/components/ui/checkbox\";\r\n-import { toast } from \"@/hooks/use-toast\";\r\n-import { ArrowLeft, Upload, X, Link2, Loader2 } from \"lucide-react\";\r\n-import { createCar } from \"@/api/cars\";\r\n-import axios from \"axios\";\r\n-import { predictCarPrice } from \"@/services/aiService\"; //  NEW\r\n-\r\n-const platforms = [\r\n-  { id: \"edmunds\", name: \"Edmunds\" },\r\n-  { id: \"olx\", name: \"OLX\" },\r\n-  { id: \"facebook\", name: \"Facebook Marketplace\" },\r\n-  { id: \"autotrader\", name: \"AutoTrader\" },\r\n-  { id: \"cars\", name: \"Cars.com\" },\r\n-];\r\n-\r\n-const FB_SCRAPE_URL = \"http://127.0.0.1:5000/api/scrape/facebook\";\r\n-\r\n-type FacebookScrapeResult = Partial<{\r\n-  brand: string;\r\n-  model: string;\r\n-  year: number | string;\r\n-  price: number | string;\r\n-  mileage: number | string;\r\n-  condition: \"new\" | \"used\" | \"certified\" | string;\r\n-  description: string;\r\n-  images: string[];\r\n-  platforms: string[];\r\n-}>;\r\n-\r\n const SellCar = () => {\r\n   const { user } = useAuth();\r\n   const navigate = useNavigate();\r\n \r\n@@ -721,18 +92,21 @@\n \r\n   const [fbUrl, setFbUrl] = useState(\"\");\r\n   const [isImportingFb, setIsImportingFb] = useState(false);\r\n \r\n-  //  NEW AI States\r\n   const [aiLoading, setAiLoading] = useState(false);\r\n-  const [aiResult, setAiResult] = useState<any>(null);\r\n+  const [aiResult, setAiResult] = useState<AiPriceResult | null>(null);\r\n \r\n   useEffect(() => {\r\n     if (!user) navigate(\"/auth?mode=login\");\r\n   }, [user, navigate]);\r\n \r\n   if (!user) return null;\r\n \r\n+  // --------------------------\r\n+  // Helpers\r\n+  // --------------------------\r\n+\r\n   const handleInputChange = (field: string, value: string) =>\r\n     setFormData((prev) => ({ ...prev, [field]: value }));\r\n \r\n   const handlePlatformToggle = (platformId: string) =>\r\n@@ -751,28 +125,29 @@\n     setSelectedFiles((prev) => [...prev, ...newFiles]);\r\n \r\n     const previews = newFiles.map((file) => URL.createObjectURL(file));\r\n     setSelectedImages((prev) => [...prev, ...previews]);\r\n-\r\n-    toast({\r\n-      title: \"Images added\",\r\n-      description: `${newFiles.length} image(s) ready for upload.`,\r\n-    });\r\n   };\r\n \r\n   const removeImage = (index: number) => {\r\n     setSelectedImages((prev) => prev.filter((_, i) => i !== index));\r\n     setSelectedFiles((prev) => prev.filter((_, i) => i !== index));\r\n   };\r\n \r\n-  // ------------------------------------\r\n-  //  AI Price Prediction Handler\r\n-  // ------------------------------------\r\n+  // --------------------------\r\n+  // AI PRICE PREDICTION\r\n+  // --------------------------\r\n   const handleAIPredict = async () => {\r\n-    if (!formData.brand || !formData.model || !formData.year || !formData.mileage || !formData.condition) {\r\n+    if (\r\n+      !formData.brand ||\r\n+      !formData.model ||\r\n+      !formData.year ||\r\n+      !formData.mileage ||\r\n+      !formData.condition\r\n+    ) {\r\n       return toast({\r\n-        title: \"Missing information\",\r\n-        description: \"Please fill car details first (brand, model, year, mileage).\",\r\n+        title: \"Missing info\",\r\n+        description: \"Fill all car fields first.\",\r\n         variant: \"destructive\",\r\n       });\r\n     }\r\n \r\n@@ -788,38 +163,36 @@\n       });\r\n \r\n       setAiResult(result);\r\n \r\n-      // Autofill recommended price\r\n       setFormData((prev) => ({\r\n         ...prev,\r\n-        price: result.recommendedPrice,\r\n+        price: String(result.recommendedPrice),\r\n       }));\r\n \r\n       toast({\r\n-        title: \"AI Price Estimated\",\r\n-        description: \"A smart price recommendation has been generated.\",\r\n+        title: \"AI Prediction Ready\",\r\n+        description: \"Price has been recommended automatically.\",\r\n       });\r\n     } catch (error) {\r\n       toast({\r\n         title: \"AI Error\",\r\n-        description: \"Failed to predict price. Please try again.\",\r\n+        description: \"Could not estimate price.\",\r\n         variant: \"destructive\",\r\n       });\r\n     } finally {\r\n       setAiLoading(false);\r\n     }\r\n   };\r\n \r\n-  // ------------------------------------\r\n-  // Facebook Import Handler\r\n-  // ------------------------------------\r\n+  // --------------------------\r\n+  // FACEBOOK IMPORT\r\n+  // --------------------------\r\n   const handleImportFromFacebook = async () => {\r\n     if (!fbUrl.trim()) {\r\n       return toast({\r\n         title: \"Missing URL\",\r\n-        description: \"Paste a Facebook Marketplace car link first.\",\r\n-        variant: \"destructive\",\r\n+        description: \"Paste Facebook car link first.\",\r\n       });\r\n     }\r\n \r\n     setIsImportingFb(true);\r\n@@ -852,52 +225,46 @@\n             ? prev.platforms\r\n             : [...prev.platforms, \"facebook\"],\r\n       }));\r\n \r\n-      // imported image previews\r\n       if (data.images?.length) {\r\n-        setSelectedImages((prevImgs) => [\r\n+        setSelectedImages((prev) => [\r\n           ...data.images!,\r\n-          ...prevImgs.filter((x) => !data.images!.includes(x)),\r\n+          ...prev.filter((i) => !data.images!.includes(i)),\r\n         ]);\r\n-\r\n-        toast({\r\n-          title: \"Facebook images imported\",\r\n-          description: \"Preview images added.\",\r\n-        });\r\n       }\r\n \r\n       toast({\r\n-        title: \"Imported successfully\",\r\n-        description: \"Fields auto-filled from Facebook.\",\r\n+        title: \"Imported\",\r\n+        description: \"Fields have been auto-filled.\",\r\n       });\r\n-    } catch (err) {\r\n+    } catch {\r\n       toast({\r\n         title: \"Import failed\",\r\n-        description: \"Could not import from Facebook.\",\r\n+        description: \"Could not scrape this listing.\",\r\n         variant: \"destructive\",\r\n       });\r\n     } finally {\r\n       setIsImportingFb(false);\r\n     }\r\n   };\r\n \r\n-  // ------------------------------------\r\n-  // Submit Car Listing\r\n-  // ------------------------------------\r\n+  // --------------------------\r\n+  // SUBMIT\r\n+  // --------------------------\r\n   const handleSubmit = async () => {\r\n     if (!formData.description || formData.platforms.length === 0) {\r\n       return toast({\r\n-        title: \"Missing information\",\r\n-        description: \"Please fill all required fields.\",\r\n+        title: \"Missing data\",\r\n+        description: \"Fill all required fields.\",\r\n         variant: \"destructive\",\r\n       });\r\n     }\r\n \r\n     if (selectedFiles.length === 0) {\r\n       return toast({\r\n         title: \"Missing images\",\r\n-        description: \"Please upload at least one real image.\",\r\n+        description: \"Upload at least one real image.\",\r\n         variant: \"destructive\",\r\n       });\r\n     }\r\n \r\n@@ -917,149 +284,157 @@\n       selectedFiles.forEach((file) => fd.append(\"images\", file));\r\n \r\n       await createCar(fd, user.token);\r\n \r\n-      toast({\r\n-        title: \"Success!\",\r\n-        description: \"Your car has been listed.\",\r\n-      });\r\n-\r\n+      toast({ title: \"Car Listed!\" });\r\n       navigate(\"/profile\");\r\n-    } catch (error) {\r\n+    } catch {\r\n       toast({\r\n         title: \"Error\",\r\n-        description: \"Something went wrong.\",\r\n+        description: \"Could not list your car.\",\r\n         variant: \"destructive\",\r\n       });\r\n     }\r\n \r\n     setIsSubmitting(false);\r\n   };\r\n \r\n-  // ------------------------------------\r\n-  // UI & Steps Rendering\r\n-  // ------------------------------------\r\n-\r\n+  // --------------------------\r\n+  // UI (MOBILE OPTIMIZED)\r\n+  // --------------------------\r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n+      <div className=\"container mx-auto px-3 py-6\">\r\n+        \r\n         <Button\r\n           variant=\"ghost\"\r\n+          size=\"sm\"\r\n           onClick={() => navigate(-1)}\r\n-          className=\"mb-6 gap-2\"\r\n+          className=\"mb-4 gap-1 text-sm\"\r\n         >\r\n-          <ArrowLeft className=\"h-4 w-4\" />\r\n-          Back\r\n+          <ArrowLeft className=\"h-4 w-4\" /> Back\r\n         </Button>\r\n \r\n-        <div className=\"mx-auto max-w-2xl\">\r\n-          <div className=\"mb-8 text-center\">\r\n-            <h1 className=\"text-4xl font-bold\">Sell Your Car</h1>\r\n-            <p className=\"mt-2 text-muted-foreground\">Step {step} of 3</p>\r\n+        <div className=\"mx-auto max-w-xl\">\r\n+          {/* Heading */}\r\n+          <div className=\"mb-6 text-center\">\r\n+            <h1 className=\"text-2xl font-bold\">Sell Your Car</h1>\r\n+            <p className=\"text-xs mt-1 text-muted-foreground\">Step {step} of 3</p>\r\n           </div>\r\n \r\n-          <div className=\"mb-8 flex gap-2\">\r\n+          {/* Steps bar */}\r\n+          <div className=\"mb-6 flex gap-1\">\r\n             {[1, 2, 3].map((s) => (\r\n               <div\r\n                 key={s}\r\n-                className={`h-2 flex-1 rounded-full ${\r\n+                className={`h-1 flex-1 rounded-full ${\r\n                   s <= step ? \"bg-primary\" : \"bg-muted\"\r\n                 }`}\r\n               />\r\n             ))}\r\n           </div>\r\n \r\n-          <Card className=\"shadow-card\">\r\n-            {/* -------------- STEP 1 -------------- */}\r\n+          {/* Card */}\r\n+          <Card className=\"shadow-sm border rounded-xl\">\r\n+            {/* ---------------- STEP 1 ---------------- */}\r\n             {step === 1 && (\r\n               <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Car Details</CardTitle>\r\n-                  <CardDescription>Tell us about your car</CardDescription>\r\n+                <CardHeader className=\"pb-2\">\r\n+                  <CardTitle className=\"text-lg\">Car Details</CardTitle>\r\n+                  <CardDescription className=\"text-xs\">\r\n+                    Tell us about your car\r\n+                  </CardDescription>\r\n                 </CardHeader>\r\n \r\n-                <CardContent className=\"space-y-5\">\r\n-\r\n-                  {/* FACEBOOK IMPORT */}\r\n-                  <div className=\"rounded-lg border bg-card p-4 space-y-3\">\r\n-                    <Label className=\"flex items-center gap-2\">\r\n+                <CardContent className=\"space-y-4 text-sm\">\r\n+                  \r\n+                  {/* Facebook import */}\r\n+                  <div className=\"rounded-lg border p-3 space-y-2\">\r\n+                    <Label className=\"flex items-center gap-2 text-sm\">\r\n                       <Link2 className=\"h-4 w-4\" />\r\n-                      Import from Facebook Marketplace (optional)\r\n+                      Import from Facebook (optional)\r\n                     </Label>\r\n \r\n-                    <div className=\"flex flex-col sm:flex-row gap-2\">\r\n+                    <div className=\"flex flex-col gap-2 sm:flex-row\">\r\n                       <Input\r\n                         value={fbUrl}\r\n                         onChange={(e) => setFbUrl(e.target.value)}\r\n-                        placeholder=\"Paste Facebook Marketplace car link...\"\r\n+                        placeholder=\"Paste car link...\"\r\n+                        className=\"text-sm\"\r\n                       />\r\n+\r\n                       <Button\r\n                         type=\"button\"\r\n+                        size=\"sm\"\r\n                         onClick={handleImportFromFacebook}\r\n                         disabled={isImportingFb}\r\n-                        className=\"gap-2\"\r\n+                        className=\"gap-1\"\r\n                       >\r\n-                        {isImportingFb && (\r\n+                        {isImportingFb ? (\r\n                           <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n+                        ) : (\r\n+                          \"Import\"\r\n                         )}\r\n-                        {isImportingFb ? \"Importing...\" : \"Import\"}\r\n                       </Button>\r\n                     </div>\r\n \r\n                     <p className=\"text-xs text-muted-foreground\">\r\n-                      Auto-fills year, mileage, price, description, and images.\r\n+                      Auto-fills brand, year, mileage, description & images.\r\n                     </p>\r\n                   </div>\r\n \r\n                   {/* BRAND / MODEL */}\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n+                  <div className=\"grid gap-4 sm:grid-cols-2\">\r\n+                    <div className=\"space-y-1\">\r\n                       <Label>Brand *</Label>\r\n                       <Input\r\n                         value={formData.brand}\r\n                         onChange={(e) =>\r\n                           handleInputChange(\"brand\", e.target.value)\r\n                         }\r\n                         placeholder=\"e.g., Toyota\"\r\n+                        className=\"text-sm\"\r\n                       />\r\n                     </div>\r\n \r\n-                    <div className=\"space-y-2\">\r\n+                    <div className=\"space-y-1\">\r\n                       <Label>Model *</Label>\r\n                       <Input\r\n                         value={formData.model}\r\n                         onChange={(e) =>\r\n                           handleInputChange(\"model\", e.target.value)\r\n                         }\r\n                         placeholder=\"e.g., Camry\"\r\n+                        className=\"text-sm\"\r\n                       />\r\n                     </div>\r\n                   </div>\r\n \r\n                   {/* YEAR / CONDITION */}\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n+                  <div className=\"grid gap-4 sm:grid-cols-2\">\r\n+                    <div className=\"space-y-1\">\r\n                       <Label>Year *</Label>\r\n                       <Input\r\n                         type=\"number\"\r\n                         value={formData.year}\r\n                         onChange={(e) =>\r\n                           handleInputChange(\"year\", e.target.value)\r\n                         }\r\n                         placeholder=\"2020\"\r\n+                        className=\"text-sm\"\r\n                       />\r\n                     </div>\r\n \r\n-                    <div className=\"space-y-2\">\r\n+                    <div className=\"space-y-1\">\r\n                       <Label>Condition *</Label>\r\n                       <Select\r\n                         value={formData.condition}\r\n                         onValueChange={(value) =>\r\n                           handleInputChange(\"condition\", value)\r\n                         }\r\n                       >\r\n-                        <SelectTrigger>\r\n-                          <SelectValue placeholder=\"Select condition\" />\r\n+                        <SelectTrigger className=\"text-sm\">\r\n+                          <SelectValue placeholder=\"Select\" />\r\n                         </SelectTrigger>\r\n                         <SelectContent>\r\n                           <SelectItem value=\"new\">New</SelectItem>\r\n                           <SelectItem value=\"used\">Used</SelectItem>\r\n@@ -1070,162 +445,164 @@\n                       </Select>\r\n                     </div>\r\n                   </div>\r\n \r\n-                  <Button onClick={() => setStep(2)} className=\"w-full\">\r\n+                  <Button\r\n+                    onClick={() => setStep(2)}\r\n+                    size=\"sm\"\r\n+                    className=\"w-full text-sm\"\r\n+                  >\r\n                     Continue\r\n                   </Button>\r\n                 </CardContent>\r\n               </>\r\n             )}\r\n \r\n-            {/* -------------- STEP 2 -------------- */}\r\n+            {/* ---------------- STEP 2 ---------------- */}\r\n             {step === 2 && (\r\n               <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Pricing</CardTitle>\r\n-                  <CardDescription>Set your price and mileage</CardDescription>\r\n+                <CardHeader className=\"pb-2\">\r\n+                  <CardTitle className=\"text-lg\">Pricing</CardTitle>\r\n+                  <CardDescription className=\"text-xs\">\r\n+                    Set your price and mileage\r\n+                  </CardDescription>\r\n                 </CardHeader>\r\n \r\n-                <CardContent className=\"space-y-4\">\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    <div className=\"space-y-2\">\r\n+                <CardContent className=\"space-y-4 text-sm\">\r\n+                  <div className=\"grid gap-4 sm:grid-cols-2\">\r\n+                    <div className=\"space-y-1\">\r\n                       <Label>Price ($) *</Label>\r\n                       <Input\r\n                         type=\"number\"\r\n                         value={formData.price}\r\n                         onChange={(e) =>\r\n                           handleInputChange(\"price\", e.target.value)\r\n                         }\r\n+                        className=\"text-sm\"\r\n                       />\r\n                     </div>\r\n \r\n-                    <div className=\"space-y-2\">\r\n-                      <Label>Mileage (miles) *</Label>\r\n+                    <div className=\"space-y-1\">\r\n+                      <Label>Mileage (mi) *</Label>\r\n                       <Input\r\n                         type=\"number\"\r\n                         value={formData.mileage}\r\n                         onChange={(e) =>\r\n                           handleInputChange(\"mileage\", e.target.value)\r\n                         }\r\n+                        className=\"text-sm\"\r\n                       />\r\n                     </div>\r\n                   </div>\r\n \r\n-                  {/*  AI PRICE PREDICTION BUTTON */}\r\n                   <Button\r\n                     type=\"button\"\r\n+                    size=\"sm\"\r\n                     onClick={handleAIPredict}\r\n                     disabled={aiLoading}\r\n-                    className=\"w-full bg-green-600 hover:bg-green-700\"\r\n+                    className=\"w-full bg-green-600 hover:bg-green-700 text-sm\"\r\n                   >\r\n                     {aiLoading ? (\r\n-                      <div className=\"flex items-center gap-2\">\r\n+                      <div className=\"flex items-center gap-1\">\r\n                         <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n-                        Predicting Price...\r\n+                        Predicting...\r\n                       </div>\r\n                     ) : (\r\n                       \"AI Predict Price\"\r\n                     )}\r\n                   </Button>\r\n \r\n-                  {/* AI PRICE RESULT CARD */}\r\n                   {aiResult && (\r\n-                    <div className=\"mt-4 p-4 rounded-lg border bg-muted/40 shadow-sm\">\r\n-                      <h3 className=\"text-lg font-semibold mb-2\">\r\n+                    <div className=\"mt-3 p-3 rounded-lg border bg-muted/20 text-sm\">\r\n+                      <h3 className=\"font-semibold text-base\">\r\n                         AI Price Estimate\r\n                       </h3>\r\n-\r\n                       <p><strong>Min:</strong> ${aiResult.minPrice}</p>\r\n                       <p><strong>Max:</strong> ${aiResult.maxPrice}</p>\r\n-                      <p><strong>Recommended:</strong> ${aiResult.recommendedPrice}</p>\r\n-\r\n-                      <p className=\"mt-2 text-gray-700\">\r\n-                        <strong>Market Summary:</strong><br />\r\n+                      <p>\r\n+                        <strong>Recommended:</strong> $\r\n+                        {aiResult.recommendedPrice}\r\n+                      </p>\r\n+                      <p className=\"mt-1 text-xs text-muted-foreground\">\r\n                         {aiResult.marketSummary}\r\n                       </p>\r\n                     </div>\r\n                   )}\r\n \r\n                   <div className=\"flex gap-2\">\r\n                     <Button\r\n+                      size=\"sm\"\r\n                       variant=\"outline\"\r\n                       onClick={() => setStep(1)}\r\n-                      className=\"w-full\"\r\n+                      className=\"w-full text-sm\"\r\n                     >\r\n                       Back\r\n                     </Button>\r\n-                    <Button onClick={() => setStep(3)} className=\"w-full\">\r\n+\r\n+                    <Button\r\n+                      size=\"sm\"\r\n+                      onClick={() => setStep(3)}\r\n+                      className=\"w-full text-sm\"\r\n+                    >\r\n                       Continue\r\n                     </Button>\r\n                   </div>\r\n                 </CardContent>\r\n               </>\r\n             )}\r\n \r\n-            {/* -------------- STEP 3 -------------- */}\r\n+            {/* ---------------- STEP 3 ---------------- */}\r\n             {step === 3 && (\r\n               <>\r\n-                <CardHeader>\r\n-                  <CardTitle>Description & Platforms</CardTitle>\r\n-                  <CardDescription>\r\n-                    Add details and where to list\r\n+                <CardHeader className=\"pb-2\">\r\n+                  <CardTitle className=\"text-lg\">Description & Images</CardTitle>\r\n+                  <CardDescription className=\"text-xs\">\r\n+                    Add details & upload photos\r\n                   </CardDescription>\r\n                 </CardHeader>\r\n \r\n-                <CardContent className=\"space-y-6\">\r\n-\r\n-                  {/* DESCRIPTION */}\r\n-                  <div className=\"space-y-2\">\r\n+                <CardContent className=\"space-y-5 text-sm\">\r\n+                  \r\n+                  {/* Description */}\r\n+                  <div>\r\n                     <Label>Description *</Label>\r\n                     <Textarea\r\n-                      rows={4}\r\n+                      rows={3}\r\n+                      className=\"text-sm\"\r\n+                      placeholder=\"Describe your car...\"\r\n                       value={formData.description}\r\n                       onChange={(e) =>\r\n                         handleInputChange(\"description\", e.target.value)\r\n                       }\r\n-                      placeholder=\"Describe your car...\"\r\n                     />\r\n                   </div>\r\n \r\n-                  {/* PLATFORMS */}\r\n-                  <div className=\"space-y-3\">\r\n+                  {/* Platforms */}\r\n+                  <div>\r\n                     <Label>List on Platforms *</Label>\r\n-                    <div className=\"space-y-3 rounded-lg border p-4\">\r\n-                      {platforms.map((platform) => (\r\n-                        <div\r\n-                          key={platform.id}\r\n-                          className=\"flex items-center space-x-2\"\r\n-                        >\r\n+                    <div className=\"rounded-lg border p-3 space-y-2\">\r\n+                      {platforms.map((p) => (\r\n+                        <div key={p.id} className=\"flex items-center gap-2\">\r\n                           <Checkbox\r\n-                            checked={formData.platforms.includes(platform.id)}\r\n-                            onCheckedChange={() =>\r\n-                              handlePlatformToggle(platform.id)\r\n-                            }\r\n+                            checked={formData.platforms.includes(p.id)}\r\n+                            onCheckedChange={() => handlePlatformToggle(p.id)}\r\n                           />\r\n-                          <label className=\"text-sm font-medium\">\r\n-                            {platform.name}\r\n-                          </label>\r\n+                          <span className=\"text-sm\">{p.name}</span>\r\n                         </div>\r\n                       ))}\r\n                     </div>\r\n                   </div>\r\n \r\n-                  {/* IMAGES */}\r\n-                  <div className=\"space-y-3\">\r\n+                  {/* Images */}\r\n+                  <div>\r\n                     <Label>Upload Images *</Label>\r\n \r\n                     <label\r\n                       htmlFor=\"image-upload\"\r\n-                      className=\"flex cursor-pointer items-center justify-center rounded-lg border-2 border-dashed p-8 text-center hover:border-primary hover:bg-primary/5\"\r\n+                      className=\"flex cursor-pointer flex-col items-center justify-center border-2 border-dashed rounded-lg p-6 text-center hover:border-primary\"\r\n                     >\r\n-                      <div>\r\n-                        <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n-                        <p className=\"text-sm\">Click to upload car images</p>\r\n-                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n-                          Upload up to 10 images\r\n-                        </p>\r\n-                      </div>\r\n+                      <Upload className=\"h-6 w-6 text-muted-foreground mb-1\" />\r\n+                      <p className=\"text-xs\">Click to upload</p>\r\n                     </label>\r\n \r\n                     <input\r\n                       id=\"image-upload\"\r\n@@ -1236,46 +613,48 @@\n                       onChange={handleImageUpload}\r\n                     />\r\n \r\n                     {selectedImages.length > 0 && (\r\n-                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n-                        {selectedImages.map((img, index) => (\r\n-                          <div key={index} className=\"relative group\">\r\n+                      <div className=\"grid grid-cols-3 sm:grid-cols-4 gap-2 mt-3\">\r\n+                        {selectedImages.map((img, i) => (\r\n+                          <div key={i} className=\"relative group\">\r\n                             <img\r\n                               src={img}\r\n-                              className=\"h-24 w-full rounded-lg object-cover\"\r\n-                              alt={`car-${index}`}\r\n+                              className=\"h-20 w-full rounded-lg object-cover\"\r\n                             />\r\n                             <button\r\n                               type=\"button\"\r\n-                              onClick={() => removeImage(index)}\r\n-                              className=\"absolute -top-2 -right-2 h-6 w-6 flex items-center justify-center bg-destructive text-white rounded-full opacity-0 group-hover:opacity-100\"\r\n+                              onClick={() => removeImage(i)}\r\n+                              className=\"absolute -top-1 -right-1 bg-red-600 text-white h-5 w-5 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100\"\r\n                             >\r\n-                              <X className=\"h-4 w-4\" />\r\n+                              <X className=\"h-3 w-3\" />\r\n                             </button>\r\n                           </div>\r\n                         ))}\r\n                       </div>\r\n                     )}\r\n                   </div>\r\n \r\n-                  {/* SUBMIT */}\r\n+                  {/* Submit */}\r\n                   <div className=\"flex gap-2\">\r\n                     <Button\r\n+                      size=\"sm\"\r\n                       variant=\"outline\"\r\n                       onClick={() => setStep(2)}\r\n-                      className=\"w-full\"\r\n+                      className=\"w-full text-sm\"\r\n                     >\r\n                       Back\r\n                     </Button>\r\n                     <Button\r\n+                      size=\"sm\"\r\n                       onClick={handleSubmit}\r\n                       disabled={isSubmitting}\r\n-                      className=\"w-full\"\r\n+                      className=\"w-full text-sm\"\r\n                     >\r\n                       {isSubmitting ? \"Listing...\" : \"List Car\"}\r\n                     </Button>\r\n                   </div>\r\n+\r\n                 </CardContent>\r\n               </>\r\n             )}\r\n           </Card>\r\n"
                }
            ],
            "date": 1759428067547,
            "name": "Commit-0",
            "content": "import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { toast } from \"@/hooks/use-toast\";\r\nimport { ArrowLeft, Upload } from \"lucide-react\";\r\n\r\nconst platforms = [\r\n  { id: \"edmunds\", name: \"Edmunds\" },\r\n  { id: \"olx\", name: \"OLX\" },\r\n  { id: \"facebook\", name: \"Facebook Marketplace\" },\r\n  { id: \"autotrader\", name: \"AutoTrader\" },\r\n  { id: \"cars\", name: \"Cars.com\" },\r\n];\r\n\r\nconst SellCar = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [step, setStep] = useState(1);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const [formData, setFormData] = useState({\r\n    brand: \"\",\r\n    model: \"\",\r\n    year: \"\",\r\n    mileage: \"\",\r\n    price: \"\",\r\n    condition: \"\",\r\n    description: \"\",\r\n    location: \"\",\r\n    platforms: [] as string[],\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate(\"/auth?mode=login\");\r\n    }\r\n  }, [user, navigate]);\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  const handleInputChange = (field: string, value: string) => {\r\n    setFormData((prev) => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handlePlatformToggle = (platformId: string) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      platforms: prev.platforms.includes(platformId)\r\n        ? prev.platforms.filter((p) => p !== platformId)\r\n        : [...prev.platforms, platformId],\r\n    }));\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (step === 1) {\r\n      if (!formData.brand || !formData.model || !formData.year || !formData.condition) {\r\n        toast({\r\n          title: \"Missing information\",\r\n          description: \"Please fill in all required fields.\",\r\n          variant: \"destructive\",\r\n        });\r\n        return;\r\n      }\r\n    }\r\n    if (step === 2) {\r\n      if (!formData.mileage || !formData.price || !formData.location) {\r\n        toast({\r\n          title: \"Missing information\",\r\n          description: \"Please fill in all required fields.\",\r\n          variant: \"destructive\",\r\n        });\r\n        return;\r\n      }\r\n    }\r\n    setStep((prev) => prev + 1);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!formData.description || formData.platforms.length === 0) {\r\n      toast({\r\n        title: \"Missing information\",\r\n        description: \"Please complete all required fields.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    // Simulate API call\r\n    await new Promise((resolve) => setTimeout(resolve, 2000));\r\n    \r\n    toast({\r\n      title: \"Success!\",\r\n      description: \"Your car has been listed successfully.\",\r\n    });\r\n    \r\n    setIsSubmitting(false);\r\n    navigate(\"/profile\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <Button\r\n          variant=\"ghost\"\r\n          onClick={() => navigate(-1)}\r\n          className=\"mb-6 gap-2\"\r\n        >\r\n          <ArrowLeft className=\"h-4 w-4\" />\r\n          Back\r\n        </Button>\r\n\r\n        <div className=\"mx-auto max-w-2xl\">\r\n          <div className=\"mb-8 text-center\">\r\n            <h1 className=\"text-4xl font-bold\">Sell Your Car</h1>\r\n            <p className=\"mt-2 text-muted-foreground\">\r\n              Step {step} of 3\r\n            </p>\r\n          </div>\r\n\r\n          {/* Progress Bar */}\r\n          <div className=\"mb-8 flex gap-2\">\r\n            {[1, 2, 3].map((s) => (\r\n              <div\r\n                key={s}\r\n                className={`h-2 flex-1 rounded-full transition-smooth ${\r\n                  s <= step ? \"bg-primary\" : \"bg-muted\"\r\n                }`}\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          <Card className=\"shadow-card\">\r\n            {step === 1 && (\r\n              <>\r\n                <CardHeader>\r\n                  <CardTitle>Car Details</CardTitle>\r\n                  <CardDescription>\r\n                    Tell us about your car\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"brand\">Brand *</Label>\r\n                      <Input\r\n                        id=\"brand\"\r\n                        placeholder=\"e.g., Toyota\"\r\n                        value={formData.brand}\r\n                        onChange={(e) => handleInputChange(\"brand\", e.target.value)}\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"model\">Model *</Label>\r\n                      <Input\r\n                        id=\"model\"\r\n                        placeholder=\"e.g., Camry\"\r\n                        value={formData.model}\r\n                        onChange={(e) => handleInputChange(\"model\", e.target.value)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"year\">Year *</Label>\r\n                      <Input\r\n                        id=\"year\"\r\n                        type=\"number\"\r\n                        placeholder=\"2020\"\r\n                        value={formData.year}\r\n                        onChange={(e) => handleInputChange(\"year\", e.target.value)}\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"condition\">Condition *</Label>\r\n                      <Select\r\n                        value={formData.condition}\r\n                        onValueChange={(value) => handleInputChange(\"condition\", value)}\r\n                      >\r\n                        <SelectTrigger>\r\n                          <SelectValue placeholder=\"Select condition\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                          <SelectItem value=\"new\">New</SelectItem>\r\n                          <SelectItem value=\"used\">Used</SelectItem>\r\n                          <SelectItem value=\"certified\">Certified Pre-Owned</SelectItem>\r\n                        </SelectContent>\r\n                      </Select>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <Button variant=\"accent\" onClick={handleNext} className=\"w-full\">\r\n                    Continue\r\n                  </Button>\r\n                </CardContent>\r\n              </>\r\n            )}\r\n\r\n            {step === 2 && (\r\n              <>\r\n                <CardHeader>\r\n                  <CardTitle>Pricing & Location</CardTitle>\r\n                  <CardDescription>\r\n                    Set your price and location\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"price\">Price ($) *</Label>\r\n                      <Input\r\n                        id=\"price\"\r\n                        type=\"number\"\r\n                        placeholder=\"25000\"\r\n                        value={formData.price}\r\n                        onChange={(e) => handleInputChange(\"price\", e.target.value)}\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"mileage\">Mileage (miles) *</Label>\r\n                      <Input\r\n                        id=\"mileage\"\r\n                        type=\"number\"\r\n                        placeholder=\"50000\"\r\n                        value={formData.mileage}\r\n                        onChange={(e) => handleInputChange(\"mileage\", e.target.value)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"location\">Location *</Label>\r\n                    <Input\r\n                      id=\"location\"\r\n                      placeholder=\"City, State\"\r\n                      value={formData.location}\r\n                      onChange={(e) => handleInputChange(\"location\", e.target.value)}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-2\">\r\n                    <Button variant=\"outline\" onClick={() => setStep(1)} className=\"w-full\">\r\n                      Back\r\n                    </Button>\r\n                    <Button variant=\"accent\" onClick={handleNext} className=\"w-full\">\r\n                      Continue\r\n                    </Button>\r\n                  </div>\r\n                </CardContent>\r\n              </>\r\n            )}\r\n\r\n            {step === 3 && (\r\n              <>\r\n                <CardHeader>\r\n                  <CardTitle>Description & Platforms</CardTitle>\r\n                  <CardDescription>\r\n                    Add details and choose where to list\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-6\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"description\">Description *</Label>\r\n                    <Textarea\r\n                      id=\"description\"\r\n                      placeholder=\"Describe your car's features, condition, and history...\"\r\n                      rows={4}\r\n                      value={formData.description}\r\n                      onChange={(e) => handleInputChange(\"description\", e.target.value)}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"space-y-3\">\r\n                    <Label>List on Platforms *</Label>\r\n                    <div className=\"space-y-3 rounded-lg border p-4\">\r\n                      {platforms.map((platform) => (\r\n                        <div key={platform.id} className=\"flex items-center space-x-2\">\r\n                          <Checkbox\r\n                            id={platform.id}\r\n                            checked={formData.platforms.includes(platform.id)}\r\n                            onCheckedChange={() => handlePlatformToggle(platform.id)}\r\n                          />\r\n                          <label\r\n                            htmlFor={platform.id}\r\n                            className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n                          >\r\n                            {platform.name}\r\n                          </label>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      Select at least one platform to list your car\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Upload Images (Optional)</Label>\r\n                    <div className=\"flex items-center justify-center rounded-lg border-2 border-dashed p-8 text-center transition-smooth hover:border-primary\">\r\n                      <div>\r\n                        <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\r\n                        <p className=\"text-sm text-muted-foreground\">\r\n                          Click to upload car images\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-2\">\r\n                    <Button variant=\"outline\" onClick={() => setStep(2)} className=\"w-full\">\r\n                      Back\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"accent\"\r\n                      onClick={handleSubmit}\r\n                      className=\"w-full\"\r\n                      disabled={isSubmitting}\r\n                    >\r\n                      {isSubmitting ? \"Listing...\" : \"List Car\"}\r\n                    </Button>\r\n                  </div>\r\n                </CardContent>\r\n              </>\r\n            )}\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SellCar;\r\n"
        }
    ]
}