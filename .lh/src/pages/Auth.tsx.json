{
    "sourceFile": "src/pages/Auth.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 13,
            "patches": [
                {
                    "date": 1759428007971,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1759428254477,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,9 +143,9 @@\n             </div>\r\n \r\n             <Button\r\n               type=\"submit\"\r\n-              variant=\"accent\"\r\n+              variant=\"default\"\r\n               className=\"w-full\"\r\n               size=\"lg\"\r\n               disabled={isLoading}\r\n             >\r\n"
                },
                {
                    "date": 1759939523258,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,336 @@\n+import { useState, useEffect } from \"react\";\r\n+import { useNavigate, useSearchParams } from \"react-router-dom\";\r\n+import { useAuth } from \"@/contexts/AuthContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Input } from \"@/components/ui/input\";\r\n+import { Label } from \"@/components/ui/label\";\r\n+import { Checkbox } from \"@/components/ui/checkbox\";\r\n+import PasswordInput from \"@/components/PasswordInput\";\r\n+import SocialLoginButtons from \"@/components/SocialLoginButtons\";\r\n+import { Car, Eye, EyeOff } from \"lucide-react\";\r\n+import { toast } from \"@/hooks/use-toast\";\r\n+import { passwordSchema } from \"@/lib/validation\";\r\n+import authHero from \"@/assets/auth-hero.jpg\";\r\n+\r\n+const Auth = () => {\r\n+  const [searchParams] = useSearchParams();\r\n+  const mode = searchParams.get(\"mode\") || \"login\";\r\n+  const [isLogin, setIsLogin] = useState(mode === \"login\");\r\n+  const [name, setName] = useState(\"\");\r\n+  const [email, setEmail] = useState(\"\");\r\n+  const [password, setPassword] = useState(\"\");\r\n+  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n+  const [rememberMe, setRememberMe] = useState(false);\r\n+  const [showPassword, setShowPassword] = useState(false);\r\n+  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n+  const [isLoading, setIsLoading] = useState(false);\r\n+  \r\n+  const { login, register, user } = useAuth();\r\n+  const navigate = useNavigate();\r\n+\r\n+  useEffect(() => {\r\n+    if (user) {\r\n+      navigate(\"/\");\r\n+    }\r\n+  }, [user, navigate]);\r\n+\r\n+  useEffect(() => {\r\n+    setIsLogin(mode === \"login\");\r\n+  }, [mode]);\r\n+\r\n+  const handleSubmit = async (e: React.FormEvent) => {\r\n+    e.preventDefault();\r\n+    setIsLoading(true);\r\n+\r\n+    try {\r\n+      // Validate email\r\n+      if (!email.includes(\"@\")) {\r\n+        toast({\r\n+          title: \"Invalid email\",\r\n+          description: \"Please enter a valid email address.\",\r\n+          variant: \"destructive\",\r\n+        });\r\n+        setIsLoading(false);\r\n+        return;\r\n+      }\r\n+\r\n+      // Validate password strength for signup\r\n+      if (!isLogin) {\r\n+        const passwordValidation = passwordSchema.safeParse(password);\r\n+        if (!passwordValidation.success) {\r\n+          toast({\r\n+            title: \"Weak password\",\r\n+            description: passwordValidation.error.issues[0].message,\r\n+            variant: \"destructive\",\r\n+          });\r\n+          setIsLoading(false);\r\n+          return;\r\n+        }\r\n+\r\n+        // Check password match\r\n+        if (password !== confirmPassword) {\r\n+          toast({\r\n+            title: \"Passwords don't match\",\r\n+            description: \"Please make sure your passwords match.\",\r\n+            variant: \"destructive\",\r\n+          });\r\n+          setIsLoading(false);\r\n+          return;\r\n+        }\r\n+      }\r\n+\r\n+      if (isLogin) {\r\n+        await login(email, password);\r\n+        toast({\r\n+          title: \"Welcome back!\",\r\n+          description: \"You've successfully logged in.\",\r\n+        });\r\n+      } else {\r\n+        if (!name.trim()) {\r\n+          toast({\r\n+            title: \"Name required\",\r\n+            description: \"Please enter your full name.\",\r\n+            variant: \"destructive\",\r\n+          });\r\n+          setIsLoading(false);\r\n+          return;\r\n+        }\r\n+        await register(name, email, password);\r\n+        toast({\r\n+          title: \"Account created!\",\r\n+          description: \"Welcome to CarFinder Hub.\",\r\n+        });\r\n+      }\r\n+      navigate(\"/\");\r\n+    } catch (error) {\r\n+      toast({\r\n+        title: \"Error\",\r\n+        description: \"Something went wrong. Please try again.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    } finally {\r\n+      setIsLoading(false);\r\n+    }\r\n+  };\r\n+\r\n+  const passwordsMatch = !isLogin && password && confirmPassword && password === confirmPassword;\r\n+  const passwordsDontMatch = !isLogin && password && confirmPassword && password !== confirmPassword;\r\n+\r\n+  return (\r\n+    <div className=\"flex min-h-screen\">\r\n+      {/* Left side - Hero Image */}\r\n+      <div className=\"hidden lg:flex lg:w-1/2 relative overflow-hidden\">\r\n+        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/20 to-accent/20 z-10\" />\r\n+        <img\r\n+          src={authHero}\r\n+          alt=\"CarFinder Hub\"\r\n+          className=\"absolute inset-0 h-full w-full object-cover\"\r\n+        />\r\n+        <div className=\"relative z-20 flex flex-col justify-center px-12 text-white\">\r\n+          <div className=\"space-y-6 animate-fade-in\">\r\n+            <div className=\"flex items-center gap-3\">\r\n+              <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-white/20 backdrop-blur-sm\">\r\n+                <Car className=\"h-6 w-6\" />\r\n+              </div>\r\n+              <h1 className=\"text-3xl font-bold\">CarFinder Hub</h1>\r\n+            </div>\r\n+            <p className=\"text-xl font-medium\">\r\n+              Find and list cars across platforms – all in one hub.\r\n+            </p>\r\n+            <p className=\"text-lg text-white/90\">\r\n+              Connect with buyers and sellers on Edmunds, OLX, Facebook Marketplace, and more.\r\n+            </p>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+\r\n+      {/* Right side - Auth Form */}\r\n+      <div className=\"flex w-full items-center justify-center bg-background p-4 lg:w-1/2\">\r\n+        <div className=\"w-full max-w-md space-y-8 animate-fade-in\">\r\n+          {/* Mobile Logo */}\r\n+          <div className=\"flex items-center justify-center gap-3 lg:hidden\">\r\n+            <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10\">\r\n+              <Car className=\"h-6 w-6 text-primary\" />\r\n+            </div>\r\n+            <h1 className=\"text-2xl font-bold\">CarFinder Hub</h1>\r\n+          </div>\r\n+\r\n+          <div className=\"text-center\">\r\n+            <h2 className=\"text-3xl font-bold tracking-tight\">\r\n+              {isLogin ? \"Welcome Back\" : \"Create Account\"}\r\n+            </h2>\r\n+            <p className=\"mt-2 text-muted-foreground\">\r\n+              {isLogin\r\n+                ? \"Enter your credentials to access your account\"\r\n+                : \"Sign up to start finding your perfect car\"}\r\n+            </p>\r\n+          </div>\r\n+\r\n+          <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n+            {!isLogin && (\r\n+              <div className=\"space-y-2\">\r\n+                <Label htmlFor=\"name\">Full Name</Label>\r\n+                <Input\r\n+                  id=\"name\"\r\n+                  type=\"text\"\r\n+                  placeholder=\"John Doe\"\r\n+                  value={name}\r\n+                  onChange={(e) => setName(e.target.value)}\r\n+                  required={!isLogin}\r\n+                  className=\"transition-smooth\"\r\n+                />\r\n+              </div>\r\n+            )}\r\n+\r\n+            <div className=\"space-y-2\">\r\n+              <Label htmlFor=\"email\">Email Address</Label>\r\n+              <Input\r\n+                id=\"email\"\r\n+                type=\"email\"\r\n+                placeholder=\"you@example.com\"\r\n+                value={email}\r\n+                onChange={(e) => setEmail(e.target.value)}\r\n+                required\r\n+                className=\"transition-smooth\"\r\n+              />\r\n+            </div>\r\n+\r\n+            <div className=\"space-y-2\">\r\n+              <Label htmlFor=\"password\">Password</Label>\r\n+              {isLogin ? (\r\n+                <div className=\"relative\">\r\n+                  <Input\r\n+                    id=\"password\"\r\n+                    type={showPassword ? \"text\" : \"password\"}\r\n+                    placeholder=\"••••••••\"\r\n+                    value={password}\r\n+                    onChange={(e) => setPassword(e.target.value)}\r\n+                    required\r\n+                    className=\"pr-10 transition-smooth\"\r\n+                  />\r\n+                  <button\r\n+                    type=\"button\"\r\n+                    onClick={() => setShowPassword(!showPassword)}\r\n+                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-smooth\"\r\n+                  >\r\n+                    {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n+                  </button>\r\n+                </div>\r\n+              ) : (\r\n+                <PasswordInput\r\n+                  id=\"password\"\r\n+                  value={password}\r\n+                  onChange={setPassword}\r\n+                  required\r\n+                />\r\n+              )}\r\n+            </div>\r\n+\r\n+            {!isLogin && (\r\n+              <div className=\"space-y-2\">\r\n+                <Label htmlFor=\"confirm-password\">Confirm Password</Label>\r\n+                <div className=\"relative\">\r\n+                  <Input\r\n+                    id=\"confirm-password\"\r\n+                    type={showConfirmPassword ? \"text\" : \"password\"}\r\n+                    placeholder=\"••••••••\"\r\n+                    value={confirmPassword}\r\n+                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n+                    required={!isLogin}\r\n+                    className={`pr-10 transition-smooth ${\r\n+                      passwordsMatch ? \"border-green-500\" : passwordsDontMatch ? \"border-destructive\" : \"\"\r\n+                    }`}\r\n+                  />\r\n+                  <button\r\n+                    type=\"button\"\r\n+                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n+                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-smooth\"\r\n+                  >\r\n+                    {showConfirmPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n+                  </button>\r\n+                </div>\r\n+                {passwordsMatch && (\r\n+                  <p className=\"text-xs text-green-600\">Passwords match ✓</p>\r\n+                )}\r\n+                {passwordsDontMatch && (\r\n+                  <p className=\"text-xs text-destructive\">Passwords don't match</p>\r\n+                )}\r\n+              </div>\r\n+            )}\r\n+\r\n+            {isLogin && (\r\n+              <div className=\"flex items-center justify-between\">\r\n+                <div className=\"flex items-center space-x-2\">\r\n+                  <Checkbox\r\n+                    id=\"remember\"\r\n+                    checked={rememberMe}\r\n+                    onCheckedChange={(checked) => setRememberMe(checked as boolean)}\r\n+                  />\r\n+                  <label\r\n+                    htmlFor=\"remember\"\r\n+                    className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n+                  >\r\n+                    Remember me\r\n+                  </label>\r\n+                </div>\r\n+                <button\r\n+                  type=\"button\"\r\n+                  className=\"text-sm text-primary hover:underline transition-smooth\"\r\n+                >\r\n+                  Forgot password?\r\n+                </button>\r\n+              </div>\r\n+            )}\r\n+\r\n+            <Button\r\n+              type=\"submit\"\r\n+              variant=\"accent\"\r\n+              className=\"w-full\"\r\n+              size=\"lg\"\r\n+              disabled={isLoading}\r\n+            >\r\n+              {isLoading ? (\r\n+                <span className=\"flex items-center gap-2\">\r\n+                  <span className=\"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent\" />\r\n+                  Please wait...\r\n+                </span>\r\n+              ) : isLogin ? (\r\n+                \"Sign In\"\r\n+              ) : (\r\n+                \"Create Account\"\r\n+              )}\r\n+            </Button>\r\n+\r\n+            <div className=\"relative\">\r\n+              <div className=\"absolute inset-0 flex items-center\">\r\n+                <span className=\"w-full border-t\" />\r\n+              </div>\r\n+              <div className=\"relative flex justify-center text-xs uppercase\">\r\n+                <span className=\"bg-background px-2 text-muted-foreground\">\r\n+                  Or continue with\r\n+                </span>\r\n+              </div>\r\n+            </div>\r\n+\r\n+            <SocialLoginButtons />\r\n+\r\n+            <div className=\"text-center\">\r\n+              <button\r\n+                type=\"button\"\r\n+                onClick={() => setIsLogin(!isLogin)}\r\n+                className=\"text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n+              >\r\n+                {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n+                <span className=\"font-semibold text-primary\">\r\n+                  {isLogin ? \"Sign up\" : \"Sign in\"}\r\n+                </span>\r\n+              </button>\r\n+            </div>\r\n+          </form>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default Auth;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1759939617778,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -283,9 +283,9 @@\n             )}\r\n \r\n             <Button\r\n               type=\"submit\"\r\n-              variant=\"accent\"\r\n+              variant=\"default\"\r\n               className=\"w-full\"\r\n               size=\"lg\"\r\n               disabled={isLoading}\r\n             >\r\n"
                },
                {
                    "date": 1759939940853,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n import SocialLoginButtons from \"@/components/SocialLoginButtons\";\r\n import { Car, Eye, EyeOff } from \"lucide-react\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n import { passwordSchema } from \"@/lib/validation\";\r\n-import authHero from \"@/assets/auth-hero.jpg\";\r\n+import authHero from \"@C:\\Users\\GamingCorner\\Desktop\\code\\senior\\src\\assets\\hero-car.jpg\";\r\n \r\n const Auth = () => {\r\n   const [searchParams] = useSearchParams();\r\n   const mode = searchParams.get(\"mode\") || \"login\";\r\n@@ -332,179 +332,5 @@\n     </div>\r\n   );\r\n };\r\n \r\n-export default Auth;\n-import { useState, useEffect } from \"react\";\r\n-import { useNavigate, useSearchParams } from \"react-router-dom\";\r\n-import { useAuth } from \"@/contexts/AuthContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Input } from \"@/components/ui/input\";\r\n-import { Label } from \"@/components/ui/label\";\r\n-import PasswordInput from \"@/components/PasswordInput\";\r\n-import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Car } from \"lucide-react\";\r\n-import { toast } from \"@/hooks/use-toast\";\r\n-import { passwordSchema } from \"@/lib/validation\";\r\n-\r\n-const Auth = () => {\r\n-  const [searchParams] = useSearchParams();\r\n-  const mode = searchParams.get(\"mode\") || \"login\";\r\n-  const [isLogin, setIsLogin] = useState(mode === \"login\");\r\n-  const [name, setName] = useState(\"\");\r\n-  const [email, setEmail] = useState(\"\");\r\n-  const [password, setPassword] = useState(\"\");\r\n-  const [isLoading, setIsLoading] = useState(false);\r\n-  \r\n-  const { login, register, user } = useAuth();\r\n-  const navigate = useNavigate();\r\n-\r\n-  useEffect(() => {\r\n-    if (user) {\r\n-      navigate(\"/\");\r\n-    }\r\n-  }, [user, navigate]);\r\n-\r\n-  useEffect(() => {\r\n-    setIsLogin(mode === \"login\");\r\n-  }, [mode]);\r\n-\r\n-  const handleSubmit = async (e: React.FormEvent) => {\r\n-    e.preventDefault();\r\n-    setIsLoading(true);\r\n-\r\n-    try {\r\n-      // Validate password strength\r\n-      if (!isLogin) {\r\n-        const passwordValidation = passwordSchema.safeParse(password);\r\n-        if (!passwordValidation.success) {\r\n-          toast({\r\n-            title: \"Weak password\",\r\n-            description: passwordValidation.error.issues[0].message,\r\n-            variant: \"destructive\",\r\n-          });\r\n-          setIsLoading(false);\r\n-          return;\r\n-        }\r\n-      }\r\n-\r\n-      if (isLogin) {\r\n-        await login(email, password);\r\n-        toast({\r\n-          title: \"Welcome back!\",\r\n-          description: \"You've successfully logged in.\",\r\n-        });\r\n-      } else {\r\n-        if (!name.trim()) {\r\n-          toast({\r\n-            title: \"Name required\",\r\n-            description: \"Please enter your name.\",\r\n-            variant: \"destructive\",\r\n-          });\r\n-          setIsLoading(false);\r\n-          return;\r\n-        }\r\n-        await register(name, email, password);\r\n-        toast({\r\n-          title: \"Account created!\",\r\n-          description: \"Welcome to CarFinder Hub.\",\r\n-        });\r\n-      }\r\n-      navigate(\"/\");\r\n-    } catch (error) {\r\n-      toast({\r\n-        title: \"Error\",\r\n-        description: \"Something went wrong. Please try again.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    } finally {\r\n-      setIsLoading(false);\r\n-    }\r\n-  };\r\n-\r\n-  return (\r\n-    <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-br from-background to-secondary p-4\">\r\n-      <Card className=\"w-full max-w-md shadow-card-hover animate-fade-in\">\r\n-        <CardHeader className=\"space-y-4 text-center\">\r\n-          <div className=\"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-primary/10\">\r\n-            <Car className=\"h-8 w-8 text-primary\" />\r\n-          </div>\r\n-          <div>\r\n-            <CardTitle className=\"text-2xl\">\r\n-              {isLogin ? \"Welcome Back\" : \"Create Account\"}\r\n-            </CardTitle>\r\n-            <CardDescription>\r\n-              {isLogin\r\n-                ? \"Enter your credentials to access your account\"\r\n-                : \"Sign up to start finding your perfect car\"}\r\n-            </CardDescription>\r\n-          </div>\r\n-        </CardHeader>\r\n-\r\n-        <CardContent>\r\n-          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n-            {!isLogin && (\r\n-              <div className=\"space-y-2\">\r\n-                <Label htmlFor=\"name\">Full Name</Label>\r\n-                <Input\r\n-                  id=\"name\"\r\n-                  type=\"text\"\r\n-                  placeholder=\"John Doe\"\r\n-                  value={name}\r\n-                  onChange={(e) => setName(e.target.value)}\r\n-                  required={!isLogin}\r\n-                />\r\n-              </div>\r\n-            )}\r\n-\r\n-            <div className=\"space-y-2\">\r\n-              <Label htmlFor=\"email\">Email</Label>\r\n-              <Input\r\n-                id=\"email\"\r\n-                type=\"email\"\r\n-                placeholder=\"you@example.com\"\r\n-                value={email}\r\n-                onChange={(e) => setEmail(e.target.value)}\r\n-                required\r\n-              />\r\n-            </div>\r\n-\r\n-            <div className=\"space-y-2\">\r\n-              <Label htmlFor=\"password\">Password</Label>\r\n-              <PasswordInput\r\n-                id=\"password\"\r\n-                value={password}\r\n-                onChange={setPassword}\r\n-                required\r\n-              />\r\n-            </div>\r\n-\r\n-            <Button\r\n-              type=\"submit\"\r\n-              variant=\"default\"\r\n-              className=\"w-full\"\r\n-              size=\"lg\"\r\n-              disabled={isLoading}\r\n-            >\r\n-              {isLoading ? \"Please wait...\" : isLogin ? \"Sign In\" : \"Create Account\"}\r\n-            </Button>\r\n-\r\n-            <div className=\"text-center\">\r\n-              <button\r\n-                type=\"button\"\r\n-                onClick={() => setIsLogin(!isLogin)}\r\n-                className=\"text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n-              >\r\n-                {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n-                <span className=\"font-semibold text-primary\">\r\n-                  {isLogin ? \"Sign up\" : \"Sign in\"}\r\n-                </span>\r\n-              </button>\r\n-            </div>\r\n-          </form>\r\n-        </CardContent>\r\n-      </Card>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n export default Auth;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1759939946221,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n import SocialLoginButtons from \"@/components/SocialLoginButtons\";\r\n import { Car, Eye, EyeOff } from \"lucide-react\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n import { passwordSchema } from \"@/lib/validation\";\r\n-import authHero from \"@C:\\Users\\GamingCorner\\Desktop\\code\\senior\\src\\assets\\hero-car.jpg\";\r\n+import authHero from \"@/assets/hero-car.jpg\";\r\n \r\n const Auth = () => {\r\n   const [searchParams] = useSearchParams();\r\n   const mode = searchParams.get(\"mode\") || \"login\";\r\n"
                },
                {
                    "date": 1759941281792,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -195,9 +195,9 @@\n               />\r\n             </div>\r\n \r\n             <div className=\"space-y-2\">\r\n-              <Label htmlFor=\"password\">Password</Label>\r\n+              <Label htmlFor=\"password\"></Label>\r\n               {isLogin ? (\r\n                 <div className=\"relative\">\r\n                   <Input\r\n                     id=\"password\"\r\n"
                },
                {
                    "date": 1763991257640,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,336 +1,174 @@\n-import { useState, useEffect } from \"react\";\r\n+import { useState } from \"react\";\r\n import { useNavigate, useSearchParams } from \"react-router-dom\";\r\n import { useAuth } from \"@/contexts/AuthContext\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Input } from \"@/components/ui/input\";\r\n import { Button } from \"@/components/ui/button\";\r\n-import { Input } from \"@/components/ui/input\";\r\n import { Label } from \"@/components/ui/label\";\r\n-import { Checkbox } from \"@/components/ui/checkbox\";\r\n-import PasswordInput from \"@/components/PasswordInput\";\r\n-import SocialLoginButtons from \"@/components/SocialLoginButtons\";\r\n-import { Car, Eye, EyeOff } from \"lucide-react\";\r\n-import { toast } from \"@/hooks/use-toast\";\r\n-import { passwordSchema } from \"@/lib/validation\";\r\n-import authHero from \"@/assets/hero-car.jpg\";\r\n \r\n const Auth = () => {\r\n-  const [searchParams] = useSearchParams();\r\n-  const mode = searchParams.get(\"mode\") || \"login\";\r\n-  const [isLogin, setIsLogin] = useState(mode === \"login\");\r\n+  const { login, register, sendOtp, verifyOtpLogin, isLoading } = useAuth();\r\n+  const navigate = useNavigate();\r\n+  const [params] = useSearchParams();\r\n+  const mode = params.get(\"mode\") || \"login\";\r\n+\r\n+  const [isOtpMode, setIsOtpMode] = useState(false);\r\n+  const [otpSent, setOtpSent] = useState(false);\r\n+\r\n   const [name, setName] = useState(\"\");\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n-  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n-  const [rememberMe, setRememberMe] = useState(false);\r\n-  const [showPassword, setShowPassword] = useState(false);\r\n-  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n-  const [isLoading, setIsLoading] = useState(false);\r\n-  \r\n-  const { login, register, user } = useAuth();\r\n-  const navigate = useNavigate();\r\n+  const [otp, setOtp] = useState(\"\");\r\n \r\n-  useEffect(() => {\r\n-    if (user) {\r\n-      navigate(\"/\");\r\n-    }\r\n-  }, [user, navigate]);\r\n+  const handleRegister = async () => {\r\n+    await register(name, email, password);\r\n+    navigate(\"/\");\r\n+  };\r\n \r\n-  useEffect(() => {\r\n-    setIsLogin(mode === \"login\");\r\n-  }, [mode]);\r\n+  const handlePasswordLogin = async () => {\r\n+    await login(email, password);\r\n+    navigate(\"/\");\r\n+  };\r\n \r\n-  const handleSubmit = async (e: React.FormEvent) => {\r\n-    e.preventDefault();\r\n-    setIsLoading(true);\r\n+  const handleSendOtp = async () => {\r\n+    await sendOtp(email);\r\n+    setOtpSent(true);\r\n+  };\r\n \r\n-    try {\r\n-      // Validate email\r\n-      if (!email.includes(\"@\")) {\r\n-        toast({\r\n-          title: \"Invalid email\",\r\n-          description: \"Please enter a valid email address.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-        setIsLoading(false);\r\n-        return;\r\n-      }\r\n-\r\n-      // Validate password strength for signup\r\n-      if (!isLogin) {\r\n-        const passwordValidation = passwordSchema.safeParse(password);\r\n-        if (!passwordValidation.success) {\r\n-          toast({\r\n-            title: \"Weak password\",\r\n-            description: passwordValidation.error.issues[0].message,\r\n-            variant: \"destructive\",\r\n-          });\r\n-          setIsLoading(false);\r\n-          return;\r\n-        }\r\n-\r\n-        // Check password match\r\n-        if (password !== confirmPassword) {\r\n-          toast({\r\n-            title: \"Passwords don't match\",\r\n-            description: \"Please make sure your passwords match.\",\r\n-            variant: \"destructive\",\r\n-          });\r\n-          setIsLoading(false);\r\n-          return;\r\n-        }\r\n-      }\r\n-\r\n-      if (isLogin) {\r\n-        await login(email, password);\r\n-        toast({\r\n-          title: \"Welcome back!\",\r\n-          description: \"You've successfully logged in.\",\r\n-        });\r\n-      } else {\r\n-        if (!name.trim()) {\r\n-          toast({\r\n-            title: \"Name required\",\r\n-            description: \"Please enter your full name.\",\r\n-            variant: \"destructive\",\r\n-          });\r\n-          setIsLoading(false);\r\n-          return;\r\n-        }\r\n-        await register(name, email, password);\r\n-        toast({\r\n-          title: \"Account created!\",\r\n-          description: \"Welcome to CarFinder Hub.\",\r\n-        });\r\n-      }\r\n-      navigate(\"/\");\r\n-    } catch (error) {\r\n-      toast({\r\n-        title: \"Error\",\r\n-        description: \"Something went wrong. Please try again.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    } finally {\r\n-      setIsLoading(false);\r\n-    }\r\n+  const handleVerifyOtp = async () => {\r\n+    await verifyOtpLogin(email, otp);\r\n+    navigate(\"/\");\r\n   };\r\n \r\n-  const passwordsMatch = !isLogin && password && confirmPassword && password === confirmPassword;\r\n-  const passwordsDontMatch = !isLogin && password && confirmPassword && password !== confirmPassword;\r\n-\r\n   return (\r\n-    <div className=\"flex min-h-screen\">\r\n-      {/* Left side - Hero Image */}\r\n-      <div className=\"hidden lg:flex lg:w-1/2 relative overflow-hidden\">\r\n-        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/20 to-accent/20 z-10\" />\r\n-        <img\r\n-          src={authHero}\r\n-          alt=\"CarFinder Hub\"\r\n-          className=\"absolute inset-0 h-full w-full object-cover\"\r\n-        />\r\n-        <div className=\"relative z-20 flex flex-col justify-center px-12 text-white\">\r\n-          <div className=\"space-y-6 animate-fade-in\">\r\n-            <div className=\"flex items-center gap-3\">\r\n-              <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-white/20 backdrop-blur-sm\">\r\n-                <Car className=\"h-6 w-6\" />\r\n-              </div>\r\n-              <h1 className=\"text-3xl font-bold\">CarFinder Hub</h1>\r\n-            </div>\r\n-            <p className=\"text-xl font-medium\">\r\n-              Find and list cars across platforms – all in one hub.\r\n-            </p>\r\n-            <p className=\"text-lg text-white/90\">\r\n-              Connect with buyers and sellers on Edmunds, OLX, Facebook Marketplace, and more.\r\n-            </p>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n+    <div className=\"min-h-screen flex items-center justify-center bg-background px-4\">\r\n+      <Card className=\"w-full max-w-md shadow-card\">\r\n+        <CardHeader>\r\n+          <CardTitle className=\"text-2xl font-bold text-center\">\r\n+            {mode === \"register\" ? \"Create Account\" : \"Login\"}\r\n+          </CardTitle>\r\n+        </CardHeader>\r\n \r\n-      {/* Right side - Auth Form */}\r\n-      <div className=\"flex w-full items-center justify-center bg-background p-4 lg:w-1/2\">\r\n-        <div className=\"w-full max-w-md space-y-8 animate-fade-in\">\r\n-          {/* Mobile Logo */}\r\n-          <div className=\"flex items-center justify-center gap-3 lg:hidden\">\r\n-            <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10\">\r\n-              <Car className=\"h-6 w-6 text-primary\" />\r\n+        <CardContent className=\"space-y-4\">\r\n+          {mode === \"register\" && (\r\n+            <div className=\"space-y-2\">\r\n+              <Label>Full Name</Label>\r\n+              <Input value={name} onChange={(e) => setName(e.target.value)} />\r\n             </div>\r\n-            <h1 className=\"text-2xl font-bold\">CarFinder Hub</h1>\r\n-          </div>\r\n+          )}\r\n \r\n-          <div className=\"text-center\">\r\n-            <h2 className=\"text-3xl font-bold tracking-tight\">\r\n-              {isLogin ? \"Welcome Back\" : \"Create Account\"}\r\n-            </h2>\r\n-            <p className=\"mt-2 text-muted-foreground\">\r\n-              {isLogin\r\n-                ? \"Enter your credentials to access your account\"\r\n-                : \"Sign up to start finding your perfect car\"}\r\n-            </p>\r\n+          <div className=\"space-y-2\">\r\n+            <Label>Email</Label>\r\n+            <Input\r\n+              type=\"email\"\r\n+              value={email}\r\n+              onChange={(e) => {\r\n+                setEmail(e.target.value);\r\n+                setOtpSent(false);\r\n+              }}\r\n+            />\r\n           </div>\r\n \r\n-          <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n-            {!isLogin && (\r\n-              <div className=\"space-y-2\">\r\n-                <Label htmlFor=\"name\">Full Name</Label>\r\n-                <Input\r\n-                  id=\"name\"\r\n-                  type=\"text\"\r\n-                  placeholder=\"John Doe\"\r\n-                  value={name}\r\n-                  onChange={(e) => setName(e.target.value)}\r\n-                  required={!isLogin}\r\n-                  className=\"transition-smooth\"\r\n-                />\r\n-              </div>\r\n-            )}\r\n-\r\n+          {/* REGISTER = password required */}\r\n+          {mode === \"register\" && (\r\n             <div className=\"space-y-2\">\r\n-              <Label htmlFor=\"email\">Email Address</Label>\r\n+              <Label>Password</Label>\r\n               <Input\r\n-                id=\"email\"\r\n-                type=\"email\"\r\n-                placeholder=\"you@example.com\"\r\n-                value={email}\r\n-                onChange={(e) => setEmail(e.target.value)}\r\n-                required\r\n-                className=\"transition-smooth\"\r\n+                type=\"password\"\r\n+                value={password}\r\n+                onChange={(e) => setPassword(e.target.value)}\r\n               />\r\n             </div>\r\n+          )}\r\n \r\n-            <div className=\"space-y-2\">\r\n-              <Label htmlFor=\"password\"></Label>\r\n-              {isLogin ? (\r\n-                <div className=\"relative\">\r\n+          {/* LOGIN MODE */}\r\n+          {mode === \"login\" && (\r\n+            <>\r\n+              <div className=\"flex items-center justify-between\">\r\n+                <Button\r\n+                  variant={isOtpMode ? \"outline\" : \"default\"}\r\n+                  onClick={() => {\r\n+                    setIsOtpMode(false);\r\n+                    setOtpSent(false);\r\n+                  }}\r\n+                >\r\n+                  Password Login\r\n+                </Button>\r\n+                <Button\r\n+                  variant={isOtpMode ? \"default\" : \"outline\"}\r\n+                  onClick={() => {\r\n+                    setIsOtpMode(true);\r\n+                    setOtpSent(false);\r\n+                  }}\r\n+                >\r\n+                  OTP Login\r\n+                </Button>\r\n+              </div>\r\n+\r\n+              {!isOtpMode && (\r\n+                <div className=\"space-y-2\">\r\n+                  <Label>Password</Label>\r\n                   <Input\r\n-                    id=\"password\"\r\n-                    type={showPassword ? \"text\" : \"password\"}\r\n-                    placeholder=\"••••••••\"\r\n+                    type=\"password\"\r\n                     value={password}\r\n                     onChange={(e) => setPassword(e.target.value)}\r\n-                    required\r\n-                    className=\"pr-10 transition-smooth\"\r\n                   />\r\n-                  <button\r\n-                    type=\"button\"\r\n-                    onClick={() => setShowPassword(!showPassword)}\r\n-                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-smooth\"\r\n-                  >\r\n-                    {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n-                  </button>\r\n                 </div>\r\n-              ) : (\r\n-                <PasswordInput\r\n-                  id=\"password\"\r\n-                  value={password}\r\n-                  onChange={setPassword}\r\n-                  required\r\n-                />\r\n               )}\r\n-            </div>\r\n \r\n-            {!isLogin && (\r\n-              <div className=\"space-y-2\">\r\n-                <Label htmlFor=\"confirm-password\">Confirm Password</Label>\r\n-                <div className=\"relative\">\r\n+              {isOtpMode && otpSent && (\r\n+                <div className=\"space-y-2\">\r\n+                  <Label>Enter OTP</Label>\r\n                   <Input\r\n-                    id=\"confirm-password\"\r\n-                    type={showConfirmPassword ? \"text\" : \"password\"}\r\n-                    placeholder=\"••••••••\"\r\n-                    value={confirmPassword}\r\n-                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n-                    required={!isLogin}\r\n-                    className={`pr-10 transition-smooth ${\r\n-                      passwordsMatch ? \"border-green-500\" : passwordsDontMatch ? \"border-destructive\" : \"\"\r\n-                    }`}\r\n+                    value={otp}\r\n+                    onChange={(e) => setOtp(e.target.value)}\r\n+                    placeholder=\"6-digit code\"\r\n                   />\r\n-                  <button\r\n-                    type=\"button\"\r\n\\ No newline at end of file\n-                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n-                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-smooth\"\r\n-                  >\r\n-                    {showConfirmPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n-                  </button>\r\n                 </div>\r\n-                {passwordsMatch && (\r\n-                  <p className=\"text-xs text-green-600\">Passwords match ✓</p>\r\n-                )}\r\n-                {passwordsDontMatch && (\r\n-                  <p className=\"text-xs text-destructive\">Passwords don't match</p>\r\n-                )}\r\n-              </div>\r\n-            )}\r\n+              )}\r\n+            </>\r\n+          )}\r\n \r\n-            {isLogin && (\r\n-              <div className=\"flex items-center justify-between\">\r\n-                <div className=\"flex items-center space-x-2\">\r\n-                  <Checkbox\r\n-                    id=\"remember\"\r\n-                    checked={rememberMe}\r\n-                    onCheckedChange={(checked) => setRememberMe(checked as boolean)}\r\n-                  />\r\n-                  <label\r\n-                    htmlFor=\"remember\"\r\n-                    className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n-                  >\r\n-                    Remember me\r\n-                  </label>\r\n-                </div>\r\n-                <button\r\n-                  type=\"button\"\r\n-                  className=\"text-sm text-primary hover:underline transition-smooth\"\r\n-                >\r\n-                  Forgot password?\r\n-                </button>\r\n-              </div>\r\n-            )}\r\n-\r\n-            <Button\r\n-              type=\"submit\"\r\n-              variant=\"default\"\r\n-              className=\"w-full\"\r\n-              size=\"lg\"\r\n-              disabled={isLoading}\r\n-            >\r\n-              {isLoading ? (\r\n-                <span className=\"flex items-center gap-2\">\r\n-                  <span className=\"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent\" />\r\n-                  Please wait...\r\n-                </span>\r\n-              ) : isLogin ? (\r\n-                \"Sign In\"\r\n-              ) : (\r\n-                \"Create Account\"\r\n-              )}\r\n+          {/* ACTION BUTTONS */}\r\n+          {mode === \"register\" ? (\r\n+            <Button className=\"w-full\" onClick={handleRegister} disabled={isLoading}>\r\n+              {isLoading ? \"Creating...\" : \"Register\"}\r\n             </Button>\r\n+          ) : !isOtpMode ? (\r\n+            <Button className=\"w-full\" onClick={handlePasswordLogin} disabled={isLoading}>\r\n+              {isLoading ? \"Logging in...\" : \"Login\"}\r\n+            </Button>\r\n+          ) : !otpSent ? (\r\n+            <Button className=\"w-full\" onClick={handleSendOtp} disabled={isLoading}>\r\n+              {isLoading ? \"Sending...\" : \"Send OTP\"}\r\n+            </Button>\r\n+          ) : (\r\n+            <Button className=\"w-full\" onClick={handleVerifyOtp} disabled={isLoading}>\r\n+              {isLoading ? \"Verifying...\" : \"Verify OTP & Login\"}\r\n+            </Button>\r\n+          )}\r\n \r\n-            <div className=\"relative\">\r\n-              <div className=\"absolute inset-0 flex items-center\">\r\n-                <span className=\"w-full border-t\" />\r\n-              </div>\r\n-              <div className=\"relative flex justify-center text-xs uppercase\">\r\n-                <span className=\"bg-background px-2 text-muted-foreground\">\r\n-                  Or continue with\r\n-                </span>\r\n-              </div>\r\n-            </div>\r\n-\r\n-            <SocialLoginButtons />\r\n-\r\n-            <div className=\"text-center\">\r\n-              <button\r\n-                type=\"button\"\r\n-                onClick={() => setIsLogin(!isLogin)}\r\n-                className=\"text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n+          <p className=\"text-sm text-center text-muted-foreground\">\r\n+            {mode === \"register\" ? (\r\n+              <span\r\n+                className=\"cursor-pointer underline\"\r\n+                onClick={() => navigate(\"/auth?mode=login\")}\r\n               >\r\n-                {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n-                <span className=\"font-semibold text-primary\">\r\n-                  {isLogin ? \"Sign up\" : \"Sign in\"}\r\n-                </span>\r\n-              </button>\r\n-            </div>\r\n-          </form>\r\n-        </div>\r\n-      </div>\r\n+                Already have an account? Login\r\n+              </span>\r\n+            ) : (\r\n+              <span\r\n+                className=\"cursor-pointer underline\"\r\n+                onClick={() => navigate(\"/auth?mode=register\")}\r\n+              >\r\n+                Don't have an account? Register\r\n+              </span>\r\n+            )}\r\n+          </p>\r\n+        </CardContent>\r\n+      </Card>\r\n     </div>\r\n   );\r\n };\r\n \r\n-export default Auth;\n+export default Auth;\r\n"
                },
                {
                    "date": 1763992770748,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,174 +1,336 @@\n-import { useState } from \"react\";\r\n+import { useState, useEffect } from \"react\";\r\n import { useNavigate, useSearchParams } from \"react-router-dom\";\r\n import { useAuth } from \"@/contexts/AuthContext\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Button } from \"@/components/ui/button\";\r\n import { Input } from \"@/components/ui/input\";\r\n-import { Button } from \"@/components/ui/button\";\r\n import { Label } from \"@/components/ui/label\";\r\n+import { Checkbox } from \"@/components/ui/checkbox\";\r\n+import PasswordInput from \"@/components/PasswordInput\";\r\n+import SocialLoginButtons from \"@/components/SocialLoginButtons\";\r\n+import { Car, Eye, EyeOff } from \"lucide-react\";\r\n+import { toast } from \"@/hooks/use-toast\";\r\n+import { passwordSchema } from \"@/lib/validation\";\r\n+import authHero from \"@/assets/hero-car.jpg\";\r\n \r\n const Auth = () => {\r\n-  const { login, register, sendOtp, verifyOtpLogin, isLoading } = useAuth();\r\n-  const navigate = useNavigate();\r\n-  const [params] = useSearchParams();\r\n-  const mode = params.get(\"mode\") || \"login\";\r\n-\r\n-  const [isOtpMode, setIsOtpMode] = useState(false);\r\n-  const [otpSent, setOtpSent] = useState(false);\r\n-\r\n+  const [searchParams] = useSearchParams();\r\n+  const mode = searchParams.get(\"mode\") || \"login\";\r\n+  const [isLogin, setIsLogin] = useState(mode === \"login\");\r\n   const [name, setName] = useState(\"\");\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n-  const [otp, setOtp] = useState(\"\");\r\n+  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n+  const [rememberMe, setRememberMe] = useState(false);\r\n+  const [showPassword, setShowPassword] = useState(false);\r\n+  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n+  const [isLoading, setIsLoading] = useState(false);\r\n+  \r\n+  const { login, register, user } = useAuth();\r\n+  const navigate = useNavigate();\r\n \r\n-  const handleRegister = async () => {\r\n-    await register(name, email, password);\r\n-    navigate(\"/\");\r\n-  };\r\n+  useEffect(() => {\r\n+    if (user) {\r\n+      navigate(\"/\");\r\n+    }\r\n+  }, [user, navigate]);\r\n \r\n-  const handlePasswordLogin = async () => {\r\n-    await login(email, password);\r\n-    navigate(\"/\");\r\n-  };\r\n+  useEffect(() => {\r\n+    setIsLogin(mode === \"login\");\r\n+  }, [mode]);\r\n \r\n-  const handleSendOtp = async () => {\r\n-    await sendOtp(email);\r\n-    setOtpSent(true);\r\n-  };\r\n+  const handleSubmit = async (e: React.FormEvent) => {\r\n+    e.preventDefault();\r\n+    setIsLoading(true);\r\n \r\n-  const handleVerifyOtp = async () => {\r\n-    await verifyOtpLogin(email, otp);\r\n-    navigate(\"/\");\r\n+    try {\r\n+      // Validate email\r\n+      if (!email.includes(\"@\")) {\r\n+        toast({\r\n+          title: \"Invalid email\",\r\n+          description: \"Please enter a valid email address.\",\r\n+          variant: \"destructive\",\r\n+        });\r\n+        setIsLoading(false);\r\n+        return;\r\n+      }\r\n+\r\n+      // Validate password strength for signup\r\n+      if (!isLogin) {\r\n+        const passwordValidation = passwordSchema.safeParse(password);\r\n+        if (!passwordValidation.success) {\r\n+          toast({\r\n+            title: \"Weak password\",\r\n+            description: passwordValidation.error.issues[0].message,\r\n+            variant: \"destructive\",\r\n+          });\r\n+          setIsLoading(false);\r\n+          return;\r\n+        }\r\n+\r\n+        // Check password match\r\n+        if (password !== confirmPassword) {\r\n+          toast({\r\n+            title: \"Passwords don't match\",\r\n+            description: \"Please make sure your passwords match.\",\r\n+            variant: \"destructive\",\r\n+          });\r\n+          setIsLoading(false);\r\n+          return;\r\n+        }\r\n+      }\r\n+\r\n+      if (isLogin) {\r\n+        await login(email, password);\r\n+        toast({\r\n+          title: \"Welcome back!\",\r\n+          description: \"You've successfully logged in.\",\r\n+        });\r\n+      } else {\r\n+        if (!name.trim()) {\r\n+          toast({\r\n+            title: \"Name required\",\r\n+            description: \"Please enter your full name.\",\r\n+            variant: \"destructive\",\r\n+          });\r\n+          setIsLoading(false);\r\n+          return;\r\n+        }\r\n+        await register(name, email, password);\r\n+        toast({\r\n+          title: \"Account created!\",\r\n+          description: \"Welcome to CarFinder Hub.\",\r\n+        });\r\n+      }\r\n+      navigate(\"/\");\r\n+    } catch (error) {\r\n+      toast({\r\n+        title: \"Error\",\r\n+        description: \"Something went wrong. Please try again.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    } finally {\r\n+      setIsLoading(false);\r\n+    }\r\n   };\r\n \r\n+  const passwordsMatch = !isLogin && password && confirmPassword && password === confirmPassword;\r\n+  const passwordsDontMatch = !isLogin && password && confirmPassword && password !== confirmPassword;\r\n+\r\n   return (\r\n-    <div className=\"min-h-screen flex items-center justify-center bg-background px-4\">\r\n-      <Card className=\"w-full max-w-md shadow-card\">\r\n-        <CardHeader>\r\n-          <CardTitle className=\"text-2xl font-bold text-center\">\r\n-            {mode === \"register\" ? \"Create Account\" : \"Login\"}\r\n-          </CardTitle>\r\n-        </CardHeader>\r\n+    <div className=\"flex min-h-screen\">\r\n+      {/* Left side - Hero Image */}\r\n+      <div className=\"hidden lg:flex lg:w-1/2 relative overflow-hidden\">\r\n+        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/20 to-accent/20 z-10\" />\r\n+        <img\r\n+          src={authHero}\r\n+          alt=\"CarFinder Hub\"\r\n+          className=\"absolute inset-0 h-full w-full object-cover\"\r\n+        />\r\n+        <div className=\"relative z-20 flex flex-col justify-center px-12 text-white\">\r\n+          <div className=\"space-y-6 animate-fade-in\">\r\n+            <div className=\"flex items-center gap-3\">\r\n+              <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-white/20 backdrop-blur-sm\">\r\n+                <Car className=\"h-6 w-6\" />\r\n+              </div>\r\n+              <h1 className=\"text-3xl font-bold\">CarFinder Hub</h1>\r\n+            </div>\r\n+            <p className=\"text-xl font-medium\">\r\n+              Find and list cars across platforms – all in one hub.\r\n+            </p>\r\n+            <p className=\"text-lg text-white/90\">\r\n+              Connect with buyers and sellers on Edmunds, OLX, Facebook Marketplace, and more.\r\n+            </p>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n \r\n-        <CardContent className=\"space-y-4\">\r\n-          {mode === \"register\" && (\r\n-            <div className=\"space-y-2\">\r\n-              <Label>Full Name</Label>\r\n-              <Input value={name} onChange={(e) => setName(e.target.value)} />\r\n+      {/* Right side - Auth Form */}\r\n+      <div className=\"flex w-full items-center justify-center bg-background p-4 lg:w-1/2\">\r\n+        <div className=\"w-full max-w-md space-y-8 animate-fade-in\">\r\n+          {/* Mobile Logo */}\r\n+          <div className=\"flex items-center justify-center gap-3 lg:hidden\">\r\n+            <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10\">\r\n+              <Car className=\"h-6 w-6 text-primary\" />\r\n             </div>\r\n-          )}\r\n+            <h1 className=\"text-2xl font-bold\">CarFinder Hub</h1>\r\n+          </div>\r\n \r\n-          <div className=\"space-y-2\">\r\n-            <Label>Email</Label>\r\n-            <Input\r\n-              type=\"email\"\r\n-              value={email}\r\n-              onChange={(e) => {\r\n-                setEmail(e.target.value);\r\n-                setOtpSent(false);\r\n-              }}\r\n-            />\r\n+          <div className=\"text-center\">\r\n+            <h2 className=\"text-3xl font-bold tracking-tight\">\r\n+              {isLogin ? \"Welcome Back\" : \"Create Account\"}\r\n+            </h2>\r\n+            <p className=\"mt-2 text-muted-foreground\">\r\n+              {isLogin\r\n+                ? \"Enter your credentials to access your account\"\r\n+                : \"Sign up to start finding your perfect car\"}\r\n+            </p>\r\n           </div>\r\n \r\n-          {/* REGISTER = password required */}\r\n-          {mode === \"register\" && (\r\n+          <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n+            {!isLogin && (\r\n+              <div className=\"space-y-2\">\r\n+                <Label htmlFor=\"name\">Full Name</Label>\r\n+                <Input\r\n+                  id=\"name\"\r\n+                  type=\"text\"\r\n+                  placeholder=\"John Doe\"\r\n+                  value={name}\r\n+                  onChange={(e) => setName(e.target.value)}\r\n+                  required={!isLogin}\r\n+                  className=\"transition-smooth\"\r\n+                />\r\n+              </div>\r\n+            )}\r\n+\r\n             <div className=\"space-y-2\">\r\n-              <Label>Password</Label>\r\n+              <Label htmlFor=\"email\">Email Address</Label>\r\n               <Input\r\n-                type=\"password\"\r\n-                value={password}\r\n-                onChange={(e) => setPassword(e.target.value)}\r\n+                id=\"email\"\r\n+                type=\"email\"\r\n+                placeholder=\"you@example.com\"\r\n+                value={email}\r\n+                onChange={(e) => setEmail(e.target.value)}\r\n+                required\r\n+                className=\"transition-smooth\"\r\n               />\r\n             </div>\r\n-          )}\r\n \r\n-          {/* LOGIN MODE */}\r\n-          {mode === \"login\" && (\r\n-            <>\r\n-              <div className=\"flex items-center justify-between\">\r\n-                <Button\r\n-                  variant={isOtpMode ? \"outline\" : \"default\"}\r\n-                  onClick={() => {\r\n-                    setIsOtpMode(false);\r\n-                    setOtpSent(false);\r\n-                  }}\r\n-                >\r\n-                  Password Login\r\n-                </Button>\r\n-                <Button\r\n-                  variant={isOtpMode ? \"default\" : \"outline\"}\r\n-                  onClick={() => {\r\n-                    setIsOtpMode(true);\r\n-                    setOtpSent(false);\r\n-                  }}\r\n-                >\r\n-                  OTP Login\r\n-                </Button>\r\n-              </div>\r\n-\r\n-              {!isOtpMode && (\r\n-                <div className=\"space-y-2\">\r\n-                  <Label>Password</Label>\r\n+            <div className=\"space-y-2\">\r\n+              <Label htmlFor=\"password\"></Label>\r\n+              {isLogin ? (\r\n+                <div className=\"relative\">\r\n                   <Input\r\n-                    type=\"password\"\r\n+                    id=\"password\"\r\n+                    type={showPassword ? \"text\" : \"password\"}\r\n+                    placeholder=\"••••••••\"\r\n                     value={password}\r\n                     onChange={(e) => setPassword(e.target.value)}\r\n+                    required\r\n+                    className=\"pr-10 transition-smooth\"\r\n                   />\r\n+                  <button\r\n+                    type=\"button\"\r\n+                    onClick={() => setShowPassword(!showPassword)}\r\n+                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-smooth\"\r\n+                  >\r\n+                    {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n+                  </button>\r\n                 </div>\r\n+              ) : (\r\n+                <PasswordInput\r\n+                  id=\"password\"\r\n+                  value={password}\r\n+                  onChange={setPassword}\r\n+                  required\r\n+                />\r\n               )}\r\n+            </div>\r\n \r\n-              {isOtpMode && otpSent && (\r\n-                <div className=\"space-y-2\">\r\n-                  <Label>Enter OTP</Label>\r\n+            {!isLogin && (\r\n+              <div className=\"space-y-2\">\r\n+                <Label htmlFor=\"confirm-password\">Confirm Password</Label>\r\n+                <div className=\"relative\">\r\n                   <Input\r\n-                    value={otp}\r\n-                    onChange={(e) => setOtp(e.target.value)}\r\n-                    placeholder=\"6-digit code\"\r\n+                    id=\"confirm-password\"\r\n+                    type={showConfirmPassword ? \"text\" : \"password\"}\r\n+                    placeholder=\"••••••••\"\r\n+                    value={confirmPassword}\r\n+                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n+                    required={!isLogin}\r\n+                    className={`pr-10 transition-smooth ${\r\n+                      passwordsMatch ? \"border-green-500\" : passwordsDontMatch ? \"border-destructive\" : \"\"\r\n+                    }`}\r\n                   />\r\n+                  <button\r\n+                    type=\"button\"\r\n+                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n+                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-smooth\"\r\n+                  >\r\n+                    {showConfirmPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n+                  </button>\r\n                 </div>\r\n+                {passwordsMatch && (\r\n+                  <p className=\"text-xs text-green-600\">Passwords match ✓</p>\r\n+                )}\r\n+                {passwordsDontMatch && (\r\n+                  <p className=\"text-xs text-destructive\">Passwords don't match</p>\r\n+                )}\r\n+              </div>\r\n+            )}\r\n+\r\n+            {isLogin && (\r\n+              <div className=\"flex items-center justify-between\">\r\n+                <div className=\"flex items-center space-x-2\">\r\n+                  <Checkbox\r\n+                    id=\"remember\"\r\n+                    checked={rememberMe}\r\n+                    onCheckedChange={(checked) => setRememberMe(checked as boolean)}\r\n+                  />\r\n+                  <label\r\n+                    htmlFor=\"remember\"\r\n+                    className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n+                  >\r\n+                    Remember me\r\n+                  </label>\r\n+                </div>\r\n+                <button\r\n+                  type=\"button\"\r\n+                  className=\"text-sm text-primary hover:underline transition-smooth\"\r\n+                >\r\n+                  Forgot password?\r\n+                </button>\r\n+              </div>\r\n+            )}\r\n+\r\n+            <Button\r\n+              type=\"submit\"\r\n+              variant=\"default\"\r\n+              className=\"w-full\"\r\n+              size=\"lg\"\r\n+              disabled={isLoading}\r\n+            >\r\n+              {isLoading ? (\r\n+                <span className=\"flex items-center gap-2\">\r\n+                  <span className=\"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent\" />\r\n+                  Please wait...\r\n+                </span>\r\n+              ) : isLogin ? (\r\n+                \"Sign In\"\r\n+              ) : (\r\n+                \"Create Account\"\r\n               )}\r\n-            </>\r\n-          )}\r\n-\r\n-          {/* ACTION BUTTONS */}\r\n-          {mode === \"register\" ? (\r\n-            <Button className=\"w-full\" onClick={handleRegister} disabled={isLoading}>\r\n-              {isLoading ? \"Creating...\" : \"Register\"}\r\n             </Button>\r\n-          ) : !isOtpMode ? (\r\n-            <Button className=\"w-full\" onClick={handlePasswordLogin} disabled={isLoading}>\r\n-              {isLoading ? \"Logging in...\" : \"Login\"}\r\n-            </Button>\r\n-          ) : !otpSent ? (\r\n-            <Button className=\"w-full\" onClick={handleSendOtp} disabled={isLoading}>\r\n-              {isLoading ? \"Sending...\" : \"Send OTP\"}\r\n-            </Button>\r\n-          ) : (\r\n-            <Button className=\"w-full\" onClick={handleVerifyOtp} disabled={isLoading}>\r\n-              {isLoading ? \"Verifying...\" : \"Verify OTP & Login\"}\r\n-            </Button>\r\n-          )}\r\n \r\n-          <p className=\"text-sm text-center text-muted-foreground\">\r\n-            {mode === \"register\" ? (\r\n-              <span\r\n-                className=\"cursor-pointer underline\"\r\n-                onClick={() => navigate(\"/auth?mode=login\")}\r\n+            <div className=\"relative\">\r\n+              <div className=\"absolute inset-0 flex items-center\">\r\n+                <span className=\"w-full border-t\" />\r\n+              </div>\r\n+              <div className=\"relative flex justify-center text-xs uppercase\">\r\n+                <span className=\"bg-background px-2 text-muted-foreground\">\r\n+                  Or continue with\r\n+                </span>\r\n+              </div>\r\n+            </div>\r\n+\r\n+            <SocialLoginButtons />\r\n+\r\n+            <div className=\"text-center\">\r\n+              <button\r\n+                type=\"button\"\r\n+                onClick={() => setIsLogin(!isLogin)}\r\n+                className=\"text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n               >\r\n-                Already have an account? Login\r\n-              </span>\r\n-            ) : (\r\n-              <span\r\n-                className=\"cursor-pointer underline\"\r\n-                onClick={() => navigate(\"/auth?mode=register\")}\r\n-              >\r\n-                Don't have an account? Register\r\n-              </span>\r\n-            )}\r\n-          </p>\r\n-        </CardContent>\r\n-      </Card>\r\n+                {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n+                <span className=\"font-semibold text-primary\">\r\n+                  {isLogin ? \"Sign up\" : \"Sign in\"}\r\n+                </span>\r\n+              </button>\r\n+            </div>\r\n+          </form>\r\n+        </div>\r\n+      </div>\r\n     </div>\r\n   );\r\n };\r\n \r\n-export default Auth;\r\n+export default Auth;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1763994062151,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,140 +15,127 @@\n const Auth = () => {\r\n   const [searchParams] = useSearchParams();\r\n   const mode = searchParams.get(\"mode\") || \"login\";\r\n   const [isLogin, setIsLogin] = useState(mode === \"login\");\r\n+\r\n   const [name, setName] = useState(\"\");\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n+\r\n+  const [otp, setOtp] = useState(\"\");\r\n+  const [otpStep, setOtpStep] = useState(false);\r\n+\r\n   const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n   const [rememberMe, setRememberMe] = useState(false);\r\n   const [showPassword, setShowPassword] = useState(false);\r\n   const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n-  const [isLoading, setIsLoading] = useState(false);\r\n-  \r\n-  const { login, register, user } = useAuth();\r\n+\r\n+  const { requestOtpLogin, verifyOtpLogin, register, user, isLoading } = useAuth();\r\n   const navigate = useNavigate();\r\n \r\n   useEffect(() => {\r\n-    if (user) {\r\n-      navigate(\"/\");\r\n-    }\r\n+    if (user) navigate(\"/\");\r\n   }, [user, navigate]);\r\n \r\n   useEffect(() => {\r\n     setIsLogin(mode === \"login\");\r\n+    setOtpStep(false);\r\n+    setOtp(\"\");\r\n   }, [mode]);\r\n \r\n   const handleSubmit = async (e: React.FormEvent) => {\r\n     e.preventDefault();\r\n-    setIsLoading(true);\r\n \r\n     try {\r\n-      // Validate email\r\n       if (!email.includes(\"@\")) {\r\n-        toast({\r\n-          title: \"Invalid email\",\r\n-          description: \"Please enter a valid email address.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-        setIsLoading(false);\r\n+        toast({ title: \"Invalid email\", description: \"Enter a valid email.\", variant: \"destructive\" });\r\n         return;\r\n       }\r\n \r\n-      // Validate password strength for signup\r\n       if (!isLogin) {\r\n-        const passwordValidation = passwordSchema.safeParse(password);\r\n-        if (!passwordValidation.success) {\r\n-          toast({\r\n-            title: \"Weak password\",\r\n-            description: passwordValidation.error.issues[0].message,\r\n-            variant: \"destructive\",\r\n-          });\r\n-          setIsLoading(false);\r\n+        const v = passwordSchema.safeParse(password);\r\n+        if (!v.success) {\r\n+          toast({ title: \"Weak password\", description: v.error.issues[0].message, variant: \"destructive\" });\r\n           return;\r\n         }\r\n \r\n-        // Check password match\r\n         if (password !== confirmPassword) {\r\n-          toast({\r\n-            title: \"Passwords don't match\",\r\n-            description: \"Please make sure your passwords match.\",\r\n-            variant: \"destructive\",\r\n-          });\r\n-          setIsLoading(false);\r\n+          toast({ title: \"Passwords don't match\", description: \"Check confirm password.\", variant: \"destructive\" });\r\n           return;\r\n         }\r\n-      }\r\n \r\n-      if (isLogin) {\r\n-        await login(email, password);\r\n-        toast({\r\n-          title: \"Welcome back!\",\r\n-          description: \"You've successfully logged in.\",\r\n-        });\r\n-      } else {\r\n         if (!name.trim()) {\r\n-          toast({\r\n-            title: \"Name required\",\r\n-            description: \"Please enter your full name.\",\r\n-            variant: \"destructive\",\r\n-          });\r\n-          setIsLoading(false);\r\n+          toast({ title: \"Name required\", description: \"Enter your full name.\", variant: \"destructive\" });\r\n           return;\r\n         }\r\n+\r\n         await register(name, email, password);\r\n+        toast({ title: \"Account created!\", description: \"Welcome to CarFinder Hub.\" });\r\n+        navigate(\"/\");\r\n+        return;\r\n+      }\r\n+\r\n+      // LOGIN FLOW\r\n+      if (!otpStep) {\r\n+        await requestOtpLogin(email, password);\r\n         toast({\r\n-          title: \"Account created!\",\r\n-          description: \"Welcome to CarFinder Hub.\",\r\n+          title: \"OTP sent!\",\r\n+          description: \"Check your email for the 6-digit code.\",\r\n         });\r\n+        setOtpStep(true);\r\n+        return;\r\n       }\r\n+\r\n+      // OTP STEP\r\n+      if (otp.length !== 6) {\r\n+        toast({\r\n+          title: \"Invalid OTP\",\r\n+          description: \"OTP must be 6 digits.\",\r\n+          variant: \"destructive\",\r\n+        });\r\n+        return;\r\n+      }\r\n+\r\n+      await verifyOtpLogin(email, otp);\r\n+      toast({ title: \"Welcome back!\", description: \"Logged in successfully.\" });\r\n       navigate(\"/\");\r\n-    } catch (error) {\r\n+    } catch {\r\n       toast({\r\n         title: \"Error\",\r\n-        description: \"Something went wrong. Please try again.\",\r\n+        description: \"Something went wrong. Try again.\",\r\n         variant: \"destructive\",\r\n       });\r\n-    } finally {\r\n-      setIsLoading(false);\r\n     }\r\n   };\r\n \r\n   const passwordsMatch = !isLogin && password && confirmPassword && password === confirmPassword;\r\n   const passwordsDontMatch = !isLogin && password && confirmPassword && password !== confirmPassword;\r\n \r\n   return (\r\n     <div className=\"flex min-h-screen\">\r\n-      {/* Left side - Hero Image */}\r\n+      {/* Left Hero */}\r\n       <div className=\"hidden lg:flex lg:w-1/2 relative overflow-hidden\">\r\n         <div className=\"absolute inset-0 bg-gradient-to-br from-primary/20 to-accent/20 z-10\" />\r\n-        <img\r\n-          src={authHero}\r\n-          alt=\"CarFinder Hub\"\r\n-          className=\"absolute inset-0 h-full w-full object-cover\"\r\n-        />\r\n+        <img src={authHero} alt=\"CarFinder Hub\" className=\"absolute inset-0 h-full w-full object-cover\" />\r\n         <div className=\"relative z-20 flex flex-col justify-center px-12 text-white\">\r\n           <div className=\"space-y-6 animate-fade-in\">\r\n             <div className=\"flex items-center gap-3\">\r\n               <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-white/20 backdrop-blur-sm\">\r\n                 <Car className=\"h-6 w-6\" />\r\n               </div>\r\n               <h1 className=\"text-3xl font-bold\">CarFinder Hub</h1>\r\n             </div>\r\n-            <p className=\"text-xl font-medium\">\r\n-              Find and list cars across platforms – all in one hub.\r\n-            </p>\r\n+            <p className=\"text-xl font-medium\">Find and list cars across platforms – all in one hub.</p>\r\n             <p className=\"text-lg text-white/90\">\r\n               Connect with buyers and sellers on Edmunds, OLX, Facebook Marketplace, and more.\r\n             </p>\r\n           </div>\r\n         </div>\r\n       </div>\r\n \r\n-      {/* Right side - Auth Form */}\r\n+      {/* Right Form */}\r\n       <div className=\"flex w-full items-center justify-center bg-background p-4 lg:w-1/2\">\r\n         <div className=\"w-full max-w-md space-y-8 animate-fade-in\">\r\n-          {/* Mobile Logo */}\r\n           <div className=\"flex items-center justify-center gap-3 lg:hidden\">\r\n             <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10\">\r\n               <Car className=\"h-6 w-6 text-primary\" />\r\n             </div>\r\n@@ -160,45 +147,32 @@\n               {isLogin ? \"Welcome Back\" : \"Create Account\"}\r\n             </h2>\r\n             <p className=\"mt-2 text-muted-foreground\">\r\n               {isLogin\r\n-                ? \"Enter your credentials to access your account\"\r\n+                ? otpStep\r\n+                  ? \"Enter the OTP sent to your email\"\r\n+                  : \"Enter your credentials to access your account\"\r\n                 : \"Sign up to start finding your perfect car\"}\r\n             </p>\r\n           </div>\r\n \r\n           <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n             {!isLogin && (\r\n               <div className=\"space-y-2\">\r\n                 <Label htmlFor=\"name\">Full Name</Label>\r\n-                <Input\r\n-                  id=\"name\"\r\n-                  type=\"text\"\r\n-                  placeholder=\"John Doe\"\r\n-                  value={name}\r\n-                  onChange={(e) => setName(e.target.value)}\r\n-                  required={!isLogin}\r\n-                  className=\"transition-smooth\"\r\n-                />\r\n+                <Input id=\"name\" type=\"text\" placeholder=\"John Doe\" value={name} onChange={(e) => setName(e.target.value)} required />\r\n               </div>\r\n             )}\r\n \r\n             <div className=\"space-y-2\">\r\n               <Label htmlFor=\"email\">Email Address</Label>\r\n-              <Input\r\n-                id=\"email\"\r\n-                type=\"email\"\r\n-                placeholder=\"you@example.com\"\r\n-                value={email}\r\n-                onChange={(e) => setEmail(e.target.value)}\r\n-                required\r\n-                className=\"transition-smooth\"\r\n-              />\r\n+              <Input id=\"email\" type=\"email\" placeholder=\"you@example.com\" value={email} onChange={(e) => setEmail(e.target.value)} required />\r\n             </div>\r\n \r\n-            <div className=\"space-y-2\">\r\n-              <Label htmlFor=\"password\"></Label>\r\n-              {isLogin ? (\r\n+            {/* PASSWORD STEP */}\r\n+            {isLogin && !otpStep && (\r\n+              <div className=\"space-y-2\">\r\n+                <Label htmlFor=\"password\"></Label>\r\n                 <div className=\"relative\">\r\n                   <Input\r\n                     id=\"password\"\r\n                     type={showPassword ? \"text\" : \"password\"}\r\n@@ -215,122 +189,124 @@\n                   >\r\n                     {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n                   </button>\r\n                 </div>\r\n-              ) : (\r\n-                <PasswordInput\r\n-                  id=\"password\"\r\n-                  value={password}\r\n-                  onChange={setPassword}\r\n+              </div>\r\n+            )}\r\n+\r\n+            {/* OTP STEP */}\r\n+            {isLogin && otpStep && (\r\n+              <div className=\"space-y-2\">\r\n+                <Label htmlFor=\"otp\">OTP Code</Label>\r\n+                <Input\r\n+                  id=\"otp\"\r\n+                  type=\"text\"\r\n+                  placeholder=\"123456\"\r\n+                  value={otp}\r\n+                  onChange={(e) => setOtp(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\r\n                   required\r\n                 />\r\n-              )}\r\n-            </div>\r\n+                <button\r\n+                  type=\"button\"\r\n+                  onClick={async () => {\r\n+                    await requestOtpLogin(email, password);\r\n+                    toast({ title: \"OTP resent!\", description: \"Check your email.\" });\r\n+                  }}\r\n+                  className=\"text-sm text-primary hover:underline transition-smooth\"\r\n+                >\r\n+                  Resend OTP\r\n+                </button>\r\n+              </div>\r\n+            )}\r\n \r\n+            {/* SIGNUP PASSWORDS */}\r\n             {!isLogin && (\r\n-              <div className=\"space-y-2\">\r\n-                <Label htmlFor=\"confirm-password\">Confirm Password</Label>\r\n-                <div className=\"relative\">\r\n-                  <Input\r\n-                    id=\"confirm-password\"\r\n-                    type={showConfirmPassword ? \"text\" : \"password\"}\r\n-                    placeholder=\"••••••••\"\r\n-                    value={confirmPassword}\r\n-                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n-                    required={!isLogin}\r\n-                    className={`pr-10 transition-smooth ${\r\n-                      passwordsMatch ? \"border-green-500\" : passwordsDontMatch ? \"border-destructive\" : \"\"\r\n-                    }`}\r\n-                  />\r\n-                  <button\r\n-                    type=\"button\"\r\n-                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n-                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-smooth\"\r\n-                  >\r\n-                    {showConfirmPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n-                  </button>\r\n+              <>\r\n+                <div className=\"space-y-2\">\r\n+                  <Label htmlFor=\"password\"></Label>\r\n+                  <PasswordInput id=\"password\" value={password} onChange={setPassword} required />\r\n                 </div>\r\n-                {passwordsMatch && (\r\n-                  <p className=\"text-xs text-green-600\">Passwords match ✓</p>\r\n-                )}\r\n-                {passwordsDontMatch && (\r\n-                  <p className=\"text-xs text-destructive\">Passwords don't match</p>\r\n-                )}\r\n-              </div>\r\n+\r\n+                <div className=\"space-y-2\">\r\n+                  <Label htmlFor=\"confirm-password\">Confirm Password</Label>\r\n+                  <div className=\"relative\">\r\n+                    <Input\r\n+                      id=\"confirm-password\"\r\n+                      type={showConfirmPassword ? \"text\" : \"password\"}\r\n+                      placeholder=\"••••••••\"\r\n+                      value={confirmPassword}\r\n+                      onChange={(e) => setConfirmPassword(e.target.value)}\r\n+                      required={!isLogin}\r\n+                      className={`pr-10 transition-smooth ${\r\n+                        passwordsMatch ? \"border-green-500\" : passwordsDontMatch ? \"border-destructive\" : \"\"\r\n+                      }`}\r\n+                    />\r\n+                    <button\r\n+                      type=\"button\"\r\n+                      onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n+                      className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-smooth\"\r\n+                    >\r\n+                      {showConfirmPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n+                    </button>\r\n+                  </div>\r\n+                  {passwordsMatch && <p className=\"text-xs text-green-600\">Passwords match ✓</p>}\r\n+                  {passwordsDontMatch && <p className=\"text-xs text-destructive\">Passwords don't match</p>}\r\n+                </div>\r\n+              </>\r\n             )}\r\n \r\n-            {isLogin && (\r\n+            {isLogin && !otpStep && (\r\n               <div className=\"flex items-center justify-between\">\r\n                 <div className=\"flex items-center space-x-2\">\r\n-                  <Checkbox\r\n-                    id=\"remember\"\r\n-                    checked={rememberMe}\r\n-                    onCheckedChange={(checked) => setRememberMe(checked as boolean)}\r\n-                  />\r\n-                  <label\r\n-                    htmlFor=\"remember\"\r\n-                    className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n-                  >\r\n+                  <Checkbox id=\"remember\" checked={rememberMe} onCheckedChange={(checked) => setRememberMe(checked as boolean)} />\r\n+                  <label htmlFor=\"remember\" className=\"text-sm font-medium leading-none\">\r\n                     Remember me\r\n                   </label>\r\n                 </div>\r\n-                <button\r\n\\ No newline at end of file\n-                  type=\"button\"\r\n-                  className=\"text-sm text-primary hover:underline transition-smooth\"\r\n-                >\r\n+                <button type=\"button\" className=\"text-sm text-primary hover:underline transition-smooth\">\r\n                   Forgot password?\r\n                 </button>\r\n               </div>\r\n             )}\r\n \r\n-            <Button\r\n-              type=\"submit\"\r\n-              variant=\"default\"\r\n-              className=\"w-full\"\r\n-              size=\"lg\"\r\n-              disabled={isLoading}\r\n-            >\r\n+            <Button type=\"submit\" variant=\"default\" className=\"w-full\" size=\"lg\" disabled={isLoading}>\r\n               {isLoading ? (\r\n                 <span className=\"flex items-center gap-2\">\r\n                   <span className=\"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent\" />\r\n                   Please wait...\r\n                 </span>\r\n-              ) : isLogin ? (\r\n-                \"Sign In\"\r\n-              ) : (\r\n-                \"Create Account\"\r\n-              )}\r\n+              ) : isLogin ? (otpStep ? \"Verify OTP\" : \"Sign In\") : \"Create Account\"}\r\n             </Button>\r\n \r\n-            <div className=\"relative\">\r\n-              <div className=\"absolute inset-0 flex items-center\">\r\n-                <span className=\"w-full border-t\" />\r\n-              </div>\r\n-              <div className=\"relative flex justify-center text-xs uppercase\">\r\n-                <span className=\"bg-background px-2 text-muted-foreground\">\r\n-                  Or continue with\r\n-                </span>\r\n-              </div>\r\n-            </div>\r\n+            {!otpStep && (\r\n+              <>\r\n+                <div className=\"relative\">\r\n+                  <div className=\"absolute inset-0 flex items-center\">\r\n+                    <span className=\"w-full border-t\" />\r\n+                  </div>\r\n+                  <div className=\"relative flex justify-center text-xs uppercase\">\r\n+                    <span className=\"bg-background px-2 text-muted-foreground\">Or continue with</span>\r\n+                  </div>\r\n+                </div>\r\n \r\n-            <SocialLoginButtons />\r\n+                <SocialLoginButtons />\r\n \r\n-            <div className=\"text-center\">\r\n-              <button\r\n-                type=\"button\"\r\n-                onClick={() => setIsLogin(!isLogin)}\r\n-                className=\"text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n-              >\r\n-                {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n-                <span className=\"font-semibold text-primary\">\r\n-                  {isLogin ? \"Sign up\" : \"Sign in\"}\r\n-                </span>\r\n-              </button>\r\n-            </div>\r\n+                <div className=\"text-center\">\r\n+                  <button\r\n+                    type=\"button\"\r\n+                    onClick={() => setIsLogin(!isLogin)}\r\n+                    className=\"text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n+                  >\r\n+                    {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n+                    <span className=\"font-semibold text-primary\">{isLogin ? \"Sign up\" : \"Sign in\"}</span>\r\n+                  </button>\r\n+                </div>\r\n+              </>\r\n+            )}\r\n           </form>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n \r\n-export default Auth;\n+export default Auth;\r\n"
                },
                {
                    "date": 1764677516729,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,312 +0,0 @@\n-import { useState, useEffect } from \"react\";\r\n-import { useNavigate, useSearchParams } from \"react-router-dom\";\r\n-import { useAuth } from \"@/contexts/AuthContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Input } from \"@/components/ui/input\";\r\n-import { Label } from \"@/components/ui/label\";\r\n-import { Checkbox } from \"@/components/ui/checkbox\";\r\n-import PasswordInput from \"@/components/PasswordInput\";\r\n-import SocialLoginButtons from \"@/components/SocialLoginButtons\";\r\n-import { Car, Eye, EyeOff } from \"lucide-react\";\r\n-import { toast } from \"@/hooks/use-toast\";\r\n-import { passwordSchema } from \"@/lib/validation\";\r\n-import authHero from \"@/assets/hero-car.jpg\";\r\n-\r\n-const Auth = () => {\r\n-  const [searchParams] = useSearchParams();\r\n-  const mode = searchParams.get(\"mode\") || \"login\";\r\n-  const [isLogin, setIsLogin] = useState(mode === \"login\");\r\n-\r\n-  const [name, setName] = useState(\"\");\r\n-  const [email, setEmail] = useState(\"\");\r\n-  const [password, setPassword] = useState(\"\");\r\n-\r\n-  const [otp, setOtp] = useState(\"\");\r\n-  const [otpStep, setOtpStep] = useState(false);\r\n-\r\n-  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n-  const [rememberMe, setRememberMe] = useState(false);\r\n-  const [showPassword, setShowPassword] = useState(false);\r\n-  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n-\r\n-  const { requestOtpLogin, verifyOtpLogin, register, user, isLoading } = useAuth();\r\n-  const navigate = useNavigate();\r\n-\r\n-  useEffect(() => {\r\n-    if (user) navigate(\"/\");\r\n-  }, [user, navigate]);\r\n-\r\n-  useEffect(() => {\r\n-    setIsLogin(mode === \"login\");\r\n-    setOtpStep(false);\r\n-    setOtp(\"\");\r\n-  }, [mode]);\r\n-\r\n-  const handleSubmit = async (e: React.FormEvent) => {\r\n-    e.preventDefault();\r\n-\r\n-    try {\r\n-      if (!email.includes(\"@\")) {\r\n-        toast({ title: \"Invalid email\", description: \"Enter a valid email.\", variant: \"destructive\" });\r\n-        return;\r\n-      }\r\n-\r\n-      if (!isLogin) {\r\n-        const v = passwordSchema.safeParse(password);\r\n-        if (!v.success) {\r\n-          toast({ title: \"Weak password\", description: v.error.issues[0].message, variant: \"destructive\" });\r\n-          return;\r\n-        }\r\n-\r\n-        if (password !== confirmPassword) {\r\n-          toast({ title: \"Passwords don't match\", description: \"Check confirm password.\", variant: \"destructive\" });\r\n-          return;\r\n-        }\r\n-\r\n-        if (!name.trim()) {\r\n-          toast({ title: \"Name required\", description: \"Enter your full name.\", variant: \"destructive\" });\r\n-          return;\r\n-        }\r\n-\r\n-        await register(name, email, password);\r\n-        toast({ title: \"Account created!\", description: \"Welcome to CarFinder Hub.\" });\r\n-        navigate(\"/\");\r\n-        return;\r\n-      }\r\n-\r\n-      // LOGIN FLOW\r\n-      if (!otpStep) {\r\n-        await requestOtpLogin(email, password);\r\n-        toast({\r\n-          title: \"OTP sent!\",\r\n-          description: \"Check your email for the 6-digit code.\",\r\n-        });\r\n-        setOtpStep(true);\r\n-        return;\r\n-      }\r\n-\r\n-      // OTP STEP\r\n-      if (otp.length !== 6) {\r\n-        toast({\r\n-          title: \"Invalid OTP\",\r\n-          description: \"OTP must be 6 digits.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-        return;\r\n-      }\r\n-\r\n-      await verifyOtpLogin(email, otp);\r\n-      toast({ title: \"Welcome back!\", description: \"Logged in successfully.\" });\r\n-      navigate(\"/\");\r\n-    } catch {\r\n-      toast({\r\n-        title: \"Error\",\r\n-        description: \"Something went wrong. Try again.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-  };\r\n-\r\n-  const passwordsMatch = !isLogin && password && confirmPassword && password === confirmPassword;\r\n-  const passwordsDontMatch = !isLogin && password && confirmPassword && password !== confirmPassword;\r\n-\r\n-  return (\r\n-    <div className=\"flex min-h-screen\">\r\n-      {/* Left Hero */}\r\n-      <div className=\"hidden lg:flex lg:w-1/2 relative overflow-hidden\">\r\n-        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/20 to-accent/20 z-10\" />\r\n-        <img src={authHero} alt=\"CarFinder Hub\" className=\"absolute inset-0 h-full w-full object-cover\" />\r\n-        <div className=\"relative z-20 flex flex-col justify-center px-12 text-white\">\r\n-          <div className=\"space-y-6 animate-fade-in\">\r\n-            <div className=\"flex items-center gap-3\">\r\n-              <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-white/20 backdrop-blur-sm\">\r\n-                <Car className=\"h-6 w-6\" />\r\n-              </div>\r\n-              <h1 className=\"text-3xl font-bold\">CarFinder Hub</h1>\r\n-            </div>\r\n-            <p className=\"text-xl font-medium\">Find and list cars across platforms – all in one hub.</p>\r\n-            <p className=\"text-lg text-white/90\">\r\n-              Connect with buyers and sellers on Edmunds, OLX, Facebook Marketplace, and more.\r\n-            </p>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-\r\n-      {/* Right Form */}\r\n-      <div className=\"flex w-full items-center justify-center bg-background p-4 lg:w-1/2\">\r\n-        <div className=\"w-full max-w-md space-y-8 animate-fade-in\">\r\n-          <div className=\"flex items-center justify-center gap-3 lg:hidden\">\r\n-            <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10\">\r\n-              <Car className=\"h-6 w-6 text-primary\" />\r\n-            </div>\r\n-            <h1 className=\"text-2xl font-bold\">CarFinder Hub</h1>\r\n-          </div>\r\n-\r\n-          <div className=\"text-center\">\r\n-            <h2 className=\"text-3xl font-bold tracking-tight\">\r\n-              {isLogin ? \"Welcome Back\" : \"Create Account\"}\r\n-            </h2>\r\n-            <p className=\"mt-2 text-muted-foreground\">\r\n-              {isLogin\r\n-                ? otpStep\r\n-                  ? \"Enter the OTP sent to your email\"\r\n-                  : \"Enter your credentials to access your account\"\r\n-                : \"Sign up to start finding your perfect car\"}\r\n-            </p>\r\n-          </div>\r\n-\r\n-          <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n-            {!isLogin && (\r\n-              <div className=\"space-y-2\">\r\n-                <Label htmlFor=\"name\">Full Name</Label>\r\n-                <Input id=\"name\" type=\"text\" placeholder=\"John Doe\" value={name} onChange={(e) => setName(e.target.value)} required />\r\n-              </div>\r\n-            )}\r\n-\r\n-            <div className=\"space-y-2\">\r\n-              <Label htmlFor=\"email\">Email Address</Label>\r\n-              <Input id=\"email\" type=\"email\" placeholder=\"you@example.com\" value={email} onChange={(e) => setEmail(e.target.value)} required />\r\n-            </div>\r\n-\r\n-            {/* PASSWORD STEP */}\r\n-            {isLogin && !otpStep && (\r\n-              <div className=\"space-y-2\">\r\n-                <Label htmlFor=\"password\"></Label>\r\n-                <div className=\"relative\">\r\n-                  <Input\r\n-                    id=\"password\"\r\n-                    type={showPassword ? \"text\" : \"password\"}\r\n-                    placeholder=\"••••••••\"\r\n-                    value={password}\r\n-                    onChange={(e) => setPassword(e.target.value)}\r\n-                    required\r\n-                    className=\"pr-10 transition-smooth\"\r\n-                  />\r\n-                  <button\r\n-                    type=\"button\"\r\n-                    onClick={() => setShowPassword(!showPassword)}\r\n-                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-smooth\"\r\n-                  >\r\n-                    {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n-                  </button>\r\n-                </div>\r\n-              </div>\r\n-            )}\r\n-\r\n-            {/* OTP STEP */}\r\n-            {isLogin && otpStep && (\r\n-              <div className=\"space-y-2\">\r\n-                <Label htmlFor=\"otp\">OTP Code</Label>\r\n-                <Input\r\n-                  id=\"otp\"\r\n-                  type=\"text\"\r\n-                  placeholder=\"123456\"\r\n-                  value={otp}\r\n-                  onChange={(e) => setOtp(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\r\n-                  required\r\n-                />\r\n-                <button\r\n-                  type=\"button\"\r\n-                  onClick={async () => {\r\n-                    await requestOtpLogin(email, password);\r\n-                    toast({ title: \"OTP resent!\", description: \"Check your email.\" });\r\n-                  }}\r\n-                  className=\"text-sm text-primary hover:underline transition-smooth\"\r\n-                >\r\n-                  Resend OTP\r\n-                </button>\r\n-              </div>\r\n-            )}\r\n-\r\n-            {/* SIGNUP PASSWORDS */}\r\n-            {!isLogin && (\r\n-              <>\r\n-                <div className=\"space-y-2\">\r\n-                  <Label htmlFor=\"password\"></Label>\r\n-                  <PasswordInput id=\"password\" value={password} onChange={setPassword} required />\r\n-                </div>\r\n-\r\n-                <div className=\"space-y-2\">\r\n-                  <Label htmlFor=\"confirm-password\">Confirm Password</Label>\r\n-                  <div className=\"relative\">\r\n-                    <Input\r\n-                      id=\"confirm-password\"\r\n-                      type={showConfirmPassword ? \"text\" : \"password\"}\r\n-                      placeholder=\"••••••••\"\r\n-                      value={confirmPassword}\r\n-                      onChange={(e) => setConfirmPassword(e.target.value)}\r\n-                      required={!isLogin}\r\n-                      className={`pr-10 transition-smooth ${\r\n-                        passwordsMatch ? \"border-green-500\" : passwordsDontMatch ? \"border-destructive\" : \"\"\r\n-                      }`}\r\n-                    />\r\n-                    <button\r\n-                      type=\"button\"\r\n-                      onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n-                      className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-smooth\"\r\n-                    >\r\n-                      {showConfirmPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n-                    </button>\r\n-                  </div>\r\n-                  {passwordsMatch && <p className=\"text-xs text-green-600\">Passwords match ✓</p>}\r\n-                  {passwordsDontMatch && <p className=\"text-xs text-destructive\">Passwords don't match</p>}\r\n-                </div>\r\n-              </>\r\n-            )}\r\n-\r\n-            {isLogin && !otpStep && (\r\n-              <div className=\"flex items-center justify-between\">\r\n-                <div className=\"flex items-center space-x-2\">\r\n-                  <Checkbox id=\"remember\" checked={rememberMe} onCheckedChange={(checked) => setRememberMe(checked as boolean)} />\r\n-                  <label htmlFor=\"remember\" className=\"text-sm font-medium leading-none\">\r\n-                    Remember me\r\n-                  </label>\r\n-                </div>\r\n-                <button type=\"button\" className=\"text-sm text-primary hover:underline transition-smooth\">\r\n-                  Forgot password?\r\n-                </button>\r\n-              </div>\r\n-            )}\r\n-\r\n-            <Button type=\"submit\" variant=\"default\" className=\"w-full\" size=\"lg\" disabled={isLoading}>\r\n-              {isLoading ? (\r\n-                <span className=\"flex items-center gap-2\">\r\n-                  <span className=\"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent\" />\r\n-                  Please wait...\r\n-                </span>\r\n-              ) : isLogin ? (otpStep ? \"Verify OTP\" : \"Sign In\") : \"Create Account\"}\r\n-            </Button>\r\n-\r\n-            {!otpStep && (\r\n-              <>\r\n-                <div className=\"relative\">\r\n-                  <div className=\"absolute inset-0 flex items-center\">\r\n-                    <span className=\"w-full border-t\" />\r\n-                  </div>\r\n-                  <div className=\"relative flex justify-center text-xs uppercase\">\r\n-                    <span className=\"bg-background px-2 text-muted-foreground\">Or continue with</span>\r\n-                  </div>\r\n-                </div>\r\n-\r\n-                <SocialLoginButtons />\r\n-\r\n-                <div className=\"text-center\">\r\n-                  <button\r\n-                    type=\"button\"\r\n-                    onClick={() => setIsLogin(!isLogin)}\r\n-                    className=\"text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n-                  >\r\n-                    {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n-                    <span className=\"font-semibold text-primary\">{isLogin ? \"Sign up\" : \"Sign in\"}</span>\r\n-                  </button>\r\n-                </div>\r\n-              </>\r\n-            )}\r\n-          </form>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default Auth;\r\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764677524953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +0,0 @@\n-\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764677537569,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,343 @@\n-\n+// src/pages/Auth.tsx\r\n+import { useState, useEffect } from \"react\";\r\n+import { useNavigate, useSearchParams } from \"react-router-dom\";\r\n+import { useAuth } from \"@/contexts/AuthContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Input } from \"@/components/ui/input\";\r\n+import { Label } from \"@/components/ui/label\";\r\n+import { Checkbox } from \"@/components/ui/checkbox\";\r\n+import PasswordInput from \"@/components/PasswordInput\";\r\n+import SocialLoginButtons from \"@/components/SocialLoginButtons\";\r\n+import { Car, Eye, EyeOff } from \"lucide-react\";\r\n+import { toast } from \"@/hooks/use-toast\";\r\n+import { passwordSchema } from \"@/lib/validation\";\r\n+import authHero from \"@/assets/hero-car.jpg\";\r\n+\r\n+const Auth = () => {\r\n+  const [searchParams] = useSearchParams();\r\n+  const mode = searchParams.get(\"mode\") || \"login\";\r\n+  const [isLogin, setIsLogin] = useState(mode === \"login\");\r\n+\r\n+  const [name, setName] = useState(\"\");\r\n+  const [email, setEmail] = useState(\"\");\r\n+  const [password, setPassword] = useState(\"\");\r\n+\r\n+  const [otp, setOtp] = useState(\"\");\r\n+  const [otpStep, setOtpStep] = useState(false);\r\n+\r\n+  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n+  const [rememberMe, setRememberMe] = useState(false);\r\n+\r\n+  const [showPassword, setShowPassword] = useState(false);\r\n+  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n+\r\n+  const { requestOtpLogin, verifyOtpLogin, register, user, isLoading } =\r\n+    useAuth();\r\n+  const navigate = useNavigate();\r\n+\r\n+  useEffect(() => {\r\n+    if (user) navigate(\"/\");\r\n+  }, [user, navigate]);\r\n+\r\n+  useEffect(() => {\r\n+    setIsLogin(mode === \"login\");\r\n+    setOtpStep(false);\r\n+    setOtp(\"\");\r\n+  }, [mode]);\r\n+\r\n+  const handleSubmit = async (e: React.FormEvent) => {\r\n+    e.preventDefault();\r\n+\r\n+    if (!email.includes(\"@\")) {\r\n+      toast({\r\n+        title: \"Invalid email\",\r\n+        description: \"Enter a valid email.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+      return;\r\n+    }\r\n+\r\n+    try {\r\n+      if (!isLogin) {\r\n+        // SIGNUP VALIDATION\r\n+        const v = passwordSchema.safeParse(password);\r\n+        if (!v.success) {\r\n+          toast({\r\n+            title: \"Weak password\",\r\n+            description: v.error.issues[0].message,\r\n+            variant: \"destructive\",\r\n+          });\r\n+          return;\r\n+        }\r\n+\r\n+        if (password !== confirmPassword) {\r\n+          toast({\r\n+            title: \"Passwords don't match\",\r\n+            description: \"Check confirm password.\",\r\n+            variant: \"destructive\",\r\n+          });\r\n+          return;\r\n+        }\r\n+\r\n+        if (!name.trim()) {\r\n+          toast({\r\n+            title: \"Name required\",\r\n+            description: \"Enter your full name.\",\r\n+            variant: \"destructive\",\r\n+          });\r\n+          return;\r\n+        }\r\n+\r\n+        await register(name, email, password);\r\n+        toast({ title: \"Account created!\", description: \"Welcome to CarsPlus!\" });\r\n+        navigate(\"/\");\r\n+        return;\r\n+      }\r\n+\r\n+      // LOGIN FLOW\r\n+      if (!otpStep) {\r\n+        await requestOtpLogin(email, password);\r\n+        toast({\r\n+          title: \"OTP sent!\",\r\n+          description: \"Check your email.\",\r\n+        });\r\n+        setOtpStep(true);\r\n+        return;\r\n+      }\r\n+\r\n+      if (otp.length !== 6) {\r\n+        toast({\r\n+          title: \"Invalid OTP\",\r\n+          description: \"OTP must be 6 digits.\",\r\n+          variant: \"destructive\",\r\n+        });\r\n+        return;\r\n+      }\r\n+\r\n+      await verifyOtpLogin(email, otp);\r\n+      toast({ title: \"Welcome back!\", description: \"Login successful.\" });\r\n+      navigate(\"/\");\r\n+    } catch {\r\n+      toast({\r\n+        title: \"Error\",\r\n+        description: \"Something went wrong.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+  };\r\n+\r\n+  const passwordsMatch =\r\n+    !isLogin && password && confirmPassword && password === confirmPassword;\r\n+\r\n+  const passwordsDontMatch =\r\n+    !isLogin && password && confirmPassword && password !== confirmPassword;\r\n+\r\n+  return (\r\n+    <div className=\"flex min-h-screen bg-background\">\r\n+      {/* --- LEFT HERO (hidden on mobile) --- */}\r\n+      <div className=\"hidden lg:flex lg:w-1/2 relative\">\r\n+        <img\r\n+          src={authHero}\r\n+          alt=\"CarFinder\"\r\n+          className=\"absolute inset-0 h-full w-full object-cover opacity-90\"\r\n+        />\r\n+        <div className=\"absolute inset-0 bg-gradient-to-br from-black/40 to-black/10\" />\r\n+        <div className=\"relative z-20 flex flex-col justify-center px-10 text-white space-y-4\">\r\n+          <div className=\"flex items-center gap-3\">\r\n+            <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-white/20\">\r\n+              <Car className=\"h-5 w-5\" />\r\n+            </div>\r\n+            <h1 className=\"text-2xl font-bold\">CarsPlus Hub</h1>\r\n+          </div>\r\n+          <p className=\"text-base leading-tight\">\r\n+            Find and list cars across multiple platforms — all in one hub.\r\n+          </p>\r\n+        </div>\r\n+      </div>\r\n+\r\n+      {/* --- RIGHT FORM (compact mobile) --- */}\r\n+      <div className=\"flex w-full items-center justify-center p-4 lg:w-1/2\">\r\n+        <div className=\"w-full max-w-sm space-y-6\">\r\n+          {/* Mobile logo */}\r\n+          <div className=\"flex items-center justify-center gap-2 lg:hidden mb-2\">\r\n+            <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10\">\r\n+              <Car className=\"h-5 w-5 text-primary\" />\r\n+            </div>\r\n+            <h1 className=\"text-xl font-bold\">CarsPlus Hub</h1>\r\n+          </div>\r\n+\r\n+          {/* Title */}\r\n+          <div className=\"text-center space-y-1\">\r\n+            <h2 className=\"text-xl font-bold\">\r\n+              {isLogin ? \"Welcome Back\" : \"Create Account\"}\r\n+            </h2>\r\n+            <p className=\"text-xs text-muted-foreground leading-tight\">\r\n+              {isLogin\r\n+                ? otpStep\r\n+                  ? \"Enter the OTP sent to your email\"\r\n+                  : \"Login to your account\"\r\n+                : \"Sign up to continue\"}\r\n+            </p>\r\n+          </div>\r\n+\r\n+          {/* Form */}\r\n+          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n+            {/* Name */}\r\n+            {!isLogin && (\r\n+              <div className=\"space-y-1\">\r\n+                <Label className=\"text-xs\">Full Name</Label>\r\n+                <Input\r\n+                  className=\"h-8 text-sm\"\r\n+                  value={name}\r\n+                  onChange={(e) => setName(e.target.value)}\r\n+                  required\r\n+                />\r\n+              </div>\r\n+            )}\r\n+\r\n+            {/* Email */}\r\n+            <div className=\"space-y-1\">\r\n+              <Label className=\"text-xs\">Email</Label>\r\n+              <Input\r\n+                className=\"h-8 text-sm\"\r\n+                value={email}\r\n+                onChange={(e) => setEmail(e.target.value)}\r\n+                required\r\n+              />\r\n+            </div>\r\n+\r\n+            {/* Password (login step) */}\r\n+            {isLogin && !otpStep && (\r\n+              <div className=\"space-y-1\">\r\n+                <Label className=\"text-xs\">Password</Label>\r\n+                <div className=\"relative\">\r\n+                  <Input\r\n+                    className=\"h-8 text-sm pr-8\"\r\n+                    type={showPassword ? \"text\" : \"password\"}\r\n+                    value={password}\r\n+                    onChange={(e) => setPassword(e.target.value)}\r\n+                    required\r\n+                  />\r\n+                  <button\r\n+                    type=\"button\"\r\n+                    onClick={() => setShowPassword(!showPassword)}\r\n+                    className=\"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground\"\r\n+                  >\r\n+                    {showPassword ? (\r\n+                      <EyeOff className=\"h-3 w-3\" />\r\n+                    ) : (\r\n+                      <Eye className=\"h-3 w-3\" />\r\n+                    )}\r\n+                  </button>\r\n+                </div>\r\n+              </div>\r\n+            )}\r\n+\r\n+            {/* OTP STEP */}\r\n+            {isLogin && otpStep && (\r\n+              <div className=\"space-y-1\">\r\n+                <Label className=\"text-xs\">OTP Code</Label>\r\n+                <Input\r\n+                  className=\"h-8 text-sm\"\r\n+                  maxLength={6}\r\n+                  value={otp}\r\n+                  onChange={(e) =>\r\n+                    setOtp(e.target.value.replace(/\\D/g, \"\").slice(0, 6))\r\n+                  }\r\n+                  required\r\n+                />\r\n+              </div>\r\n+            )}\r\n+\r\n+            {/* Signup passwords */}\r\n+            {!isLogin && (\r\n+              <>\r\n+                <PasswordInput\r\n+                  id=\"password\"\r\n+                  value={password}\r\n+                  onChange={setPassword}\r\n+                  small\r\n+                />\r\n+\r\n+                <div className=\"space-y-1\">\r\n+                  <Label className=\"text-xs\">Confirm Password</Label>\r\n+                  <Input\r\n+                    className={`h-8 text-sm pr-8 ${\r\n+                      passwordsMatch\r\n+                        ? \"border-green-500\"\r\n+                        : passwordsDontMatch\r\n+                        ? \"border-destructive\"\r\n+                        : \"\"\r\n+                    }`}\r\n+                    type={showConfirmPassword ? \"text\" : \"password\"}\r\n+                    value={confirmPassword}\r\n+                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n+                  />\r\n+                </div>\r\n+              </>\r\n+            )}\r\n+\r\n+            {/* Remember me */}\r\n+            {isLogin && !otpStep && (\r\n+              <div className=\"flex items-center justify-between\">\r\n+                <div className=\"flex items-center gap-1\">\r\n+                  <Checkbox\r\n+                    checked={rememberMe}\r\n+                    onCheckedChange={(v) => setRememberMe(v as boolean)}\r\n+                    className=\"h-3 w-3\"\r\n+                  />\r\n+                  <span className=\"text-xs\">Remember me</span>\r\n+                </div>\r\n+                <button className=\"text-xs text-primary\">Forgot?</button>\r\n+              </div>\r\n+            )}\r\n+\r\n+            {/* SUBMIT BTN */}\r\n+            <Button\r\n+              type=\"submit\"\r\n+              className=\"w-full h-9 text-sm\"\r\n+              disabled={isLoading}\r\n+            >\r\n+              {isLoading\r\n+                ? \"Please wait...\"\r\n+                : isLogin\r\n+                ? otpStep\r\n+                  ? \"Verify OTP\"\r\n+                  : \"Sign In\"\r\n+                : \"Create Account\"}\r\n+            </Button>\r\n+\r\n+            {/* Divider */}\r\n+            {!otpStep && (\r\n+              <>\r\n+                <div className=\"relative\">\r\n+                  <span className=\"absolute inset-0 border-t\" />\r\n+                  <span className=\"relative mx-auto bg-background px-2 text-[10px] text-muted-foreground\">\r\n+                    Or continue with\r\n+                  </span>\r\n+                </div>\r\n+\r\n+                <SocialLoginButtons  />\r\n+\r\n+                <button\r\n+                  type=\"button\"\r\n+                  onClick={() => setIsLogin(!isLogin)}\r\n+                  className=\"w-full text-xs text-muted-foreground\"\r\n+                >\r\n+                  {isLogin\r\n+                    ? \"Don't have an account? \"\r\n+                    : \"Already have an account? \"}\r\n+                  <span className=\"text-primary font-semibold\">\r\n+                    {isLogin ? \"Sign up\" : \"Sign in\"}\r\n+                  </span>\r\n+                </button>\r\n+              </>\r\n+            )}\r\n+          </form>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default Auth;\r\n"
                },
                {
                    "date": 1764775804289,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n                 <PasswordInput\r\n                   id=\"password\"\r\n                   value={password}\r\n                   onChange={setPassword}\r\n-                  small\r\n+                 \r\n                 />\r\n \r\n                 <div className=\"space-y-1\">\r\n                   <Label className=\"text-xs\">Confirm Password</Label>\r\n@@ -287,9 +287,15 @@\n                     className=\"h-3 w-3\"\r\n                   />\r\n                   <span className=\"text-xs\">Remember me</span>\r\n                 </div>\r\n-                <button className=\"text-xs text-primary\">Forgot?</button>\r\n+                <button\r\n+  type=\"button\"\r\n+  onClick={() => navigate(\"/forgot-password\")}\r\n+  className=\"text-xs text-primary\"\r\n+>\r\n+  Forgot?\r\n+</button>\r\n               </div>\r\n             )}\r\n \r\n             {/* SUBMIT BTN */}\r\n"
                }
            ],
            "date": 1759428007971,
            "name": "Commit-0",
            "content": "import { useState, useEffect } from \"react\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport PasswordInput from \"@/components/PasswordInput\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Car } from \"lucide-react\";\r\nimport { toast } from \"@/hooks/use-toast\";\r\nimport { passwordSchema } from \"@/lib/validation\";\r\n\r\nconst Auth = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const mode = searchParams.get(\"mode\") || \"login\";\r\n  const [isLogin, setIsLogin] = useState(mode === \"login\");\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  \r\n  const { login, register, user } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      navigate(\"/\");\r\n    }\r\n  }, [user, navigate]);\r\n\r\n  useEffect(() => {\r\n    setIsLogin(mode === \"login\");\r\n  }, [mode]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      // Validate password strength\r\n      if (!isLogin) {\r\n        const passwordValidation = passwordSchema.safeParse(password);\r\n        if (!passwordValidation.success) {\r\n          toast({\r\n            title: \"Weak password\",\r\n            description: passwordValidation.error.issues[0].message,\r\n            variant: \"destructive\",\r\n          });\r\n          setIsLoading(false);\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (isLogin) {\r\n        await login(email, password);\r\n        toast({\r\n          title: \"Welcome back!\",\r\n          description: \"You've successfully logged in.\",\r\n        });\r\n      } else {\r\n        if (!name.trim()) {\r\n          toast({\r\n            title: \"Name required\",\r\n            description: \"Please enter your name.\",\r\n            variant: \"destructive\",\r\n          });\r\n          setIsLoading(false);\r\n          return;\r\n        }\r\n        await register(name, email, password);\r\n        toast({\r\n          title: \"Account created!\",\r\n          description: \"Welcome to CarFinder Hub.\",\r\n        });\r\n      }\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Something went wrong. Please try again.\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-br from-background to-secondary p-4\">\r\n      <Card className=\"w-full max-w-md shadow-card-hover animate-fade-in\">\r\n        <CardHeader className=\"space-y-4 text-center\">\r\n          <div className=\"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-primary/10\">\r\n            <Car className=\"h-8 w-8 text-primary\" />\r\n          </div>\r\n          <div>\r\n            <CardTitle className=\"text-2xl\">\r\n              {isLogin ? \"Welcome Back\" : \"Create Account\"}\r\n            </CardTitle>\r\n            <CardDescription>\r\n              {isLogin\r\n                ? \"Enter your credentials to access your account\"\r\n                : \"Sign up to start finding your perfect car\"}\r\n            </CardDescription>\r\n          </div>\r\n        </CardHeader>\r\n\r\n        <CardContent>\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            {!isLogin && (\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"name\">Full Name</Label>\r\n                <Input\r\n                  id=\"name\"\r\n                  type=\"text\"\r\n                  placeholder=\"John Doe\"\r\n                  value={name}\r\n                  onChange={(e) => setName(e.target.value)}\r\n                  required={!isLogin}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"email\">Email</Label>\r\n              <Input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                placeholder=\"you@example.com\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"password\">Password</Label>\r\n              <PasswordInput\r\n                id=\"password\"\r\n                value={password}\r\n                onChange={setPassword}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"accent\"\r\n              className=\"w-full\"\r\n              size=\"lg\"\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading ? \"Please wait...\" : isLogin ? \"Sign In\" : \"Create Account\"}\r\n            </Button>\r\n\r\n            <div className=\"text-center\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setIsLogin(!isLogin)}\r\n                className=\"text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n              >\r\n                {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n                <span className=\"font-semibold text-primary\">\r\n                  {isLogin ? \"Sign up\" : \"Sign in\"}\r\n                </span>\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n"
        }
    ]
}