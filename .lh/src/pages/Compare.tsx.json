{
    "sourceFile": "src/pages/Compare.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 23,
            "patches": [
                {
                    "date": 1759428022471,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1759428271812,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,9 +135,9 @@\n                   </div>\r\n                   {comparisonList.map((car) => (\r\n                     <div key={car.id} className=\"p-4\">\r\n                       <Button\r\n-                        variant=\"accent\"\r\n+                        variant=\"default\"\r\n                         className=\"w-full\"\r\n                         onClick={() => navigate(`/car/${car.id}`)}\r\n                       >\r\n                         View Details\r\n"
                },
                {
                    "date": 1759428327057,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n \r\n   const specs: Array<{\r\n     label: string;\r\n     key: string;\r\n-    format?: (val: any) => string;\r\n+    format?: (val: number | string | undefined) => string;\r\n   }> = [\r\n     { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n     { label: \"Year\", key: \"year\" },\r\n     { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n"
                },
                {
                    "date": 1759428335627,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,9 @@\n         <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n         <p className=\"mb-6 text-muted-foreground\">\r\n           Add cars to your comparison list to see them side by side.\r\n         </p>\r\n-        <Button onClick={() => navigate(\"/\")} variant=\"accent\">\r\n+        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n           Browse Cars\r\n         </Button>\r\n       </div>\r\n     );\r\n"
                },
                {
                    "date": 1759428350628,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,22 @@\n import { Badge } from \"@/components/ui/badge\";\r\n import { ArrowLeft, X } from \"lucide-react\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n \r\n+type Car = {\r\n+  id: string;\r\n+  title: string;\r\n+  images: string[];\r\n+  price: number;\r\n+  year: number;\r\n+  mileage: number;\r\n+  condition: string;\r\n+  fuelType?: string;\r\n+  transmission?: string;\r\n+  location?: string;\r\n+  platform: { name: string }[];\r\n+};\r\n+\r\n const Compare = () => {\r\n   const navigate = useNavigate();\r\n   const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n \r\n@@ -78,17 +92,17 @@\n                   </div>\r\n                   <CardHeader className=\"p-4\">\r\n                     <CardTitle className=\"line-clamp-2 text-lg\">{car.title}</CardTitle>\r\n                   </CardHeader>\r\n-                </Card>\r\n-              ))}\r\n-            </div>\r\n-\r\n-            {/* Comparison Table */}\r\n-            <Card>\r\n-              <CardContent className=\"p-0\">\r\n-                {specs.map((spec, index) => (\r\n-                  <div key={spec.key}>\r\n+                      {comparisonList.map((car: Car) => {\r\n+                        const value = (car as any)[spec.key];\r\n+                        const displayValue = spec.format ? spec.format(value) : value;\r\n+                        return (\r\n+                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                            {displayValue || \"N/A\"}\r\n+                          </div>\r\n+                        );\r\n+                      })}\r\n                     {index > 0 && <Separator />}\r\n                     <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n                       <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n                         {spec.label}\r\n"
                },
                {
                    "date": 1759428358262,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,157 @@\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { ArrowLeft, X } from \"lucide-react\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+\r\n+const Compare = () => {\r\n+  const navigate = useNavigate();\r\n+  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n+\r\n+  if (comparisonList.length === 0) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n+        <p className=\"mb-6 text-muted-foreground\">\r\n+          Add cars to your comparison list to see them side by side.\r\n+        </p>\r\n+        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n+          Browse Cars\r\n+        </Button>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  const specs: Array<{\r\n+    label: string;\r\n+    key: string;\r\n+    format?: (val: number | string | undefined) => string;\r\n+  }> = [\r\n+    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n+    { label: \"Year\", key: \"year\" },\r\n+    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n+    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n+    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Location\", key: \"location\" },\r\n+  ];\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <div className=\"mb-6 flex items-center justify-between\">\r\n+          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n+            <ArrowLeft className=\"h-4 w-4\" />\r\n+            Back to Listings\r\n+          </Button>\r\n+          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n+            <X className=\"h-4 w-4\" />\r\n+            Clear All\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"mb-8\">\r\n+          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n+          <p className=\"mt-2 text-muted-foreground\">\r\n+            Compare up to {comparisonList.length} of 3 cars side by side\r\n+          </p>\r\n+        </div>\r\n+\r\n+        <div className=\"overflow-x-auto\">\r\n+          <div className=\"min-w-[800px]\">\r\n+            {/* Car Images & Titles */}\r\n+            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n+              {comparisonList.map((car) => (\r\n+                <Card key={car.id} className=\"overflow-hidden\">\r\n+                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n+                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n+                    <Button\r\n+                      variant=\"secondary\"\r\n+                      size=\"icon\"\r\n+                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n+                      onClick={() => removeFromComparison(car.id)}\r\n+                    >\r\n+                      <X className=\"h-4 w-4\" />\r\n+                    </Button>\r\n+                  </div>\r\n+                  <CardHeader className=\"p-4\">\r\n+                    <CardTitle className=\"line-clamp-2 text-lg\">{car.title}</CardTitle>\r\n+                  </CardHeader>\r\n+                </Card>\r\n+              ))}\r\n+            </div>\r\n+\r\n+            {/* Comparison Table */}\r\n+            <Card>\r\n+              <CardContent className=\"p-0\">\r\n+                {specs.map((spec, index) => (\r\n+                  <div key={spec.key}>\r\n+                    {index > 0 && <Separator />}\r\n+                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                        {spec.label}\r\n+                      </div>\r\n+                      {comparisonList.map((car) => {\r\n+                        const value = (car as Record<string, any>)[spec.key];\r\n+                        const displayValue = spec.format ? spec.format(value) : value;\r\n+                        return (\r\n+                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                            {displayValue || \"N/A\"}\r\n+                          </div>\r\n+                        );\r\n+                      })}\r\n+                    </div>\r\n+                  </div>\r\n+                ))}\r\n+\r\n+                <Separator />\r\n+                \r\n+                {/* Platforms */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Listed On\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <div className=\"flex flex-wrap gap-1\">\r\n+                        {car.platform.map((platform, idx) => (\r\n+                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n+                            {platform.name}\r\n+                          </Badge>\r\n+                        ))}\r\n+                      </div>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                {/* View Details Buttons */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Actions\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <Button\r\n+                        variant=\"default\"\r\n+                        className=\"w-full\"\r\n+                        onClick={() => navigate(`/car/${car.id}`)}\r\n+                      >\r\n+                        View Details\r\n+                      </Button>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default Compare;\r\n"
                },
                {
                    "date": 1759428370389,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,175 @@\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { ArrowLeft, X } from \"lucide-react\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+\r\n+interface Platform {\r\n+  name: string;\r\n+}\r\n+\r\n+interface Car {\r\n+  id: string;\r\n+  title: string;\r\n+  images: string[];\r\n+  price: number;\r\n+  year: number;\r\n+  mileage: number;\r\n+  condition: string;\r\n+  fuelType?: string;\r\n+  transmission?: string;\r\n+  location?: string;\r\n+  platform: Platform[];\r\n+}\r\n+\r\n+const Compare = () => {\r\n+  const navigate = useNavigate();\r\n+  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n+\r\n+  if (comparisonList.length === 0) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n+        <p className=\"mb-6 text-muted-foreground\">\r\n+          Add cars to your comparison list to see them side by side.\r\n+        </p>\r\n+        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n+          Browse Cars\r\n+        </Button>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  const specs: Array<{\r\n+    label: string;\r\n+    key: string;\r\n+    format?: (val: number | string | undefined) => string;\r\n+  }> = [\r\n+    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n+    { label: \"Year\", key: \"year\" },\r\n+    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n+    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n+    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Location\", key: \"location\" },\r\n+  ];\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <div className=\"mb-6 flex items-center justify-between\">\r\n+          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n+            <ArrowLeft className=\"h-4 w-4\" />\r\n+            Back to Listings\r\n+          </Button>\r\n+          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n+            <X className=\"h-4 w-4\" />\r\n+            Clear All\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"mb-8\">\r\n+          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n+          <p className=\"mt-2 text-muted-foreground\">\r\n+            Compare up to {comparisonList.length} of 3 cars side by side\r\n+          </p>\r\n+        </div>\r\n+\r\n+        <div className=\"overflow-x-auto\">\r\n+          <div className=\"min-w-[800px]\">\r\n+            {/* Car Images & Titles */}\r\n+            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n+              {comparisonList.map((car) => (\r\n+                <Card key={car.id} className=\"overflow-hidden\">\r\n+                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n+                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n+                    <Button\r\n+                      variant=\"secondary\"\r\n+                      size=\"icon\"\r\n+                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n+                      onClick={() => removeFromComparison(car.id)}\r\n+                    >\r\n+                      <X className=\"h-4 w-4\" />\r\n+                    </Button>\r\n+                  </div>\r\n+                        const value = (car as Car)[spec.key as keyof Car];\r\n+                        const displayValue = spec.format ? spec.format(value) : value;\r\n+                        return (\r\n+                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                            {displayValue || \"N/A\"}\r\n+                          </div>\r\n+                        );\r\n+            {/* Comparison Table */}\r\n+            <Card>\r\n+              <CardContent className=\"p-0\">\r\n+                {specs.map((spec, index) => (\r\n+                  <div key={spec.key}>\r\n+                    {index > 0 && <Separator />}\r\n+                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                        {spec.label}\r\n+                      </div>\r\n+                      {comparisonList.map((car) => {\r\n+                        const value = (car as Record<string, any>)[spec.key];\r\n+                        const displayValue = spec.format ? spec.format(value) : value;\r\n+                        return (\r\n+                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                            {displayValue || \"N/A\"}\r\n+                          </div>\r\n+                        );\r\n+                      })}\r\n+                    </div>\r\n+                  </div>\r\n+                ))}\r\n+\r\n+                <Separator />\r\n+                \r\n+                {/* Platforms */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Listed On\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <div className=\"flex flex-wrap gap-1\">\r\n+                        {car.platform.map((platform, idx) => (\r\n+                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n+                            {platform.name}\r\n+                          </Badge>\r\n+                        ))}\r\n+                      </div>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                {/* View Details Buttons */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Actions\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <Button\r\n+                        variant=\"default\"\r\n+                        className=\"w-full\"\r\n+                        onClick={() => navigate(`/car/${car.id}`)}\r\n+                      >\r\n+                        View Details\r\n+                      </Button>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default Compare;\r\n"
                },
                {
                    "date": 1759428398501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,173 @@\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { ArrowLeft, X } from \"lucide-react\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+\r\n+interface Platform {\r\n+  name: string;\r\n+}\r\n+\r\n+interface Car {\r\n+  id: string;\r\n+  title: string;\r\n+  images: string[];\r\n+  price: number;\r\n+  year: number;\r\n+  mileage: number;\r\n+  condition: string;\r\n+  fuelType?: string;\r\n+  transmission?: string;\r\n+  location?: string;\r\n+  platform: Platform[];\r\n+}\r\n+\r\n+const Compare = () => {\r\n+  const navigate = useNavigate();\r\n+  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n+\r\n+  if (comparisonList.length === 0) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n+        <p className=\"mb-6 text-muted-foreground\">\r\n+          Add cars to your comparison list to see them side by side.\r\n+        </p>\r\n+        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n+          Browse Cars\r\n+        </Button>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  const specs: Array<{\r\n+    label: string;\r\n+    key: string;\r\n+    format?: (val: number | string | undefined) => string;\r\n+  }> = [\r\n+    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n+    { label: \"Year\", key: \"year\" },\r\n+    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n+    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n+    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Location\", key: \"location\" },\r\n+  ];\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <div className=\"mb-6 flex items-center justify-between\">\r\n+          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n+            <ArrowLeft className=\"h-4 w-4\" />\r\n+            Back to Listings\r\n+          </Button>\r\n+          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n+            <X className=\"h-4 w-4\" />\r\n+            Clear All\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"mb-8\">\r\n+          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n+          <p className=\"mt-2 text-muted-foreground\">\r\n+            Compare up to {comparisonList.length} of 3 cars side by side\r\n+          </p>\r\n+        </div>\r\n+\r\n+        <div className=\"overflow-x-auto\">\r\n+          <div className=\"min-w-[800px]\">\r\n+            {/* Car Images & Titles */}\r\n+            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n+              {comparisonList.map((car) => (\r\n+                <Card key={car.id} className=\"overflow-hidden\">\r\n+                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n+                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n+                    <Button\r\n+                      variant=\"secondary\"\r\n+                      size=\"icon\"\r\n+                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n+                      onClick={() => removeFromComparison(car.id)}\r\n+                    >\r\n+                      <X className=\"h-4 w-4\" />\r\n+                    </Button>\r\n+                  </div>\r\n+                  <CardHeader>\r\n+                    <CardTitle className=\"truncate text-base\">{car.title}</CardTitle>\r\n+                  </CardHeader>\r\n+                </Card>\r\n+              ))}\r\n+            {/* Comparison Table */}\r\n+            <Card>\r\n+              <CardContent className=\"p-0\">\r\n+                {specs.map((spec, index) => (\r\n+                  <div key={spec.key}>\r\n+                    {index > 0 && <Separator />}\r\n+                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                        {spec.label}\r\n+                      </div>\r\n+                      {comparisonList.map((car) => {\r\n+                        const value = (car as Record<string, any>)[spec.key];\r\n+                        const displayValue = spec.format ? spec.format(value) : value;\r\n+                        return (\r\n+                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                            {displayValue || \"N/A\"}\r\n+                          </div>\r\n+                        );\r\n+                      })}\r\n+                    </div>\r\n+                  </div>\r\n+                ))}\r\n+\r\n+                <Separator />\r\n+                \r\n+                {/* Platforms */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Listed On\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <div className=\"flex flex-wrap gap-1\">\r\n+                        {car.platform.map((platform, idx) => (\r\n+                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n+                            {platform.name}\r\n+                          </Badge>\r\n+                        ))}\r\n+                      </div>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                {/* View Details Buttons */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Actions\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <Button\r\n+                        variant=\"default\"\r\n+                        className=\"w-full\"\r\n+                        onClick={() => navigate(`/car/${car.id}`)}\r\n+                      >\r\n+                        View Details\r\n+                      </Button>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default Compare;\r\n"
                },
                {
                    "date": 1759428408860,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,176 @@\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { ArrowLeft, X } from \"lucide-react\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+\r\n+interface Platform {\r\n+  name: string;\r\n+}\r\n+\r\n+interface Car {\r\n+  id: string;\r\n+  title: string;\r\n+  images: string[];\r\n+  price: number;\r\n+  year: number;\r\n+  mileage: number;\r\n+  condition: string;\r\n+  fuelType?: string;\r\n+  transmission?: string;\r\n+  location?: string;\r\n+  platform: Platform[];\r\n+}\r\n+\r\n+const Compare = () => {\r\n+  const navigate = useNavigate();\r\n+  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n+\r\n+  if (comparisonList.length === 0) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n+        <p className=\"mb-6 text-muted-foreground\">\r\n+          Add cars to your comparison list to see them side by side.\r\n+        </p>\r\n+        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n+          Browse Cars\r\n+        </Button>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  const specs: Array<{\r\n+    label: string;\r\n+    key: string;\r\n+    format?: (val: number | string | undefined) => string;\r\n+  }> = [\r\n+    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n+    { label: \"Year\", key: \"year\" },\r\n+    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n+    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n+    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Location\", key: \"location\" },\r\n+  ];\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <div className=\"mb-6 flex items-center justify-between\">\r\n+          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n+            <ArrowLeft className=\"h-4 w-4\" />\r\n+            Back to Listings\r\n+          </Button>\r\n+          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n+            <X className=\"h-4 w-4\" />\r\n+            Clear All\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"mb-8\">\r\n+          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n+          <p className=\"mt-2 text-muted-foreground\">\r\n+            Compare up to {comparisonList.length} of 3 cars side by side\r\n+          </p>\r\n+        </div>\r\n+\r\n+        <div className=\"overflow-x-auto\">\r\n+          <div className=\"min-w-[800px]\">\r\n+            {/* Car Images & Titles */}\r\n+            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n+              {comparisonList.map((car) => (\r\n+                <Card key={car.id} className=\"overflow-hidden\">\r\n+                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n+                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n+                    <Button\r\n+                      variant=\"secondary\"\r\n+                      size=\"icon\"\r\n+                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n+                      onClick={() => removeFromComparison(car.id)}\r\n+                    >\r\n+                      <X className=\"h-4 w-4\" />\r\n+                    </Button>\r\n+                  </div>\r\n+                  <CardHeader>\r\n+                    <CardTitle className=\"truncate text-base\">{car.title}</CardTitle>\r\n+                  </CardHeader>\r\n+                </Card>\r\n+              ))}\r\n+            {/* Comparison Table */}\r\n+            <Card>\r\n+              <CardContent className=\"p-0\">\r\n+                {specs.map((spec, index) => (\r\n+                  <div key={spec.key}>\r\n+                    {index > 0 && <Separator />}\r\n+                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                        {spec.label}\r\n+                      </div>\r\n+                      {comparisonList.map((car) => {\r\n+                        const value = (car as Record<string, any>)[spec.key];\r\n+                        const displayValue = spec.format ? spec.format(value) : value;\r\n+                        return (\r\n+                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                            {displayValue || \"N/A\"}\r\n+                          </div>\r\n+                        );\r\n+                      })}\r\n+                    </div>\r\n+                  </div>\r\n+                ))}\r\n+\r\n+                <Separator />\r\n+                \r\n+                {/* Platforms */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Listed On\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <div className=\"flex flex-wrap gap-1\">\r\n+                        {car.platform.map((platform, idx) => (\r\n+                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n+                            {platform.name}\r\n+                          </Badge>\r\n+                        ))}\r\n+                      </div>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                {/* View Details Buttons */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Actions\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <Button\r\n+                        variant=\"default\"\r\n+                        className=\"w-full\"\r\n+                        onClick={() => navigate(`/car/${car.id}`)}\r\n+                      >\r\n+                        View Details\r\n+                      </Button>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default Compare;\r\n"
                },
                {
                    "date": 1759428448211,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -165,688 +165,11 @@\n             </Card>\r\n           </div>\r\n         </div>\r\n       </div>\r\n-          </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n \r\n export default Compare;\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { ArrowLeft, X } from \"lucide-react\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-\r\n-interface Platform {\r\n-  name: string;\r\n-}\r\n-\r\n-interface Car {\r\n-  id: string;\r\n-  title: string;\r\n-  images: string[];\r\n-  price: number;\r\n-  year: number;\r\n-  mileage: number;\r\n-  condition: string;\r\n-  fuelType?: string;\r\n-  transmission?: string;\r\n-  location?: string;\r\n-  platform: Platform[];\r\n-}\r\n-\r\n-const Compare = () => {\r\n-  const navigate = useNavigate();\r\n-  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n-\r\n-  if (comparisonList.length === 0) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n-        <p className=\"mb-6 text-muted-foreground\">\r\n-          Add cars to your comparison list to see them side by side.\r\n-        </p>\r\n-        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n-          Browse Cars\r\n-        </Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  const specs: Array<{\r\n-    label: string;\r\n-    key: string;\r\n-    format?: (val: number | string | undefined) => string;\r\n-  }> = [\r\n-    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n-    { label: \"Year\", key: \"year\" },\r\n-    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n-    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n-    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Location\", key: \"location\" },\r\n-  ];\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <div className=\"mb-6 flex items-center justify-between\">\r\n-          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n-            <ArrowLeft className=\"h-4 w-4\" />\r\n-            Back to Listings\r\n-          </Button>\r\n-          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n-            <X className=\"h-4 w-4\" />\r\n-            Clear All\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"mb-8\">\r\n-          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n-          <p className=\"mt-2 text-muted-foreground\">\r\n-            Compare up to {comparisonList.length} of 3 cars side by side\r\n-          </p>\r\n-        </div>\r\n-\r\n-        <div className=\"overflow-x-auto\">\r\n-          <div className=\"min-w-[800px]\">\r\n-            {/* Car Images & Titles */}\r\n-            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n-              {comparisonList.map((car) => (\r\n-                <Card key={car.id} className=\"overflow-hidden\">\r\n-                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n-                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n-                    <Button\r\n-                      variant=\"secondary\"\r\n-                      size=\"icon\"\r\n-                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n-                      onClick={() => removeFromComparison(car.id)}\r\n-                    >\r\n-                      <X className=\"h-4 w-4\" />\r\n-                    </Button>\r\n-                  </div>\r\n-                  <CardHeader>\r\n-                    <CardTitle className=\"truncate text-base\">{car.title}</CardTitle>\r\n-                  </CardHeader>\r\n-                </Card>\r\n-              ))}\r\n-            {/* Comparison Table */}\r\n-            <Card>\r\n-              <CardContent className=\"p-0\">\r\n-                {specs.map((spec, index) => (\r\n-                  <div key={spec.key}>\r\n-                    {index > 0 && <Separator />}\r\n-                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                        {spec.label}\r\n-                      </div>\r\n-                      {comparisonList.map((car) => {\r\n-                        const value = (car as Record<string, any>)[spec.key];\r\n-                        const displayValue = spec.format ? spec.format(value) : value;\r\n-                        return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n-                            {displayValue || \"N/A\"}\r\n-                          </div>\r\n-                        );\r\n-                      })}\r\n-                    </div>\r\n-                  </div>\r\n-                ))}\r\n-\r\n-                <Separator />\r\n-                \r\n-                {/* Platforms */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Listed On\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <div className=\"flex flex-wrap gap-1\">\r\n-                        {car.platform.map((platform, idx) => (\r\n-                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n-                            {platform.name}\r\n-                          </Badge>\r\n-                        ))}\r\n-                      </div>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                {/* View Details Buttons */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Actions\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <Button\r\n-                        variant=\"default\"\r\n-                        className=\"w-full\"\r\n-                        onClick={() => navigate(`/car/${car.id}`)}\r\n-                      >\r\n-                        View Details\r\n-                      </Button>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default Compare;\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { ArrowLeft, X } from \"lucide-react\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-\r\n-interface Platform {\r\n-  name: string;\r\n-}\r\n-\r\n-interface Car {\r\n-  id: string;\r\n-  title: string;\r\n-  images: string[];\r\n-  price: number;\r\n-  year: number;\r\n-  mileage: number;\r\n-  condition: string;\r\n-  fuelType?: string;\r\n-  transmission?: string;\r\n-  location?: string;\r\n-  platform: Platform[];\r\n-}\r\n-\r\n-const Compare = () => {\r\n-  const navigate = useNavigate();\r\n-  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n-\r\n-  if (comparisonList.length === 0) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n-        <p className=\"mb-6 text-muted-foreground\">\r\n-          Add cars to your comparison list to see them side by side.\r\n-        </p>\r\n-        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n-          Browse Cars\r\n-        </Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  const specs: Array<{\r\n-    label: string;\r\n-    key: string;\r\n-    format?: (val: number | string | undefined) => string;\r\n-  }> = [\r\n-    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n-    { label: \"Year\", key: \"year\" },\r\n-    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n-    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n-    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Location\", key: \"location\" },\r\n-  ];\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <div className=\"mb-6 flex items-center justify-between\">\r\n-          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n-            <ArrowLeft className=\"h-4 w-4\" />\r\n-            Back to Listings\r\n-          </Button>\r\n-          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n-            <X className=\"h-4 w-4\" />\r\n-            Clear All\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"mb-8\">\r\n-          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n-          <p className=\"mt-2 text-muted-foreground\">\r\n-            Compare up to {comparisonList.length} of 3 cars side by side\r\n-          </p>\r\n-        </div>\r\n-\r\n-        <div className=\"overflow-x-auto\">\r\n-          <div className=\"min-w-[800px]\">\r\n-            {/* Car Images & Titles */}\r\n-            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n-              {comparisonList.map((car) => (\r\n-                <Card key={car.id} className=\"overflow-hidden\">\r\n-                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n-                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n-                    <Button\r\n-                      variant=\"secondary\"\r\n-                      size=\"icon\"\r\n-                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n-                      onClick={() => removeFromComparison(car.id)}\r\n-                    >\r\n-                      <X className=\"h-4 w-4\" />\r\n-                    </Button>\r\n-                  </div>\r\n-                        const value = (car as Car)[spec.key as keyof Car];\r\n-                        const displayValue = spec.format ? spec.format(value) : value;\r\n-                        return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n-                            {displayValue || \"N/A\"}\r\n-                          </div>\r\n-                        );\r\n-            {/* Comparison Table */}\r\n-            <Card>\r\n-              <CardContent className=\"p-0\">\r\n-                {specs.map((spec, index) => (\r\n-                  <div key={spec.key}>\r\n-                    {index > 0 && <Separator />}\r\n-                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                        {spec.label}\r\n-                      </div>\r\n-                      {comparisonList.map((car) => {\r\n-                        const value = (car as Record<string, any>)[spec.key];\r\n-                        const displayValue = spec.format ? spec.format(value) : value;\r\n-                        return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n-                            {displayValue || \"N/A\"}\r\n-                          </div>\r\n-                        );\r\n-                      })}\r\n-                    </div>\r\n-                  </div>\r\n-                ))}\r\n-\r\n-                <Separator />\r\n-                \r\n-                {/* Platforms */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Listed On\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <div className=\"flex flex-wrap gap-1\">\r\n-                        {car.platform.map((platform, idx) => (\r\n-                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n-                            {platform.name}\r\n-                          </Badge>\r\n-                        ))}\r\n-                      </div>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                {/* View Details Buttons */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Actions\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <Button\r\n-                        variant=\"default\"\r\n-                        className=\"w-full\"\r\n-                        onClick={() => navigate(`/car/${car.id}`)}\r\n-                      >\r\n-                        View Details\r\n-                      </Button>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default Compare;\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { ArrowLeft, X } from \"lucide-react\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-\r\n-const Compare = () => {\r\n-  const navigate = useNavigate();\r\n-  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n-\r\n-  if (comparisonList.length === 0) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n-        <p className=\"mb-6 text-muted-foreground\">\r\n-          Add cars to your comparison list to see them side by side.\r\n-        </p>\r\n-        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n-          Browse Cars\r\n-        </Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  const specs: Array<{\r\n-    label: string;\r\n-    key: string;\r\n-    format?: (val: number | string | undefined) => string;\r\n-  }> = [\r\n-    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n-    { label: \"Year\", key: \"year\" },\r\n-    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n-    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n-    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Location\", key: \"location\" },\r\n-  ];\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <div className=\"mb-6 flex items-center justify-between\">\r\n-          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n-            <ArrowLeft className=\"h-4 w-4\" />\r\n-            Back to Listings\r\n-          </Button>\r\n-          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n-            <X className=\"h-4 w-4\" />\r\n-            Clear All\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"mb-8\">\r\n-          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n-          <p className=\"mt-2 text-muted-foreground\">\r\n-            Compare up to {comparisonList.length} of 3 cars side by side\r\n-          </p>\r\n-        </div>\r\n-\r\n-        <div className=\"overflow-x-auto\">\r\n-          <div className=\"min-w-[800px]\">\r\n-            {/* Car Images & Titles */}\r\n-            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n-              {comparisonList.map((car) => (\r\n-                <Card key={car.id} className=\"overflow-hidden\">\r\n-                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n-                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n-                    <Button\r\n-                      variant=\"secondary\"\r\n-                      size=\"icon\"\r\n-                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n-                      onClick={() => removeFromComparison(car.id)}\r\n-                    >\r\n-                      <X className=\"h-4 w-4\" />\r\n-                    </Button>\r\n-                  </div>\r\n-                  <CardHeader className=\"p-4\">\r\n-                    <CardTitle className=\"line-clamp-2 text-lg\">{car.title}</CardTitle>\r\n-                  </CardHeader>\r\n-                </Card>\r\n-              ))}\r\n-            </div>\r\n-\r\n-            {/* Comparison Table */}\r\n-            <Card>\r\n-              <CardContent className=\"p-0\">\r\n-                {specs.map((spec, index) => (\r\n-                  <div key={spec.key}>\r\n-                    {index > 0 && <Separator />}\r\n-                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                        {spec.label}\r\n-                      </div>\r\n-                      {comparisonList.map((car) => {\r\n-                        const value = (car as Record<string, any>)[spec.key];\r\n-                        const displayValue = spec.format ? spec.format(value) : value;\r\n-                        return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n-                            {displayValue || \"N/A\"}\r\n-                          </div>\r\n-                        );\r\n-                      })}\r\n-                    </div>\r\n-                  </div>\r\n-                ))}\r\n-\r\n-                <Separator />\r\n-                \r\n-                {/* Platforms */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Listed On\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <div className=\"flex flex-wrap gap-1\">\r\n-                        {car.platform.map((platform, idx) => (\r\n-                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n-                            {platform.name}\r\n-                          </Badge>\r\n-                        ))}\r\n-                      </div>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                {/* View Details Buttons */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Actions\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <Button\r\n-                        variant=\"default\"\r\n-                        className=\"w-full\"\r\n-                        onClick={() => navigate(`/car/${car.id}`)}\r\n-                      >\r\n-                        View Details\r\n-                      </Button>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default Compare;\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { ArrowLeft, X } from \"lucide-react\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-\r\n-type Car = {\r\n-  id: string;\r\n-  title: string;\r\n-  images: string[];\r\n-  price: number;\r\n-  year: number;\r\n-  mileage: number;\r\n-  condition: string;\r\n-  fuelType?: string;\r\n-  transmission?: string;\r\n-  location?: string;\r\n-  platform: { name: string }[];\r\n-};\r\n-\r\n-const Compare = () => {\r\n-  const navigate = useNavigate();\r\n-  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n-\r\n-  if (comparisonList.length === 0) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n-        <p className=\"mb-6 text-muted-foreground\">\r\n-          Add cars to your comparison list to see them side by side.\r\n-        </p>\r\n-        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n-          Browse Cars\r\n-        </Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  const specs: Array<{\r\n-    label: string;\r\n-    key: string;\r\n-    format?: (val: number | string | undefined) => string;\r\n-  }> = [\r\n-    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n-    { label: \"Year\", key: \"year\" },\r\n-    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n-    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n-    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Location\", key: \"location\" },\r\n-  ];\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <div className=\"mb-6 flex items-center justify-between\">\r\n-          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n-            <ArrowLeft className=\"h-4 w-4\" />\r\n-            Back to Listings\r\n-          </Button>\r\n-          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n-            <X className=\"h-4 w-4\" />\r\n-            Clear All\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"mb-8\">\r\n-          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n-          <p className=\"mt-2 text-muted-foreground\">\r\n-            Compare up to {comparisonList.length} of 3 cars side by side\r\n-          </p>\r\n-        </div>\r\n-\r\n-        <div className=\"overflow-x-auto\">\r\n-          <div className=\"min-w-[800px]\">\r\n-            {/* Car Images & Titles */}\r\n-            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n-              {comparisonList.map((car) => (\r\n-                <Card key={car.id} className=\"overflow-hidden\">\r\n-                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n-                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n-                    <Button\r\n-                      variant=\"secondary\"\r\n-                      size=\"icon\"\r\n-                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n-                      onClick={() => removeFromComparison(car.id)}\r\n-                    >\r\n-                      <X className=\"h-4 w-4\" />\r\n-                    </Button>\r\n-                  </div>\r\n-                  <CardHeader className=\"p-4\">\r\n-                    <CardTitle className=\"line-clamp-2 text-lg\">{car.title}</CardTitle>\r\n-                  </CardHeader>\r\n-                      {comparisonList.map((car: Car) => {\r\n-                        const value = (car as any)[spec.key];\r\n-                        const displayValue = spec.format ? spec.format(value) : value;\r\n-                        return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n-                            {displayValue || \"N/A\"}\r\n-                          </div>\r\n-                        );\r\n-                      })}\r\n-                    {index > 0 && <Separator />}\r\n-                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                        {spec.label}\r\n-                      </div>\r\n-                      {comparisonList.map((car) => {\r\n-                        const value = (car as Record<string, any>)[spec.key];\r\n-                        const displayValue = spec.format ? spec.format(value) : value;\r\n-                        return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n-                            {displayValue || \"N/A\"}\r\n-                          </div>\r\n-                        );\r\n-                      })}\r\n-                    </div>\r\n-                  </div>\r\n-                ))}\r\n-\r\n-                <Separator />\r\n-                \r\n-                {/* Platforms */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Listed On\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <div className=\"flex flex-wrap gap-1\">\r\n-                        {car.platform.map((platform, idx) => (\r\n-                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n-                            {platform.name}\r\n-                          </Badge>\r\n-                        ))}\r\n-                      </div>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                {/* View Details Buttons */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Actions\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <Button\r\n-                        variant=\"default\"\r\n-                        className=\"w-full\"\r\n-                        onClick={() => navigate(`/car/${car.id}`)}\r\n-                      >\r\n-                        View Details\r\n-                      </Button>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default Compare;\r\n"
                },
                {
                    "date": 1759428455391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,176 @@\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { ArrowLeft, X } from \"lucide-react\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+\r\n+interface Platform {\r\n+  name: string;\r\n+}\r\n+\r\n+interface Car {\r\n+  id: string;\r\n+  title: string;\r\n+  images: string[];\r\n+  price: number;\r\n+  year: number;\r\n+  mileage: number;\r\n+  condition: string;\r\n+  fuelType?: string;\r\n+  transmission?: string;\r\n+  location?: string;\r\n+  platform: Platform[];\r\n+}\r\n+\r\n+const Compare = () => {\r\n+  const navigate = useNavigate();\r\n+  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n+\r\n+  if (comparisonList.length === 0) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n+        <p className=\"mb-6 text-muted-foreground\">\r\n+          Add cars to your comparison list to see them side by side.\r\n+        </p>\r\n+        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n+          Browse Cars\r\n+        </Button>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  const specs: Array<{\r\n+    label: string;\r\n+    key: string;\r\n+    format?: (val: number | string | undefined) => string;\r\n+  }> = [\r\n+    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n+    { label: \"Year\", key: \"year\" },\r\n+    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n+    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n+    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Location\", key: \"location\" },\r\n+  ];\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <div className=\"mb-6 flex items-center justify-between\">\r\n+          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n+            <ArrowLeft className=\"h-4 w-4\" />\r\n+            Back to Listings\r\n+          </Button>\r\n+          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n+            <X className=\"h-4 w-4\" />\r\n+            Clear All\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"mb-8\">\r\n+          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n+          <p className=\"mt-2 text-muted-foreground\">\r\n+            Compare up to {comparisonList.length} of 3 cars side by side\r\n+          </p>\r\n+        </div>\r\n+\r\n+        <div className=\"overflow-x-auto\">\r\n+          <div className=\"min-w-[800px]\">\r\n+            {/* Car Images & Titles */}\r\n+            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n+              {comparisonList.map((car) => (\r\n+                <Card key={car.id} className=\"overflow-hidden\">\r\n+                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n+                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n+                    <Button\r\n+                      variant=\"secondary\"\r\n+                      size=\"icon\"\r\n+                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n+                      onClick={() => removeFromComparison(car.id)}\r\n+                    >\r\n+                      <X className=\"h-4 w-4\" />\r\n+                    </Button>\r\n+                  </div>\r\n+                  <CardHeader>\r\n+                    <CardTitle className=\"truncate text-base\">{car.title}</CardTitle>\r\n+                  </CardHeader>\r\n+                </Card>\r\n+              ))}\r\n+            {/* Comparison Table */}\r\n+            <Card>\r\n+              <CardContent className=\"p-0\">\r\n+                {specs.map((spec, index) => (\r\n+                  <div key={spec.key}>\r\n+                    {index > 0 && <Separator />}\r\n+                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                        {spec.label}\r\n+                      </div>\r\n+                      {comparisonList.map((car) => {\r\n+                        const value = (car as Record<string, any>)[spec.key];\r\n+                        const displayValue = spec.format ? spec.format(value) : value;\r\n+                        return (\r\n+                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                            {displayValue || \"N/A\"}\r\n+                          </div>\r\n+                        );\r\n+                      })}\r\n+                    </div>\r\n+                  </div>\r\n+                ))}\r\n+\r\n+                <Separator />\r\n+                \r\n+                {/* Platforms */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Listed On\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <div className=\"flex flex-wrap gap-1\">\r\n+                        {car.platform.map((platform, idx) => (\r\n+                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n+                            {platform.name}\r\n+                          </Badge>\r\n+                        ))}\r\n+                      </div>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                {/* View Details Buttons */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Actions\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <Button\r\n+                        variant=\"default\"\r\n+                        className=\"w-full\"\r\n+                        onClick={() => navigate(`/car/${car.id}`)}\r\n+                      >\r\n+                        View Details\r\n+                      </Button>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+    <\r\n+  );\r\n+};\r\n+\r\n+export default Compare;\r\n"
                },
                {
                    "date": 1759428462337,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,175 @@\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { ArrowLeft, X } from \"lucide-react\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+\r\n+interface Platform {\r\n+  name: string;\r\n+}\r\n+\r\n+interface Car {\r\n+  id: string;\r\n+  title: string;\r\n+  images: string[];\r\n+  price: number;\r\n+  year: number;\r\n+  mileage: number;\r\n+  condition: string;\r\n+  fuelType?: string;\r\n+  transmission?: string;\r\n+  location?: string;\r\n+  platform: Platform[];\r\n+}\r\n+\r\n+const Compare = () => {\r\n+  const navigate = useNavigate();\r\n+  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n+\r\n+  if (comparisonList.length === 0) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n+        <p className=\"mb-6 text-muted-foreground\">\r\n+          Add cars to your comparison list to see them side by side.\r\n+        </p>\r\n+        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n+          Browse Cars\r\n+        </Button>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  const specs: Array<{\r\n+    label: string;\r\n+    key: string;\r\n+    format?: (val: number | string | undefined) => string;\r\n+  }> = [\r\n+    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n+    { label: \"Year\", key: \"year\" },\r\n+    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n+    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n+    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Location\", key: \"location\" },\r\n+  ];\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <div className=\"mb-6 flex items-center justify-between\">\r\n+          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n+            <ArrowLeft className=\"h-4 w-4\" />\r\n+            Back to Listings\r\n+          </Button>\r\n+          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n+            <X className=\"h-4 w-4\" />\r\n+            Clear All\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"mb-8\">\r\n+          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n+          <p className=\"mt-2 text-muted-foreground\">\r\n+            Compare up to {comparisonList.length} of 3 cars side by side\r\n+          </p>\r\n+        </div>\r\n+\r\n+        <div className=\"overflow-x-auto\">\r\n+          <div className=\"min-w-[800px]\">\r\n+            {/* Car Images & Titles */}\r\n+            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n+              {comparisonList.map((car) => (\r\n+                <Card key={car.id} className=\"overflow-hidden\">\r\n+                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n+                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n+                    <Button\r\n+                      variant=\"secondary\"\r\n+                      size=\"icon\"\r\n+                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n+                      onClick={() => removeFromComparison(car.id)}\r\n+                    >\r\n+                      <X className=\"h-4 w-4\" />\r\n+                    </Button>\r\n+                  </div>\r\n+                  <CardHeader>\r\n+                    <CardTitle className=\"truncate text-base\">{car.title}</CardTitle>\r\n+                  </CardHeader>\r\n+                </Card>\r\n+              ))}\r\n+            {/* Comparison Table */}\r\n+            <Card>\r\n+              <CardContent className=\"p-0\">\r\n+                {specs.map((spec, index) => (\r\n+                  <div key={spec.key}>\r\n+                    {index > 0 && <Separator />}\r\n+                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                        {spec.label}\r\n+                      </div>\r\n+                      {comparisonList.map((car) => {\r\n+                        const value = (car as Record<string, any>)[spec.key];\r\n+                        const displayValue = spec.format ? spec.format(value) : value;\r\n+                        return (\r\n+                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                            {displayValue || \"N/A\"}\r\n+                          </div>\r\n+                        );\r\n+                      })}\r\n+                    </div>\r\n+                  </div>\r\n+                ))}\r\n+\r\n+                <Separator />\r\n+                \r\n+                {/* Platforms */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Listed On\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <div className=\"flex flex-wrap gap-1\">\r\n+                        {car.platform.map((platform, idx) => (\r\n+                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n+                            {platform.name}\r\n+                          </Badge>\r\n+                        ))}\r\n+                      </div>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                {/* View Details Buttons */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Actions\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <Button\r\n+                        variant=\"default\"\r\n+                        className=\"w-full\"\r\n+                        onClick={() => navigate(`/car/${car.id}`)}\r\n+                      >\r\n+                        View Details\r\n+                      </Button>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+        </div>\r\n+      </div>\r\n+  \r\n+  );\r\n+};\r\n+\r\n+export default Compare;\r\n"
                },
                {
                    "date": 1759428479824,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,175 @@\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { ArrowLeft, X } from \"lucide-react\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+\r\n+interface Platform {\r\n+  name: string;\r\n+}\r\n+\r\n+interface Car {\r\n+  id: string;\r\n+  title: string;\r\n+  images: string[];\r\n+  price: number;\r\n+  year: number;\r\n+  mileage: number;\r\n+  condition: string;\r\n+  fuelType?: string;\r\n+  transmission?: string;\r\n+  location?: string;\r\n+  platform: Platform[];\r\n+}\r\n+\r\n+const Compare = () => {\r\n+  const navigate = useNavigate();\r\n+  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n+\r\n+  if (comparisonList.length === 0) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n+        <p className=\"mb-6 text-muted-foreground\">\r\n+          Add cars to your comparison list to see them side by side.\r\n+        </p>\r\n+        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n+          Browse Cars\r\n+        </Button>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  const specs: Array<{\r\n+    label: string;\r\n+    key: keyof Car;\r\n+    format?: (val: number | string | undefined) => string;\r\n+  }> = [\r\n+    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n+    { label: \"Year\", key: \"year\" },\r\n+    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n+    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n+    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n+    { label: \"Location\", key: \"location\" },\r\n+  ];\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <div className=\"mb-6 flex items-center justify-between\">\r\n+          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n+            <ArrowLeft className=\"h-4 w-4\" />\r\n+            Back to Listings\r\n+          </Button>\r\n+          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n+            <X className=\"h-4 w-4\" />\r\n+            Clear All\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"mb-8\">\r\n+          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n+          <p className=\"mt-2 text-muted-foreground\">\r\n+            Compare up to {comparisonList.length} of 3 cars side by side\r\n+          </p>\r\n+        </div>\r\n+\r\n+        <div className=\"overflow-x-auto\">\r\n+          <div className=\"min-w-[800px]\">\r\n+            {/* Car Images & Titles */}\r\n+            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n+              {comparisonList.map((car) => (\r\n+                <Card key={car.id} className=\"overflow-hidden\">\r\n+                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n+                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n+                    <Button\r\n+                      variant=\"secondary\"\r\n+                      size=\"icon\"\r\n+                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n+                      onClick={() => removeFromComparison(car.id)}\r\n+                    >\r\n+                      <X className=\"h-4 w-4\" />\r\n+                    </Button>\r\n+                  </div>\r\n+                  <CardHeader>\r\n+                    <CardTitle className=\"truncate text-base\">{car.title}</CardTitle>\r\n+                  </CardHeader>\r\n+                </Card>\r\n+              ))}\r\n+            {/* Comparison Table */}\r\n+            <Card>\r\n+              <CardContent className=\"p-0\">\r\n+                {specs.map((spec, index) => (\r\n+                  <div key={spec.key}>\r\n+                    {index > 0 && <Separator />}\r\n+                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                        {spec.label}\r\n+                      </div>\r\n+                      {comparisonList.map((car) => {\r\n+                        const value = car[spec.key];\r\n+                        const displayValue = spec.format ? spec.format(value) : value;\r\n+                        return (\r\n+                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                            {displayValue || \"N/A\"}\r\n+                          </div>\r\n+                        );\r\n+                      })}\r\n+                    </div>\r\n+                  </div>\r\n+                ))}\r\n+\r\n+                <Separator />\r\n+                \r\n+                {/* Platforms */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Listed On\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <div className=\"flex flex-wrap gap-1\">\r\n+                        {car.platform.map((platform, idx) => (\r\n+                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n+                            {platform.name}\r\n+                          </Badge>\r\n+                        ))}\r\n+                      </div>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                {/* View Details Buttons */}\r\n+                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Actions\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <Button\r\n+                        variant=\"default\"\r\n+                        className=\"w-full\"\r\n+                        onClick={() => navigate(`/car/${car.id}`)}\r\n+                      >\r\n+                        View Details\r\n+                      </Button>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+        </div>\r\n+      </div>\r\n+  \r\n+  );\r\n+};\r\n+\r\n+export default Compare;\r\n"
                },
                {
                    "date": 1759428497021,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,9 +110,16 @@\n                         {spec.label}\r\n                       </div>\r\n                       {comparisonList.map((car) => {\r\n                         const value = car[spec.key];\r\n-                        const displayValue = spec.format ? spec.format(value) : value;\r\n+                        let displayValue: string | number | undefined;\r\n+                        if (spec.format && (typeof value === \"string\" || typeof value === \"number\")) {\r\n+                          displayValue = spec.format(value);\r\n+                        } else if (typeof value === \"string\" || typeof value === \"number\") {\r\n+                          displayValue = value;\r\n+                        } else {\r\n+                          displayValue = \"N/A\";\r\n+                        }\r\n                         return (\r\n                           <div key={car.id} className=\"p-4 text-sm\">\r\n                             {displayValue || \"N/A\"}\r\n                           </div>\r\n"
                },
                {
                    "date": 1764353612149,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,279 @@\n+// src/pages/Compare.tsx\r\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { ArrowLeft, X } from \"lucide-react\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+import { useEffect, useState } from \"react\"; //  NEW\r\n+import { useAuthStore } from \"@/stores/authStore\"; //  NEW\r\n+import { saveComparison } from \"@/services/carService\"; //  NEW\r\n+\r\n+interface Platform {\r\n+  name: string;\r\n+}\r\n+\r\n+interface Car {\r\n+  id: string;\r\n+  title: string;\r\n+  images: string[];\r\n+  price: number;\r\n+  year: number;\r\n+  mileage: number;\r\n+  condition: string;\r\n+  fuelType?: string;\r\n+  transmission?: string;\r\n+  location?: string;\r\n+  platform: Platform[];\r\n+}\r\n+\r\n+const Compare = () => {\r\n+  const navigate = useNavigate();\r\n+  const { comparisonList, removeFromComparison, clearComparison } =\r\n+    useComparison();\r\n+  const token = useAuthStore((state) => state.token); //  token from store\r\n+  const [hasSaved, setHasSaved] = useState(false); //  avoid duplicate saves\r\n+\r\n+  //  Save comparison (first two cars) in DB once\r\n+  useEffect(() => {\r\n+    const doSave = async () => {\r\n+      if (!token) return;\r\n+      if (comparisonList.length < 2) return;\r\n+      if (hasSaved) return;\r\n+\r\n+      const [carA, carB] = comparisonList;\r\n+\r\n+      try {\r\n+        await saveComparison(carA.id, carB.id, token);\r\n+        setHasSaved(true);\r\n+      } catch (err) {\r\n+        console.error(\"Failed to save comparison:\", err);\r\n+      }\r\n+    };\r\n+\r\n+    void doSave();\r\n+  }, [comparisonList, token, hasSaved]);\r\n+\r\n+  if (comparisonList.length === 0) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n+        <p className=\"mb-6 text-muted-foreground\">\r\n+          Add cars to your comparison list to see them side by side.\r\n+        </p>\r\n+        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n+          Browse Cars\r\n+        </Button>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  const specs: Array<{\r\n+    label: string;\r\n+    key: keyof Car;\r\n+    format?: (val: number | string | undefined) => string;\r\n+  }> = [\r\n+    {\r\n+      label: \"Price\",\r\n+      key: \"price\",\r\n+      format: (val: number) => `$${val.toLocaleString()}`,\r\n+    },\r\n+    { label: \"Year\", key: \"year\" },\r\n+    {\r\n+      label: \"Mileage\",\r\n+      key: \"mileage\",\r\n+      format: (val: number) => `${val.toLocaleString()} mi`,\r\n+    },\r\n+    {\r\n+      label: \"Condition\",\r\n+      key: \"condition\",\r\n+      format: (val: string) =>\r\n+        val.charAt(0).toUpperCase() + val.slice(1),\r\n+    },\r\n+    {\r\n+      label: \"Fuel Type\",\r\n+      key: \"fuelType\",\r\n+      format: (val: string) =>\r\n+        val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\",\r\n+    },\r\n+    {\r\n+      label: \"Transmission\",\r\n+      key: \"transmission\",\r\n+      format: (val: string) =>\r\n+        val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\",\r\n+    },\r\n+    { label: \"Location\", key: \"location\" },\r\n+  ];\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <div className=\"mb-6 flex items-center justify-between\">\r\n+          <Button\r\n+            variant=\"ghost\"\r\n+            onClick={() => navigate(\"/\")}\r\n+            className=\"gap-2\"\r\n+          >\r\n+            <ArrowLeft className=\"h-4 w-4\" />\r\n+            Back to Listings\r\n+          </Button>\r\n+          <Button\r\n+            variant=\"outline\"\r\n+            onClick={clearComparison}\r\n+            className=\"gap-2\"\r\n+          >\r\n+            <X className=\"h-4 w-4\" />\r\n+            Clear All\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"mb-8\">\r\n+          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n+          <p className=\"mt-2 text-muted-foreground\">\r\n+            Compare up to {comparisonList.length} of 3 cars side by side\r\n+          </p>\r\n+        </div>\r\n+\r\n+        <div className=\"overflow-x-auto\">\r\n+          <div className=\"min-w-[800px]\">\r\n+            {/* Car Images & Titles */}\r\n+            <div\r\n+              className=\"mb-6 grid gap-4\"\r\n+              style={{\r\n+                gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)`,\r\n+              }}\r\n+            >\r\n+              {comparisonList.map((car) => (\r\n+                <Card key={car.id} className=\"overflow-hidden\">\r\n+                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n+                    <img\r\n+                      src={car.images[0]}\r\n+                      alt={car.title}\r\n+                      className=\"h-full w-full object-cover\"\r\n+                    />\r\n+                    <Button\r\n+                      variant=\"secondary\"\r\n+                      size=\"icon\"\r\n+                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n+                      onClick={() => removeFromComparison(car.id)}\r\n+                    >\r\n+                      <X className=\"h-4 w-4\" />\r\n+                    </Button>\r\n+                  </div>\r\n+                  <CardHeader>\r\n+                    <CardTitle className=\"truncate text-base\">\r\n+                      {car.title}\r\n+                    </CardTitle>\r\n+                  </CardHeader>\r\n+                </Card>\r\n+              ))}\r\n+            </div>\r\n+\r\n+            {/* Comparison Table */}\r\n+            <Card>\r\n+              <CardContent className=\"p-0\">\r\n+                {specs.map((spec, index) => (\r\n+                  <div key={spec.key}>\r\n+                    {index > 0 && <Separator />}\r\n+                    <div\r\n+                      className=\"grid\"\r\n+                      style={{\r\n+                        gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                      }}\r\n+                    >\r\n+                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                        {spec.label}\r\n+                      </div>\r\n+                      {comparisonList.map((car) => {\r\n+                        const value = car[spec.key];\r\n+                        let displayValue: string | number | undefined;\r\n+\r\n+                        if (\r\n+                          spec.format &&\r\n+                          (typeof value === \"string\" ||\r\n+                            typeof value === \"number\")\r\n+                        ) {\r\n+                          displayValue = spec.format(value);\r\n+                        } else if (\r\n+                          typeof value === \"string\" ||\r\n+                          typeof value === \"number\"\r\n+                        ) {\r\n+                          displayValue = value;\r\n+                        } else {\r\n+                          displayValue = \"N/A\";\r\n+                        }\r\n+\r\n+                        return (\r\n+                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                            {displayValue || \"N/A\"}\r\n+                          </div>\r\n+                        );\r\n+                      })}\r\n+                    </div>\r\n+                  </div>\r\n+                ))}\r\n+\r\n+                <Separator />\r\n+\r\n+                {/* Platforms */}\r\n+                <div\r\n+                  className=\"grid\"\r\n+                  style={{\r\n+                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                  }}\r\n+                >\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Listed On\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <div className=\"flex flex-wrap gap-1\">\r\n+                        {car.platform.map((platform, idx) => (\r\n+                          <Badge\r\n+                            key={idx}\r\n+                            variant=\"secondary\"\r\n+                            className=\"text-xs\"\r\n+                          >\r\n+                            {platform.name}\r\n+                          </Badge>\r\n+                        ))}\r\n+                      </div>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                {/* View Details Buttons */}\r\n+                <div\r\n+                  className=\"grid\"\r\n+                  style={{\r\n+                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                  }}\r\n+                >\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Actions\r\n+                  </div>\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <Button\r\n+                        variant=\"default\"\r\n+                        className=\"w-full\"\r\n+                        onClick={() => navigate(`/car/${car.id}`)}\r\n+                      >\r\n+                        View Details\r\n+                      </Button>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default Compare;\r\n"
                },
                {
                    "date": 1764590021257,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,11 +5,15 @@\n import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n import { Badge } from \"@/components/ui/badge\";\r\n import { ArrowLeft, X } from \"lucide-react\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n-import { useEffect, useState } from \"react\"; //  NEW\r\n-import { useAuthStore } from \"@/stores/authStore\"; //  NEW\r\n-import { saveComparison } from \"@/services/carService\"; //  NEW\r\n+import { useEffect, useState } from \"react\"; // \r\n+import { useAuthStore } from \"@/stores/authStore\"; // \r\n+import { saveComparison } from \"@/services/carService\"; // \r\n+import {\r\n+  compareCarsAI,\r\n+  type CarCompareResult,\r\n+} from \"@/services/aiCompareService\"; //  NEW\r\n \r\n interface Platform {\r\n   name: string;\r\n }\r\n@@ -34,8 +38,12 @@\n     useComparison();\r\n   const token = useAuthStore((state) => state.token); //  token from store\r\n   const [hasSaved, setHasSaved] = useState(false); //  avoid duplicate saves\r\n \r\n+  //  NEW: AI compare state\r\n+  const [aiLoading, setAiLoading] = useState(false);\r\n+  const [aiResult, setAiResult] = useState<CarCompareResult | null>(null);\r\n+\r\n   //  Save comparison (first two cars) in DB once\r\n   useEffect(() => {\r\n     const doSave = async () => {\r\n       if (!token) return;\r\n@@ -68,8 +76,50 @@\n       </div>\r\n     );\r\n   }\r\n \r\n+  //  Helper to extract brand + model from title\r\n+  const buildCompareInput = (car: Car) => {\r\n+    const parts = car.title.split(\" \");\r\n+    const brand = parts[0] ?? \"\";\r\n+    const model = parts.slice(1).join(\" \") || brand;\r\n+\r\n+    return {\r\n+      brand,\r\n+      model,\r\n+      year: car.year,\r\n+      mileage: car.mileage,\r\n+      price: car.price,\r\n+      condition: car.condition,\r\n+    };\r\n+  };\r\n+\r\n+  //  AI Compare handler (compares first two cars)\r\n+  const handleAICompare = async () => {\r\n+    if (comparisonList.length < 2) {\r\n+      alert(\"Add at least two cars to use AI comparison.\");\r\n+      return;\r\n+    }\r\n+\r\n+    const [carA, carB] = comparisonList;\r\n+\r\n+    const carAInput = buildCompareInput(carA);\r\n+    const carBInput = buildCompareInput(carB);\r\n+\r\n+    try {\r\n+      setAiLoading(true);\r\n+      setAiResult(null);\r\n+\r\n+      const result = await compareCarsAI(carAInput, carBInput);\r\n+      setAiResult(result);\r\n+    } catch (error) {\r\n+      console.error(\"AI Compare Error:\", error);\r\n+      alert(\"AI comparison failed. Please try again.\");\r\n+    } finally {\r\n+      setAiLoading(false);\r\n+    }\r\n+  };\r\n+\r\n   const specs: Array<{\r\n     label: string;\r\n     key: keyof Car;\r\n     format?: (val: number | string | undefined) => string;\r\n@@ -105,35 +155,55 @@\n     },\r\n     { label: \"Location\", key: \"location\" },\r\n   ];\r\n \r\n+  const primaryA = comparisonList[0];\r\n+  const primaryB = comparisonList[1];\r\n+\r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n-        <div className=\"mb-6 flex items-center justify-between\">\r\n+        <div className=\"mb-6 flex flex-wrap items-center justify-between gap-3\">\r\n           <Button\r\n             variant=\"ghost\"\r\n             onClick={() => navigate(\"/\")}\r\n             className=\"gap-2\"\r\n           >\r\n             <ArrowLeft className=\"h-4 w-4\" />\r\n             Back to Listings\r\n           </Button>\r\n-          <Button\r\n-            variant=\"outline\"\r\n-            onClick={clearComparison}\r\n-            className=\"gap-2\"\r\n-          >\r\n-            <X className=\"h-4 w-4\" />\r\n-            Clear All\r\n-          </Button>\r\n+          <div className=\"flex flex-wrap gap-2\">\r\n+            {/*  AI Compare Button */}\r\n+            <Button\r\n+              variant=\"default\"\r\n+              onClick={handleAICompare}\r\n+              disabled={comparisonList.length < 2 || aiLoading}\r\n+              className=\"gap-2\"\r\n+            >\r\n+              {aiLoading ? \"Analyzing...\" : \"AI Compare First 2 Cars\"}\r\n+            </Button>\r\n+\r\n+            <Button\r\n+              variant=\"outline\"\r\n+              onClick={clearComparison}\r\n+              className=\"gap-2\"\r\n+            >\r\n+              <X className=\"h-4 w-4\" />\r\n+              Clear All\r\n+            </Button>\r\n+          </div>\r\n         </div>\r\n \r\n         <div className=\"mb-8\">\r\n           <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n           <p className=\"mt-2 text-muted-foreground\">\r\n-            Compare up to {comparisonList.length} of 3 cars side by side\r\n+            Compare up to {comparisonList.length} of 3 cars side by side.\r\n           </p>\r\n+          {comparisonList.length >= 2 && (\r\n+            <p className=\"mt-1 text-xs text-muted-foreground\">\r\n+              AI comparison analyzes only the first two cars in the list.\r\n+            </p>\r\n+          )}\r\n         </div>\r\n \r\n         <div className=\"overflow-x-auto\">\r\n           <div className=\"min-w-[800px]\">\r\n@@ -268,720 +338,68 @@\n                   ))}\r\n                 </div>\r\n               </CardContent>\r\n             </Card>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n \r\n-export default Compare;\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { ArrowLeft, X } from \"lucide-react\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n+            {/*  AI Comparison Result Card */}\r\n+            {aiResult && primaryA && primaryB && (\r\n+              <Card className=\"mt-6 shadow-card\">\r\n+                <CardHeader>\r\n+                  <CardTitle>AI Comparison Result</CardTitle>\r\n+                </CardHeader>\r\n+                <CardContent className=\"space-y-3 text-sm\">\r\n+                  <p>\r\n+                    <span className=\"font-semibold\">Better Car: </span>\r\n+                    {aiResult.betterCar === \"A\"\r\n+                      ? primaryA.title\r\n+                      : primaryB.title}\r\n+                  </p>\r\n+                  <p>\r\n+                    <span className=\"font-semibold\">Reason: </span>\r\n+                    {aiResult.reason}\r\n+                  </p>\r\n \r\n-interface Platform {\r\n-  name: string;\r\n-}\r\n+                  <Separator className=\"my-2\" />\r\n \r\n-interface Car {\r\n-  id: string;\r\n-  title: string;\r\n-  images: string[];\r\n-  price: number;\r\n-  year: number;\r\n-  mileage: number;\r\n-  condition: string;\r\n-  fuelType?: string;\r\n-  transmission?: string;\r\n-  location?: string;\r\n-  platform: Platform[];\r\n-}\r\n-\r\n-const Compare = () => {\r\n-  const navigate = useNavigate();\r\n-  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n-\r\n-  if (comparisonList.length === 0) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n-        <p className=\"mb-6 text-muted-foreground\">\r\n-          Add cars to your comparison list to see them side by side.\r\n-        </p>\r\n-        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n-          Browse Cars\r\n-        </Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  const specs: Array<{\r\n-    label: string;\r\n-    key: keyof Car;\r\n-    format?: (val: number | string | undefined) => string;\r\n-  }> = [\r\n-    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n-    { label: \"Year\", key: \"year\" },\r\n-    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n-    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n-    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Location\", key: \"location\" },\r\n-  ];\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <div className=\"mb-6 flex items-center justify-between\">\r\n-          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n-            <ArrowLeft className=\"h-4 w-4\" />\r\n-            Back to Listings\r\n-          </Button>\r\n-          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n-            <X className=\"h-4 w-4\" />\r\n-            Clear All\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"mb-8\">\r\n-          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n-          <p className=\"mt-2 text-muted-foreground\">\r\n-            Compare up to {comparisonList.length} of 3 cars side by side\r\n-          </p>\r\n-        </div>\r\n-\r\n-        <div className=\"overflow-x-auto\">\r\n-          <div className=\"min-w-[800px]\">\r\n-            {/* Car Images & Titles */}\r\n-            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n-              {comparisonList.map((car) => (\r\n-                <Card key={car.id} className=\"overflow-hidden\">\r\n-                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n-                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n-                    <Button\r\n-                      variant=\"secondary\"\r\n-                      size=\"icon\"\r\n-                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n-                      onClick={() => removeFromComparison(car.id)}\r\n-                    >\r\n-                      <X className=\"h-4 w-4\" />\r\n-                    </Button>\r\n-                  </div>\r\n-                  <CardHeader>\r\n-                    <CardTitle className=\"truncate text-base\">{car.title}</CardTitle>\r\n-                  </CardHeader>\r\n-                </Card>\r\n-              ))}\r\n-            {/* Comparison Table */}\r\n-            <Card>\r\n-              <CardContent className=\"p-0\">\r\n-                {specs.map((spec, index) => (\r\n-                  <div key={spec.key}>\r\n-                    {index > 0 && <Separator />}\r\n-                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                        {spec.label}\r\n-                      </div>\r\n-                      {comparisonList.map((car) => {\r\n-                        const value = car[spec.key];\r\n-                        let displayValue: string | number | undefined;\r\n-                        if (spec.format && (typeof value === \"string\" || typeof value === \"number\")) {\r\n-                          displayValue = spec.format(value);\r\n-                        } else if (typeof value === \"string\" || typeof value === \"number\") {\r\n-                          displayValue = value;\r\n-                        } else {\r\n-                          displayValue = \"N/A\";\r\n-                        }\r\n-                        return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n-                            {displayValue || \"N/A\"}\r\n-                          </div>\r\n-                        );\r\n-                      })}\r\n+                  <div className=\"grid gap-2 md:grid-cols-2\">\r\n+                    <div>\r\n+                      <p className=\"font-semibold\">Performance</p>\r\n+                      <p className=\"text-muted-foreground\">\r\n+                        {aiResult.detailedComparison.performance}\r\n+                      </p>\r\n                     </div>\r\n-                  </div>\r\n-                ))}\r\n-\r\n-                <Separator />\r\n-                \r\n-                {/* Platforms */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Listed On\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <div className=\"flex flex-wrap gap-1\">\r\n-                        {car.platform.map((platform, idx) => (\r\n-                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n-                            {platform.name}\r\n-                          </Badge>\r\n-                        ))}\r\n-                      </div>\r\n+                    <div>\r\n+                      <p className=\"font-semibold\">Reliability</p>\r\n+                      <p className=\"text-muted-foreground\">\r\n+                        {aiResult.detailedComparison.reliability}\r\n+                      </p>\r\n                     </div>\r\n-                  ))}\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                {/* View Details Buttons */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Actions\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <Button\r\n-                        variant=\"default\"\r\n-                        className=\"w-full\"\r\n-                        onClick={() => navigate(`/car/${car.id}`)}\r\n-                      >\r\n-                        View Details\r\n-                      </Button>\r\n+                    <div>\r\n+                      <p className=\"font-semibold\">Fuel Economy</p>\r\n+                      <p className=\"text-muted-foreground\">\r\n+                        {aiResult.detailedComparison.fuelEconomy}\r\n+                      </p>\r\n                     </div>\r\n-                  ))}\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-        </div>\r\n-      </div>\r\n-  \r\n-  );\r\n-};\r\n-\r\n-export default Compare;\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { ArrowLeft, X } from \"lucide-react\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-\r\n-interface Platform {\r\n-  name: string;\r\n-}\r\n-\r\n-interface Car {\r\n-  id: string;\r\n-  title: string;\r\n-  images: string[];\r\n-  price: number;\r\n-  year: number;\r\n-  mileage: number;\r\n-  condition: string;\r\n-  fuelType?: string;\r\n-  transmission?: string;\r\n-  location?: string;\r\n-  platform: Platform[];\r\n-}\r\n-\r\n-const Compare = () => {\r\n-  const navigate = useNavigate();\r\n-  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n-\r\n-  if (comparisonList.length === 0) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n-        <p className=\"mb-6 text-muted-foreground\">\r\n-          Add cars to your comparison list to see them side by side.\r\n-        </p>\r\n-        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n-          Browse Cars\r\n-        </Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  const specs: Array<{\r\n-    label: string;\r\n-    key: string;\r\n-    format?: (val: number | string | undefined) => string;\r\n-  }> = [\r\n-    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n-    { label: \"Year\", key: \"year\" },\r\n-    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n-    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n-    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Location\", key: \"location\" },\r\n-  ];\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <div className=\"mb-6 flex items-center justify-between\">\r\n-          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n-            <ArrowLeft className=\"h-4 w-4\" />\r\n-            Back to Listings\r\n-          </Button>\r\n-          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n-            <X className=\"h-4 w-4\" />\r\n-            Clear All\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"mb-8\">\r\n-          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n-          <p className=\"mt-2 text-muted-foreground\">\r\n-            Compare up to {comparisonList.length} of 3 cars side by side\r\n-          </p>\r\n-        </div>\r\n-\r\n-        <div className=\"overflow-x-auto\">\r\n-          <div className=\"min-w-[800px]\">\r\n-            {/* Car Images & Titles */}\r\n-            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n-              {comparisonList.map((car) => (\r\n-                <Card key={car.id} className=\"overflow-hidden\">\r\n-                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n-                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n-                    <Button\r\n-                      variant=\"secondary\"\r\n-                      size=\"icon\"\r\n-                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n-                      onClick={() => removeFromComparison(car.id)}\r\n-                    >\r\n-                      <X className=\"h-4 w-4\" />\r\n-                    </Button>\r\n-                  </div>\r\n-                  <CardHeader>\r\n-                    <CardTitle className=\"truncate text-base\">{car.title}</CardTitle>\r\n-                  </CardHeader>\r\n-                </Card>\r\n-              ))}\r\n-            {/* Comparison Table */}\r\n-            <Card>\r\n-              <CardContent className=\"p-0\">\r\n-                {specs.map((spec, index) => (\r\n-                  <div key={spec.key}>\r\n-                    {index > 0 && <Separator />}\r\n-                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                        {spec.label}\r\n-                      </div>\r\n-                      {comparisonList.map((car) => {\r\n-                        const value = (car as Record<string, any>)[spec.key];\r\n-                        const displayValue = spec.format ? spec.format(value) : value;\r\n-                        return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n-                            {displayValue || \"N/A\"}\r\n-                          </div>\r\n-                        );\r\n-                      })}\r\n+                    <div>\r\n+                      <p className=\"font-semibold\">Comfort</p>\r\n+                      <p className=\"text-muted-foreground\">\r\n+                        {aiResult.detailedComparison.comfort}\r\n+                      </p>\r\n                     </div>\r\n-                  </div>\r\n-                ))}\r\n-\r\n-                <Separator />\r\n-                \r\n-                {/* Platforms */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Listed On\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <div className=\"flex flex-wrap gap-1\">\r\n-                        {car.platform.map((platform, idx) => (\r\n-                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n-                            {platform.name}\r\n-                          </Badge>\r\n-                        ))}\r\n-                      </div>\r\n+                    <div className=\"md:col-span-2\">\r\n+                      <p className=\"font-semibold\">Value for Money</p>\r\n+                      <p className=\"text-muted-foreground\">\r\n+                        {aiResult.detailedComparison.valueForMoney}\r\n+                      </p>\r\n                     </div>\r\n-                  ))}\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                {/* View Details Buttons */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Actions\r\n                   </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <Button\r\n-                        variant=\"default\"\r\n-                        className=\"w-full\"\r\n-                        onClick={() => navigate(`/car/${car.id}`)}\r\n-                      >\r\n-                        View Details\r\n-                      </Button>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n+                </CardContent>\r\n+              </Card>\r\n+            )}\r\n           </div>\r\n         </div>\r\n       </div>\r\n-        </div>\r\n-      </div>\r\n-  \r\n-  );\r\n-};\r\n-\r\n-export default Compare;\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { ArrowLeft, X } from \"lucide-react\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-\r\n-interface Platform {\r\n-  name: string;\r\n-}\r\n-\r\n-interface Car {\r\n-  id: string;\r\n-  title: string;\r\n-  images: string[];\r\n-  price: number;\r\n-  year: number;\r\n-  mileage: number;\r\n-  condition: string;\r\n-  fuelType?: string;\r\n-  transmission?: string;\r\n-  location?: string;\r\n-  platform: Platform[];\r\n-}\r\n-\r\n-const Compare = () => {\r\n-  const navigate = useNavigate();\r\n-  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n-\r\n-  if (comparisonList.length === 0) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n-        <p className=\"mb-6 text-muted-foreground\">\r\n-          Add cars to your comparison list to see them side by side.\r\n-        </p>\r\n-        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n-          Browse Cars\r\n-        </Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  const specs: Array<{\r\n-    label: string;\r\n-    key: string;\r\n-    format?: (val: number | string | undefined) => string;\r\n-  }> = [\r\n-    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n-    { label: \"Year\", key: \"year\" },\r\n-    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n-    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n-    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Location\", key: \"location\" },\r\n-  ];\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <div className=\"mb-6 flex items-center justify-between\">\r\n-          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n-            <ArrowLeft className=\"h-4 w-4\" />\r\n-            Back to Listings\r\n-          </Button>\r\n-          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n-            <X className=\"h-4 w-4\" />\r\n-            Clear All\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"mb-8\">\r\n-          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n-          <p className=\"mt-2 text-muted-foreground\">\r\n-            Compare up to {comparisonList.length} of 3 cars side by side\r\n-          </p>\r\n-        </div>\r\n-\r\n-        <div className=\"overflow-x-auto\">\r\n-          <div className=\"min-w-[800px]\">\r\n-            {/* Car Images & Titles */}\r\n-            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n-              {comparisonList.map((car) => (\r\n-                <Card key={car.id} className=\"overflow-hidden\">\r\n-                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n-                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n-                    <Button\r\n-                      variant=\"secondary\"\r\n-                      size=\"icon\"\r\n-                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n-                      onClick={() => removeFromComparison(car.id)}\r\n-                    >\r\n-                      <X className=\"h-4 w-4\" />\r\n-                    </Button>\r\n-                  </div>\r\n-                  <CardHeader>\r\n-                    <CardTitle className=\"truncate text-base\">{car.title}</CardTitle>\r\n-                  </CardHeader>\r\n-                </Card>\r\n-              ))}\r\n-            {/* Comparison Table */}\r\n-            <Card>\r\n-              <CardContent className=\"p-0\">\r\n-                {specs.map((spec, index) => (\r\n-                  <div key={spec.key}>\r\n-                    {index > 0 && <Separator />}\r\n-                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                        {spec.label}\r\n-                      </div>\r\n-                      {comparisonList.map((car) => {\r\n-                        const value = (car as Record<string, any>)[spec.key];\r\n-                        const displayValue = spec.format ? spec.format(value) : value;\r\n-                        return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n-                            {displayValue || \"N/A\"}\r\n-                          </div>\r\n-                        );\r\n-                      })}\r\n-                    </div>\r\n-                  </div>\r\n-                ))}\r\n-\r\n-                <Separator />\r\n-                \r\n-                {/* Platforms */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Listed On\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <div className=\"flex flex-wrap gap-1\">\r\n-                        {car.platform.map((platform, idx) => (\r\n-                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n-                            {platform.name}\r\n-                          </Badge>\r\n-                        ))}\r\n-                      </div>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                {/* View Details Buttons */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Actions\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <Button\r\n-                        variant=\"default\"\r\n-                        className=\"w-full\"\r\n-                        onClick={() => navigate(`/car/${car.id}`)}\r\n-                      >\r\n-                        View Details\r\n-                      </Button>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-        </div>\r\n-      </div>\r\n     </div>\r\n-    <\r\n   );\r\n };\r\n \r\n export default Compare;\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { ArrowLeft, X } from \"lucide-react\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-\r\n-interface Platform {\r\n-  name: string;\r\n-}\r\n-\r\n-interface Car {\r\n-  id: string;\r\n-  title: string;\r\n-  images: string[];\r\n-  price: number;\r\n-  year: number;\r\n-  mileage: number;\r\n-  condition: string;\r\n-  fuelType?: string;\r\n-  transmission?: string;\r\n-  location?: string;\r\n-  platform: Platform[];\r\n-}\r\n-\r\n-const Compare = () => {\r\n-  const navigate = useNavigate();\r\n-  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n-\r\n-  if (comparisonList.length === 0) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n-        <p className=\"mb-6 text-muted-foreground\">\r\n-          Add cars to your comparison list to see them side by side.\r\n-        </p>\r\n-        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n-          Browse Cars\r\n-        </Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  const specs: Array<{\r\n-    label: string;\r\n-    key: string;\r\n-    format?: (val: number | string | undefined) => string;\r\n-  }> = [\r\n-    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n-    { label: \"Year\", key: \"year\" },\r\n-    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n-    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n-    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n-    { label: \"Location\", key: \"location\" },\r\n-  ];\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <div className=\"mb-6 flex items-center justify-between\">\r\n-          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n-            <ArrowLeft className=\"h-4 w-4\" />\r\n-            Back to Listings\r\n-          </Button>\r\n-          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n-            <X className=\"h-4 w-4\" />\r\n-            Clear All\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"mb-8\">\r\n-          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n-          <p className=\"mt-2 text-muted-foreground\">\r\n-            Compare up to {comparisonList.length} of 3 cars side by side\r\n-          </p>\r\n-        </div>\r\n-\r\n-        <div className=\"overflow-x-auto\">\r\n-          <div className=\"min-w-[800px]\">\r\n-            {/* Car Images & Titles */}\r\n-            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n-              {comparisonList.map((car) => (\r\n-                <Card key={car.id} className=\"overflow-hidden\">\r\n-                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n-                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n-                    <Button\r\n-                      variant=\"secondary\"\r\n-                      size=\"icon\"\r\n-                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n-                      onClick={() => removeFromComparison(car.id)}\r\n-                    >\r\n-                      <X className=\"h-4 w-4\" />\r\n-                    </Button>\r\n-                  </div>\r\n-                  <CardHeader>\r\n-                    <CardTitle className=\"truncate text-base\">{car.title}</CardTitle>\r\n-                  </CardHeader>\r\n-                </Card>\r\n-              ))}\r\n-            {/* Comparison Table */}\r\n-            <Card>\r\n-              <CardContent className=\"p-0\">\r\n-                {specs.map((spec, index) => (\r\n-                  <div key={spec.key}>\r\n-                    {index > 0 && <Separator />}\r\n-                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                        {spec.label}\r\n-                      </div>\r\n-                      {comparisonList.map((car) => {\r\n-                        const value = (car as Record<string, any>)[spec.key];\r\n-                        const displayValue = spec.format ? spec.format(value) : value;\r\n-                        return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n-                            {displayValue || \"N/A\"}\r\n-                          </div>\r\n-                        );\r\n-                      })}\r\n-                    </div>\r\n-                  </div>\r\n-                ))}\r\n-\r\n-                <Separator />\r\n-                \r\n-                {/* Platforms */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Listed On\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <div className=\"flex flex-wrap gap-1\">\r\n-                        {car.platform.map((platform, idx) => (\r\n-                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n-                            {platform.name}\r\n-                          </Badge>\r\n-                        ))}\r\n-                      </div>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                {/* View Details Buttons */}\r\n-                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Actions\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <Button\r\n-                        variant=\"default\"\r\n-                        className=\"w-full\"\r\n-                        onClick={() => navigate(`/car/${car.id}`)}\r\n-                      >\r\n-                        View Details\r\n-                      </Button>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default Compare;\r\n"
                },
                {
                    "date": 1764590622480,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,15 +5,19 @@\n import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n import { Badge } from \"@/components/ui/badge\";\r\n import { ArrowLeft, X } from \"lucide-react\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n-import { useEffect, useState } from \"react\"; // \r\n-import { useAuthStore } from \"@/stores/authStore\"; // \r\n-import { saveComparison } from \"@/services/carService\"; // \r\n+import { useEffect, useState } from \"react\";\r\n+import { useAuthStore } from \"@/stores/authStore\";\r\n+import { saveComparison } from \"@/services/carService\";\r\n import {\r\n   compareCarsAI,\r\n   type CarCompareResult,\r\n-} from \"@/services/aiCompareService\"; //  NEW\r\n+} from \"@/services/aiCompareService\";\r\n+import {\r\n+  estimateMaintenanceCost,\r\n+  type MaintenanceEstimate,\r\n+} from \"@/services/aiMaintenanceService\";\r\n \r\n interface Platform {\r\n   name: string;\r\n }\r\n@@ -35,16 +39,25 @@\n const Compare = () => {\r\n   const navigate = useNavigate();\r\n   const { comparisonList, removeFromComparison, clearComparison } =\r\n     useComparison();\r\n-  const token = useAuthStore((state) => state.token); //  token from store\r\n-  const [hasSaved, setHasSaved] = useState(false); //  avoid duplicate saves\r\n+  const token = useAuthStore((state) => state.token);\r\n+  const [hasSaved, setHasSaved] = useState(false);\r\n \r\n-  //  NEW: AI compare state\r\n+  // AI Compare state\r\n   const [aiLoading, setAiLoading] = useState(false);\r\n   const [aiResult, setAiResult] = useState<CarCompareResult | null>(null);\r\n \r\n-  //  Save comparison (first two cars) in DB once\r\n+  // AI Maintenance state\r\n+  const [maintLoading, setMaintLoading] = useState(false);\r\n+  const [maintenanceA, setMaintenanceA] = useState<MaintenanceEstimate | null>(\r\n+    null\r\n+  );\r\n+  const [maintenanceB, setMaintenanceB] = useState<MaintenanceEstimate | null>(\r\n+    null\r\n+  );\r\n+\r\n+  // Save comparison once\r\n   useEffect(() => {\r\n     const doSave = async () => {\r\n       if (!token) return;\r\n       if (comparisonList.length < 2) return;\r\n@@ -76,9 +89,9 @@\n       </div>\r\n     );\r\n   }\r\n \r\n-  //  Helper to extract brand + model from title\r\n+  // Helper: build inputs from title \"Brand Model\"\r\n   const buildCompareInput = (car: Car) => {\r\n     const parts = car.title.split(\" \");\r\n     const brand = parts[0] ?? \"\";\r\n     const model = parts.slice(1).join(\" \") || brand;\r\n@@ -92,9 +105,25 @@\n       condition: car.condition,\r\n     };\r\n   };\r\n \r\n-  //  AI Compare handler (compares first two cars)\r\n+  const buildMaintenanceInput = (car: Car) => {\r\n+    const parts = car.title.split(\" \");\r\n+    const brand = parts[0] ?? \"\";\r\n+    const model = parts.slice(1).join(\" \") || brand;\r\n+\r\n+    return {\r\n+      brand,\r\n+      model,\r\n+      year: car.year,\r\n+      mileage: car.mileage,\r\n+      price: car.price,\r\n+      condition: car.condition,\r\n+      fuelType: car.fuelType,\r\n+      transmission: car.transmission,\r\n+    };\r\n+  };\r\n+\r\n   const handleAICompare = async () => {\r\n     if (comparisonList.length < 2) {\r\n       alert(\"Add at least two cars to use AI comparison.\");\r\n       return;\r\n@@ -118,8 +147,41 @@\n       setAiLoading(false);\r\n     }\r\n   };\r\n \r\n+  const handleAIMaintenance = async () => {\r\n+    if (comparisonList.length < 1) {\r\n+      alert(\"Add at least one car to estimate maintenance.\");\r\n+      return;\r\n+    }\r\n+\r\n+    const primaryA = comparisonList[0];\r\n+    const primaryB = comparisonList[1];\r\n+\r\n+    try {\r\n+      setMaintLoading(true);\r\n+      setMaintenanceA(null);\r\n+      setMaintenanceB(null);\r\n+\r\n+      // Car A\r\n+      const inputA = buildMaintenanceInput(primaryA);\r\n+      const resA = await estimateMaintenanceCost(inputA);\r\n+      setMaintenanceA(resA);\r\n+\r\n+      // Car B (if present)\r\n+      if (primaryB) {\r\n+        const inputB = buildMaintenanceInput(primaryB);\r\n+        const resB = await estimateMaintenanceCost(inputB);\r\n+        setMaintenanceB(resB);\r\n+      }\r\n+    } catch (error) {\r\n+      console.error(\"AI Maintenance Error:\", error);\r\n+      alert(\"AI maintenance estimation failed. Please try again.\");\r\n+    } finally {\r\n+      setMaintLoading(false);\r\n+    }\r\n+  };\r\n+\r\n   const specs: Array<{\r\n     label: string;\r\n     key: keyof Car;\r\n     format?: (val: number | string | undefined) => string;\r\n@@ -171,9 +233,9 @@\n             <ArrowLeft className=\"h-4 w-4\" />\r\n             Back to Listings\r\n           </Button>\r\n           <div className=\"flex flex-wrap gap-2\">\r\n-            {/*  AI Compare Button */}\r\n+            {/* AI Compare Button */}\r\n             <Button\r\n               variant=\"default\"\r\n               onClick={handleAICompare}\r\n               disabled={comparisonList.length < 2 || aiLoading}\r\n@@ -181,10 +243,22 @@\n             >\r\n               {aiLoading ? \"Analyzing...\" : \"AI Compare First 2 Cars\"}\r\n             </Button>\r\n \r\n+            {/* AI Maintenance Button */}\r\n             <Button\r\n               variant=\"outline\"\r\n+              onClick={handleAIMaintenance}\r\n+              disabled={maintLoading || comparisonList.length < 1}\r\n+              className=\"gap-2\"\r\n+            >\r\n+              {maintLoading\r\n+                ? \"Estimating Maintenance...\"\r\n+                : \"AI Maintenance Cost (First 2 Cars)\"}\r\n+            </Button>\r\n+\r\n+            <Button\r\n+              variant=\"outline\"\r\n               onClick={clearComparison}\r\n               className=\"gap-2\"\r\n             >\r\n               <X className=\"h-4 w-4\" />\r\n@@ -199,9 +273,9 @@\n             Compare up to {comparisonList.length} of 3 cars side by side.\r\n           </p>\r\n           {comparisonList.length >= 2 && (\r\n             <p className=\"mt-1 text-xs text-muted-foreground\">\r\n-              AI comparison analyzes only the first two cars in the list.\r\n+              AI features analyze only the first two cars in the list.\r\n             </p>\r\n           )}\r\n         </div>\r\n \r\n@@ -314,9 +388,9 @@\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                {/* View Details Buttons */}\r\n+                {/* View Details */}\r\n                 <div\r\n                   className=\"grid\"\r\n                   style={{\r\n                     gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n@@ -339,9 +413,9 @@\n                 </div>\r\n               </CardContent>\r\n             </Card>\r\n \r\n-            {/*  AI Comparison Result Card */}\r\n+            {/* AI Comparison Result */}\r\n             {aiResult && primaryA && primaryB && (\r\n               <Card className=\"mt-6 shadow-card\">\r\n                 <CardHeader>\r\n                   <CardTitle>AI Comparison Result</CardTitle>\r\n@@ -394,8 +468,104 @@\n                   </div>\r\n                 </CardContent>\r\n               </Card>\r\n             )}\r\n+\r\n+            {/* AI Maintenance Result */}\r\n+            {(maintenanceA || maintenanceB) && (\r\n+              <Card className=\"mt-6 shadow-card\">\r\n+                <CardHeader>\r\n+                  <CardTitle>AI Maintenance Cost Estimate</CardTitle>\r\n+                </CardHeader>\r\n+                <CardContent className=\"space-y-4 text-sm\">\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    {primaryA && maintenanceA && (\r\n+                      <div className=\"border rounded-lg p-3\">\r\n+                        <p className=\"font-semibold mb-1\">{primaryA.title}</p>\r\n+                        <p>\r\n+                          <span className=\"font-semibold\">Yearly Range:</span>{\" \"}\r\n+                          ${maintenanceA.yearlyLow.toLocaleString()} - $\r\n+                          {maintenanceA.yearlyHigh.toLocaleString()}\r\n+                        </p>\r\n+                        <p>\r\n+                          <span className=\"font-semibold\">\r\n+                            Recommended Budget:\r\n+                          </span>{\" \"}\r\n+                          $\r\n+                          {maintenanceA.recommendedYearlyBudget.toLocaleString()}\r\n+                          /year\r\n+                        </p>\r\n+                        <p>\r\n+                          <span className=\"font-semibold\">Risk Level:</span>{\" \"}\r\n+                          {maintenanceA.riskLevel.toUpperCase()}\r\n+                        </p>\r\n+                        <p className=\"mt-1 text-muted-foreground\">\r\n+                          {maintenanceA.summary}\r\n+                        </p>\r\n+                        {maintenanceA.commonRepairs?.length > 0 && (\r\n+                          <>\r\n+                            <p className=\"mt-2 font-semibold\">\r\n+                              Common Repairs:\r\n+                            </p>\r\n+                            <ul className=\"list-disc list-inside text-muted-foreground\">\r\n+                              {maintenanceA.commonRepairs.map((r, i) => (\r\n+                                <li key={i}>{r}</li>\r\n+                              ))}\r\n+                            </ul>\r\n+                          </>\r\n+                        )}\r\n+                        <p className=\"mt-2 text-muted-foreground\">\r\n+                          <span className=\"font-semibold\">Tips:</span>{\" \"}\r\n+                          {maintenanceA.tips}\r\n+                        </p>\r\n+                      </div>\r\n+                    )}\r\n+\r\n+                    {primaryB && maintenanceB && (\r\n+                      <div className=\"border rounded-lg p-3\">\r\n+                        <p className=\"font-semibold mb-1\">{primaryB.title}</p>\r\n+                        <p>\r\n+                          <span className=\"font-semibold\">Yearly Range:</span>{\" \"}\r\n+                          ${maintenanceB.yearlyLow.toLocaleString()} - $\r\n+                          {maintenanceB.yearlyHigh.toLocaleString()}\r\n+                        </p>\r\n+                        <p>\r\n+                          <span className=\"font-semibold\">\r\n+                            Recommended Budget:\r\n+                          </span>{\" \"}\r\n+                          $\r\n+                          {maintenanceB.recommendedYearlyBudget.toLocaleString()}\r\n+                          /year\r\n+                        </p>\r\n+                        <p>\r\n+                          <span className=\"font-semibold\">Risk Level:</span>{\" \"}\r\n+                          {maintenanceB.riskLevel.toUpperCase()}\r\n+                        </p>\r\n+                        <p className=\"mt-1 text-muted-foreground\">\r\n+                          {maintenanceB.summary}\r\n+                        </p>\r\n+                        {maintenanceB.commonRepairs?.length > 0 && (\r\n+                          <>\r\n+                            <p className=\"mt-2 font-semibold\">\r\n+                              Common Repairs:\r\n+                            </p>\r\n+                            <ul className=\"list-disc list-inside text-muted-foreground\">\r\n+                              {maintenanceB.commonRepairs.map((r, i) => (\r\n+                                <li key={i}>{r}</li>\r\n+                              ))}\r\n+                            </ul>\r\n+                          </>\r\n+                        )}\r\n+                        <p className=\"mt-2 text-muted-foreground\">\r\n+                          <span className=\"font-semibold\">Tips:</span>{\" \"}\r\n+                          {maintenanceB.tips}\r\n+                        </p>\r\n+                      </div>\r\n+                    )}\r\n+                  </div>\r\n+                </CardContent>\r\n+              </Card>\r\n+            )}\r\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n"
                },
                {
                    "date": 1764591450497,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,575 +1,575 @@\n-// src/pages/Compare.tsx\r\n-import { useNavigate } from \"react-router-dom\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { ArrowLeft, X } from \"lucide-react\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-import { useEffect, useState } from \"react\";\r\n-import { useAuthStore } from \"@/stores/authStore\";\r\n-import { saveComparison } from \"@/services/carService\";\r\n-import {\r\n-  compareCarsAI,\r\n-  type CarCompareResult,\r\n-} from \"@/services/aiCompareService\";\r\n-import {\r\n-  estimateMaintenanceCost,\r\n-  type MaintenanceEstimate,\r\n-} from \"@/services/aiMaintenanceService\";\r\n+  // src/pages/Compare.tsx\r\n+  import { useNavigate } from \"react-router-dom\";\r\n+  import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+  import { Button } from \"@/components/ui/button\";\r\n+  import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+  import { Badge } from \"@/components/ui/badge\";\r\n+  import { ArrowLeft, X } from \"lucide-react\";\r\n+  import { Separator } from \"@/components/ui/separator\";\r\n+  import { useEffect, useState } from \"react\";\r\n+  import { useAuthStore } from \"@/stores/authStore\";\r\n+  import { saveComparison } from \"@/services/carService\";\r\n+  import {\r\n+    compareCarsAI,\r\n+    type CarCompareResult,\r\n+  } from \"@/services/aiCompareService\";\r\n+  import {\r\n+    estimateMaintenanceCost,\r\n+    type MaintenanceEstimate,\r\n+  } from \"@/services/aiMaintenanceService\";\r\n \r\n-interface Platform {\r\n-  name: string;\r\n-}\r\n+  interface Platform {\r\n+    name: string;\r\n+  }\r\n \r\n-interface Car {\r\n-  id: string;\r\n-  title: string;\r\n-  images: string[];\r\n-  price: number;\r\n-  year: number;\r\n-  mileage: number;\r\n-  condition: string;\r\n-  fuelType?: string;\r\n-  transmission?: string;\r\n-  location?: string;\r\n-  platform: Platform[];\r\n-}\r\n+  interface Car {\r\n+    id: string;\r\n+    title: string;\r\n+    images: string[];\r\n+    price: number;\r\n+    year: number;\r\n+    mileage: number;\r\n+    condition: string;\r\n+    fuelType?: string;\r\n+    transmission?: string;\r\n+    location?: string;\r\n+    platform: Platform[];\r\n+  }\r\n \r\n-const Compare = () => {\r\n-  const navigate = useNavigate();\r\n-  const { comparisonList, removeFromComparison, clearComparison } =\r\n-    useComparison();\r\n-  const token = useAuthStore((state) => state.token);\r\n-  const [hasSaved, setHasSaved] = useState(false);\r\n+  const Compare = () => {\r\n+    const navigate = useNavigate();\r\n+    const { comparisonList, removeFromComparison, clearComparison } =\r\n+      useComparison();\r\n+    const token = useAuthStore((state) => state.token);\r\n+    const [hasSaved, setHasSaved] = useState(false);\r\n \r\n-  // AI Compare state\r\n-  const [aiLoading, setAiLoading] = useState(false);\r\n-  const [aiResult, setAiResult] = useState<CarCompareResult | null>(null);\r\n+    // AI Compare state\r\n+    const [aiLoading, setAiLoading] = useState(false);\r\n+    const [aiResult, setAiResult] = useState<CarCompareResult | null>(null);\r\n \r\n-  // AI Maintenance state\r\n-  const [maintLoading, setMaintLoading] = useState(false);\r\n-  const [maintenanceA, setMaintenanceA] = useState<MaintenanceEstimate | null>(\r\n-    null\r\n-  );\r\n-  const [maintenanceB, setMaintenanceB] = useState<MaintenanceEstimate | null>(\r\n-    null\r\n-  );\r\n+    // AI Maintenance state\r\n+    const [maintLoading, setMaintLoading] = useState(false);\r\n+    const [maintenanceA, setMaintenanceA] = useState<MaintenanceEstimate | null>(\r\n+      null\r\n+    );\r\n+    const [maintenanceB, setMaintenanceB] = useState<MaintenanceEstimate | null>(\r\n+      null\r\n+    );\r\n \r\n-  // Save comparison once\r\n-  useEffect(() => {\r\n-    const doSave = async () => {\r\n-      if (!token) return;\r\n-      if (comparisonList.length < 2) return;\r\n-      if (hasSaved) return;\r\n+    // Save comparison once\r\n+    useEffect(() => {\r\n+      const doSave = async () => {\r\n+        if (!token) return;\r\n+        if (comparisonList.length < 2) return;\r\n+        if (hasSaved) return;\r\n \r\n-      const [carA, carB] = comparisonList;\r\n+        const [carA, carB] = comparisonList;\r\n \r\n-      try {\r\n-        await saveComparison(carA.id, carB.id, token);\r\n-        setHasSaved(true);\r\n-      } catch (err) {\r\n-        console.error(\"Failed to save comparison:\", err);\r\n-      }\r\n-    };\r\n+        try {\r\n+          await saveComparison(carA.id, carB.id, token);\r\n+          setHasSaved(true);\r\n+        } catch (err) {\r\n+          console.error(\"Failed to save comparison:\", err);\r\n+        }\r\n+      };\r\n \r\n-    void doSave();\r\n-  }, [comparisonList, token, hasSaved]);\r\n+      void doSave();\r\n+    }, [comparisonList, token, hasSaved]);\r\n \r\n-  if (comparisonList.length === 0) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n-        <p className=\"mb-6 text-muted-foreground\">\r\n-          Add cars to your comparison list to see them side by side.\r\n-        </p>\r\n-        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n-          Browse Cars\r\n-        </Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n+    if (comparisonList.length === 0) {\r\n+      return (\r\n+        <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+          <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n+          <p className=\"mb-6 text-muted-foreground\">\r\n+            Add cars to your comparison list to see them side by side.\r\n+          </p>\r\n+          <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n+            Browse Cars\r\n+          </Button>\r\n+        </div>\r\n+      );\r\n+    }\r\n \r\n-  // Helper: build inputs from title \"Brand Model\"\r\n-  const buildCompareInput = (car: Car) => {\r\n-    const parts = car.title.split(\" \");\r\n-    const brand = parts[0] ?? \"\";\r\n-    const model = parts.slice(1).join(\" \") || brand;\r\n+    // Helper: build inputs from title \"Brand Model\"\r\n+    const buildCompareInput = (car: Car) => {\r\n+      const parts = car.title.split(\" \");\r\n+      const brand = parts[0] ?? \"\";\r\n+      const model = parts.slice(1).join(\" \") || brand;\r\n \r\n-    return {\r\n-      brand,\r\n-      model,\r\n-      year: car.year,\r\n-      mileage: car.mileage,\r\n-      price: car.price,\r\n-      condition: car.condition,\r\n+      return {\r\n+        brand,\r\n+        model,\r\n+        year: car.year,\r\n+        mileage: car.mileage,\r\n+        price: car.price,\r\n+        condition: car.condition,\r\n+      };\r\n     };\r\n-  };\r\n \r\n-  const buildMaintenanceInput = (car: Car) => {\r\n-    const parts = car.title.split(\" \");\r\n-    const brand = parts[0] ?? \"\";\r\n-    const model = parts.slice(1).join(\" \") || brand;\r\n+    const buildMaintenanceInput = (car: Car) => {\r\n+      const parts = car.title.split(\" \");\r\n+      const brand = parts[0] ?? \"\";\r\n+      const model = parts.slice(1).join(\" \") || brand;\r\n \r\n-    return {\r\n-      brand,\r\n-      model,\r\n-      year: car.year,\r\n-      mileage: car.mileage,\r\n-      price: car.price,\r\n-      condition: car.condition,\r\n-      fuelType: car.fuelType,\r\n-      transmission: car.transmission,\r\n+      return {\r\n+        brand,\r\n+        model,\r\n+        year: car.year,\r\n+        mileage: car.mileage,\r\n+        price: car.price,\r\n+        condition: car.condition,\r\n+        fuelType: car.fuelType,\r\n+        transmission: car.transmission,\r\n+      };\r\n     };\r\n-  };\r\n \r\n-  const handleAICompare = async () => {\r\n-    if (comparisonList.length < 2) {\r\n-      alert(\"Add at least two cars to use AI comparison.\");\r\n-      return;\r\n-    }\r\n+    const handleAICompare = async () => {\r\n+      if (comparisonList.length < 2) {\r\n+        alert(\"Add at least two cars to use AI comparison.\");\r\n+        return;\r\n+      }\r\n \r\n-    const [carA, carB] = comparisonList;\r\n+      const [carA, carB] = comparisonList;\r\n \r\n-    const carAInput = buildCompareInput(carA);\r\n-    const carBInput = buildCompareInput(carB);\r\n+      const carAInput = buildCompareInput(carA);\r\n+      const carBInput = buildCompareInput(carB);\r\n \r\n-    try {\r\n-      setAiLoading(true);\r\n-      setAiResult(null);\r\n+      try {\r\n+        setAiLoading(true);\r\n+        setAiResult(null);\r\n \r\n-      const result = await compareCarsAI(carAInput, carBInput);\r\n-      setAiResult(result);\r\n-    } catch (error) {\r\n-      console.error(\"AI Compare Error:\", error);\r\n-      alert(\"AI comparison failed. Please try again.\");\r\n-    } finally {\r\n-      setAiLoading(false);\r\n-    }\r\n-  };\r\n+        const result = await compareCarsAI(carAInput, carBInput);\r\n+        setAiResult(result);\r\n+      } catch (error) {\r\n+        console.error(\"AI Compare Error:\", error);\r\n+        alert(\"AI comparison failed. Please try again.\");\r\n+      } finally {\r\n+        setAiLoading(false);\r\n+      }\r\n+    };\r\n \r\n-  const handleAIMaintenance = async () => {\r\n-    if (comparisonList.length < 1) {\r\n-      alert(\"Add at least one car to estimate maintenance.\");\r\n-      return;\r\n-    }\r\n+    const handleAIMaintenance = async () => {\r\n+      if (comparisonList.length < 1) {\r\n+        alert(\"Add at least one car to estimate maintenance.\");\r\n+        return;\r\n+      }\r\n \r\n-    const primaryA = comparisonList[0];\r\n-    const primaryB = comparisonList[1];\r\n+      const primaryA = comparisonList[0];\r\n+      const primaryB = comparisonList[1];\r\n \r\n-    try {\r\n-      setMaintLoading(true);\r\n-      setMaintenanceA(null);\r\n-      setMaintenanceB(null);\r\n+      try {\r\n+        setMaintLoading(true);\r\n+        setMaintenanceA(null);\r\n+        setMaintenanceB(null);\r\n \r\n-      // Car A\r\n-      const inputA = buildMaintenanceInput(primaryA);\r\n-      const resA = await estimateMaintenanceCost(inputA);\r\n-      setMaintenanceA(resA);\r\n+        // Car A\r\n+        const inputA = buildMaintenanceInput(primaryA);\r\n+        const resA = await estimateMaintenanceCost(inputA);\r\n+        setMaintenanceA(resA);\r\n \r\n-      // Car B (if present)\r\n-      if (primaryB) {\r\n-        const inputB = buildMaintenanceInput(primaryB);\r\n-        const resB = await estimateMaintenanceCost(inputB);\r\n-        setMaintenanceB(resB);\r\n+        // Car B (if present)\r\n+        if (primaryB) {\r\n+          const inputB = buildMaintenanceInput(primaryB);\r\n+          const resB = await estimateMaintenanceCost(inputB);\r\n+          setMaintenanceB(resB);\r\n+        }\r\n+      } catch (error) {\r\n+        console.error(\"AI Maintenance Error:\", error);\r\n+        alert(\"AI maintenance estimation failed. Please try again.\");\r\n+      } finally {\r\n+        setMaintLoading(false);\r\n       }\r\n-    } catch (error) {\r\n-      console.error(\"AI Maintenance Error:\", error);\r\n-      alert(\"AI maintenance estimation failed. Please try again.\");\r\n-    } finally {\r\n-      setMaintLoading(false);\r\n-    }\r\n-  };\r\n+    };\r\n \r\n-  const specs: Array<{\r\n-    label: string;\r\n-    key: keyof Car;\r\n-    format?: (val: number | string | undefined) => string;\r\n-  }> = [\r\n-    {\r\n-      label: \"Price\",\r\n-      key: \"price\",\r\n-      format: (val: number) => `$${val.toLocaleString()}`,\r\n-    },\r\n-    { label: \"Year\", key: \"year\" },\r\n-    {\r\n-      label: \"Mileage\",\r\n-      key: \"mileage\",\r\n-      format: (val: number) => `${val.toLocaleString()} mi`,\r\n-    },\r\n-    {\r\n-      label: \"Condition\",\r\n-      key: \"condition\",\r\n-      format: (val: string) =>\r\n-        val.charAt(0).toUpperCase() + val.slice(1),\r\n-    },\r\n-    {\r\n-      label: \"Fuel Type\",\r\n-      key: \"fuelType\",\r\n-      format: (val: string) =>\r\n-        val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\",\r\n-    },\r\n-    {\r\n-      label: \"Transmission\",\r\n-      key: \"transmission\",\r\n-      format: (val: string) =>\r\n-        val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\",\r\n-    },\r\n-    { label: \"Location\", key: \"location\" },\r\n-  ];\r\n+    const specs: Array<{\r\n+      label: string;\r\n+      key: keyof Car;\r\n+      format?: (val: number | string | undefined) => string;\r\n+    }> = [\r\n+      {\r\n+        label: \"Price\",\r\n+        key: \"price\",\r\n+        format: (val: number) => `$${val.toLocaleString()}`,\r\n+      },\r\n+      { label: \"Year\", key: \"year\" },\r\n+      {\r\n+        label: \"Mileage\",\r\n+        key: \"mileage\",\r\n+        format: (val: number) => `${val.toLocaleString()} mi`,\r\n+      },\r\n+      {\r\n+        label: \"Condition\",\r\n+        key: \"condition\",\r\n+        format: (val: string) =>\r\n+          val.charAt(0).toUpperCase() + val.slice(1),\r\n+      },\r\n+      {\r\n+        label: \"Fuel Type\",\r\n+        key: \"fuelType\",\r\n+        format: (val: string) =>\r\n+          val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\",\r\n+      },\r\n+      {\r\n+        label: \"Transmission\",\r\n+        key: \"transmission\",\r\n+        format: (val: string) =>\r\n+          val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\",\r\n+      },\r\n+      { label: \"Location\", key: \"location\" },\r\n+    ];\r\n \r\n-  const primaryA = comparisonList[0];\r\n-  const primaryB = comparisonList[1];\r\n+    const primaryA = comparisonList[0];\r\n+    const primaryB = comparisonList[1];\r\n \r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <div className=\"mb-6 flex flex-wrap items-center justify-between gap-3\">\r\n-          <Button\r\n-            variant=\"ghost\"\r\n-            onClick={() => navigate(\"/\")}\r\n-            className=\"gap-2\"\r\n-          >\r\n-            <ArrowLeft className=\"h-4 w-4\" />\r\n-            Back to Listings\r\n-          </Button>\r\n-          <div className=\"flex flex-wrap gap-2\">\r\n-            {/* AI Compare Button */}\r\n+    return (\r\n+      <div className=\"min-h-screen bg-background\">\r\n+        <div className=\"container mx-auto px-4 py-8\">\r\n+          <div className=\"mb-6 flex flex-wrap items-center justify-between gap-3\">\r\n             <Button\r\n-              variant=\"default\"\r\n-              onClick={handleAICompare}\r\n-              disabled={comparisonList.length < 2 || aiLoading}\r\n+              variant=\"ghost\"\r\n+              onClick={() => navigate(\"/\")}\r\n               className=\"gap-2\"\r\n             >\r\n-              {aiLoading ? \"Analyzing...\" : \"AI Compare First 2 Cars\"}\r\n+              <ArrowLeft className=\"h-4 w-4\" />\r\n+              Back to Listings\r\n             </Button>\r\n+            <div className=\"flex flex-wrap gap-2\">\r\n+              {/* AI Compare Button */}\r\n+              <Button\r\n+                variant=\"default\"\r\n+                onClick={handleAICompare}\r\n+                disabled={comparisonList.length < 2 || aiLoading}\r\n+                className=\"gap-2\"\r\n+              >\r\n+                {aiLoading ? \"Analyzing...\" : \"AI Compare First 2 Cars\"}\r\n+              </Button>\r\n \r\n-            {/* AI Maintenance Button */}\r\n-            <Button\r\n-              variant=\"outline\"\r\n-              onClick={handleAIMaintenance}\r\n-              disabled={maintLoading || comparisonList.length < 1}\r\n-              className=\"gap-2\"\r\n-            >\r\n-              {maintLoading\r\n-                ? \"Estimating Maintenance...\"\r\n-                : \"AI Maintenance Cost (First 2 Cars)\"}\r\n-            </Button>\r\n+              {/* AI Maintenance Button */}\r\n+              <Button\r\n+                variant=\"outline\"\r\n+                onClick={handleAIMaintenance}\r\n+                disabled={maintLoading || comparisonList.length < 1}\r\n+                className=\"gap-2\"\r\n+              >\r\n+                {maintLoading\r\n+                  ? \"Estimating Maintenance...\"\r\n+                  : \"AI Maintenance Cost (First 2 Cars)\"}\r\n+              </Button>\r\n \r\n-            <Button\r\n-              variant=\"outline\"\r\n-              onClick={clearComparison}\r\n-              className=\"gap-2\"\r\n-            >\r\n-              <X className=\"h-4 w-4\" />\r\n-              Clear All\r\n-            </Button>\r\n+              <Button\r\n+                variant=\"outline\"\r\n+                onClick={clearComparison}\r\n+                className=\"gap-2\"\r\n+              >\r\n+                <X className=\"h-4 w-4\" />\r\n+                Clear All\r\n+              </Button>\r\n+            </div>\r\n           </div>\r\n-        </div>\r\n \r\n-        <div className=\"mb-8\">\r\n-          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n-          <p className=\"mt-2 text-muted-foreground\">\r\n-            Compare up to {comparisonList.length} of 3 cars side by side.\r\n-          </p>\r\n-          {comparisonList.length >= 2 && (\r\n-            <p className=\"mt-1 text-xs text-muted-foreground\">\r\n-              AI features analyze only the first two cars in the list.\r\n+          <div className=\"mb-8\">\r\n+            <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n+            <p className=\"mt-2 text-muted-foreground\">\r\n+              Compare up to {comparisonList.length} of 3 cars side by side.\r\n             </p>\r\n-          )}\r\n-        </div>\r\n+            {comparisonList.length >= 2 && (\r\n+              <p className=\"mt-1 text-xs text-muted-foreground\">\r\n+                AI features analyze only the first two cars in the list.\r\n+              </p>\r\n+            )}\r\n+          </div>\r\n \r\n-        <div className=\"overflow-x-auto\">\r\n-          <div className=\"min-w-[800px]\">\r\n-            {/* Car Images & Titles */}\r\n-            <div\r\n-              className=\"mb-6 grid gap-4\"\r\n-              style={{\r\n-                gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)`,\r\n-              }}\r\n-            >\r\n-              {comparisonList.map((car) => (\r\n-                <Card key={car.id} className=\"overflow-hidden\">\r\n-                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n-                    <img\r\n-                      src={car.images[0]}\r\n-                      alt={car.title}\r\n-                      className=\"h-full w-full object-cover\"\r\n-                    />\r\n-                    <Button\r\n-                      variant=\"secondary\"\r\n-                      size=\"icon\"\r\n-                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n-                      onClick={() => removeFromComparison(car.id)}\r\n-                    >\r\n-                      <X className=\"h-4 w-4\" />\r\n-                    </Button>\r\n-                  </div>\r\n-                  <CardHeader>\r\n-                    <CardTitle className=\"truncate text-base\">\r\n-                      {car.title}\r\n-                    </CardTitle>\r\n-                  </CardHeader>\r\n-                </Card>\r\n-              ))}\r\n-            </div>\r\n-\r\n-            {/* Comparison Table */}\r\n-            <Card>\r\n-              <CardContent className=\"p-0\">\r\n-                {specs.map((spec, index) => (\r\n-                  <div key={spec.key}>\r\n-                    {index > 0 && <Separator />}\r\n-                    <div\r\n-                      className=\"grid\"\r\n-                      style={{\r\n-                        gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-                      }}\r\n-                    >\r\n-                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                        {spec.label}\r\n-                      </div>\r\n-                      {comparisonList.map((car) => {\r\n-                        const value = car[spec.key];\r\n-                        let displayValue: string | number | undefined;\r\n-\r\n-                        if (\r\n-                          spec.format &&\r\n-                          (typeof value === \"string\" ||\r\n-                            typeof value === \"number\")\r\n-                        ) {\r\n-                          displayValue = spec.format(value);\r\n-                        } else if (\r\n-                          typeof value === \"string\" ||\r\n-                          typeof value === \"number\"\r\n-                        ) {\r\n-                          displayValue = value;\r\n-                        } else {\r\n-                          displayValue = \"N/A\";\r\n-                        }\r\n-\r\n-                        return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n-                            {displayValue || \"N/A\"}\r\n-                          </div>\r\n-                        );\r\n-                      })}\r\n+          <div className=\"overflow-x-auto\">\r\n+            <div className=\"min-w-[800px]\">\r\n+              {/* Car Images & Titles */}\r\n+              <div\r\n+                className=\"mb-6 grid gap-4\"\r\n+                style={{\r\n+                  gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)`,\r\n+                }}\r\n+              >\r\n+                {comparisonList.map((car) => (\r\n+                  <Card key={car.id} className=\"overflow-hidden\">\r\n+                    <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n+                      <img\r\n+                        src={car.images[0]}\r\n+                        alt={car.title}\r\n+                        className=\"h-full w-full object-cover\"\r\n+                      />\r\n+                      <Button\r\n+                        variant=\"secondary\"\r\n+                        size=\"icon\"\r\n+                        className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n+                        onClick={() => removeFromComparison(car.id)}\r\n+                      >\r\n+                        <X className=\"h-4 w-4\" />\r\n+                      </Button>\r\n                     </div>\r\n-                  </div>\r\n+                    <CardHeader>\r\n+                      <CardTitle className=\"truncate text-base\">\r\n+                        {car.title}\r\n+                      </CardTitle>\r\n+                    </CardHeader>\r\n+                  </Card>\r\n                 ))}\r\n+              </div>\r\n \r\n-                <Separator />\r\n+              {/* Comparison Table */}\r\n+              <Card>\r\n+                <CardContent className=\"p-0\">\r\n+                  {specs.map((spec, index) => (\r\n+                    <div key={spec.key}>\r\n+                      {index > 0 && <Separator />}\r\n+                      <div\r\n+                        className=\"grid\"\r\n+                        style={{\r\n+                          gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                        }}\r\n+                      >\r\n+                        <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                          {spec.label}\r\n+                        </div>\r\n+                        {comparisonList.map((car) => {\r\n+                          const value = car[spec.key];\r\n+                          let displayValue: string | number | undefined;\r\n \r\n-                {/* Platforms */}\r\n-                <div\r\n-                  className=\"grid\"\r\n-                  style={{\r\n-                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-                  }}\r\n-                >\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Listed On\r\n-                  </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <div className=\"flex flex-wrap gap-1\">\r\n-                        {car.platform.map((platform, idx) => (\r\n-                          <Badge\r\n-                            key={idx}\r\n-                            variant=\"secondary\"\r\n-                            className=\"text-xs\"\r\n-                          >\r\n-                            {platform.name}\r\n-                          </Badge>\r\n-                        ))}\r\n+                          if (\r\n+                            spec.format &&\r\n+                            (typeof value === \"string\" ||\r\n+                              typeof value === \"number\")\r\n+                          ) {\r\n+                            displayValue = spec.format(value);\r\n+                          } else if (\r\n+                            typeof value === \"string\" ||\r\n+                            typeof value === \"number\"\r\n+                          ) {\r\n+                            displayValue = value;\r\n+                          } else {\r\n+                            displayValue = \"N/A\";\r\n+                          }\r\n+\r\n+                          return (\r\n+                            <div key={car.id} className=\"p-4 text-sm\">\r\n+                              {displayValue || \"N/A\"}\r\n+                            </div>\r\n+                          );\r\n+                        })}\r\n                       </div>\r\n                     </div>\r\n                   ))}\r\n-                </div>\r\n \r\n-                <Separator />\r\n+                  <Separator />\r\n \r\n-                {/* View Details */}\r\n-                <div\r\n-                  className=\"grid\"\r\n-                  style={{\r\n-                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-                  }}\r\n-                >\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Actions\r\n+                  {/* Platforms */}\r\n+                  <div\r\n+                    className=\"grid\"\r\n+                    style={{\r\n+                      gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                    }}\r\n+                  >\r\n+                    <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                      Listed On\r\n+                    </div>\r\n+                    {comparisonList.map((car) => (\r\n+                      <div key={car.id} className=\"p-4\">\r\n+                        <div className=\"flex flex-wrap gap-1\">\r\n+                          {car.platform.map((platform, idx) => (\r\n+                            <Badge\r\n+                              key={idx}\r\n+                              variant=\"secondary\"\r\n+                              className=\"text-xs\"\r\n+                            >\r\n+                              {platform.name}\r\n+                            </Badge>\r\n+                          ))}\r\n+                        </div>\r\n+                      </div>\r\n+                    ))}\r\n                   </div>\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <Button\r\n-                        variant=\"default\"\r\n-                        className=\"w-full\"\r\n-                        onClick={() => navigate(`/car/${car.id}`)}\r\n-                      >\r\n-                        View Details\r\n-                      </Button>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n \r\n-            {/* AI Comparison Result */}\r\n-            {aiResult && primaryA && primaryB && (\r\n-              <Card className=\"mt-6 shadow-card\">\r\n-                <CardHeader>\r\n-                  <CardTitle>AI Comparison Result</CardTitle>\r\n-                </CardHeader>\r\n-                <CardContent className=\"space-y-3 text-sm\">\r\n-                  <p>\r\n-                    <span className=\"font-semibold\">Better Car: </span>\r\n-                    {aiResult.betterCar === \"A\"\r\n-                      ? primaryA.title\r\n-                      : primaryB.title}\r\n-                  </p>\r\n-                  <p>\r\n-                    <span className=\"font-semibold\">Reason: </span>\r\n-                    {aiResult.reason}\r\n-                  </p>\r\n+                  <Separator />\r\n \r\n-                  <Separator className=\"my-2\" />\r\n-\r\n-                  <div className=\"grid gap-2 md:grid-cols-2\">\r\n-                    <div>\r\n-                      <p className=\"font-semibold\">Performance</p>\r\n-                      <p className=\"text-muted-foreground\">\r\n-                        {aiResult.detailedComparison.performance}\r\n-                      </p>\r\n+                  {/* View Details */}\r\n+                  <div\r\n+                    className=\"grid\"\r\n+                    style={{\r\n+                      gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                    }}\r\n+                  >\r\n+                    <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                      Actions\r\n                     </div>\r\n-                    <div>\r\n-                      <p className=\"font-semibold\">Reliability</p>\r\n-                      <p className=\"text-muted-foreground\">\r\n-                        {aiResult.detailedComparison.reliability}\r\n-                      </p>\r\n-                    </div>\r\n-                    <div>\r\n-                      <p className=\"font-semibold\">Fuel Economy</p>\r\n-                      <p className=\"text-muted-foreground\">\r\n-                        {aiResult.detailedComparison.fuelEconomy}\r\n-                      </p>\r\n-                    </div>\r\n-                    <div>\r\n-                      <p className=\"font-semibold\">Comfort</p>\r\n-                      <p className=\"text-muted-foreground\">\r\n-                        {aiResult.detailedComparison.comfort}\r\n-                      </p>\r\n-                    </div>\r\n-                    <div className=\"md:col-span-2\">\r\n-                      <p className=\"font-semibold\">Value for Money</p>\r\n-                      <p className=\"text-muted-foreground\">\r\n-                        {aiResult.detailedComparison.valueForMoney}\r\n-                      </p>\r\n-                    </div>\r\n+                    {comparisonList.map((car) => (\r\n+                      <div key={car.id} className=\"p-4\">\r\n+                        <Button\r\n+                          variant=\"default\"\r\n+                          className=\"w-full\"\r\n+                          onClick={() => navigate(`/car/${car.id}`)}\r\n+                        >\r\n+                          View Details\r\n+                        </Button>\r\n+                      </div>\r\n+                    ))}\r\n                   </div>\r\n                 </CardContent>\r\n               </Card>\r\n-            )}\r\n \r\n-            {/* AI Maintenance Result */}\r\n-            {(maintenanceA || maintenanceB) && (\r\n-              <Card className=\"mt-6 shadow-card\">\r\n-                <CardHeader>\r\n-                  <CardTitle>AI Maintenance Cost Estimate</CardTitle>\r\n-                </CardHeader>\r\n-                <CardContent className=\"space-y-4 text-sm\">\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    {primaryA && maintenanceA && (\r\n-                      <div className=\"border rounded-lg p-3\">\r\n-                        <p className=\"font-semibold mb-1\">{primaryA.title}</p>\r\n-                        <p>\r\n-                          <span className=\"font-semibold\">Yearly Range:</span>{\" \"}\r\n-                          ${maintenanceA.yearlyLow.toLocaleString()} - $\r\n-                          {maintenanceA.yearlyHigh.toLocaleString()}\r\n+              {/* AI Comparison Result */}\r\n+              {aiResult && primaryA && primaryB && (\r\n+                <Card className=\"mt-6 shadow-card\">\r\n+                  <CardHeader>\r\n+                    <CardTitle>AI Comparison Result</CardTitle>\r\n+                  </CardHeader>\r\n+                  <CardContent className=\"space-y-3 text-sm\">\r\n+                    <p>\r\n+                      <span className=\"font-semibold\">Better Car: </span>\r\n+                      {aiResult.betterCar === \"A\"\r\n+                        ? primaryA.title\r\n+                        : primaryB.title}\r\n+                    </p>\r\n+                    <p>\r\n+                      <span className=\"font-semibold\">Reason: </span>\r\n+                      {aiResult.reason}\r\n+                    </p>\r\n+\r\n+                    <Separator className=\"my-2\" />\r\n+\r\n+                    <div className=\"grid gap-2 md:grid-cols-2\">\r\n+                      <div>\r\n+                        <p className=\"font-semibold\">Performance</p>\r\n+                        <p className=\"text-muted-foreground\">\r\n+                          {aiResult.detailedComparison.performance}\r\n                         </p>\r\n-                        <p>\r\n-                          <span className=\"font-semibold\">\r\n-                            Recommended Budget:\r\n-                          </span>{\" \"}\r\n-                          $\r\n-                          {maintenanceA.recommendedYearlyBudget.toLocaleString()}\r\n-                          /year\r\n+                      </div>\r\n+                      <div>\r\n+                        <p className=\"font-semibold\">Reliability</p>\r\n+                        <p className=\"text-muted-foreground\">\r\n+                          {aiResult.detailedComparison.reliability}\r\n                         </p>\r\n-                        <p>\r\n-                          <span className=\"font-semibold\">Risk Level:</span>{\" \"}\r\n-                          {maintenanceA.riskLevel.toUpperCase()}\r\n+                      </div>\r\n+                      <div>\r\n+                        <p className=\"font-semibold\">Fuel Economy</p>\r\n+                        <p className=\"text-muted-foreground\">\r\n+                          {aiResult.detailedComparison.fuelEconomy}\r\n                         </p>\r\n-                        <p className=\"mt-1 text-muted-foreground\">\r\n-                          {maintenanceA.summary}\r\n+                      </div>\r\n+                      <div>\r\n+                        <p className=\"font-semibold\">Comfort</p>\r\n+                        <p className=\"text-muted-foreground\">\r\n+                          {aiResult.detailedComparison.comfort}\r\n                         </p>\r\n-                        {maintenanceA.commonRepairs?.length > 0 && (\r\n-                          <>\r\n-                            <p className=\"mt-2 font-semibold\">\r\n-                              Common Repairs:\r\n-                            </p>\r\n-                            <ul className=\"list-disc list-inside text-muted-foreground\">\r\n-                              {maintenanceA.commonRepairs.map((r, i) => (\r\n-                                <li key={i}>{r}</li>\r\n-                              ))}\r\n-                            </ul>\r\n-                          </>\r\n-                        )}\r\n-                        <p className=\"mt-2 text-muted-foreground\">\r\n-                          <span className=\"font-semibold\">Tips:</span>{\" \"}\r\n-                          {maintenanceA.tips}\r\n+                      </div>\r\n+                      <div className=\"md:col-span-2\">\r\n+                        <p className=\"font-semibold\">Value for Money</p>\r\n+                        <p className=\"text-muted-foreground\">\r\n+                          {aiResult.detailedComparison.valueForMoney}\r\n                         </p>\r\n                       </div>\r\n-                    )}\r\n+                    </div>\r\n+                  </CardContent>\r\n+                </Card>\r\n+              )}\r\n \r\n-                    {primaryB && maintenanceB && (\r\n-                      <div className=\"border rounded-lg p-3\">\r\n-                        <p className=\"font-semibold mb-1\">{primaryB.title}</p>\r\n-                        <p>\r\n-                          <span className=\"font-semibold\">Yearly Range:</span>{\" \"}\r\n-                          ${maintenanceB.yearlyLow.toLocaleString()} - $\r\n-                          {maintenanceB.yearlyHigh.toLocaleString()}\r\n-                        </p>\r\n-                        <p>\r\n-                          <span className=\"font-semibold\">\r\n-                            Recommended Budget:\r\n-                          </span>{\" \"}\r\n-                          $\r\n-                          {maintenanceB.recommendedYearlyBudget.toLocaleString()}\r\n-                          /year\r\n-                        </p>\r\n-                        <p>\r\n-                          <span className=\"font-semibold\">Risk Level:</span>{\" \"}\r\n-                          {maintenanceB.riskLevel.toUpperCase()}\r\n-                        </p>\r\n-                        <p className=\"mt-1 text-muted-foreground\">\r\n-                          {maintenanceB.summary}\r\n-                        </p>\r\n-                        {maintenanceB.commonRepairs?.length > 0 && (\r\n-                          <>\r\n-                            <p className=\"mt-2 font-semibold\">\r\n-                              Common Repairs:\r\n-                            </p>\r\n-                            <ul className=\"list-disc list-inside text-muted-foreground\">\r\n-                              {maintenanceB.commonRepairs.map((r, i) => (\r\n-                                <li key={i}>{r}</li>\r\n-                              ))}\r\n-                            </ul>\r\n-                          </>\r\n-                        )}\r\n-                        <p className=\"mt-2 text-muted-foreground\">\r\n-                          <span className=\"font-semibold\">Tips:</span>{\" \"}\r\n-                          {maintenanceB.tips}\r\n-                        </p>\r\n-                      </div>\r\n-                    )}\r\n-                  </div>\r\n-                </CardContent>\r\n-              </Card>\r\n-            )}\r\n+              {/* AI Maintenance Result */}\r\n+              {(maintenanceA || maintenanceB) && (\r\n+                <Card className=\"mt-6 shadow-card\">\r\n+                  <CardHeader>\r\n+                    <CardTitle>AI Maintenance Cost Estimate</CardTitle>\r\n+                  </CardHeader>\r\n+                  <CardContent className=\"space-y-4 text-sm\">\r\n+                    <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                      {primaryA && maintenanceA && (\r\n+                        <div className=\"border rounded-lg p-3\">\r\n+                          <p className=\"font-semibold mb-1\">{primaryA.title}</p>\r\n+                          <p>\r\n+                            <span className=\"font-semibold\">Yearly Range:</span>{\" \"}\r\n+                            ${maintenanceA.yearlyLow.toLocaleString()} - $\r\n+                            {maintenanceA.yearlyHigh.toLocaleString()}\r\n+                          </p>\r\n+                          <p>\r\n+                            <span className=\"font-semibold\">\r\n+                              Recommended Budget:\r\n+                            </span>{\" \"}\r\n+                            $\r\n+                            {maintenanceA.recommendedYearlyBudget.toLocaleString()}\r\n+                            /year\r\n+                          </p>\r\n+                          <p>\r\n+                            <span className=\"font-semibold\">Risk Level:</span>{\" \"}\r\n+                            {maintenanceA.riskLevel.toUpperCase()}\r\n+                          </p>\r\n+                          <p className=\"mt-1 text-muted-foreground\">\r\n+                            {maintenanceA.summary}\r\n+                          </p>\r\n+                          {maintenanceA.commonRepairs?.length > 0 && (\r\n+                            <>\r\n+                              <p className=\"mt-2 font-semibold\">\r\n+                                Common Repairs:\r\n+                              </p>\r\n+                              <ul className=\"list-disc list-inside text-muted-foreground\">\r\n+                                {maintenanceA.commonRepairs.map((r, i) => (\r\n+                                  <li key={i}>{r}</li>\r\n+                                ))}\r\n+                              </ul>\r\n+                            </>\r\n+                          )}\r\n+                          <p className=\"mt-2 text-muted-foreground\">\r\n+                            <span className=\"font-semibold\">Tips:</span>{\" \"}\r\n+                            {maintenanceA.tips}\r\n+                          </p>\r\n+                        </div>\r\n+                      )}\r\n+\r\n+                      {primaryB && maintenanceB && (\r\n+                        <div className=\"border rounded-lg p-3\">\r\n+                          <p className=\"font-semibold mb-1\">{primaryB.title}</p>\r\n+                          <p>\r\n+                            <span className=\"font-semibold\">Yearly Range:</span>{\" \"}\r\n+                            ${maintenanceB.yearlyLow.toLocaleString()} - $\r\n+                            {maintenanceB.yearlyHigh.toLocaleString()}\r\n+                          </p>\r\n+                          <p>\r\n+                            <span className=\"font-semibold\">\r\n+                              Recommended Budget:\r\n+                            </span>{\" \"}\r\n+                            $\r\n+                            {maintenanceB.recommendedYearlyBudget.toLocaleString()}\r\n+                            /year\r\n+                          </p>\r\n+                          <p>\r\n+                            <span className=\"font-semibold\">Risk Level:</span>{\" \"}\r\n+                            {maintenanceB.riskLevel.toUpperCase()}\r\n+                          </p>\r\n+                          <p className=\"mt-1 text-muted-foreground\">\r\n+                            {maintenanceB.summary}\r\n+                          </p>\r\n+                          {maintenanceB.commonRepairs?.length > 0 && (\r\n+                            <>\r\n+                              <p className=\"mt-2 font-semibold\">\r\n+                                Common Repairs:\r\n+                              </p>\r\n+                              <ul className=\"list-disc list-inside text-muted-foreground\">\r\n+                                {maintenanceB.commonRepairs.map((r, i) => (\r\n+                                  <li key={i}>{r}</li>\r\n+                                ))}\r\n+                              </ul>\r\n+                            </>\r\n+                          )}\r\n+                          <p className=\"mt-2 text-muted-foreground\">\r\n+                            <span className=\"font-semibold\">Tips:</span>{\" \"}\r\n+                            {maintenanceB.tips}\r\n+                          </p>\r\n+                        </div>\r\n+                      )}\r\n+                    </div>\r\n+                  </CardContent>\r\n+                </Card>\r\n+              )}\r\n+            </div>\r\n           </div>\r\n         </div>\r\n       </div>\r\n-    </div>\r\n-  );\r\n-};\r\n+    );\r\n+  };\r\n \r\n-export default Compare;\r\n+  export default Compare;\r\n"
                },
                {
                    "date": 1764591465943,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,504 @@\n+// src/pages/Compare.tsx\r\n+import { useNavigate } from \"react-router-dom\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { ArrowLeft, X } from \"lucide-react\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+import { useEffect, useState } from \"react\";\r\n+import { useAuthStore } from \"@/stores/authStore\";\r\n+import { saveComparison } from \"@/services/carService\";\r\n+import {\r\n+  compareCarsAI,\r\n+  type CarCompareResult,\r\n+} from \"@/services/aiCompareService\";\r\n+import {\r\n+  estimateMaintenanceCost,\r\n+  type MaintenanceEstimate,\r\n+} from \"@/services/aiMaintenanceService\";\r\n+\r\n+interface Platform {\r\n+  name: string;\r\n+}\r\n+\r\n+interface Car {\r\n+  id: string;\r\n+  title: string;\r\n+  images: string[];\r\n+  price: number;\r\n+  year: number;\r\n+  mileage: number;\r\n+  condition: string;\r\n+  fuelType?: string;\r\n+  transmission?: string;\r\n+  location?: string;\r\n+  platform: Platform[];\r\n+}\r\n+\r\n+const Compare = () => {\r\n+  const navigate = useNavigate();\r\n+  const { comparisonList, removeFromComparison, clearComparison } =\r\n+    useComparison();\r\n+  const token = useAuthStore((state) => state.token);\r\n+  const [hasSaved, setHasSaved] = useState(false);\r\n+\r\n+  // AI Compare state\r\n+  const [aiLoading, setAiLoading] = useState(false);\r\n+  const [aiResult, setAiResult] = useState<CarCompareResult | null>(null);\r\n+\r\n+  // AI Maintenance state\r\n+  const [maintLoading, setMaintLoading] = useState(false);\r\n+  const [maintenanceA, setMaintenanceA] = useState<MaintenanceEstimate | null>(\r\n+    null\r\n+  );\r\n+  const [maintenanceB, setMaintenanceB] = useState<MaintenanceEstimate | null>(\r\n+    null\r\n+  );\r\n+\r\n+  // Save comparison once\r\n+  useEffect(() => {\r\n+    const doSave = async () => {\r\n+      if (!token) return;\r\n+      if (comparisonList.length < 2) return;\r\n+      if (hasSaved) return;\r\n+\r\n+      const [carA, carB] = comparisonList;\r\n+\r\n+      try {\r\n+        await saveComparison(carA.id, carB.id, token);\r\n+        setHasSaved(true);\r\n+      } catch (err) {\r\n+        console.error(\"Failed to save comparison:\", err);\r\n+      }\r\n+    };\r\n+\r\n+    void doSave();\r\n+  }, [comparisonList, token, hasSaved]);\r\n+\r\n+  if (comparisonList.length === 0) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n+        <p className=\"mb-6 text-muted-foreground\">\r\n+          Add cars to your comparison list to see them side by side.\r\n+        </p>\r\n+        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n+          Browse Cars\r\n+        </Button>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  // Helper: build inputs\r\n+  const buildCompareInput = (car: Car) => {\r\n+    const parts = car.title.split(\" \");\r\n+    const brand = parts[0] ?? \"\";\r\n+    const model = parts.slice(1).join(\" \") || brand;\r\n+\r\n+    return {\r\n+      brand,\r\n+      model,\r\n+      year: car.year,\r\n+      mileage: car.mileage,\r\n+      price: car.price,\r\n+      condition: car.condition,\r\n+    };\r\n+  };\r\n+\r\n+  const buildMaintenanceInput = (car: Car) => {\r\n+    const parts = car.title.split(\" \");\r\n+    const brand = parts[0] ?? \"\";\r\n+    const model = parts.slice(1).join(\" \") || brand;\r\n+\r\n+    return {\r\n+      brand,\r\n+      model,\r\n+      year: car.year,\r\n+      mileage: car.mileage,\r\n+      price: car.price,\r\n+      condition: car.condition,\r\n+      fuelType: car.fuelType,\r\n+      transmission: car.transmission,\r\n+    };\r\n+  };\r\n+\r\n+  const handleAICompare = async () => {\r\n+    if (comparisonList.length < 2) {\r\n+      alert(\"Add at least two cars to use AI comparison.\");\r\n+      return;\r\n+    }\r\n+\r\n+    const [carA, carB] = comparisonList;\r\n+\r\n+    try {\r\n+      setAiLoading(true);\r\n+      setAiResult(null);\r\n+\r\n+      const inputA = buildCompareInput(carA);\r\n+      const inputB = buildCompareInput(carB);\r\n+\r\n+      const result = await compareCarsAI(inputA, inputB);\r\n+      setAiResult(result);\r\n+    } catch (err) {\r\n+      console.error(err);\r\n+      alert(\"AI comparison failed. Try again.\");\r\n+    } finally {\r\n+      setAiLoading(false);\r\n+    }\r\n+  };\r\n+\r\n+  const handleAIMaintenance = async () => {\r\n+    if (comparisonList.length < 1) {\r\n+      alert(\"Add at least one car to estimate maintenance.\");\r\n+      return;\r\n+    }\r\n+\r\n+    try {\r\n+      setMaintLoading(true);\r\n+      setMaintenanceA(null);\r\n+      setMaintenanceB(null);\r\n+\r\n+      const primaryA = comparisonList[0];\r\n+      const inputA = buildMaintenanceInput(primaryA);\r\n+      const resA = await estimateMaintenanceCost(inputA);\r\n+      setMaintenanceA(resA);\r\n+\r\n+      if (comparisonList[1]) {\r\n+        const primaryB = comparisonList[1];\r\n+        const inputB = buildMaintenanceInput(primaryB);\r\n+        const resB = await estimateMaintenanceCost(inputB);\r\n+        setMaintenanceB(resB);\r\n+      }\r\n+    } catch (err) {\r\n+      console.error(err);\r\n+      alert(\"AI maintenance estimation failed.\");\r\n+    } finally {\r\n+      setMaintLoading(false);\r\n+    }\r\n+  };\r\n+\r\n+  const specs = [\r\n+    { label: \"Price\", key: \"price\", format: (v: number) => `$${v?.toLocaleString?.()}` },\r\n+    { label: \"Year\", key: \"year\" },\r\n+    {\r\n+      label: \"Mileage\",\r\n+      key: \"mileage\",\r\n+      format: (v: number) => `${v?.toLocaleString?.()} mi`,\r\n+    },\r\n+    {\r\n+      label: \"Condition\",\r\n+      key: \"condition\",\r\n+      format: (v: string) => v ? v.charAt(0).toUpperCase() + v.slice(1) : \"N/A\",\r\n+    },\r\n+    {\r\n+      label: \"Fuel Type\",\r\n+      key: \"fuelType\",\r\n+      format: (v: string) => v ? v.charAt(0).toUpperCase() + v.slice(1) : \"N/A\",\r\n+    },\r\n+    {\r\n+      label: \"Transmission\",\r\n+      key: \"transmission\",\r\n+      format: (v: string) => v ? v.charAt(0).toUpperCase() + v.slice(1) : \"N/A\",\r\n+    },\r\n+    { label: \"Location\", key: \"location\" },\r\n+  ];\r\n+\r\n+  const primaryA = comparisonList[0];\r\n+  const primaryB = comparisonList[1];\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        {/* Header */}\r\n+        <div className=\"mb-6 flex flex-wrap items-center justify-between gap-3\">\r\n+          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n+            <ArrowLeft className=\"h-4 w-4\" />\r\n+            Back to Listings\r\n+          </Button>\r\n+\r\n+          <div className=\"flex flex-wrap gap-2\">\r\n+            <Button\r\n+              onClick={handleAICompare}\r\n+              disabled={comparisonList.length < 2 || aiLoading}\r\n+              className=\"gap-2\"\r\n+            >\r\n+              {aiLoading ? \"Analyzing...\" : \"AI Compare First 2 Cars\"}\r\n+            </Button>\r\n+\r\n+            <Button\r\n+              variant=\"outline\"\r\n+              onClick={handleAIMaintenance}\r\n+              disabled={maintLoading}\r\n+              className=\"gap-2\"\r\n+            >\r\n+              {maintLoading ? \"Estimating...\" : \"AI Maintenance Cost\"}\r\n+            </Button>\r\n+\r\n+            <Button variant=\"outline\" onClick={clearComparison}>\r\n+              <X className=\"h-4 w-4\" /> Clear All\r\n+            </Button>\r\n+          </div>\r\n+        </div>\r\n+\r\n+        {/* Titles */}\r\n+        <div className=\"mb-8\">\r\n+          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n+          <p className=\"mt-2 text-muted-foreground\">\r\n+            Compare up to {comparisonList.length} cars side by side.\r\n+          </p>\r\n+        </div>\r\n+\r\n+        {/* Table */}\r\n+        <div className=\"overflow-x-auto\">\r\n+          <div className=\"min-w-[800px]\">\r\n+            {/* CAR IMAGE HEADERS */}\r\n+            <div\r\n+              className=\"mb-6 grid gap-4\"\r\n+              style={{\r\n+                gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)`,\r\n+              }}\r\n+            >\r\n+              {comparisonList.map((car) => (\r\n+                <Card key={car.id}>\r\n+                  <div className=\"relative aspect-video bg-muted\">\r\n+                    <img\r\n+                      src={car.images[0]}\r\n+                      alt={car.title}\r\n+                      className=\"h-full w-full object-cover\"\r\n+                    />\r\n+                    <Button\r\n+                      variant=\"secondary\"\r\n+                      size=\"icon\"\r\n+                      className=\"absolute right-2 top-2 h-8 w-8\"\r\n+                      onClick={() => removeFromComparison(car.id)}\r\n+                    >\r\n+                      <X className=\"h-4 w-4\" />\r\n+                    </Button>\r\n+                  </div>\r\n+                  <CardHeader>\r\n+                    <CardTitle className=\"truncate text-base\">\r\n+                      {car.title}\r\n+                    </CardTitle>\r\n+                  </CardHeader>\r\n+                </Card>\r\n+              ))}\r\n+            </div>\r\n+\r\n+            {/* SPECS TABLE */}\r\n+            <Card>\r\n+              <CardContent className=\"p-0\">\r\n+                {specs.map((spec, index) => (\r\n+                  <div key={spec.key}>\r\n+                    {index > 0 && <Separator />}\r\n+                    <div\r\n+                      className=\"grid\"\r\n+                      style={{\r\n+                        gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                      }}\r\n+                    >\r\n+                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                        {spec.label}\r\n+                      </div>\r\n+\r\n+                      {comparisonList.map((car) => {\r\n+                        const value = car[spec.key];\r\n+                        const display =\r\n+                          spec.format && (typeof value === \"string\" || typeof value === \"number\")\r\n+                            ? spec.format(value)\r\n+                            : value || \"N/A\";\r\n+\r\n+                        return (\r\n+                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                            {display}\r\n+                          </div>\r\n+                        );\r\n+                      })}\r\n+                    </div>\r\n+                  </div>\r\n+                ))}\r\n+\r\n+                <Separator />\r\n+\r\n+                {/* Platforms */}\r\n+                <div\r\n+                  className=\"grid\"\r\n+                  style={{\r\n+                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                  }}\r\n+                >\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Listed On\r\n+                  </div>\r\n+\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <div className=\"flex flex-wrap gap-1\">\r\n+                        {car.platform.map((p, idx) => (\r\n+                          <Badge key={idx} variant=\"secondary\">\r\n+                            {p.name}\r\n+                          </Badge>\r\n+                        ))}\r\n+                      </div>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                {/* View Details */}\r\n+                <div\r\n+                  className=\"grid\"\r\n+                  style={{\r\n+                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                  }}\r\n+                >\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Actions\r\n+                  </div>\r\n+\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <Button className=\"w-full\" onClick={() => navigate(`/car/${car.id}`)}>\r\n+                        View Details\r\n+                      </Button>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+\r\n+            {/* AI COMPARISON RESULT */}\r\n+            {aiResult && primaryA && primaryB && (\r\n+              <Card className=\"mt-6 shadow-card\">\r\n+                <CardHeader>\r\n+                  <CardTitle>AI Comparison Result</CardTitle>\r\n+                </CardHeader>\r\n+                <CardContent className=\"space-y-3 text-sm\">\r\n+                  <p>\r\n+                    <span className=\"font-semibold\">Better Car: </span>\r\n+                    {aiResult.betterCar === \"A\" ? primaryA.title : primaryB.title}\r\n+                  </p>\r\n+                  <p>\r\n+                    <span className=\"font-semibold\">Reason:</span> {aiResult.reason}\r\n+                  </p>\r\n+\r\n+                  <Separator />\r\n+\r\n+                  <div className=\"grid gap-2 md:grid-cols-2\">\r\n+                    {Object.entries(aiResult.detailedComparison).map(([k, val]) => (\r\n+                      <div key={k}>\r\n+                        <p className=\"font-semibold\">{k.replace(/([A-Z])/g, \" $1\")}</p>\r\n+                        <p className=\"text-muted-foreground\">{val}</p>\r\n+                      </div>\r\n+                    ))}\r\n+                  </div>\r\n+                </CardContent>\r\n+              </Card>\r\n+            )}\r\n+\r\n+            {/* AI MAINTENANCE RESULT */}\r\n+            {(maintenanceA || maintenanceB) && (\r\n+              <Card className=\"mt-6 shadow-card\">\r\n+                <CardHeader>\r\n+                  <CardTitle>AI Maintenance Cost Estimate</CardTitle>\r\n+                </CardHeader>\r\n+                <CardContent className=\"space-y-4 text-sm\">\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    {/* CAR A */}\r\n+                    {primaryA && maintenanceA && (\r\n+                      <div className=\"border rounded-lg p-3\">\r\n+                        <p className=\"font-semibold mb-1\">{primaryA.title}</p>\r\n+\r\n+                        <p>\r\n+                          <span className=\"font-semibold\">Yearly Range:</span>{\" \"}\r\n+                          ${maintenanceA.yearlyLow?.toLocaleString?.() ?? \"N/A\"} -\r\n+                          ${maintenanceA.yearlyHigh?.toLocaleString?.() ?? \"N/A\"}\r\n+                        </p>\r\n+\r\n+                        <p>\r\n+                          <span className=\"font-semibold\">Recommended Budget:</span>{\" \"}\r\n+                          ${maintenanceA.recommendedYearlyBudget?.toLocaleString?.() ?? \"N/A\"}/year\r\n+                        </p>\r\n+\r\n+                        <p>\r\n+                          <span className=\"font-semibold\">Risk Level:</span>{\" \"}\r\n+                          {maintenanceA.riskLevel?.toUpperCase?.() ?? \"N/A\"}\r\n+                        </p>\r\n+\r\n+                        <p className=\"mt-1 text-muted-foreground\">\r\n+                          {maintenanceA.summary ?? \"N/A\"}\r\n+                        </p>\r\n+\r\n+                        {maintenanceA.commonRepairs?.length > 0 && (\r\n+                          <>\r\n+                            <p className=\"mt-2 font-semibold\">Common Repairs:</p>\r\n+                            <ul className=\"list-disc list-inside text-muted-foreground\">\r\n+                              {maintenanceA.commonRepairs.map((r, i) => (\r\n+                                <li key={i}>{r}</li>\r\n+                              ))}\r\n+                            </ul>\r\n+                          </>\r\n+                        )}\r\n+\r\n+                        <p className=\"mt-2 text-muted-foreground\">\r\n+                          <span className=\"font-semibold\">Tips:</span>{\" \"}\r\n+                          {maintenanceA.tips ?? \"N/A\"}\r\n+                        </p>\r\n+                      </div>\r\n+                    )}\r\n+\r\n+                    {/* CAR B */}\r\n+                    {primaryB && maintenanceB && (\r\n+                      <div className=\"border rounded-lg p-3\">\r\n+                        <p className=\"font-semibold mb-1\">{primaryB.title}</p>\r\n+\r\n+                        <p>\r\n+                          <span className=\"font-semibold\">Yearly Range:</span>{\" \"}\r\n+                          ${maintenanceB.yearlyLow?.toLocaleString?.() ?? \"N/A\"} -\r\n+                          ${maintenanceB.yearlyHigh?.toLocaleString?.() ?? \"N/A\"}\r\n+                        </p>\r\n+\r\n+                        <p>\r\n+                          <span className=\"font-semibold\">Recommended Budget:</span>{\" \"}\r\n+                          ${maintenanceB.recommendedYearlyBudget?.toLocaleString?.() ?? \"N/A\"}/year\r\n+                        </p>\r\n+\r\n+                        <p>\r\n+                          <span className=\"font-semibold\">Risk Level:</span>{\" \"}\r\n+                          {maintenanceB.riskLevel?.toUpperCase?.() ?? \"N/A\"}\r\n+                        </p>\r\n+\r\n+                        <p className=\"mt-1 text-muted-foreground\">\r\n+                          {maintenanceB.summary ?? \"N/A\"}\r\n+                        </p>\r\n+\r\n+                        {maintenanceB.commonRepairs?.length > 0 && (\r\n+                          <>\r\n+                            <p className=\"mt-2 font-semibold\">Common Repairs:</p>\r\n+                            <ul className=\"list-disc list-inside text-muted-foreground\">\r\n+                              {maintenanceB.commonRepairs.map((r, i) => (\r\n+                                <li key={i}>{r}</li>\r\n+                              ))}\r\n+                            </ul>\r\n+                          </>\r\n+                        )}\r\n+\r\n+                        <p className=\"mt-2 text-muted-foreground\">\r\n+                          <span className=\"font-semibold\">Tips:</span>{\" \"}\r\n+                          {maintenanceB.tips ?? \"N/A\"}\r\n+                        </p>\r\n+                      </div>\r\n+                    )}\r\n+                  </div>\r\n+                </CardContent>\r\n+              </Card>\r\n+            )}\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default Compare;\r\n"
                },
                {
                    "date": 1764592359360,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -286,89 +286,55 @@\n             </div>\r\n \r\n             {/* SPECS TABLE */}\r\n             <Card>\r\n-              <CardContent className=\"p-0\">\r\n-                {specs.map((spec, index) => (\r\n-                  <div key={spec.key}>\r\n-                    {index > 0 && <Separator />}\r\n-                    <div\r\n-                      className=\"grid\"\r\n-                      style={{\r\n-                        gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-                      }}\r\n-                    >\r\n-                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                        {spec.label}\r\n-                      </div>\r\n+  <CardContent className=\"p-0\">\r\n+    {specs.map((spec, index) => (\r\n+      <div key={spec.key}>\r\n+        {index > 0 && <Separator />}\r\n+        <div\r\n+          className=\"grid\"\r\n+          style={{\r\n+            gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+          }}\r\n+        >\r\n+          <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+            {spec.label}\r\n+          </div>\r\n \r\n-                      {comparisonList.map((car) => {\r\n-                        const value = car[spec.key];\r\n-                        const display =\r\n-                          spec.format && (typeof value === \"string\" || typeof value === \"number\")\r\n-                            ? spec.format(value)\r\n-                            : value || \"N/A\";\r\n+          {comparisonList.map((car) => {\r\n+            let rawValue: any = car?.[spec.key];\r\n \r\n-                        return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n-                            {display}\r\n-                          </div>\r\n-                        );\r\n-                      })}\r\n-                    </div>\r\n-                  </div>\r\n-                ))}\r\n+            // SAFEST VALUE NORMALIZER:\r\n+            let display: string = \"N/A\";\r\n \r\n-                <Separator />\r\n+            if (spec.format && (typeof rawValue === \"string\" || typeof rawValue === \"number\")) {\r\n+              display = spec.format(rawValue);\r\n+            } \r\n+            else if (typeof rawValue === \"string\" || typeof rawValue === \"number\") {\r\n+              display = rawValue.toString();\r\n+            }\r\n+            else if (rawValue === null || rawValue === undefined) {\r\n+              display = \"N/A\";\r\n+            }\r\n+            else {\r\n+              // Catch weird values like objects, arrays, booleans, etc.\r\n+              display = String(rawValue) || \"N/A\";\r\n+            }\r\n \r\n-                {/* Platforms */}\r\n-                <div\r\n-                  className=\"grid\"\r\n-                  style={{\r\n-                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-                  }}\r\n-                >\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Listed On\r\n-                  </div>\r\n+            return (\r\n+              <div key={car.id} className=\"p-4 text-sm\">\r\n+                {display}\r\n+              </div>\r\n+            );\r\n+          })}\r\n+        </div>\r\n+      </div>\r\n+    ))}\r\n+  </CardContent>\r\n+</Card>\r\n \r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <div className=\"flex flex-wrap gap-1\">\r\n-                        {car.platform.map((p, idx) => (\r\n-                          <Badge key={idx} variant=\"secondary\">\r\n-                            {p.name}\r\n-                          </Badge>\r\n-                        ))}\r\n-                      </div>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n \r\n-                <Separator />\r\n-\r\n-                {/* View Details */}\r\n-                <div\r\n-                  className=\"grid\"\r\n-                  style={{\r\n-                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-                  }}\r\n-                >\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                    Actions\r\n-                  </div>\r\n-\r\n-                  {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n-                      <Button className=\"w-full\" onClick={() => navigate(`/car/${car.id}`)}>\r\n-                        View Details\r\n-                      </Button>\r\n-                    </div>\r\n-                  ))}\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n-\r\n             {/* AI COMPARISON RESULT */}\r\n             {aiResult && primaryA && primaryB && (\r\n               <Card className=\"mt-6 shadow-card\">\r\n                 <CardHeader>\r\n"
                },
                {
                    "date": 1764592365216,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -286,55 +286,89 @@\n             </div>\r\n \r\n             {/* SPECS TABLE */}\r\n             <Card>\r\n-  <CardContent className=\"p-0\">\r\n-    {specs.map((spec, index) => (\r\n-      <div key={spec.key}>\r\n-        {index > 0 && <Separator />}\r\n-        <div\r\n-          className=\"grid\"\r\n-          style={{\r\n-            gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-          }}\r\n-        >\r\n-          <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-            {spec.label}\r\n-          </div>\r\n+              <CardContent className=\"p-0\">\r\n+                {specs.map((spec, index) => (\r\n+                  <div key={spec.key}>\r\n+                    {index > 0 && <Separator />}\r\n+                    <div\r\n+                      className=\"grid\"\r\n+                      style={{\r\n+                        gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                      }}\r\n+                    >\r\n+                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                        {spec.label}\r\n+                      </div>\r\n \r\n-          {comparisonList.map((car) => {\r\n-            let rawValue: any = car?.[spec.key];\r\n+                      {comparisonList.map((car) => {\r\n+                        const value = car[spec.key];\r\n+                        const display =\r\n+                          spec.format && (typeof value === \"string\" || typeof value === \"number\")\r\n+                            ? spec.format(value)\r\n+                            : value || \"N/A\";\r\n \r\n-            // SAFEST VALUE NORMALIZER:\r\n-            let display: string = \"N/A\";\r\n+                        return (\r\n+                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                            {display}\r\n+                          </div>\r\n+                        );\r\n+                      })}\r\n+                    </div>\r\n+                  </div>\r\n+                ))}\r\n \r\n-            if (spec.format && (typeof rawValue === \"string\" || typeof rawValue === \"number\")) {\r\n-              display = spec.format(rawValue);\r\n-            } \r\n-            else if (typeof rawValue === \"string\" || typeof rawValue === \"number\") {\r\n-              display = rawValue.toString();\r\n-            }\r\n-            else if (rawValue === null || rawValue === undefined) {\r\n-              display = \"N/A\";\r\n-            }\r\n-            else {\r\n-              // Catch weird values like objects, arrays, booleans, etc.\r\n-              display = String(rawValue) || \"N/A\";\r\n-            }\r\n+                <Separator />\r\n \r\n-            return (\r\n-              <div key={car.id} className=\"p-4 text-sm\">\r\n-                {display}\r\n-              </div>\r\n-            );\r\n-          })}\r\n-        </div>\r\n-      </div>\r\n-    ))}\r\n-  </CardContent>\r\n-</Card>\r\n+                {/* Platforms */}\r\n+                <div\r\n+                  className=\"grid\"\r\n+                  style={{\r\n+                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                  }}\r\n+                >\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Listed On\r\n+                  </div>\r\n \r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <div className=\"flex flex-wrap gap-1\">\r\n+                        {car.platform.map((p, idx) => (\r\n+                          <Badge key={idx} variant=\"secondary\">\r\n+                            {p.name}\r\n+                          </Badge>\r\n+                        ))}\r\n+                      </div>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n \r\n+                <Separator />\r\n+\r\n+                {/* View Details */}\r\n+                <div\r\n+                  className=\"grid\"\r\n+                  style={{\r\n+                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                  }}\r\n+                >\r\n+                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                    Actions\r\n+                  </div>\r\n+\r\n+                  {comparisonList.map((car) => (\r\n+                    <div key={car.id} className=\"p-4\">\r\n+                      <Button className=\"w-full\" onClick={() => navigate(`/car/${car.id}`)}>\r\n+                        View Details\r\n+                      </Button>\r\n+                    </div>\r\n+                  ))}\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+\r\n             {/* AI COMPARISON RESULT */}\r\n             {aiResult && primaryA && primaryB && (\r\n               <Card className=\"mt-6 shadow-card\">\r\n                 <CardHeader>\r\n@@ -467,579 +501,4 @@\n   );\r\n };\r\n \r\n export default Compare;\r\n-  // src/pages/Compare.tsx\r\n-  import { useNavigate } from \"react-router-dom\";\r\n-  import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-  import { Button } from \"@/components/ui/button\";\r\n-  import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-  import { Badge } from \"@/components/ui/badge\";\r\n-  import { ArrowLeft, X } from \"lucide-react\";\r\n-  import { Separator } from \"@/components/ui/separator\";\r\n-  import { useEffect, useState } from \"react\";\r\n-  import { useAuthStore } from \"@/stores/authStore\";\r\n-  import { saveComparison } from \"@/services/carService\";\r\n-  import {\r\n-    compareCarsAI,\r\n-    type CarCompareResult,\r\n-  } from \"@/services/aiCompareService\";\r\n-  import {\r\n-    estimateMaintenanceCost,\r\n-    type MaintenanceEstimate,\r\n-  } from \"@/services/aiMaintenanceService\";\r\n-\r\n-  interface Platform {\r\n-    name: string;\r\n-  }\r\n-\r\n-  interface Car {\r\n-    id: string;\r\n-    title: string;\r\n-    images: string[];\r\n-    price: number;\r\n-    year: number;\r\n-    mileage: number;\r\n-    condition: string;\r\n-    fuelType?: string;\r\n-    transmission?: string;\r\n-    location?: string;\r\n-    platform: Platform[];\r\n-  }\r\n-\r\n-  const Compare = () => {\r\n-    const navigate = useNavigate();\r\n-    const { comparisonList, removeFromComparison, clearComparison } =\r\n-      useComparison();\r\n-    const token = useAuthStore((state) => state.token);\r\n-    const [hasSaved, setHasSaved] = useState(false);\r\n-\r\n-    // AI Compare state\r\n-    const [aiLoading, setAiLoading] = useState(false);\r\n-    const [aiResult, setAiResult] = useState<CarCompareResult | null>(null);\r\n-\r\n-    // AI Maintenance state\r\n-    const [maintLoading, setMaintLoading] = useState(false);\r\n-    const [maintenanceA, setMaintenanceA] = useState<MaintenanceEstimate | null>(\r\n-      null\r\n-    );\r\n-    const [maintenanceB, setMaintenanceB] = useState<MaintenanceEstimate | null>(\r\n-      null\r\n-    );\r\n-\r\n-    // Save comparison once\r\n-    useEffect(() => {\r\n-      const doSave = async () => {\r\n-        if (!token) return;\r\n-        if (comparisonList.length < 2) return;\r\n-        if (hasSaved) return;\r\n-\r\n-        const [carA, carB] = comparisonList;\r\n-\r\n-        try {\r\n-          await saveComparison(carA.id, carB.id, token);\r\n-          setHasSaved(true);\r\n-        } catch (err) {\r\n-          console.error(\"Failed to save comparison:\", err);\r\n-        }\r\n-      };\r\n-\r\n-      void doSave();\r\n-    }, [comparisonList, token, hasSaved]);\r\n-\r\n-    if (comparisonList.length === 0) {\r\n-      return (\r\n-        <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-          <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n-          <p className=\"mb-6 text-muted-foreground\">\r\n-            Add cars to your comparison list to see them side by side.\r\n-          </p>\r\n-          <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n-            Browse Cars\r\n-          </Button>\r\n-        </div>\r\n-      );\r\n-    }\r\n-\r\n-    // Helper: build inputs from title \"Brand Model\"\r\n-    const buildCompareInput = (car: Car) => {\r\n-      const parts = car.title.split(\" \");\r\n-      const brand = parts[0] ?? \"\";\r\n-      const model = parts.slice(1).join(\" \") || brand;\r\n-\r\n-      return {\r\n-        brand,\r\n-        model,\r\n-        year: car.year,\r\n-        mileage: car.mileage,\r\n-        price: car.price,\r\n-        condition: car.condition,\r\n-      };\r\n-    };\r\n-\r\n-    const buildMaintenanceInput = (car: Car) => {\r\n-      const parts = car.title.split(\" \");\r\n-      const brand = parts[0] ?? \"\";\r\n-      const model = parts.slice(1).join(\" \") || brand;\r\n-\r\n-      return {\r\n-        brand,\r\n-        model,\r\n-        year: car.year,\r\n-        mileage: car.mileage,\r\n-        price: car.price,\r\n-        condition: car.condition,\r\n-        fuelType: car.fuelType,\r\n-        transmission: car.transmission,\r\n-      };\r\n-    };\r\n-\r\n-    const handleAICompare = async () => {\r\n-      if (comparisonList.length < 2) {\r\n-        alert(\"Add at least two cars to use AI comparison.\");\r\n-        return;\r\n-      }\r\n-\r\n-      const [carA, carB] = comparisonList;\r\n-\r\n-      const carAInput = buildCompareInput(carA);\r\n-      const carBInput = buildCompareInput(carB);\r\n-\r\n-      try {\r\n-        setAiLoading(true);\r\n-        setAiResult(null);\r\n-\r\n-        const result = await compareCarsAI(carAInput, carBInput);\r\n-        setAiResult(result);\r\n-      } catch (error) {\r\n-        console.error(\"AI Compare Error:\", error);\r\n-        alert(\"AI comparison failed. Please try again.\");\r\n-      } finally {\r\n-        setAiLoading(false);\r\n-      }\r\n-    };\r\n-\r\n-    const handleAIMaintenance = async () => {\r\n-      if (comparisonList.length < 1) {\r\n-        alert(\"Add at least one car to estimate maintenance.\");\r\n-        return;\r\n-      }\r\n-\r\n-      const primaryA = comparisonList[0];\r\n-      const primaryB = comparisonList[1];\r\n-\r\n-      try {\r\n-        setMaintLoading(true);\r\n-        setMaintenanceA(null);\r\n-        setMaintenanceB(null);\r\n-\r\n-        // Car A\r\n-        const inputA = buildMaintenanceInput(primaryA);\r\n-        const resA = await estimateMaintenanceCost(inputA);\r\n-        setMaintenanceA(resA);\r\n-\r\n-        // Car B (if present)\r\n-        if (primaryB) {\r\n-          const inputB = buildMaintenanceInput(primaryB);\r\n-          const resB = await estimateMaintenanceCost(inputB);\r\n-          setMaintenanceB(resB);\r\n-        }\r\n-      } catch (error) {\r\n-        console.error(\"AI Maintenance Error:\", error);\r\n-        alert(\"AI maintenance estimation failed. Please try again.\");\r\n-      } finally {\r\n-        setMaintLoading(false);\r\n-      }\r\n-    };\r\n-\r\n-    const specs: Array<{\r\n-      label: string;\r\n-      key: keyof Car;\r\n-      format?: (val: number | string | undefined) => string;\r\n-    }> = [\r\n-      {\r\n-        label: \"Price\",\r\n-        key: \"price\",\r\n-        format: (val: number) => `$${val.toLocaleString()}`,\r\n-      },\r\n-      { label: \"Year\", key: \"year\" },\r\n-      {\r\n-        label: \"Mileage\",\r\n-        key: \"mileage\",\r\n-        format: (val: number) => `${val.toLocaleString()} mi`,\r\n-      },\r\n-      {\r\n-        label: \"Condition\",\r\n-        key: \"condition\",\r\n-        format: (val: string) =>\r\n-          val.charAt(0).toUpperCase() + val.slice(1),\r\n-      },\r\n-      {\r\n-        label: \"Fuel Type\",\r\n-        key: \"fuelType\",\r\n-        format: (val: string) =>\r\n-          val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\",\r\n-      },\r\n-      {\r\n-        label: \"Transmission\",\r\n-        key: \"transmission\",\r\n-        format: (val: string) =>\r\n-          val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\",\r\n-      },\r\n-      { label: \"Location\", key: \"location\" },\r\n-    ];\r\n-\r\n-    const primaryA = comparisonList[0];\r\n-    const primaryB = comparisonList[1];\r\n-\r\n-    return (\r\n-      <div className=\"min-h-screen bg-background\">\r\n-        <div className=\"container mx-auto px-4 py-8\">\r\n-          <div className=\"mb-6 flex flex-wrap items-center justify-between gap-3\">\r\n-            <Button\r\n-              variant=\"ghost\"\r\n-              onClick={() => navigate(\"/\")}\r\n-              className=\"gap-2\"\r\n-            >\r\n-              <ArrowLeft className=\"h-4 w-4\" />\r\n-              Back to Listings\r\n-            </Button>\r\n-            <div className=\"flex flex-wrap gap-2\">\r\n-              {/* AI Compare Button */}\r\n-              <Button\r\n-                variant=\"default\"\r\n-                onClick={handleAICompare}\r\n-                disabled={comparisonList.length < 2 || aiLoading}\r\n-                className=\"gap-2\"\r\n-              >\r\n-                {aiLoading ? \"Analyzing...\" : \"AI Compare First 2 Cars\"}\r\n-              </Button>\r\n-\r\n-              {/* AI Maintenance Button */}\r\n-              <Button\r\n-                variant=\"outline\"\r\n-                onClick={handleAIMaintenance}\r\n-                disabled={maintLoading || comparisonList.length < 1}\r\n-                className=\"gap-2\"\r\n-              >\r\n-                {maintLoading\r\n-                  ? \"Estimating Maintenance...\"\r\n-                  : \"AI Maintenance Cost (First 2 Cars)\"}\r\n-              </Button>\r\n-\r\n-              <Button\r\n-                variant=\"outline\"\r\n-                onClick={clearComparison}\r\n-                className=\"gap-2\"\r\n-              >\r\n-                <X className=\"h-4 w-4\" />\r\n-                Clear All\r\n-              </Button>\r\n-            </div>\r\n-          </div>\r\n-\r\n-          <div className=\"mb-8\">\r\n-            <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n-            <p className=\"mt-2 text-muted-foreground\">\r\n-              Compare up to {comparisonList.length} of 3 cars side by side.\r\n-            </p>\r\n-            {comparisonList.length >= 2 && (\r\n-              <p className=\"mt-1 text-xs text-muted-foreground\">\r\n-                AI features analyze only the first two cars in the list.\r\n-              </p>\r\n-            )}\r\n-          </div>\r\n-\r\n-          <div className=\"overflow-x-auto\">\r\n-            <div className=\"min-w-[800px]\">\r\n-              {/* Car Images & Titles */}\r\n-              <div\r\n-                className=\"mb-6 grid gap-4\"\r\n-                style={{\r\n-                  gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)`,\r\n-                }}\r\n-              >\r\n-                {comparisonList.map((car) => (\r\n-                  <Card key={car.id} className=\"overflow-hidden\">\r\n-                    <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n-                      <img\r\n-                        src={car.images[0]}\r\n-                        alt={car.title}\r\n-                        className=\"h-full w-full object-cover\"\r\n-                      />\r\n-                      <Button\r\n-                        variant=\"secondary\"\r\n-                        size=\"icon\"\r\n-                        className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n-                        onClick={() => removeFromComparison(car.id)}\r\n-                      >\r\n-                        <X className=\"h-4 w-4\" />\r\n-                      </Button>\r\n-                    </div>\r\n-                    <CardHeader>\r\n-                      <CardTitle className=\"truncate text-base\">\r\n-                        {car.title}\r\n-                      </CardTitle>\r\n-                    </CardHeader>\r\n-                  </Card>\r\n-                ))}\r\n-              </div>\r\n-\r\n-              {/* Comparison Table */}\r\n-              <Card>\r\n-                <CardContent className=\"p-0\">\r\n-                  {specs.map((spec, index) => (\r\n-                    <div key={spec.key}>\r\n-                      {index > 0 && <Separator />}\r\n-                      <div\r\n-                        className=\"grid\"\r\n-                        style={{\r\n-                          gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-                        }}\r\n-                      >\r\n-                        <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                          {spec.label}\r\n-                        </div>\r\n-                        {comparisonList.map((car) => {\r\n-                          const value = car[spec.key];\r\n-                          let displayValue: string | number | undefined;\r\n-\r\n-                          if (\r\n-                            spec.format &&\r\n-                            (typeof value === \"string\" ||\r\n-                              typeof value === \"number\")\r\n-                          ) {\r\n-                            displayValue = spec.format(value);\r\n-                          } else if (\r\n-                            typeof value === \"string\" ||\r\n-                            typeof value === \"number\"\r\n-                          ) {\r\n-                            displayValue = value;\r\n-                          } else {\r\n-                            displayValue = \"N/A\";\r\n-                          }\r\n-\r\n-                          return (\r\n-                            <div key={car.id} className=\"p-4 text-sm\">\r\n-                              {displayValue || \"N/A\"}\r\n-                            </div>\r\n-                          );\r\n-                        })}\r\n-                      </div>\r\n-                    </div>\r\n-                  ))}\r\n-\r\n-                  <Separator />\r\n-\r\n-                  {/* Platforms */}\r\n-                  <div\r\n-                    className=\"grid\"\r\n-                    style={{\r\n-                      gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-                    }}\r\n-                  >\r\n-                    <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                      Listed On\r\n-                    </div>\r\n-                    {comparisonList.map((car) => (\r\n-                      <div key={car.id} className=\"p-4\">\r\n-                        <div className=\"flex flex-wrap gap-1\">\r\n-                          {car.platform.map((platform, idx) => (\r\n-                            <Badge\r\n-                              key={idx}\r\n-                              variant=\"secondary\"\r\n-                              className=\"text-xs\"\r\n-                            >\r\n-                              {platform.name}\r\n-                            </Badge>\r\n-                          ))}\r\n-                        </div>\r\n-                      </div>\r\n-                    ))}\r\n-                  </div>\r\n-\r\n-                  <Separator />\r\n-\r\n-                  {/* View Details */}\r\n-                  <div\r\n-                    className=\"grid\"\r\n-                    style={{\r\n-                      gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-                    }}\r\n-                  >\r\n-                    <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n-                      Actions\r\n-                    </div>\r\n-                    {comparisonList.map((car) => (\r\n-                      <div key={car.id} className=\"p-4\">\r\n-                        <Button\r\n-                          variant=\"default\"\r\n-                          className=\"w-full\"\r\n-                          onClick={() => navigate(`/car/${car.id}`)}\r\n-                        >\r\n-                          View Details\r\n-                        </Button>\r\n-                      </div>\r\n-                    ))}\r\n-                  </div>\r\n-                </CardContent>\r\n-              </Card>\r\n-\r\n-              {/* AI Comparison Result */}\r\n-              {aiResult && primaryA && primaryB && (\r\n-                <Card className=\"mt-6 shadow-card\">\r\n-                  <CardHeader>\r\n-                    <CardTitle>AI Comparison Result</CardTitle>\r\n-                  </CardHeader>\r\n-                  <CardContent className=\"space-y-3 text-sm\">\r\n-                    <p>\r\n-                      <span className=\"font-semibold\">Better Car: </span>\r\n-                      {aiResult.betterCar === \"A\"\r\n-                        ? primaryA.title\r\n-                        : primaryB.title}\r\n-                    </p>\r\n-                    <p>\r\n-                      <span className=\"font-semibold\">Reason: </span>\r\n-                      {aiResult.reason}\r\n-                    </p>\r\n-\r\n-                    <Separator className=\"my-2\" />\r\n-\r\n-                    <div className=\"grid gap-2 md:grid-cols-2\">\r\n-                      <div>\r\n-                        <p className=\"font-semibold\">Performance</p>\r\n-                        <p className=\"text-muted-foreground\">\r\n-                          {aiResult.detailedComparison.performance}\r\n-                        </p>\r\n-                      </div>\r\n-                      <div>\r\n-                        <p className=\"font-semibold\">Reliability</p>\r\n-                        <p className=\"text-muted-foreground\">\r\n-                          {aiResult.detailedComparison.reliability}\r\n-                        </p>\r\n-                      </div>\r\n-                      <div>\r\n-                        <p className=\"font-semibold\">Fuel Economy</p>\r\n-                        <p className=\"text-muted-foreground\">\r\n-                          {aiResult.detailedComparison.fuelEconomy}\r\n-                        </p>\r\n-                      </div>\r\n-                      <div>\r\n-                        <p className=\"font-semibold\">Comfort</p>\r\n-                        <p className=\"text-muted-foreground\">\r\n-                          {aiResult.detailedComparison.comfort}\r\n-                        </p>\r\n-                      </div>\r\n-                      <div className=\"md:col-span-2\">\r\n-                        <p className=\"font-semibold\">Value for Money</p>\r\n-                        <p className=\"text-muted-foreground\">\r\n-                          {aiResult.detailedComparison.valueForMoney}\r\n-                        </p>\r\n-                      </div>\r\n-                    </div>\r\n-                  </CardContent>\r\n-                </Card>\r\n-              )}\r\n-\r\n-              {/* AI Maintenance Result */}\r\n-              {(maintenanceA || maintenanceB) && (\r\n-                <Card className=\"mt-6 shadow-card\">\r\n-                  <CardHeader>\r\n-                    <CardTitle>AI Maintenance Cost Estimate</CardTitle>\r\n-                  </CardHeader>\r\n-                  <CardContent className=\"space-y-4 text-sm\">\r\n-                    <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                      {primaryA && maintenanceA && (\r\n-                        <div className=\"border rounded-lg p-3\">\r\n-                          <p className=\"font-semibold mb-1\">{primaryA.title}</p>\r\n-                          <p>\r\n-                            <span className=\"font-semibold\">Yearly Range:</span>{\" \"}\r\n-                            ${maintenanceA.yearlyLow.toLocaleString()} - $\r\n-                            {maintenanceA.yearlyHigh.toLocaleString()}\r\n-                          </p>\r\n-                          <p>\r\n-                            <span className=\"font-semibold\">\r\n-                              Recommended Budget:\r\n-                            </span>{\" \"}\r\n-                            $\r\n-                            {maintenanceA.recommendedYearlyBudget.toLocaleString()}\r\n-                            /year\r\n-                          </p>\r\n-                          <p>\r\n-                            <span className=\"font-semibold\">Risk Level:</span>{\" \"}\r\n-                            {maintenanceA.riskLevel.toUpperCase()}\r\n-                          </p>\r\n-                          <p className=\"mt-1 text-muted-foreground\">\r\n-                            {maintenanceA.summary}\r\n-                          </p>\r\n-                          {maintenanceA.commonRepairs?.length > 0 && (\r\n-                            <>\r\n-                              <p className=\"mt-2 font-semibold\">\r\n-                                Common Repairs:\r\n-                              </p>\r\n-                              <ul className=\"list-disc list-inside text-muted-foreground\">\r\n-                                {maintenanceA.commonRepairs.map((r, i) => (\r\n-                                  <li key={i}>{r}</li>\r\n-                                ))}\r\n-                              </ul>\r\n-                            </>\r\n-                          )}\r\n-                          <p className=\"mt-2 text-muted-foreground\">\r\n-                            <span className=\"font-semibold\">Tips:</span>{\" \"}\r\n-                            {maintenanceA.tips}\r\n-                          </p>\r\n-                        </div>\r\n-                      )}\r\n-\r\n-                      {primaryB && maintenanceB && (\r\n-                        <div className=\"border rounded-lg p-3\">\r\n-                          <p className=\"font-semibold mb-1\">{primaryB.title}</p>\r\n-                          <p>\r\n-                            <span className=\"font-semibold\">Yearly Range:</span>{\" \"}\r\n-                            ${maintenanceB.yearlyLow.toLocaleString()} - $\r\n-                            {maintenanceB.yearlyHigh.toLocaleString()}\r\n-                          </p>\r\n-                          <p>\r\n-                            <span className=\"font-semibold\">\r\n-                              Recommended Budget:\r\n-                            </span>{\" \"}\r\n-                            $\r\n-                            {maintenanceB.recommendedYearlyBudget.toLocaleString()}\r\n-                            /year\r\n-                          </p>\r\n-                          <p>\r\n-                            <span className=\"font-semibold\">Risk Level:</span>{\" \"}\r\n-                            {maintenanceB.riskLevel.toUpperCase()}\r\n-                          </p>\r\n-                          <p className=\"mt-1 text-muted-foreground\">\r\n-                            {maintenanceB.summary}\r\n-                          </p>\r\n-                          {maintenanceB.commonRepairs?.length > 0 && (\r\n-                            <>\r\n-                              <p className=\"mt-2 font-semibold\">\r\n-                                Common Repairs:\r\n-                              </p>\r\n-                              <ul className=\"list-disc list-inside text-muted-foreground\">\r\n-                                {maintenanceB.commonRepairs.map((r, i) => (\r\n-                                  <li key={i}>{r}</li>\r\n-                                ))}\r\n-                              </ul>\r\n-                            </>\r\n-                          )}\r\n-                          <p className=\"mt-2 text-muted-foreground\">\r\n-                            <span className=\"font-semibold\">Tips:</span>{\" \"}\r\n-                            {maintenanceB.tips}\r\n-                          </p>\r\n-                        </div>\r\n-                      )}\r\n-                    </div>\r\n-                  </CardContent>\r\n-                </Card>\r\n-              )}\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    );\r\n-  };\r\n-\r\n-  export default Compare;\r\n"
                },
                {
                    "date": 1764592518687,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,25 +37,21 @@\n }\r\n \r\n const Compare = () => {\r\n   const navigate = useNavigate();\r\n-  const { comparisonList, removeFromComparison, clearComparison } =\r\n-    useComparison();\r\n+  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n   const token = useAuthStore((state) => state.token);\r\n+\r\n   const [hasSaved, setHasSaved] = useState(false);\r\n \r\n-  // AI Compare state\r\n+  // AI Compare\r\n   const [aiLoading, setAiLoading] = useState(false);\r\n   const [aiResult, setAiResult] = useState<CarCompareResult | null>(null);\r\n \r\n-  // AI Maintenance state\r\n+  // AI Maintenance\r\n   const [maintLoading, setMaintLoading] = useState(false);\r\n-  const [maintenanceA, setMaintenanceA] = useState<MaintenanceEstimate | null>(\r\n-    null\r\n-  );\r\n-  const [maintenanceB, setMaintenanceB] = useState<MaintenanceEstimate | null>(\r\n-    null\r\n-  );\r\n+  const [maintenanceA, setMaintenanceA] = useState<MaintenanceEstimate | null>(null);\r\n+  const [maintenanceB, setMaintenanceB] = useState<MaintenanceEstimate | null>(null);\r\n \r\n   // Save comparison once\r\n   useEffect(() => {\r\n     const doSave = async () => {\r\n@@ -82,16 +78,17 @@\n         <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n         <p className=\"mb-6 text-muted-foreground\">\r\n           Add cars to your comparison list to see them side by side.\r\n         </p>\r\n+\r\n         <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n           Browse Cars\r\n         </Button>\r\n       </div>\r\n     );\r\n   }\r\n \r\n-  // Helper: build inputs\r\n+  // Build inputs\r\n   const buildCompareInput = (car: Car) => {\r\n     const parts = car.title.split(\" \");\r\n     const brand = parts[0] ?? \"\";\r\n     const model = parts.slice(1).join(\" \") || brand;\r\n@@ -134,45 +131,38 @@\n     try {\r\n       setAiLoading(true);\r\n       setAiResult(null);\r\n \r\n-      const inputA = buildCompareInput(carA);\r\n-      const inputB = buildCompareInput(carB);\r\n-\r\n-      const result = await compareCarsAI(inputA, inputB);\r\n+      const result = await compareCarsAI(\r\n+        buildCompareInput(carA),\r\n+        buildCompareInput(carB)\r\n+      );\r\n       setAiResult(result);\r\n     } catch (err) {\r\n-      console.error(err);\r\n-      alert(\"AI comparison failed. Try again.\");\r\n+      console.error(\"AI Compare Error:\", err);\r\n+      alert(\"AI comparison failed!\");\r\n     } finally {\r\n       setAiLoading(false);\r\n     }\r\n   };\r\n \r\n   const handleAIMaintenance = async () => {\r\n-    if (comparisonList.length < 1) {\r\n-      alert(\"Add at least one car to estimate maintenance.\");\r\n-      return;\r\n-    }\r\n-\r\n     try {\r\n       setMaintLoading(true);\r\n       setMaintenanceA(null);\r\n       setMaintenanceB(null);\r\n \r\n       const primaryA = comparisonList[0];\r\n-      const inputA = buildMaintenanceInput(primaryA);\r\n-      const resA = await estimateMaintenanceCost(inputA);\r\n+      const resA = await estimateMaintenanceCost(buildMaintenanceInput(primaryA));\r\n       setMaintenanceA(resA);\r\n \r\n       if (comparisonList[1]) {\r\n         const primaryB = comparisonList[1];\r\n-        const inputB = buildMaintenanceInput(primaryB);\r\n-        const resB = await estimateMaintenanceCost(inputB);\r\n+        const resB = await estimateMaintenanceCost(buildMaintenanceInput(primaryB));\r\n         setMaintenanceB(resB);\r\n       }\r\n     } catch (err) {\r\n-      console.error(err);\r\n+      console.error(\"AI Maintenance Error:\", err);\r\n       alert(\"AI maintenance estimation failed.\");\r\n     } finally {\r\n       setMaintLoading(false);\r\n     }\r\n@@ -180,28 +170,12 @@\n \r\n   const specs = [\r\n     { label: \"Price\", key: \"price\", format: (v: number) => `$${v?.toLocaleString?.()}` },\r\n     { label: \"Year\", key: \"year\" },\r\n-    {\r\n-      label: \"Mileage\",\r\n-      key: \"mileage\",\r\n-      format: (v: number) => `${v?.toLocaleString?.()} mi`,\r\n-    },\r\n-    {\r\n-      label: \"Condition\",\r\n-      key: \"condition\",\r\n-      format: (v: string) => v ? v.charAt(0).toUpperCase() + v.slice(1) : \"N/A\",\r\n-    },\r\n-    {\r\n-      label: \"Fuel Type\",\r\n-      key: \"fuelType\",\r\n-      format: (v: string) => v ? v.charAt(0).toUpperCase() + v.slice(1) : \"N/A\",\r\n-    },\r\n-    {\r\n-      label: \"Transmission\",\r\n-      key: \"transmission\",\r\n-      format: (v: string) => v ? v.charAt(0).toUpperCase() + v.slice(1) : \"N/A\",\r\n-    },\r\n+    { label: \"Mileage\", key: \"mileage\", format: (v: number) => `${v?.toLocaleString?.()} mi` },\r\n+    { label: \"Condition\", key: \"condition\", format: (v: string) => v ? v[0].toUpperCase() + v.slice(1) : \"N/A\" },\r\n+    { label: \"Fuel Type\", key: \"fuelType\", format: (v: string) => v ? v[0].toUpperCase() + v.slice(1) : \"N/A\" },\r\n+    { label: \"Transmission\", key: \"transmission\", format: (v: string) => v ? v[0].toUpperCase() + v.slice(1) : \"N/A\" },\r\n     { label: \"Location\", key: \"location\" },\r\n   ];\r\n \r\n   const primaryA = comparisonList[0];\r\n@@ -209,65 +183,49 @@\n \r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n+\r\n         {/* Header */}\r\n         <div className=\"mb-6 flex flex-wrap items-center justify-between gap-3\">\r\n           <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n-            <ArrowLeft className=\"h-4 w-4\" />\r\n-            Back to Listings\r\n+            <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n           </Button>\r\n \r\n           <div className=\"flex flex-wrap gap-2\">\r\n-            <Button\r\n-              onClick={handleAICompare}\r\n-              disabled={comparisonList.length < 2 || aiLoading}\r\n-              className=\"gap-2\"\r\n-            >\r\n-              {aiLoading ? \"Analyzing...\" : \"AI Compare First 2 Cars\"}\r\n+            <Button onClick={handleAICompare} disabled={aiLoading || comparisonList.length < 2}>\r\n+              {aiLoading ? \"Analyzing...\" : \"AI Compare (First 2 Cars)\"}\r\n             </Button>\r\n-\r\n-            <Button\r\n-              variant=\"outline\"\r\n-              onClick={handleAIMaintenance}\r\n-              disabled={maintLoading}\r\n-              className=\"gap-2\"\r\n-            >\r\n+            <Button variant=\"outline\" onClick={handleAIMaintenance} disabled={maintLoading}>\r\n               {maintLoading ? \"Estimating...\" : \"AI Maintenance Cost\"}\r\n             </Button>\r\n-\r\n             <Button variant=\"outline\" onClick={clearComparison}>\r\n               <X className=\"h-4 w-4\" /> Clear All\r\n             </Button>\r\n           </div>\r\n         </div>\r\n \r\n-        {/* Titles */}\r\n+        {/* Title */}\r\n         <div className=\"mb-8\">\r\n           <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n           <p className=\"mt-2 text-muted-foreground\">\r\n             Compare up to {comparisonList.length} cars side by side.\r\n           </p>\r\n         </div>\r\n \r\n-        {/* Table */}\r\n+        {/* TABLE */}\r\n         <div className=\"overflow-x-auto\">\r\n           <div className=\"min-w-[800px]\">\r\n-            {/* CAR IMAGE HEADERS */}\r\n+\r\n+            {/* Images */}\r\n             <div\r\n               className=\"mb-6 grid gap-4\"\r\n-              style={{\r\n-                gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)`,\r\n-              }}\r\n+              style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}\r\n             >\r\n               {comparisonList.map((car) => (\r\n                 <Card key={car.id}>\r\n                   <div className=\"relative aspect-video bg-muted\">\r\n-                    <img\r\n-                      src={car.images[0]}\r\n-                      alt={car.title}\r\n-                      className=\"h-full w-full object-cover\"\r\n-                    />\r\n+                    <img src={car.images[0]} className=\"h-full w-full object-cover\" />\r\n                     <Button\r\n                       variant=\"secondary\"\r\n                       size=\"icon\"\r\n                       className=\"absolute right-2 top-2 h-8 w-8\"\r\n@@ -275,13 +233,9 @@\n                     >\r\n                       <X className=\"h-4 w-4\" />\r\n                     </Button>\r\n                   </div>\r\n-                  <CardHeader>\r\n-                    <CardTitle className=\"truncate text-base\">\r\n-                      {car.title}\r\n-                    </CardTitle>\r\n-                  </CardHeader>\r\n+                  <CardHeader><CardTitle className=\"truncate\">{car.title}</CardTitle></CardHeader>\r\n                 </Card>\r\n               ))}\r\n             </div>\r\n \r\n@@ -292,23 +246,27 @@\n                   <div key={spec.key}>\r\n                     {index > 0 && <Separator />}\r\n                     <div\r\n                       className=\"grid\"\r\n-                      style={{\r\n-                        gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-                      }}\r\n+                      style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}\r\n                     >\r\n                       <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n                         {spec.label}\r\n                       </div>\r\n \r\n                       {comparisonList.map((car) => {\r\n-                        const value = car[spec.key];\r\n-                        const display =\r\n-                          spec.format && (typeof value === \"string\" || typeof value === \"number\")\r\n-                            ? spec.format(value)\r\n-                            : value || \"N/A\";\r\n+                        const raw = (car as any)[spec.key];\r\n \r\n+                        let display = \"N/A\";\r\n+\r\n+                        if (spec.format && (typeof raw === \"number\" || typeof raw === \"string\")) {\r\n+                          display = spec.format(raw);\r\n+                        } else if (typeof raw === \"string\" || typeof raw === \"number\") {\r\n+                          display = raw.toString();\r\n+                        } else if (raw) {\r\n+                          display = String(raw);\r\n+                        }\r\n+\r\n                         return (\r\n                           <div key={car.id} className=\"p-4 text-sm\">\r\n                             {display}\r\n                           </div>\r\n@@ -322,23 +280,18 @@\n \r\n                 {/* Platforms */}\r\n                 <div\r\n                   className=\"grid\"\r\n-                  style={{\r\n-                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-                  }}\r\n+                  style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}\r\n                 >\r\n                   <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n                     Listed On\r\n                   </div>\r\n-\r\n                   {comparisonList.map((car) => (\r\n                     <div key={car.id} className=\"p-4\">\r\n                       <div className=\"flex flex-wrap gap-1\">\r\n-                        {car.platform.map((p, idx) => (\r\n-                          <Badge key={idx} variant=\"secondary\">\r\n-                            {p.name}\r\n-                          </Badge>\r\n+                        {car.platform.map((p, i) => (\r\n+                          <Badge key={i} variant=\"secondary\">{p.name}</Badge>\r\n                         ))}\r\n                       </div>\r\n                     </div>\r\n                   ))}\r\n@@ -348,16 +301,13 @@\n \r\n                 {/* View Details */}\r\n                 <div\r\n                   className=\"grid\"\r\n-                  style={{\r\n-                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n-                  }}\r\n+                  style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}\r\n                 >\r\n                   <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n                     Actions\r\n                   </div>\r\n-\r\n                   {comparisonList.map((car) => (\r\n                     <div key={car.id} className=\"p-4\">\r\n                       <Button className=\"w-full\" onClick={() => navigate(`/car/${car.id}`)}>\r\n                         View Details\r\n@@ -367,84 +317,66 @@\n                 </div>\r\n               </CardContent>\r\n             </Card>\r\n \r\n-            {/* AI COMPARISON RESULT */}\r\n+            {/* AI COMPARISON */}\r\n             {aiResult && primaryA && primaryB && (\r\n-              <Card className=\"mt-6 shadow-card\">\r\n-                <CardHeader>\r\n-                  <CardTitle>AI Comparison Result</CardTitle>\r\n-                </CardHeader>\r\n-                <CardContent className=\"space-y-3 text-sm\">\r\n-                  <p>\r\n-                    <span className=\"font-semibold\">Better Car: </span>\r\n-                    {aiResult.betterCar === \"A\" ? primaryA.title : primaryB.title}\r\n-                  </p>\r\n-                  <p>\r\n-                    <span className=\"font-semibold\">Reason:</span> {aiResult.reason}\r\n-                  </p>\r\n-\r\n+              <Card className=\"mt-6\">\r\n+                <CardHeader><CardTitle>AI Comparison Result</CardTitle></CardHeader>\r\n+                <CardContent className=\"space-y-4 text-sm\">\r\n+                  <p><strong>Better Car:</strong> {aiResult.betterCar === \"A\" ? primaryA.title : primaryB.title}</p>\r\n+                  <p><strong>Reason:</strong> {aiResult.reason}</p>\r\n                   <Separator />\r\n-\r\n-                  <div className=\"grid gap-2 md:grid-cols-2\">\r\n-                    {Object.entries(aiResult.detailedComparison).map(([k, val]) => (\r\n+                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    {Object.entries(aiResult.detailedComparison).map(([k, v]) => (\r\n                       <div key={k}>\r\n-                        <p className=\"font-semibold\">{k.replace(/([A-Z])/g, \" $1\")}</p>\r\n-                        <p className=\"text-muted-foreground\">{val}</p>\r\n+                        <strong>{k.replace(/([A-Z])/g, \" $1\")}:</strong>\r\n+                        <p className=\"text-muted-foreground\">{v}</p>\r\n                       </div>\r\n                     ))}\r\n                   </div>\r\n                 </CardContent>\r\n               </Card>\r\n             )}\r\n \r\n-            {/* AI MAINTENANCE RESULT */}\r\n+            {/* AI MAINTENANCE */}\r\n             {(maintenanceA || maintenanceB) && (\r\n-              <Card className=\"mt-6 shadow-card\">\r\n-                <CardHeader>\r\n-                  <CardTitle>AI Maintenance Cost Estimate</CardTitle>\r\n-                </CardHeader>\r\n+              <Card className=\"mt-6\">\r\n+                <CardHeader><CardTitle>AI Maintenance Cost Estimate</CardTitle></CardHeader>\r\n                 <CardContent className=\"space-y-4 text-sm\">\r\n                   <div className=\"grid gap-4 md:grid-cols-2\">\r\n+                    \r\n                     {/* CAR A */}\r\n                     {primaryA && maintenanceA && (\r\n                       <div className=\"border rounded-lg p-3\">\r\n                         <p className=\"font-semibold mb-1\">{primaryA.title}</p>\r\n \r\n-                        <p>\r\n-                          <span className=\"font-semibold\">Yearly Range:</span>{\" \"}\r\n-                          ${maintenanceA.yearlyLow?.toLocaleString?.() ?? \"N/A\"} -\r\n+                        <p><strong>Yearly Range:</strong>  \r\n+                          ${maintenanceA.yearlyLow?.toLocaleString?.() ?? \"N/A\"} \r\n                           ${maintenanceA.yearlyHigh?.toLocaleString?.() ?? \"N/A\"}\r\n                         </p>\r\n \r\n-                        <p>\r\n-                          <span className=\"font-semibold\">Recommended Budget:</span>{\" \"}\r\n+                        <p><strong>Recommended Budget:</strong>  \r\n                           ${maintenanceA.recommendedYearlyBudget?.toLocaleString?.() ?? \"N/A\"}/year\r\n                         </p>\r\n \r\n-                        <p>\r\n-                          <span className=\"font-semibold\">Risk Level:</span>{\" \"}\r\n-                          {maintenanceA.riskLevel?.toUpperCase?.() ?? \"N/A\"}\r\n-                        </p>\r\n+                        <p><strong>Risk Level:</strong> {maintenanceA.riskLevel?.toUpperCase?.() ?? \"N/A\"}</p>\r\n \r\n-                        <p className=\"mt-1 text-muted-foreground\">\r\n-                          {maintenanceA.summary ?? \"N/A\"}\r\n-                        </p>\r\n+                        <p className=\"mt-1 text-muted-foreground\">{maintenanceA.summary ?? \"N/A\"}</p>\r\n \r\n                         {maintenanceA.commonRepairs?.length > 0 && (\r\n                           <>\r\n                             <p className=\"mt-2 font-semibold\">Common Repairs:</p>\r\n                             <ul className=\"list-disc list-inside text-muted-foreground\">\r\n-                              {maintenanceA.commonRepairs.map((r, i) => (\r\n-                                <li key={i}>{r}</li>\r\n+                              {maintenanceA.commonRepairs.map((item, i) => (\r\n+                                <li key={i}>{item}</li>\r\n                               ))}\r\n                             </ul>\r\n                           </>\r\n                         )}\r\n \r\n                         <p className=\"mt-2 text-muted-foreground\">\r\n-                          <span className=\"font-semibold\">Tips:</span>{\" \"}\r\n-                          {maintenanceA.tips ?? \"N/A\"}\r\n+                          <strong>Tips:</strong> {maintenanceA.tips ?? \"N/A\"}\r\n                         </p>\r\n                       </div>\r\n                     )}\r\n \r\n@@ -452,49 +384,43 @@\n                     {primaryB && maintenanceB && (\r\n                       <div className=\"border rounded-lg p-3\">\r\n                         <p className=\"font-semibold mb-1\">{primaryB.title}</p>\r\n \r\n-                        <p>\r\n-                          <span className=\"font-semibold\">Yearly Range:</span>{\" \"}\r\n-                          ${maintenanceB.yearlyLow?.toLocaleString?.() ?? \"N/A\"} -\r\n+                        <p><strong>Yearly Range:</strong>  \r\n+                          ${maintenanceB.yearlyLow?.toLocaleString?.() ?? \"N/A\"} \r\n                           ${maintenanceB.yearlyHigh?.toLocaleString?.() ?? \"N/A\"}\r\n                         </p>\r\n \r\n-                        <p>\r\n-                          <span className=\"font-semibold\">Recommended Budget:</span>{\" \"}\r\n+                        <p><strong>Recommended Budget:</strong>  \r\n                           ${maintenanceB.recommendedYearlyBudget?.toLocaleString?.() ?? \"N/A\"}/year\r\n                         </p>\r\n \r\n-                        <p>\r\n-                          <span className=\"font-semibold\">Risk Level:</span>{\" \"}\r\n-                          {maintenanceB.riskLevel?.toUpperCase?.() ?? \"N/A\"}\r\n-                        </p>\r\n+                        <p><strong>Risk Level:</strong> {maintenanceB.riskLevel?.toUpperCase?.() ?? \"N/A\"}</p>\r\n \r\n-                        <p className=\"mt-1 text-muted-foreground\">\r\n-                          {maintenanceB.summary ?? \"N/A\"}\r\n-                        </p>\r\n+                        <p className=\"mt-1 text-muted-foreground\">{maintenanceB.summary ?? \"N/A\"}</p>\r\n \r\n                         {maintenanceB.commonRepairs?.length > 0 && (\r\n                           <>\r\n                             <p className=\"mt-2 font-semibold\">Common Repairs:</p>\r\n                             <ul className=\"list-disc list-inside text-muted-foreground\">\r\n-                              {maintenanceB.commonRepairs.map((r, i) => (\r\n-                                <li key={i}>{r}</li>\r\n+                              {maintenanceB.commonRepairs.map((item, i) => (\r\n+                                <li key={i}>{item}</li>\r\n                               ))}\r\n                             </ul>\r\n                           </>\r\n                         )}\r\n \r\n                         <p className=\"mt-2 text-muted-foreground\">\r\n-                          <span className=\"font-semibold\">Tips:</span>{\" \"}\r\n-                          {maintenanceB.tips ?? \"N/A\"}\r\n+                          <strong>Tips:</strong> {maintenanceB.tips ?? \"N/A\"}\r\n                         </p>\r\n                       </div>\r\n                     )}\r\n+\r\n                   </div>\r\n                 </CardContent>\r\n               </Card>\r\n             )}\r\n+\r\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n"
                },
                {
                    "date": 1764592982950,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,4 @@\n-// src/pages/Compare.tsx\r\n import { useNavigate } from \"react-router-dom\";\r\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { Button } from \"@/components/ui/button\";\r\n import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n@@ -8,17 +7,22 @@\n import { Separator } from \"@/components/ui/separator\";\r\n import { useEffect, useState } from \"react\";\r\n import { useAuthStore } from \"@/stores/authStore\";\r\n import { saveComparison } from \"@/services/carService\";\r\n+\r\n import {\r\n   compareCarsAI,\r\n   type CarCompareResult,\r\n } from \"@/services/aiCompareService\";\r\n+\r\n import {\r\n   estimateMaintenanceCost,\r\n   type MaintenanceEstimate,\r\n } from \"@/services/aiMaintenanceService\";\r\n \r\n+// ---------------------------------------------\r\n+// TYPES\r\n+// ---------------------------------------------\r\n interface Platform {\r\n   name: string;\r\n }\r\n \r\n@@ -35,11 +39,30 @@\n   location?: string;\r\n   platform: Platform[];\r\n }\r\n \r\n+type CarSpecKey =\r\n+  | \"price\"\r\n+  | \"year\"\r\n+  | \"mileage\"\r\n+  | \"condition\"\r\n+  | \"fuelType\"\r\n+  | \"transmission\"\r\n+  | \"location\";\r\n+\r\n+interface SpecItem {\r\n+  label: string;\r\n+  key: CarSpecKey;\r\n+  format?: (value: string | number | undefined) => string;\r\n+}\r\n+\r\n+// ---------------------------------------------\r\n+// MAIN COMPONENT\r\n+// ---------------------------------------------\r\n const Compare = () => {\r\n   const navigate = useNavigate();\r\n-  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n+  const { comparisonList, removeFromComparison, clearComparison } =\r\n+    useComparison();\r\n   const token = useAuthStore((state) => state.token);\r\n \r\n   const [hasSaved, setHasSaved] = useState(false);\r\n \r\n@@ -48,12 +71,16 @@\n   const [aiResult, setAiResult] = useState<CarCompareResult | null>(null);\r\n \r\n   // AI Maintenance\r\n   const [maintLoading, setMaintLoading] = useState(false);\r\n-  const [maintenanceA, setMaintenanceA] = useState<MaintenanceEstimate | null>(null);\r\n-  const [maintenanceB, setMaintenanceB] = useState<MaintenanceEstimate | null>(null);\r\n+  const [maintenanceA, setMaintenanceA] = useState<MaintenanceEstimate | null>(\r\n+    null\r\n+  );\r\n+  const [maintenanceB, setMaintenanceB] = useState<MaintenanceEstimate | null>(\r\n+    null\r\n+  );\r\n \r\n-  // Save comparison once\r\n+  // Save Comparison ONE TIME ONLY\r\n   useEffect(() => {\r\n     const doSave = async () => {\r\n       if (!token) return;\r\n       if (comparisonList.length < 2) return;\r\n@@ -78,20 +105,19 @@\n         <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n         <p className=\"mb-6 text-muted-foreground\">\r\n           Add cars to your comparison list to see them side by side.\r\n         </p>\r\n-\r\n-        <Button onClick={() => navigate(\"/\")} variant=\"default\">\r\n-          Browse Cars\r\n-        </Button>\r\n+        <Button onClick={() => navigate(\"/\")}>Browse Cars</Button>\r\n       </div>\r\n     );\r\n   }\r\n \r\n-  // Build inputs\r\n+  // ---------------------------------------------\r\n+  // BUILD INPUT HELPERS\r\n+  // ---------------------------------------------\r\n   const buildCompareInput = (car: Car) => {\r\n     const parts = car.title.split(\" \");\r\n-    const brand = parts[0] ?? \"\";\r\n+    const brand = parts[0];\r\n     const model = parts.slice(1).join(\" \") || brand;\r\n \r\n     return {\r\n       brand,\r\n@@ -104,9 +130,9 @@\n   };\r\n \r\n   const buildMaintenanceInput = (car: Car) => {\r\n     const parts = car.title.split(\" \");\r\n-    const brand = parts[0] ?? \"\";\r\n+    const brand = parts[0];\r\n     const model = parts.slice(1).join(\" \") || brand;\r\n \r\n     return {\r\n       brand,\r\n@@ -119,11 +145,14 @@\n       transmission: car.transmission,\r\n     };\r\n   };\r\n \r\n+  // ---------------------------------------------\r\n+  // AI HANDLERS\r\n+  // ---------------------------------------------\r\n   const handleAICompare = async () => {\r\n     if (comparisonList.length < 2) {\r\n-      alert(\"Add at least two cars to use AI comparison.\");\r\n+      alert(\"Add at least two cars for AI comparison.\");\r\n       return;\r\n     }\r\n \r\n     const [carA, carB] = comparisonList;\r\n@@ -135,12 +164,13 @@\n       const result = await compareCarsAI(\r\n         buildCompareInput(carA),\r\n         buildCompareInput(carB)\r\n       );\r\n+\r\n       setAiResult(result);\r\n     } catch (err) {\r\n       console.error(\"AI Compare Error:\", err);\r\n-      alert(\"AI comparison failed!\");\r\n+      alert(\"AI comparison failed.\");\r\n     } finally {\r\n       setAiLoading(false);\r\n     }\r\n   };\r\n@@ -151,81 +181,128 @@\n       setMaintenanceA(null);\r\n       setMaintenanceB(null);\r\n \r\n       const primaryA = comparisonList[0];\r\n-      const resA = await estimateMaintenanceCost(buildMaintenanceInput(primaryA));\r\n+      const resA = await estimateMaintenanceCost(\r\n+        buildMaintenanceInput(primaryA)\r\n+      );\r\n       setMaintenanceA(resA);\r\n \r\n       if (comparisonList[1]) {\r\n         const primaryB = comparisonList[1];\r\n-        const resB = await estimateMaintenanceCost(buildMaintenanceInput(primaryB));\r\n+        const resB = await estimateMaintenanceCost(\r\n+          buildMaintenanceInput(primaryB)\r\n+        );\r\n         setMaintenanceB(resB);\r\n       }\r\n     } catch (err) {\r\n       console.error(\"AI Maintenance Error:\", err);\r\n-      alert(\"AI maintenance estimation failed.\");\r\n+      alert(\"AI maintenance estimate failed.\");\r\n     } finally {\r\n       setMaintLoading(false);\r\n     }\r\n   };\r\n \r\n-  const specs = [\r\n-    { label: \"Price\", key: \"price\", format: (v: number) => `$${v?.toLocaleString?.()}` },\r\n-    { label: \"Year\", key: \"year\" },\r\n-    { label: \"Mileage\", key: \"mileage\", format: (v: number) => `${v?.toLocaleString?.()} mi` },\r\n-    { label: \"Condition\", key: \"condition\", format: (v: string) => v ? v[0].toUpperCase() + v.slice(1) : \"N/A\" },\r\n-    { label: \"Fuel Type\", key: \"fuelType\", format: (v: string) => v ? v[0].toUpperCase() + v.slice(1) : \"N/A\" },\r\n-    { label: \"Transmission\", key: \"transmission\", format: (v: string) => v ? v[0].toUpperCase() + v.slice(1) : \"N/A\" },\r\n-    { label: \"Location\", key: \"location\" },\r\n+  // ---------------------------------------------\r\n+  // SPECS TABLE DEFINITION\r\n+  // ---------------------------------------------\r\n+  const specs: SpecItem[] = [\r\n+    {\r\n+      label: \"Price\",\r\n+      key: \"price\",\r\n+      format: (v) =>\r\n+        typeof v === \"number\" ? `$${v.toLocaleString()}` : \"N/A\",\r\n+    },\r\n+    {\r\n+      label: \"Year\",\r\n+      key: \"year\",\r\n+    },\r\n+    {\r\n+      label: \"Mileage\",\r\n+      key: \"mileage\",\r\n+      format: (v) =>\r\n+        typeof v === \"number\" ? `${v.toLocaleString()} mi` : \"N/A\",\r\n+    },\r\n+    {\r\n+      label: \"Condition\",\r\n+      key: \"condition\",\r\n+      format: (v) =>\r\n+        v ? v.toString().charAt(0).toUpperCase() + v.toString().slice(1) : \"N/A\",\r\n+    },\r\n+    {\r\n+      label: \"Fuel Type\",\r\n+      key: \"fuelType\",\r\n+      format: (v) =>\r\n+        v ? v.toString().charAt(0).toUpperCase() + v.toString().slice(1) : \"N/A\",\r\n+    },\r\n+    {\r\n+      label: \"Transmission\",\r\n+      key: \"transmission\",\r\n+      format: (v) =>\r\n+        v ? v.toString().charAt(0).toUpperCase() + v.toString().slice(1) : \"N/A\",\r\n+    },\r\n+    {\r\n+      label: \"Location\",\r\n+      key: \"location\",\r\n+    },\r\n   ];\r\n \r\n   const primaryA = comparisonList[0];\r\n   const primaryB = comparisonList[1];\r\n \r\n+  // ---------------------------------------------\r\n+  // UI\r\n+  // ---------------------------------------------\r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n-\r\n-        {/* Header */}\r\n+        {/* HEADER */}\r\n         <div className=\"mb-6 flex flex-wrap items-center justify-between gap-3\">\r\n-          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n-            <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n+          <Button variant=\"ghost\" onClick={() => navigate(\"/\")}>\r\n+            <ArrowLeft className=\"h-4 w-4\" />\r\n+            Back to Listings\r\n           </Button>\r\n \r\n           <div className=\"flex flex-wrap gap-2\">\r\n-            <Button onClick={handleAICompare} disabled={aiLoading || comparisonList.length < 2}>\r\n+            <Button\r\n+              onClick={handleAICompare}\r\n+              disabled={aiLoading || comparisonList.length < 2}\r\n+            >\r\n               {aiLoading ? \"Analyzing...\" : \"AI Compare (First 2 Cars)\"}\r\n             </Button>\r\n-            <Button variant=\"outline\" onClick={handleAIMaintenance} disabled={maintLoading}>\r\n+\r\n+            <Button variant=\"outline\" onClick={handleAIMaintenance}>\r\n               {maintLoading ? \"Estimating...\" : \"AI Maintenance Cost\"}\r\n             </Button>\r\n+\r\n             <Button variant=\"outline\" onClick={clearComparison}>\r\n               <X className=\"h-4 w-4\" /> Clear All\r\n             </Button>\r\n           </div>\r\n         </div>\r\n \r\n-        {/* Title */}\r\n-        <div className=\"mb-8\">\r\n-          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n-          <p className=\"mt-2 text-muted-foreground\">\r\n-            Compare up to {comparisonList.length} cars side by side.\r\n-          </p>\r\n-        </div>\r\n+        {/* TITLE */}\r\n+        <h1 className=\"text-3xl font-bold mb-6\">Compare Cars</h1>\r\n \r\n         {/* TABLE */}\r\n         <div className=\"overflow-x-auto\">\r\n           <div className=\"min-w-[800px]\">\r\n-\r\n-            {/* Images */}\r\n+            {/* CAR IMAGES */}\r\n             <div\r\n               className=\"mb-6 grid gap-4\"\r\n-              style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}\r\n+              style={{\r\n+                gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)`,\r\n+              }}\r\n             >\r\n               {comparisonList.map((car) => (\r\n                 <Card key={car.id}>\r\n                   <div className=\"relative aspect-video bg-muted\">\r\n-                    <img src={car.images[0]} className=\"h-full w-full object-cover\" />\r\n+                    <img\r\n+                      src={car.images[0]}\r\n+                      alt={car.title}\r\n+                      className=\"h-full w-full object-cover\"\r\n+                    />\r\n+\r\n                     <Button\r\n                       variant=\"secondary\"\r\n                       size=\"icon\"\r\n                       className=\"absolute right-2 top-2 h-8 w-8\"\r\n@@ -233,40 +310,39 @@\n                     >\r\n                       <X className=\"h-4 w-4\" />\r\n                     </Button>\r\n                   </div>\r\n-                  <CardHeader><CardTitle className=\"truncate\">{car.title}</CardTitle></CardHeader>\r\n+\r\n+                  <CardHeader>\r\n+                    <CardTitle className=\"truncate\">{car.title}</CardTitle>\r\n+                  </CardHeader>\r\n                 </Card>\r\n               ))}\r\n             </div>\r\n \r\n             {/* SPECS TABLE */}\r\n             <Card>\r\n               <CardContent className=\"p-0\">\r\n-                {specs.map((spec, index) => (\r\n+                {specs.map((spec, idx) => (\r\n                   <div key={spec.key}>\r\n-                    {index > 0 && <Separator />}\r\n+                    {idx > 0 && <Separator />}\r\n+\r\n                     <div\r\n                       className=\"grid\"\r\n-                      style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}\r\n+                      style={{\r\n+                        gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                      }}\r\n                     >\r\n                       <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n                         {spec.label}\r\n                       </div>\r\n \r\n                       {comparisonList.map((car) => {\r\n-                        const raw = (car as any)[spec.key];\r\n+                        const value = car[spec.key];\r\n+                        const display = spec.format\r\n+                          ? spec.format(value)\r\n+                          : value?.toString?.() ?? \"N/A\";\r\n \r\n-                        let display = \"N/A\";\r\n-\r\n-                        if (spec.format && (typeof raw === \"number\" || typeof raw === \"string\")) {\r\n-                          display = spec.format(raw);\r\n-                        } else if (typeof raw === \"string\" || typeof raw === \"number\") {\r\n-                          display = raw.toString();\r\n-                        } else if (raw) {\r\n-                          display = String(raw);\r\n-                        }\r\n-\r\n                         return (\r\n                           <div key={car.id} className=\"p-4 text-sm\">\r\n                             {display}\r\n                           </div>\r\n@@ -277,99 +353,137 @@\n                 ))}\r\n \r\n                 <Separator />\r\n \r\n-                {/* Platforms */}\r\n+                {/* PLATFORMS */}\r\n                 <div\r\n                   className=\"grid\"\r\n-                  style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}\r\n+                  style={{\r\n+                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                  }}\r\n                 >\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                  <div className=\"border-r p-4 font-semibold bg-muted/50\">\r\n                     Listed On\r\n                   </div>\r\n+\r\n                   {comparisonList.map((car) => (\r\n                     <div key={car.id} className=\"p-4\">\r\n                       <div className=\"flex flex-wrap gap-1\">\r\n                         {car.platform.map((p, i) => (\r\n-                          <Badge key={i} variant=\"secondary\">{p.name}</Badge>\r\n+                          <Badge key={i} variant=\"secondary\">\r\n+                            {p.name}\r\n+                          </Badge>\r\n                         ))}\r\n                       </div>\r\n                     </div>\r\n                   ))}\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                {/* View Details */}\r\n+                {/* VIEW DETAILS */}\r\n                 <div\r\n                   className=\"grid\"\r\n-                  style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}\r\n+                  style={{\r\n+                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                  }}\r\n                 >\r\n-                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                  <div className=\"border-r p-4 font-semibold bg-muted/50\">\r\n                     Actions\r\n                   </div>\r\n+\r\n                   {comparisonList.map((car) => (\r\n                     <div key={car.id} className=\"p-4\">\r\n-                      <Button className=\"w-full\" onClick={() => navigate(`/car/${car.id}`)}>\r\n+                      <Button\r\n+                        className=\"w-full\"\r\n+                        onClick={() => navigate(`/car/${car.id}`)}\r\n+                      >\r\n                         View Details\r\n                       </Button>\r\n                     </div>\r\n                   ))}\r\n                 </div>\r\n               </CardContent>\r\n             </Card>\r\n \r\n-            {/* AI COMPARISON */}\r\n+            {/* AI COMPARISON RESULT */}\r\n             {aiResult && primaryA && primaryB && (\r\n               <Card className=\"mt-6\">\r\n-                <CardHeader><CardTitle>AI Comparison Result</CardTitle></CardHeader>\r\n+                <CardHeader>\r\n+                  <CardTitle>AI Comparison Result</CardTitle>\r\n+                </CardHeader>\r\n+\r\n                 <CardContent className=\"space-y-4 text-sm\">\r\n-                  <p><strong>Better Car:</strong> {aiResult.betterCar === \"A\" ? primaryA.title : primaryB.title}</p>\r\n-                  <p><strong>Reason:</strong> {aiResult.reason}</p>\r\n+                  <p>\r\n+                    <strong>Better Car:</strong>{\" \"}\r\n+                    {aiResult.betterCar === \"A\" ? primaryA.title : primaryB.title}\r\n+                  </p>\r\n+\r\n+                  <p>\r\n+                    <strong>Reason:</strong> {aiResult.reason}\r\n+                  </p>\r\n+\r\n                   <Separator />\r\n+\r\n                   <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    {Object.entries(aiResult.detailedComparison).map(([k, v]) => (\r\n-                      <div key={k}>\r\n-                        <strong>{k.replace(/([A-Z])/g, \" $1\")}:</strong>\r\n-                        <p className=\"text-muted-foreground\">{v}</p>\r\n-                      </div>\r\n-                    ))}\r\n+                    {Object.entries(aiResult.detailedComparison).map(\r\n+                      ([key, value]) => (\r\n+                        <div key={key}>\r\n+                          <strong>\r\n+                            {key.replace(/([A-Z])/g, \" $1\").trim()}\r\n+                          </strong>\r\n+                          <p className=\"text-muted-foreground\">{value}</p>\r\n+                        </div>\r\n+                      )\r\n+                    )}\r\n                   </div>\r\n                 </CardContent>\r\n               </Card>\r\n             )}\r\n \r\n             {/* AI MAINTENANCE */}\r\n             {(maintenanceA || maintenanceB) && (\r\n               <Card className=\"mt-6\">\r\n-                <CardHeader><CardTitle>AI Maintenance Cost Estimate</CardTitle></CardHeader>\r\n+                <CardHeader>\r\n+                  <CardTitle>AI Maintenance Cost Estimate</CardTitle>\r\n+                </CardHeader>\r\n+\r\n                 <CardContent className=\"space-y-4 text-sm\">\r\n                   <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    \r\n                     {/* CAR A */}\r\n                     {primaryA && maintenanceA && (\r\n                       <div className=\"border rounded-lg p-3\">\r\n                         <p className=\"font-semibold mb-1\">{primaryA.title}</p>\r\n \r\n-                        <p><strong>Yearly Range:</strong>  \r\n+                        <p>\r\n+                          <strong>Yearly Range:</strong>{\" \"}\r\n                           ${maintenanceA.yearlyLow?.toLocaleString?.() ?? \"N/A\"} \r\n                           ${maintenanceA.yearlyHigh?.toLocaleString?.() ?? \"N/A\"}\r\n                         </p>\r\n \r\n-                        <p><strong>Recommended Budget:</strong>  \r\n-                          ${maintenanceA.recommendedYearlyBudget?.toLocaleString?.() ?? \"N/A\"}/year\r\n+                        <p>\r\n+                          <strong>Recommended Budget:</strong>{\" \"}\r\n+                          $\r\n+                          {maintenanceA.recommendedYearlyBudget?.toLocaleString?.() ??\r\n+                            \"N/A\"}\r\n+                          /year\r\n                         </p>\r\n \r\n-                        <p><strong>Risk Level:</strong> {maintenanceA.riskLevel?.toUpperCase?.() ?? \"N/A\"}</p>\r\n+                        <p>\r\n+                          <strong>Risk Level:</strong>{\" \"}\r\n+                          {maintenanceA.riskLevel?.toUpperCase?.() ?? \"N/A\"}\r\n+                        </p>\r\n \r\n-                        <p className=\"mt-1 text-muted-foreground\">{maintenanceA.summary ?? \"N/A\"}</p>\r\n+                        <p className=\"mt-1 text-muted-foreground\">\r\n+                          {maintenanceA.summary ?? \"N/A\"}\r\n+                        </p>\r\n \r\n                         {maintenanceA.commonRepairs?.length > 0 && (\r\n                           <>\r\n                             <p className=\"mt-2 font-semibold\">Common Repairs:</p>\r\n                             <ul className=\"list-disc list-inside text-muted-foreground\">\r\n-                              {maintenanceA.commonRepairs.map((item, i) => (\r\n-                                <li key={i}>{item}</li>\r\n+                              {maintenanceA.commonRepairs.map((r, i) => (\r\n+                                <li key={i}>{r}</li>\r\n                               ))}\r\n                             </ul>\r\n                           </>\r\n                         )}\r\n@@ -384,27 +498,37 @@\n                     {primaryB && maintenanceB && (\r\n                       <div className=\"border rounded-lg p-3\">\r\n                         <p className=\"font-semibold mb-1\">{primaryB.title}</p>\r\n \r\n-                        <p><strong>Yearly Range:</strong>  \r\n+                        <p>\r\n+                          <strong>Yearly Range:</strong>{\" \"}\r\n                           ${maintenanceB.yearlyLow?.toLocaleString?.() ?? \"N/A\"} \r\n                           ${maintenanceB.yearlyHigh?.toLocaleString?.() ?? \"N/A\"}\r\n                         </p>\r\n \r\n-                        <p><strong>Recommended Budget:</strong>  \r\n-                          ${maintenanceB.recommendedYearlyBudget?.toLocaleString?.() ?? \"N/A\"}/year\r\n+                        <p>\r\n+                          <strong>Recommended Budget:</strong>{\" \"}\r\n+                          $\r\n+                          {maintenanceB.recommendedYearlyBudget?.toLocaleString?.() ??\r\n+                            \"N/A\"}\r\n+                          /year\r\n                         </p>\r\n \r\n-                        <p><strong>Risk Level:</strong> {maintenanceB.riskLevel?.toUpperCase?.() ?? \"N/A\"}</p>\r\n+                        <p>\r\n+                          <strong>Risk Level:</strong>{\" \"}\r\n+                          {maintenanceB.riskLevel?.toUpperCase?.() ?? \"N/A\"}\r\n+                        </p>\r\n \r\n-                        <p className=\"mt-1 text-muted-foreground\">{maintenanceB.summary ?? \"N/A\"}</p>\r\n+                        <p className=\"mt-1 text-muted-foreground\">\r\n+                          {maintenanceB.summary ?? \"N/A\"}\r\n+                        </p>\r\n \r\n                         {maintenanceB.commonRepairs?.length > 0 && (\r\n                           <>\r\n                             <p className=\"mt-2 font-semibold\">Common Repairs:</p>\r\n                             <ul className=\"list-disc list-inside text-muted-foreground\">\r\n-                              {maintenanceB.commonRepairs.map((item, i) => (\r\n-                                <li key={i}>{item}</li>\r\n+                              {maintenanceB.commonRepairs.map((r, i) => (\r\n+                                <li key={i}>{r}</li>\r\n                               ))}\r\n                             </ul>\r\n                           </>\r\n                         )}\r\n@@ -413,14 +537,12 @@\n                           <strong>Tips:</strong> {maintenanceB.tips ?? \"N/A\"}\r\n                         </p>\r\n                       </div>\r\n                     )}\r\n-\r\n                   </div>\r\n                 </CardContent>\r\n               </Card>\r\n             )}\r\n-\r\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n"
                },
                {
                    "date": 1764594003313,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,9 +78,11 @@\n   const [maintenanceB, setMaintenanceB] = useState<MaintenanceEstimate | null>(\r\n     null\r\n   );\r\n \r\n-  // Save Comparison ONE TIME ONLY\r\n+  // ---------------------------------------------\r\n+  // SAVE COMPARISON ONE TIME\r\n+  // ---------------------------------------------\r\n   useEffect(() => {\r\n     const doSave = async () => {\r\n       if (!token) return;\r\n       if (comparisonList.length < 2) return;\r\n@@ -100,14 +102,16 @@\n   }, [comparisonList, token, hasSaved]);\r\n \r\n   if (comparisonList.length === 0) {\r\n     return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n-        <p className=\"mb-6 text-muted-foreground\">\r\n+      <div className=\"container mx-auto px-3 py-20 text-center\">\r\n+        <h1 className=\"mb-3 text-xl font-bold\">No Cars to Compare</h1>\r\n+        <p className=\"mb-4 text-sm text-muted-foreground\">\r\n           Add cars to your comparison list to see them side by side.\r\n         </p>\r\n-        <Button onClick={() => navigate(\"/\")}>Browse Cars</Button>\r\n+        <Button size=\"sm\" onClick={() => navigate(\"/\")}>\r\n+          Browse Cars\r\n+        </Button>\r\n       </div>\r\n     );\r\n   }\r\n \r\n@@ -115,14 +119,11 @@\n   // BUILD INPUT HELPERS\r\n   // ---------------------------------------------\r\n   const buildCompareInput = (car: Car) => {\r\n     const parts = car.title.split(\" \");\r\n-    const brand = parts[0];\r\n-    const model = parts.slice(1).join(\" \") || brand;\r\n-\r\n     return {\r\n-      brand,\r\n-      model,\r\n+      brand: parts[0],\r\n+      model: parts.slice(1).join(\" \") || parts[0],\r\n       year: car.year,\r\n       mileage: car.mileage,\r\n       price: car.price,\r\n       condition: car.condition,\r\n@@ -130,14 +131,11 @@\n   };\r\n \r\n   const buildMaintenanceInput = (car: Car) => {\r\n     const parts = car.title.split(\" \");\r\n-    const brand = parts[0];\r\n-    const model = parts.slice(1).join(\" \") || brand;\r\n-\r\n     return {\r\n-      brand,\r\n-      model,\r\n+      brand: parts[0],\r\n+      model: parts.slice(1).join(\" \") || parts[0],\r\n       year: car.year,\r\n       mileage: car.mileage,\r\n       price: car.price,\r\n       condition: car.condition,\r\n@@ -159,17 +157,13 @@\n \r\n     try {\r\n       setAiLoading(true);\r\n       setAiResult(null);\r\n-\r\n-      const result = await compareCarsAI(\r\n-        buildCompareInput(carA),\r\n-        buildCompareInput(carB)\r\n+      setAiResult(\r\n+        await compareCarsAI(buildCompareInput(carA), buildCompareInput(carB))\r\n       );\r\n-\r\n-      setAiResult(result);\r\n     } catch (err) {\r\n-      console.error(\"AI Compare Error:\", err);\r\n+      console.error(err);\r\n       alert(\"AI comparison failed.\");\r\n     } finally {\r\n       setAiLoading(false);\r\n     }\r\n@@ -180,71 +174,38 @@\n       setMaintLoading(true);\r\n       setMaintenanceA(null);\r\n       setMaintenanceB(null);\r\n \r\n-      const primaryA = comparisonList[0];\r\n       const resA = await estimateMaintenanceCost(\r\n-        buildMaintenanceInput(primaryA)\r\n+        buildMaintenanceInput(comparisonList[0])\r\n       );\r\n       setMaintenanceA(resA);\r\n \r\n       if (comparisonList[1]) {\r\n-        const primaryB = comparisonList[1];\r\n         const resB = await estimateMaintenanceCost(\r\n-          buildMaintenanceInput(primaryB)\r\n+          buildMaintenanceInput(comparisonList[1])\r\n         );\r\n         setMaintenanceB(resB);\r\n       }\r\n     } catch (err) {\r\n-      console.error(\"AI Maintenance Error:\", err);\r\n+      console.error(err);\r\n       alert(\"AI maintenance estimate failed.\");\r\n     } finally {\r\n       setMaintLoading(false);\r\n     }\r\n   };\r\n \r\n   // ---------------------------------------------\r\n-  // SPECS TABLE DEFINITION\r\n+  // SPECS\r\n   // ---------------------------------------------\r\n   const specs: SpecItem[] = [\r\n-    {\r\n-      label: \"Price\",\r\n-      key: \"price\",\r\n-      format: (v) =>\r\n-        typeof v === \"number\" ? `$${v.toLocaleString()}` : \"N/A\",\r\n-    },\r\n-    {\r\n-      label: \"Year\",\r\n-      key: \"year\",\r\n-    },\r\n-    {\r\n-      label: \"Mileage\",\r\n-      key: \"mileage\",\r\n-      format: (v) =>\r\n-        typeof v === \"number\" ? `${v.toLocaleString()} mi` : \"N/A\",\r\n-    },\r\n-    {\r\n-      label: \"Condition\",\r\n-      key: \"condition\",\r\n-      format: (v) =>\r\n-        v ? v.toString().charAt(0).toUpperCase() + v.toString().slice(1) : \"N/A\",\r\n-    },\r\n-    {\r\n-      label: \"Fuel Type\",\r\n-      key: \"fuelType\",\r\n-      format: (v) =>\r\n-        v ? v.toString().charAt(0).toUpperCase() + v.toString().slice(1) : \"N/A\",\r\n-    },\r\n-    {\r\n-      label: \"Transmission\",\r\n-      key: \"transmission\",\r\n-      format: (v) =>\r\n-        v ? v.toString().charAt(0).toUpperCase() + v.toString().slice(1) : \"N/A\",\r\n-    },\r\n-    {\r\n-      label: \"Location\",\r\n-      key: \"location\",\r\n-    },\r\n+    { label: \"Price\", key: \"price\", format: (v) => (typeof v === \"number\" ? `$${v}` : \"N/A\") },\r\n+    { label: \"Year\", key: \"year\" },\r\n+    { label: \"Mileage\", key: \"mileage\", format: (v) => `${v} mi` },\r\n+    { label: \"Condition\", key: \"condition\" },\r\n+    { label: \"Fuel Type\", key: \"fuelType\" },\r\n+    { label: \"Transmission\", key: \"transmission\" },\r\n+    { label: \"Location\", key: \"location\" },\r\n   ];\r\n \r\n   const primaryA = comparisonList[0];\r\n   const primaryB = comparisonList[1];\r\n@@ -253,50 +214,63 @@\n   // UI\r\n   // ---------------------------------------------\r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n+      <div className=\"container mx-auto px-2 py-4\">\r\n+\r\n         {/* HEADER */}\r\n-        <div className=\"mb-6 flex flex-wrap items-center justify-between gap-3\">\r\n-          <Button variant=\"ghost\" onClick={() => navigate(\"/\")}>\r\n-            <ArrowLeft className=\"h-4 w-4\" />\r\n-            Back to Listings\r\n+        <div className=\"mb-4 flex items-center justify-between\">\r\n+          <Button\r\n+            size=\"sm\"\r\n+            variant=\"ghost\"\r\n+            onClick={() => navigate(\"/\")}\r\n+            className=\"text-xs gap-1\"\r\n+          >\r\n+            <ArrowLeft className=\"h-3 w-3\" />\r\n+            Back\r\n           </Button>\r\n \r\n-          <div className=\"flex flex-wrap gap-2\">\r\n+          <div className=\"flex gap-1\">\r\n+            <Button size=\"sm\" className=\"text-xs\" onClick={handleAICompare}>\r\n+              {aiLoading ? \"...\" : \"AI Compare\"}\r\n+            </Button>\r\n+\r\n             <Button\r\n-              onClick={handleAICompare}\r\n-              disabled={aiLoading || comparisonList.length < 2}\r\n+              size=\"sm\"\r\n+              className=\"text-xs\"\r\n+              variant=\"outline\"\r\n+              onClick={handleAIMaintenance}\r\n             >\r\n-              {aiLoading ? \"Analyzing...\" : \"AI Compare (First 2 Cars)\"}\r\n+              {maintLoading ? \"...\" : \"AI Maintenance\"}\r\n             </Button>\r\n \r\n-            <Button variant=\"outline\" onClick={handleAIMaintenance}>\r\n-              {maintLoading ? \"Estimating...\" : \"AI Maintenance Cost\"}\r\n+            <Button\r\n+              size=\"sm\"\r\n+              variant=\"outline\"\r\n+              className=\"text-xs\"\r\n+              onClick={clearComparison}\r\n+            >\r\n+              <X className=\"h-3 w-3\" /> Clear\r\n             </Button>\r\n-\r\n-            <Button variant=\"outline\" onClick={clearComparison}>\r\n-              <X className=\"h-4 w-4\" /> Clear All\r\n-            </Button>\r\n           </div>\r\n         </div>\r\n \r\n         {/* TITLE */}\r\n-        <h1 className=\"text-3xl font-bold mb-6\">Compare Cars</h1>\r\n+        <h1 className=\"text-lg font-bold mb-3\">Compare Cars</h1>\r\n \r\n-        {/* TABLE */}\r\n         <div className=\"overflow-x-auto\">\r\n-          <div className=\"min-w-[800px]\">\r\n-            {/* CAR IMAGES */}\r\n+          <div className=\"min-w-[650px]\">\r\n+\r\n+            {/* IMAGES */}\r\n             <div\r\n-              className=\"mb-6 grid gap-4\"\r\n+              className=\"mb-4 grid gap-2\"\r\n               style={{\r\n                 gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)`,\r\n               }}\r\n             >\r\n               {comparisonList.map((car) => (\r\n                 <Card key={car.id}>\r\n-                  <div className=\"relative aspect-video bg-muted\">\r\n+                  <div className=\"relative aspect-[4/3] bg-muted\">\r\n                     <img\r\n                       src={car.images[0]}\r\n                       alt={car.title}\r\n                       className=\"h-full w-full object-cover\"\r\n@@ -304,47 +278,47 @@\n \r\n                     <Button\r\n                       variant=\"secondary\"\r\n                       size=\"icon\"\r\n-                      className=\"absolute right-2 top-2 h-8 w-8\"\r\n+                      className=\"absolute right-1 top-1 h-6 w-6\"\r\n                       onClick={() => removeFromComparison(car.id)}\r\n                     >\r\n-                      <X className=\"h-4 w-4\" />\r\n+                      <X className=\"h-3 w-3\" />\r\n                     </Button>\r\n                   </div>\r\n \r\n                   <CardHeader>\r\n-                    <CardTitle className=\"truncate\">{car.title}</CardTitle>\r\n+                    <CardTitle className=\"truncate text-sm\">{car.title}</CardTitle>\r\n                   </CardHeader>\r\n                 </Card>\r\n               ))}\r\n             </div>\r\n \r\n-            {/* SPECS TABLE */}\r\n+            {/* SPECS */}\r\n             <Card>\r\n-              <CardContent className=\"p-0\">\r\n+              <CardContent className=\"p-0 text-xs\">\r\n                 {specs.map((spec, idx) => (\r\n                   <div key={spec.key}>\r\n                     {idx > 0 && <Separator />}\r\n \r\n                     <div\r\n                       className=\"grid\"\r\n                       style={{\r\n-                        gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                        gridTemplateColumns: `120px repeat(${comparisonList.length}, 1fr)`,\r\n                       }}\r\n                     >\r\n-                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n+                      {/* LABEL */}\r\n+                      <div className=\"border-r p-2 font-semibold bg-muted/50\">\r\n                         {spec.label}\r\n                       </div>\r\n \r\n+                      {/* VALUES */}\r\n                       {comparisonList.map((car) => {\r\n-                        const value = car[spec.key];\r\n-                        const display = spec.format\r\n-                          ? spec.format(value)\r\n-                          : value?.toString?.() ?? \"N/A\";\r\n+                        const v = car[spec.key];\r\n+                        const display = spec.format ? spec.format(v) : v || \"N/A\";\r\n \r\n                         return (\r\n-                          <div key={car.id} className=\"p-4 text-sm\">\r\n+                          <div key={car.id} className=\"p-2\">\r\n                             {display}\r\n                           </div>\r\n                         );\r\n                       })}\r\n@@ -357,20 +331,20 @@\n                 {/* PLATFORMS */}\r\n                 <div\r\n                   className=\"grid\"\r\n                   style={{\r\n-                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                    gridTemplateColumns: `120px repeat(${comparisonList.length}, 1fr)`,\r\n                   }}\r\n                 >\r\n-                  <div className=\"border-r p-4 font-semibold bg-muted/50\">\r\n-                    Listed On\r\n+                  <div className=\"border-r p-2 font-semibold bg-muted/50\">\r\n+                    Platforms\r\n                   </div>\r\n \r\n                   {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n+                    <div key={car.id} className=\"p-2\">\r\n                       <div className=\"flex flex-wrap gap-1\">\r\n                         {car.platform.map((p, i) => (\r\n-                          <Badge key={i} variant=\"secondary\">\r\n+                          <Badge key={i} variant=\"secondary\" className=\"text-[10px]\">\r\n                             {p.name}\r\n                           </Badge>\r\n                         ))}\r\n                       </div>\r\n@@ -379,172 +353,148 @@\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                {/* VIEW DETAILS */}\r\n+                {/* ACTIONS */}\r\n                 <div\r\n                   className=\"grid\"\r\n                   style={{\r\n-                    gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)`,\r\n+                    gridTemplateColumns: `120px repeat(${comparisonList.length}, 1fr)`,\r\n                   }}\r\n                 >\r\n-                  <div className=\"border-r p-4 font-semibold bg-muted/50\">\r\n+                  <div className=\"border-r p-2 font-semibold bg-muted/50\">\r\n                     Actions\r\n                   </div>\r\n \r\n                   {comparisonList.map((car) => (\r\n-                    <div key={car.id} className=\"p-4\">\r\n+                    <div key={car.id} className=\"p-2\">\r\n                       <Button\r\n-                        className=\"w-full\"\r\n+                        size=\"sm\"\r\n+                        className=\"w-full text-xs\"\r\n                         onClick={() => navigate(`/car/${car.id}`)}\r\n                       >\r\n-                        View Details\r\n+                        Details\r\n                       </Button>\r\n                     </div>\r\n                   ))}\r\n                 </div>\r\n               </CardContent>\r\n             </Card>\r\n \r\n-            {/* AI COMPARISON RESULT */}\r\n+            {/* AI COMPARISON */}\r\n             {aiResult && primaryA && primaryB && (\r\n-              <Card className=\"mt-6\">\r\n+              <Card className=\"mt-4 text-xs\">\r\n                 <CardHeader>\r\n-                  <CardTitle>AI Comparison Result</CardTitle>\r\n+                  <CardTitle className=\"text-sm\">AI Comparison Result</CardTitle>\r\n                 </CardHeader>\r\n-\r\n-                <CardContent className=\"space-y-4 text-sm\">\r\n+                <CardContent className=\"space-y-2\">\r\n                   <p>\r\n                     <strong>Better Car:</strong>{\" \"}\r\n                     {aiResult.betterCar === \"A\" ? primaryA.title : primaryB.title}\r\n                   </p>\r\n-\r\n                   <p>\r\n                     <strong>Reason:</strong> {aiResult.reason}\r\n                   </p>\r\n \r\n                   <Separator />\r\n \r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    {Object.entries(aiResult.detailedComparison).map(\r\n-                      ([key, value]) => (\r\n-                        <div key={key}>\r\n-                          <strong>\r\n-                            {key.replace(/([A-Z])/g, \" $1\").trim()}\r\n-                          </strong>\r\n-                          <p className=\"text-muted-foreground\">{value}</p>\r\n-                        </div>\r\n-                      )\r\n-                    )}\r\n-                  </div>\r\n+                  {Object.entries(aiResult.detailedComparison).map(\r\n+                    ([k, v]) => (\r\n+                      <div key={k}>\r\n+                        <strong>{k}:</strong>\r\n+                        <p className=\"text-muted-foreground\">{v}</p>\r\n+                      </div>\r\n+                    )\r\n+                  )}\r\n                 </CardContent>\r\n               </Card>\r\n             )}\r\n \r\n             {/* AI MAINTENANCE */}\r\n             {(maintenanceA || maintenanceB) && (\r\n-              <Card className=\"mt-6\">\r\n+              <Card className=\"mt-4 text-xs\">\r\n                 <CardHeader>\r\n-                  <CardTitle>AI Maintenance Cost Estimate</CardTitle>\r\n+                  <CardTitle className=\"text-sm\">\r\n+                    AI Maintenance Estimate\r\n+                  </CardTitle>\r\n                 </CardHeader>\r\n \r\n-                <CardContent className=\"space-y-4 text-sm\">\r\n-                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n-                    {/* CAR A */}\r\n-                    {primaryA && maintenanceA && (\r\n-                      <div className=\"border rounded-lg p-3\">\r\n-                        <p className=\"font-semibold mb-1\">{primaryA.title}</p>\r\n+                <CardContent className=\"grid gap-3\">\r\n+                  {primaryA && maintenanceA && (\r\n+                    <div className=\"border rounded-md p-2\">\r\n+                      <p className=\"font-semibold mb-1 text-sm\">{primaryA.title}</p>\r\n \r\n-                        <p>\r\n-                          <strong>Yearly Range:</strong>{\" \"}\r\n-                          ${maintenanceA.yearlyLow?.toLocaleString?.() ?? \"N/A\"} \r\n-                          ${maintenanceA.yearlyHigh?.toLocaleString?.() ?? \"N/A\"}\r\n-                        </p>\r\n+                      <p>\r\n+                        <strong>Yearly Range:</strong>{\" \"}\r\n+                        ${maintenanceA.yearlyLow}  ${maintenanceA.yearlyHigh}\r\n+                      </p>\r\n \r\n-                        <p>\r\n-                          <strong>Recommended Budget:</strong>{\" \"}\r\n-                          $\r\n-                          {maintenanceA.recommendedYearlyBudget?.toLocaleString?.() ??\r\n-                            \"N/A\"}\r\n-                          /year\r\n-                        </p>\r\n+                      <p>\r\n+                        <strong>Budget:</strong> ${maintenanceA.recommendedYearlyBudget}/year\r\n+                      </p>\r\n \r\n-                        <p>\r\n-                          <strong>Risk Level:</strong>{\" \"}\r\n-                          {maintenanceA.riskLevel?.toUpperCase?.() ?? \"N/A\"}\r\n-                        </p>\r\n+                      <p>\r\n+                        <strong>Risk:</strong>{\" \"}\r\n+                        {maintenanceA.riskLevel?.toUpperCase()}\r\n+                      </p>\r\n \r\n-                        <p className=\"mt-1 text-muted-foreground\">\r\n-                          {maintenanceA.summary ?? \"N/A\"}\r\n-                        </p>\r\n+                      <p className=\"text-muted-foreground mt-1\">\r\n+                        {maintenanceA.summary}\r\n+                      </p>\r\n \r\n-                        {maintenanceA.commonRepairs?.length > 0 && (\r\n-                          <>\r\n-                            <p className=\"mt-2 font-semibold\">Common Repairs:</p>\r\n-                            <ul className=\"list-disc list-inside text-muted-foreground\">\r\n-                              {maintenanceA.commonRepairs.map((r, i) => (\r\n-                                <li key={i}>{r}</li>\r\n-                              ))}\r\n-                            </ul>\r\n-                          </>\r\n-                        )}\r\n+                      <p className=\"mt-2 font-semibold\">Common Repairs:</p>\r\n+                      <ul className=\"list-disc list-inside\">\r\n+                        {maintenanceA.commonRepairs?.map((r, i) => (\r\n+                          <li key={i}>{r}</li>\r\n+                        ))}\r\n+                      </ul>\r\n \r\n-                        <p className=\"mt-2 text-muted-foreground\">\r\n-                          <strong>Tips:</strong> {maintenanceA.tips ?? \"N/A\"}\r\n-                        </p>\r\n-                      </div>\r\n-                    )}\r\n+                      <p className=\"mt-2\">\r\n+                        <strong>Tips:</strong> {maintenanceA.tips}\r\n+                      </p>\r\n+                    </div>\r\n+                  )}\r\n \r\n-                    {/* CAR B */}\r\n-                    {primaryB && maintenanceB && (\r\n-                      <div className=\"border rounded-lg p-3\">\r\n-                        <p className=\"font-semibold mb-1\">{primaryB.title}</p>\r\n+                  {primaryB && maintenanceB && (\r\n+                    <div className=\"border rounded-md p-2\">\r\n+                      <p className=\"font-semibold mb-1 text-sm\">{primaryB.title}</p>\r\n \r\n-                        <p>\r\n-                          <strong>Yearly Range:</strong>{\" \"}\r\n-                          ${maintenanceB.yearlyLow?.toLocaleString?.() ?? \"N/A\"} \r\n-                          ${maintenanceB.yearlyHigh?.toLocaleString?.() ?? \"N/A\"}\r\n-                        </p>\r\n+                      <p>\r\n+                        <strong>Yearly Range:</strong>{\" \"}\r\n+                        ${maintenanceB.yearlyLow}  ${maintenanceB.yearlyHigh}\r\n+                      </p>\r\n \r\n-                        <p>\r\n-                          <strong>Recommended Budget:</strong>{\" \"}\r\n-                          $\r\n-                          {maintenanceB.recommendedYearlyBudget?.toLocaleString?.() ??\r\n-                            \"N/A\"}\r\n-                          /year\r\n-                        </p>\r\n+                      <p>\r\n+                        <strong>Budget:</strong> ${maintenanceB.recommendedYearlyBudget}/year\r\n+                      </p>\r\n \r\n-                        <p>\r\n-                          <strong>Risk Level:</strong>{\" \"}\r\n-                          {maintenanceB.riskLevel?.toUpperCase?.() ?? \"N/A\"}\r\n-                        </p>\r\n+                      <p>\r\n+                        <strong>Risk:</strong>{\" \"}\r\n+                        {maintenanceB.riskLevel?.toUpperCase()}\r\n+                      </p>\r\n \r\n-                        <p className=\"mt-1 text-muted-foreground\">\r\n-                          {maintenanceB.summary ?? \"N/A\"}\r\n-                        </p>\r\n+                      <p className=\"text-muted-foreground mt-1\">\r\n+                        {maintenanceB.summary}\r\n+                      </p>\r\n \r\n-                        {maintenanceB.commonRepairs?.length > 0 && (\r\n-                          <>\r\n-                            <p className=\"mt-2 font-semibold\">Common Repairs:</p>\r\n-                            <ul className=\"list-disc list-inside text-muted-foreground\">\r\n-                              {maintenanceB.commonRepairs.map((r, i) => (\r\n-                                <li key={i}>{r}</li>\r\n-                              ))}\r\n-                            </ul>\r\n-                          </>\r\n-                        )}\r\n+                      <ul className=\"list-disc list-inside\">\r\n+                        {maintenanceB.commonRepairs?.map((r, i) => (\r\n+                          <li key={i}>{r}</li>\r\n+                        ))}\r\n+                      </ul>\r\n \r\n-                        <p className=\"mt-2 text-muted-foreground\">\r\n-                          <strong>Tips:</strong> {maintenanceB.tips ?? \"N/A\"}\r\n-                        </p>\r\n-                      </div>\r\n-                    )}\r\n-                  </div>\r\n+                      <p className=\"mt-2\">\r\n+                        <strong>Tips:</strong> {maintenanceB.tips}\r\n+                      </p>\r\n+                    </div>\r\n+                  )}\r\n                 </CardContent>\r\n               </Card>\r\n             )}\r\n+\r\n           </div>\r\n         </div>\r\n+\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n"
                }
            ],
            "date": 1759428022471,
            "name": "Commit-0",
            "content": "import { useNavigate } from \"react-router-dom\";\r\nimport { useComparison } from \"@/contexts/ComparisonContext\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ArrowLeft, X } from \"lucide-react\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\n\r\nconst Compare = () => {\r\n  const navigate = useNavigate();\r\n  const { comparisonList, removeFromComparison, clearComparison } = useComparison();\r\n\r\n  if (comparisonList.length === 0) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n        <h1 className=\"mb-4 text-3xl font-bold\">No Cars to Compare</h1>\r\n        <p className=\"mb-6 text-muted-foreground\">\r\n          Add cars to your comparison list to see them side by side.\r\n        </p>\r\n        <Button onClick={() => navigate(\"/\")} variant=\"accent\">\r\n          Browse Cars\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const specs: Array<{\r\n    label: string;\r\n    key: string;\r\n    format?: (val: any) => string;\r\n  }> = [\r\n    { label: \"Price\", key: \"price\", format: (val: number) => `$${val.toLocaleString()}` },\r\n    { label: \"Year\", key: \"year\" },\r\n    { label: \"Mileage\", key: \"mileage\", format: (val: number) => `${val.toLocaleString()} mi` },\r\n    { label: \"Condition\", key: \"condition\", format: (val: string) => val.charAt(0).toUpperCase() + val.slice(1) },\r\n    { label: \"Fuel Type\", key: \"fuelType\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n    { label: \"Transmission\", key: \"transmission\", format: (val: string) => val ? val.charAt(0).toUpperCase() + val.slice(1) : \"N/A\" },\r\n    { label: \"Location\", key: \"location\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"mb-6 flex items-center justify-between\">\r\n          <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"gap-2\">\r\n            <ArrowLeft className=\"h-4 w-4\" />\r\n            Back to Listings\r\n          </Button>\r\n          <Button variant=\"outline\" onClick={clearComparison} className=\"gap-2\">\r\n            <X className=\"h-4 w-4\" />\r\n            Clear All\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold\">Compare Cars</h1>\r\n          <p className=\"mt-2 text-muted-foreground\">\r\n            Compare up to {comparisonList.length} of 3 cars side by side\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"overflow-x-auto\">\r\n          <div className=\"min-w-[800px]\">\r\n            {/* Car Images & Titles */}\r\n            <div className=\"mb-6 grid gap-4\" style={{ gridTemplateColumns: `repeat(${comparisonList.length}, 1fr)` }}>\r\n              {comparisonList.map((car) => (\r\n                <Card key={car.id} className=\"overflow-hidden\">\r\n                  <div className=\"relative aspect-video overflow-hidden bg-muted\">\r\n                    <img src={car.images[0]} alt={car.title} className=\"h-full w-full object-cover\" />\r\n                    <Button\r\n                      variant=\"secondary\"\r\n                      size=\"icon\"\r\n                      className=\"absolute right-2 top-2 h-8 w-8 bg-card/90 backdrop-blur-sm\"\r\n                      onClick={() => removeFromComparison(car.id)}\r\n                    >\r\n                      <X className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                  <CardHeader className=\"p-4\">\r\n                    <CardTitle className=\"line-clamp-2 text-lg\">{car.title}</CardTitle>\r\n                  </CardHeader>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Comparison Table */}\r\n            <Card>\r\n              <CardContent className=\"p-0\">\r\n                {specs.map((spec, index) => (\r\n                  <div key={spec.key}>\r\n                    {index > 0 && <Separator />}\r\n                    <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n                      <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n                        {spec.label}\r\n                      </div>\r\n                      {comparisonList.map((car) => {\r\n                        const value = (car as Record<string, any>)[spec.key];\r\n                        const displayValue = spec.format ? spec.format(value) : value;\r\n                        return (\r\n                          <div key={car.id} className=\"p-4 text-sm\">\r\n                            {displayValue || \"N/A\"}\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n\r\n                <Separator />\r\n                \r\n                {/* Platforms */}\r\n                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n                    Listed On\r\n                  </div>\r\n                  {comparisonList.map((car) => (\r\n                    <div key={car.id} className=\"p-4\">\r\n                      <div className=\"flex flex-wrap gap-1\">\r\n                        {car.platform.map((platform, idx) => (\r\n                          <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\r\n                            {platform.name}\r\n                          </Badge>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                <Separator />\r\n\r\n                {/* View Details Buttons */}\r\n                <div className=\"grid\" style={{ gridTemplateColumns: `200px repeat(${comparisonList.length}, 1fr)` }}>\r\n                  <div className=\"border-r p-4 font-semibold text-sm bg-muted/50\">\r\n                    Actions\r\n                  </div>\r\n                  {comparisonList.map((car) => (\r\n                    <div key={car.id} className=\"p-4\">\r\n                      <Button\r\n                        variant=\"accent\"\r\n                        className=\"w-full\"\r\n                        onClick={() => navigate(`/car/${car.id}`)}\r\n                      >\r\n                        View Details\r\n                      </Button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Compare;\r\n"
        }
    ]
}