{
    "sourceFile": "src/pages/CarDetail.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 44,
            "patches": [
                {
                    "date": 1759428015711,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1759428263577,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -218,9 +218,9 @@\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                <Button variant=\"accent\" className=\"w-full\" size=\"lg\">\r\n+                <Button variant=\"defaultsName=\"w-full\" size=\"lg\">\r\n                   Contact Seller\r\n                 </Button>\r\n               </CardContent>\r\n             </Card>\r\n"
                },
                {
                    "date": 1759939538314,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,8 +7,9 @@\n import { ArrowLeft, MapPin, Gauge, Calendar, Mail, Phone, Heart, GitCompare, Fuel, Cog } from \"lucide-react\";\r\n import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n import ImageCarousel from \"@/components/ImageCarousel\";\r\n+import MapDisplay from \"@/components/MapDisplay\";\r\n import CarCard from \"@/components/CarCard\";\r\n import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n@@ -178,10 +179,10 @@\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n-          {/* Sidebar - Seller Info */}\r\n-          <div className=\"lg:col-span-1\">\r\n+          {/* Sidebar - Seller Info & Map */}\r\n+          <div className=\"lg:col-span-1 space-y-6\">\r\n             <Card className=\"sticky top-24\">\r\n               <CardHeader>\r\n                 <CardTitle>Seller Information</CardTitle>\r\n               </CardHeader>\r\n@@ -218,13 +219,34 @@\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                <Button variant=\"defaultsName=\"w-full\" size=\"lg\">\r\n+                <Button variant=\"accent\" className=\"w-full\" size=\"lg\">\r\n                   Contact Seller\r\n                 </Button>\r\n               </CardContent>\r\n             </Card>\r\n+\r\n+            {/* Location Map */}\r\n+            <Card className=\"shadow-card\">\r\n+              <CardHeader>\r\n+                <CardTitle className=\"flex items-center gap-2\">\r\n+                  <MapPin className=\"h-5 w-5 text-primary\" />\r\n+                  Car Location\r\n+                </CardTitle>\r\n+              </CardHeader>\r\n+              <CardContent>\r\n+                <MapDisplay\r\n+                  lat={37.7749 + Math.random() * 0.1}\r\n+                  lng={-122.4194 + Math.random() * 0.1}\r\n+                  title={car.title}\r\n+                />\r\n+                <p className=\"mt-3 text-sm text-muted-foreground flex items-center gap-2\">\r\n+                  <MapPin className=\"h-4 w-4\" />\r\n+                  {car.location}\r\n+                </p>\r\n+              </CardContent>\r\n+            </Card>\r\n           </div>\r\n         </div>\r\n \r\n         {/* Similar Cars */}\r\n@@ -242,5 +264,5 @@\n     </div>\r\n   );\r\n };\r\n \r\n-export default CarDetail;\r\n+export default CarDetail;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1759939612387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -219,9 +219,9 @@\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                <Button variant=\"accent\" className=\"w-full\" size=\"lg\">\r\n+                <Button variant=\"default\" className=\"w-full\" size=\"lg\">\r\n                   Contact Seller\r\n                 </Button>\r\n               </CardContent>\r\n             </Card>\r\n"
                },
                {
                    "date": 1763630809787,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,29 +1,105 @@\n+// src/pages/CarDetail.tsx\r\n import { useParams, useNavigate } from \"react-router-dom\";\r\n-import { mockCars } from \"@/lib/mockData\";\r\n+import { useEffect, useState } from \"react\";\r\n+import { getAllCars, getCarById, API_BASE_URL, ApiCar } from \"@/api/cars\";\r\n import { getSimilarCars } from \"@/lib/filterUtils\";\r\n import { Button } from \"@/components/ui/button\";\r\n import { Badge } from \"@/components/ui/badge\";\r\n import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import { ArrowLeft, MapPin, Gauge, Calendar, Mail, Phone, Heart, GitCompare, Fuel, Cog } from \"lucide-react\";\r\n+import {\r\n+  ArrowLeft,\r\n+  MapPin,\r\n+  Gauge,\r\n+  Calendar,\r\n+  Mail,\r\n+  Phone,\r\n+  Heart,\r\n+  GitCompare,\r\n+  Fuel,\r\n+  Cog,\r\n+} from \"lucide-react\";\r\n import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n import ImageCarousel from \"@/components/ImageCarousel\";\r\n import MapDisplay from \"@/components/MapDisplay\";\r\n import CarCard from \"@/components/CarCard\";\r\n import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n+import type { UICar } from \"./Dashboard\";\r\n \r\n+// Map backend API car → UI car\r\n+const mapApiCarToUICar = (car: ApiCar): UICar => ({\r\n+  id: car._id,\r\n+  title: `${car.brand} ${car.model} ${car.year}`,\r\n+  brand: car.brand,\r\n+  model: car.model,\r\n+  year: car.year,\r\n+  price: car.price,\r\n+  mileage: car.mileage,\r\n+  condition: car.condition, // \"new\" | \"used\" | \"certified\"\r\n+  location: car.location,\r\n+  images: car.images.map((img) => `${API_BASE_URL}/uploads/${img}`),\r\n+  platform: (car.platforms || []).map((p) => ({\r\n+    name: p as\r\n+      | \"Edmunds\"\r\n+      | \"OLX\"\r\n+      | \"Facebook Marketplace\"\r\n+      | \"AutoTrader\"\r\n+      | \"Cars.com\",\r\n+  })),\r\n+  seller: {\r\n+    id: (car.seller && \"id\" in car.seller ? (car.seller as { id?: string }).id : undefined) || \"N/A\",\r\n+    name: car.seller?.name || \"Private Seller\",\r\n+    email: car.seller?.email || \"N/A\",\r\n+    phone: (car.seller && typeof car.seller === \"object\" && \"phone\" in car.seller)\r\n+      ? (car.seller as { phone?: string }).phone ?? \"N/A\"\r\n+      : \"N/A\",\r\n+  },\r\n+  description: car.description,\r\n+  createdAt: car.createdAt,\r\n+  fuelType: undefined,\r\n+  transmission: undefined,\r\n+  lat: car.latitude,\r\n+  lng: car.longitude,\r\n+});\r\n+\r\n const CarDetail = () => {\r\n   const { id } = useParams();\r\n   const navigate = useNavigate();\r\n   const { isFavorite, toggleFavorite } = useFavorites();\r\n   const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n-  \r\n-  const car = mockCars.find((c) => c.id === id);\r\n-  const similarCars = car ? getSimilarCars(car, mockCars) : [];\r\n \r\n+  const [car, setCar] = useState<UICar | null>(null);\r\n+  const [similarCars, setSimilarCars] = useState<UICar[]>([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  useEffect(() => {\r\n+    const fetchCar = async () => {\r\n+      if (!id) return;\r\n+      setLoading(true);\r\n+      try {\r\n+        // 1) Get selected car\r\n+        const apiCar = await getCarById(id);\r\n+        const uiCar = mapApiCarToUICar(apiCar);\r\n+        setCar(uiCar);\r\n+\r\n+        // 2) Get all cars and compute similar ones\r\n+        const allApiCars = await getAllCars();\r\n+        const allUiCars = allApiCars.map(mapApiCarToUICar);\r\n+        const similar = getSimilarCars(uiCar, allUiCars); // ✅ no any\r\n+        setSimilarCars(similar);\r\n+      } catch (error) {\r\n+        console.error(\"Error loading car details\", error);\r\n+      } finally {\r\n+        setLoading(false);\r\n+      }\r\n+    };\r\n+\r\n+    fetchCar();\r\n+  }, [id]);\r\n+\r\n   const handleFavoriteClick = () => {\r\n     if (car) {\r\n       toggleFavorite(car.id);\r\n       toast({\r\n@@ -33,13 +109,15 @@\n   };\r\n \r\n   const handleComparisonClick = () => {\r\n     if (!car) return;\r\n+\r\n     if (isInComparison(car.id)) {\r\n       removeFromComparison(car.id);\r\n       toast({ title: \"Removed from comparison\" });\r\n     } else {\r\n-      const added = addToComparison(car);\r\n+      const added = addToComparison(car); // ✅ UICar now matches Car structurally\r\n+\r\n       if (added) {\r\n         toast({ title: \"Added to comparison\" });\r\n       } else {\r\n         toast({\r\n@@ -50,8 +128,16 @@\n       }\r\n     }\r\n   };\r\n \r\n+  if (loading) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">Loading car details...</h1>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n   if (!car) {\r\n     return (\r\n       <div className=\"container mx-auto px-4 py-20 text-center\">\r\n         <h1 className=\"mb-4 text-3xl font-bold\">Car Not Found</h1>\r\n@@ -108,9 +194,12 @@\n                     <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n                       ${car.price.toLocaleString()}\r\n                     </p>\r\n                   </div>\r\n-                  <Badge variant={car.condition === \"new\" ? \"default\" : \"outline\"} className=\"capitalize text-base px-4 py-1\">\r\n+                  <Badge\r\n+                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n+                    className=\"capitalize text-base px-4 py-1\"\r\n+                  >\r\n                     {car.condition}\r\n                   </Badge>\r\n                 </div>\r\n               </CardHeader>\r\n@@ -126,33 +215,41 @@\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Gauge className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold text-foreground\">{car.mileage.toLocaleString()} mi</p>\r\n+                      <p className=\"font-semibold text-foreground\">\r\n+                        {car.mileage.toLocaleString()} mi\r\n+                      </p>\r\n                     </div>\r\n                   </div>\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <MapPin className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Location</p>\r\n-                      <p className=\"font-semibold text-foreground line-clamp-1\">{car.location}</p>\r\n+                      <p className=\"font-semibold text-foreground line-clamp-1\">\r\n+                        {car.location}\r\n+                      </p>\r\n                     </div>\r\n                   </div>\r\n                   {car.fuelType && (\r\n                     <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                       <Fuel className=\"h-5 w-5\" />\r\n                       <div>\r\n                         <p className=\"text-xs\">Fuel Type</p>\r\n-                        <p className=\"font-semibold text-foreground capitalize\">{car.fuelType}</p>\r\n+                        <p className=\"font-semibold text-foreground capitalize\">\r\n+                          {car.fuelType}\r\n+                        </p>\r\n                       </div>\r\n                     </div>\r\n                   )}\r\n                   {car.transmission && (\r\n                     <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                       <Cog className=\"h-5 w-5\" />\r\n                       <div>\r\n                         <p className=\"text-xs\">Transmission</p>\r\n-                        <p className=\"font-semibold text-foreground capitalize\">{car.transmission}</p>\r\n+                        <p className=\"font-semibold text-foreground capitalize\">\r\n+                          {car.transmission}\r\n+                        </p>\r\n                       </div>\r\n                     </div>\r\n                   )}\r\n                 </div>\r\n@@ -160,18 +257,24 @@\n                 <Separator />\r\n \r\n                 <div>\r\n                   <h3 className=\"mb-3 text-lg font-semibold\">Description</h3>\r\n-                  <p className=\"text-muted-foreground leading-relaxed\">{car.description}</p>\r\n+                  <p className=\"text-muted-foreground leading-relaxed\">\r\n+                    {car.description}\r\n+                  </p>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n                 <div>\r\n                   <h3 className=\"mb-3 text-lg font-semibold\">Listed On</h3>\r\n                   <div className=\"flex flex-wrap gap-2\">\r\n                     {car.platform.map((platform, index) => (\r\n-                      <Badge key={index} variant=\"secondary\" className=\"text-sm px-3 py-1\">\r\n+                      <Badge\r\n+                        key={index}\r\n+                        variant=\"secondary\"\r\n+                        className=\"text-sm px-3 py-1\"\r\n+                      >\r\n                         {platform.name}\r\n                       </Badge>\r\n                     ))}\r\n                   </div>\r\n@@ -179,9 +282,9 @@\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n-          {/* Sidebar - Seller Info & Map */}\r\n+          {/* Sidebar */}\r\n           <div className=\"lg:col-span-1 space-y-6\">\r\n             <Card className=\"sticky top-24\">\r\n               <CardHeader>\r\n                 <CardTitle>Seller Information</CardTitle>\r\n@@ -209,13 +312,13 @@\n                     <Mail className=\"h-4 w-4\" />\r\n                     {car.seller.email}\r\n                   </a>\r\n                   <a\r\n-                    href={`tel:${car.seller.phone}`}\r\n+                    href={`tel:${car.seller.phone || \"\"}`}\r\n                     className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n                   >\r\n                     <Phone className=\"h-4 w-4\" />\r\n-                    {car.seller.phone}\r\n+                    {car.seller.phone || \"N/A\"}\r\n                   </a>\r\n                 </div>\r\n \r\n                 <Separator />\r\n@@ -225,9 +328,8 @@\n                 </Button>\r\n               </CardContent>\r\n             </Card>\r\n \r\n-            {/* Location Map */}\r\n             <Card className=\"shadow-card\">\r\n               <CardHeader>\r\n                 <CardTitle className=\"flex items-center gap-2\">\r\n                   <MapPin className=\"h-5 w-5 text-primary\" />\r\n@@ -235,10 +337,10 @@\n                 </CardTitle>\r\n               </CardHeader>\r\n               <CardContent>\r\n                 <MapDisplay\r\n-                  lat={37.7749 + Math.random() * 0.1}\r\n-                  lng={-122.4194 + Math.random() * 0.1}\r\n+                  lat={car.lat ?? 37.7749}\r\n+                  lng={car.lng ?? -122.4194}\r\n                   title={car.title}\r\n                 />\r\n                 <p className=\"mt-3 text-sm text-muted-foreground flex items-center gap-2\">\r\n                   <MapPin className=\"h-4 w-4\" />\r\n@@ -248,12 +350,13 @@\n             </Card>\r\n           </div>\r\n         </div>\r\n \r\n-        {/* Similar Cars */}\r\n         {similarCars.length > 0 && (\r\n           <section className=\"mt-12\">\r\n-            <h2 className=\"mb-6 text-2xl font-bold\">Similar Cars You May Like</h2>\r\n+            <h2 className=\"mb-6 text-2xl font-bold\">\r\n+              Similar Cars You May Like\r\n+            </h2>\r\n             <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n               {similarCars.map((similarCar) => (\r\n                 <CarCard key={similarCar.id} car={similarCar} />\r\n               ))}\r\n@@ -264,5 +367,5 @@\n     </div>\r\n   );\r\n };\r\n \r\n-export default CarDetail;\n\\ No newline at end of file\n+export default CarDetail;\r\n"
                },
                {
                    "date": 1763630962916,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n } from \"lucide-react\";\r\n import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n import ImageCarousel from \"@/components/ImageCarousel\";\r\n-import MapDisplay from \"@/components/MapDisplay\";\r\n+// import MapDisplay from \"@/components/MapDisplay\";\r\n import CarCard from \"@/components/CarCard\";\r\n import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n"
                },
                {
                    "date": 1763630974622,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -336,13 +336,13 @@\n                   Car Location\r\n                 </CardTitle>\r\n               </CardHeader>\r\n               <CardContent>\r\n-                <MapDisplay\r\n+                {/* <MapDisplay\r\n                   lat={car.lat ?? 37.7749}\r\n                   lng={car.lng ?? -122.4194}\r\n                   title={car.title}\r\n-                />\r\n+                /> */}\r\n                 <p className=\"mt-3 text-sm text-muted-foreground flex items-center gap-2\">\r\n                   <MapPin className=\"h-4 w-4\" />\r\n                   {car.location}\r\n                 </p>\r\n"
                },
                {
                    "date": 1763631042661,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,10 +59,10 @@\n   description: car.description,\r\n   createdAt: car.createdAt,\r\n   fuelType: undefined,\r\n   transmission: undefined,\r\n-  lat: car.latitude,\r\n-  lng: car.longitude,\r\n+  // lat: car.latitude,\r\n+  // lng: car.longitude,\r\n });\r\n \r\n const CarDetail = () => {\r\n   const { id } = useParams();\r\n"
                },
                {
                    "date": 1763631050788,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,371 @@\n+// src/pages/CarDetail.tsx\r\n+import { useParams, useNavigate } from \"react-router-dom\";\r\n+import { useEffect, useState } from \"react\";\r\n+import { getAllCars, getCarById, API_BASE_URL, ApiCar } from \"@/api/cars\";\r\n+import { getSimilarCars } from \"@/lib/filterUtils\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import {\r\n+  ArrowLeft,\r\n+  MapPin,\r\n+  Gauge,\r\n+  Calendar,\r\n+  Mail,\r\n+  Phone,\r\n+  Heart,\r\n+  GitCompare,\r\n+  Fuel,\r\n+  Cog,\r\n+} from \"lucide-react\";\r\n+import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+import ImageCarousel from \"@/components/ImageCarousel\";\r\n+// import MapDisplay from \"@/components/MapDisplay\";\r\n+import CarCard from \"@/components/CarCard\";\r\n+import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { toast } from \"@/hooks/use-toast\";\r\n+import type { UICar } from \"./Dashboard\";\r\n+\r\n+// Map backend API car → UI car\r\n+const mapApiCarToUICar = (car: ApiCar): UICar => ({\r\n+  id: car._id,\r\n+  title: `${car.brand} ${car.model} ${car.year}`,\r\n+  brand: car.brand,\r\n+  model: car.model,\r\n+  year: car.year,\r\n+  price: car.price,\r\n+  mileage: car.mileage,\r\n+  condition: car.condition, // \"new\" | \"used\" | \"certified\"\r\n+  location: car.location,\r\n+  images: car.images.map((img) => `${API_BASE_URL}/uploads/${img}`),\r\n+  platform: (car.platforms || []).map((p) => ({\r\n+    name: p as\r\n+      | \"Edmunds\"\r\n+      | \"OLX\"\r\n+      | \"Facebook Marketplace\"\r\n+      | \"AutoTrader\"\r\n+      | \"Cars.com\",\r\n+  })),\r\n+  seller: {\r\n+    id: (car.seller && \"id\" in car.seller ? (car.seller as { id?: string }).id : undefined) || \"N/A\",\r\n+    name: car.seller?.name || \"Private Seller\",\r\n+    email: car.seller?.email || \"N/A\",\r\n+    phone: (car.seller && typeof car.seller === \"object\" && \"phone\" in car.seller)\r\n+      ? (car.seller as { phone?: string }).phone ?? \"N/A\"\r\n+      : \"N/A\",\r\n+  },\r\n+  description: car.description,\r\n+  createdAt: car.createdAt,\r\n+  fuelType: undefined,\r\n+  transmission: undefined,\r\n+  // lat: car.latitude,\r\n+  // lng: car.longitude,\r\n+});\r\n+\r\n+const CarDetail = () => {\r\n+  const { id } = useParams();\r\n+  const navigate = useNavigate();\r\n+  const { isFavorite, toggleFavorite } = useFavorites();\r\n+  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n+\r\n+  const [car, setCar] = useState<UICar | null>(null);\r\n+  const [similarCars, setSimilarCars] = useState<UICar[]>([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  useEffect(() => {\r\n+    const fetchCar = async () => {\r\n+      if (!id) return;\r\n+      setLoading(true);\r\n+      try {\r\n+        // 1) Get selected car\r\n+        const apiCar = await getCarById(id);\r\n+        const uiCar = mapApiCarToUICar(apiCar);\r\n+        setCar(uiCar);\r\n+\r\n+        // 2) Get all cars and compute similar ones\r\n+        const allApiCars = await getAllCars();\r\n+        const allUiCars = allApiCars.map(mapApiCarToUICar);\r\n+        const similar = getSimilarCars(uiCar, allUiCars); // ✅ no any\r\n+        setSimilarCars(similar);\r\n+      } catch (error) {\r\n+        console.error(\"Error loading car details\", error);\r\n+      } finally {\r\n+        setLoading(false);\r\n+      }\r\n+    };\r\n+\r\n+    fetchCar();\r\n+  }, [id]);\r\n+\r\n+  const handleFavoriteClick = () => {\r\n+    if (car) {\r\n+      toggleFavorite(car.id);\r\n+      toast({\r\n+        title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n+      });\r\n+    }\r\n+  };\r\n+\r\n+  const handleComparisonClick = () => {\r\n+    if (!car) return;\r\n+\r\n+    if (isInComparison(car.id)) {\r\n+      removeFromComparison(car.id);\r\n+      toast({ title: \"Removed from comparison\" });\r\n+    } else {\r\n+      const added = addToComparison(car); // ✅ UICar now matches Car structurally\r\n+\r\n+      if (added) {\r\n+        toast({ title: \"Added to comparison\" });\r\n+      } else {\r\n+        toast({\r\n+          title: \"Comparison limit reached\",\r\n+          description: \"You can only compare up to 3 cars at a time.\",\r\n+          variant: \"destructive\",\r\n+        });\r\n+      }\r\n+    }\r\n+  };\r\n+\r\n+  if (loading) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">Loading car details...</h1>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  if (!car) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">Car Not Found</h1>\r\n+        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <Button\r\n+          variant=\"ghost\"\r\n+          onClick={() => navigate(\"/\")}\r\n+          className=\"mb-6 gap-2\"\r\n+        >\r\n+          <ArrowLeft className=\"h-4 w-4\" />\r\n+          Back to Listings\r\n+        </Button>\r\n+\r\n+        <div className=\"mb-6 flex gap-2\">\r\n+          <Button\r\n+            variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n+            onClick={handleFavoriteClick}\r\n+            className=\"gap-2\"\r\n+          >\r\n+            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n+            {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n+          </Button>\r\n+          <Button\r\n+            variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n+            onClick={handleComparisonClick}\r\n+            className=\"gap-2\"\r\n+          >\r\n+            <GitCompare className=\"h-4 w-4\" />\r\n+            {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"grid gap-8 lg:grid-cols-3\">\r\n+          {/* Main Content */}\r\n+          <div className=\"lg:col-span-2 space-y-6\">\r\n+            {/* Image Carousel */}\r\n+            <Card className=\"overflow-hidden\">\r\n+              <ImageCarousel images={car.images} alt={car.title} />\r\n+            </Card>\r\n+\r\n+            {/* Car Details */}\r\n+            <Card>\r\n+              <CardHeader>\r\n+                <div className=\"flex items-start justify-between\">\r\n+                  <div>\r\n+                    <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n+                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n+                      ${car.price.toLocaleString()}\r\n+                    </p>\r\n+                  </div>\r\n+                  <Badge\r\n+                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n+                    className=\"capitalize text-base px-4 py-1\"\r\n+                  >\r\n+                    {car.condition}\r\n+                  </Badge>\r\n+                </div>\r\n+              </CardHeader>\r\n+              <CardContent className=\"space-y-6\">\r\n+                <div className=\"grid grid-cols-2 gap-4 md:grid-cols-4\">\r\n+                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                    <Calendar className=\"h-5 w-5\" />\r\n+                    <div>\r\n+                      <p className=\"text-xs\">Year</p>\r\n+                      <p className=\"font-semibold text-foreground\">{car.year}</p>\r\n+                    </div>\r\n+                  </div>\r\n+                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                    <Gauge className=\"h-5 w-5\" />\r\n+                    <div>\r\n+                      <p className=\"text-xs\">Mileage</p>\r\n+                      <p className=\"font-semibold text-foreground\">\r\n+                        {car.mileage.toLocaleString()} mi\r\n+                      </p>\r\n+                    </div>\r\n+                  </div>\r\n+                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                    <MapPin className=\"h-5 w-5\" />\r\n+                    <div>\r\n+                      <p className=\"text-xs\">Location</p>\r\n+                      <p className=\"font-semibold text-foreground line-clamp-1\">\r\n+                        {car.location}\r\n+                      </p>\r\n+                    </div>\r\n+                  </div>\r\n+                  {car.fuelType && (\r\n+                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                      <Fuel className=\"h-5 w-5\" />\r\n+                      <div>\r\n+                        <p className=\"text-xs\">Fuel Type</p>\r\n+                        <p className=\"font-semibold text-foreground capitalize\">\r\n+                          {car.fuelType}\r\n+                        </p>\r\n+                      </div>\r\n+                    </div>\r\n+                  )}\r\n+                  {car.transmission && (\r\n+                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                      <Cog className=\"h-5 w-5\" />\r\n+                      <div>\r\n+                        <p className=\"text-xs\">Transmission</p>\r\n+                        <p className=\"font-semibold text-foreground capitalize\">\r\n+                          {car.transmission}\r\n+                        </p>\r\n+                      </div>\r\n+                    </div>\r\n+                  )}\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <div>\r\n+                  <h3 className=\"mb-3 text-lg font-semibold\">Description</h3>\r\n+                  <p className=\"text-muted-foreground leading-relaxed\">\r\n+                    {car.description}\r\n+                  </p>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <div>\r\n+                  <h3 className=\"mb-3 text-lg font-semibold\">Listed On</h3>\r\n+                  <div className=\"flex flex-wrap gap-2\">\r\n+                    {car.platform.map((platform, index) => (\r\n+                      <Badge\r\n+                        key={index}\r\n+                        variant=\"secondary\"\r\n+                        className=\"text-sm px-3 py-1\"\r\n+                      >\r\n+                        {platform.name}\r\n+                      </Badge>\r\n+                    ))}\r\n+                  </div>\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+\r\n+          {/* Sidebar */}\r\n+          <div className=\"lg:col-span-1 space-y-6\">\r\n+            <Card className=\"sticky top-24\">\r\n+              <CardHeader>\r\n+                <CardTitle>Seller Information</CardTitle>\r\n+              </CardHeader>\r\n+              <CardContent className=\"space-y-4\">\r\n+                <div className=\"flex items-center gap-3\">\r\n+                  <Avatar className=\"h-12 w-12\">\r\n+                    <AvatarFallback className=\"bg-primary text-primary-foreground text-lg\">\r\n+                      {car.seller.name.charAt(0).toUpperCase()}\r\n+                    </AvatarFallback>\r\n+                  </Avatar>\r\n+                  <div>\r\n+                    <p className=\"font-semibold\">{car.seller.name}</p>\r\n+                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n+                  </div>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <div className=\"space-y-3\">\r\n+                  <a\r\n+                    href={`mailto:${car.seller.email}`}\r\n+                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n+                  >\r\n+                    <Mail className=\"h-4 w-4\" />\r\n+                    {car.seller.email}\r\n+                  </a>\r\n+                  <a\r\n+                    href={`tel:${car.seller.phone || \"\"}`}\r\n+                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n+                  >\r\n+                    <Phone className=\"h-4 w-4\" />\r\n+                    {car.seller.phone || \"N/A\"}\r\n+                  </a>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <Button variant=\"default\" className=\"w-full\" size=\"lg\">\r\n+                  Contact Seller\r\n+                </Button>\r\n+              </CardContent>\r\n+            </Card>\r\n+\r\n+            <Card className=\"shadow-card\">\r\n+              <CardHeader>\r\n+                <CardTitle className=\"flex items-center gap-2\">\r\n+                  <MapPin className=\"h-5 w-5 text-primary\" />\r\n+                  Car Location\r\n+                </CardTitle>\r\n+              </CardHeader>\r\n+              <CardContent>\r\n+                {/* <MapDisplay\r\n+                  lat={car.lat ?? 37.7749}\r\n+                  lng={car.lng ?? -122.4194}\r\n+                  title={car.title}\r\n+                /> */}\r\n+                <p className=\"mt-3 text-sm text-muted-foreground flex items-center gap-2\">\r\n+                  <MapPin className=\"h-4 w-4\" />\r\n+                  {car.location}\r\n+                </p>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+\r\n+        {similarCars.length > 0 && (\r\n+          <section className=\"mt-12\">\r\n+            <h2 className=\"mb-6 text-2xl font-bold\">\r\n+              Similar Cars You May Like\r\n+            </h2>\r\n+            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n+              {similarCars.map((similarCar) => (\r\n+                <CarCard key={similarCar.id} car={similarCar} />\r\n+              ))}\r\n+            </div>\r\n+          </section>\r\n+        )}\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default CarDetail;\r\n"
                },
                {
                    "date": 1763631121239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n } from \"lucide-react\";\r\n import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n import ImageCarousel from \"@/components/ImageCarousel\";\r\n-// import MapDisplay from \"@/components/MapDisplay\";\r\n+import MapDisplay from \"@/components/MapDisplay\";\r\n import CarCard from \"@/components/CarCard\";\r\n import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n"
                },
                {
                    "date": 1763631131398,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,371 @@\n+// src/pages/CarDetail.tsx\r\n+import { useParams, useNavigate } from \"react-router-dom\";\r\n+import { useEffect, useState } from \"react\";\r\n+import { getAllCars, getCarById, API_BASE_URL, ApiCar } from \"@/api/cars\";\r\n+import { getSimilarCars } from \"@/lib/filterUtils\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import {\r\n+  ArrowLeft,\r\n+  MapPin,\r\n+  Gauge,\r\n+  Calendar,\r\n+  Mail,\r\n+  Phone,\r\n+  Heart,\r\n+  GitCompare,\r\n+  Fuel,\r\n+  Cog,\r\n+} from \"lucide-react\";\r\n+import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+import ImageCarousel from \"@/components/ImageCarousel\";\r\n+import MapDisplay from \"@/components/MapDisplay\";\r\n+import CarCard from \"@/components/CarCard\";\r\n+import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { toast } from \"@/hooks/use-toast\";\r\n+import type { UICar } from \"./Dashboard\";\r\n+\r\n+// Map backend API car → UI car\r\n+const mapApiCarToUICar = (car: ApiCar): UICar => ({\r\n+  id: car._id,\r\n+  title: `${car.brand} ${car.model} ${car.year}`,\r\n+  brand: car.brand,\r\n+  model: car.model,\r\n+  year: car.year,\r\n+  price: car.price,\r\n+  mileage: car.mileage,\r\n+  condition: car.condition, // \"new\" | \"used\" | \"certified\"\r\n+  location: car.location,\r\n+  images: car.images.map((img) => `${API_BASE_URL}/uploads/${img}`),\r\n+  platform: (car.platforms || []).map((p) => ({\r\n+    name: p as\r\n+      | \"Edmunds\"\r\n+      | \"OLX\"\r\n+      | \"Facebook Marketplace\"\r\n+      | \"AutoTrader\"\r\n+      | \"Cars.com\",\r\n+  })),\r\n+  seller: {\r\n+    id: (car.seller && \"id\" in car.seller ? (car.seller as { id?: string }).id : undefined) || \"N/A\",\r\n+    name: car.seller?.name || \"Private Seller\",\r\n+    email: car.seller?.email || \"N/A\",\r\n+    phone: (car.seller && typeof car.seller === \"object\" && \"phone\" in car.seller)\r\n+      ? (car.seller as { phone?: string }).phone ?? \"N/A\"\r\n+      : \"N/A\",\r\n+  },\r\n+  description: car.description,\r\n+  createdAt: car.createdAt,\r\n+  fuelType: undefined,\r\n+  transmission: undefined,\r\n+  lat: car.latitude,\r\n+  lng: car.longitude,\r\n+});\r\n+\r\n+const CarDetail = () => {\r\n+  const { id } = useParams();\r\n+  const navigate = useNavigate();\r\n+  const { isFavorite, toggleFavorite } = useFavorites();\r\n+  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n+\r\n+  const [car, setCar] = useState<UICar | null>(null);\r\n+  const [similarCars, setSimilarCars] = useState<UICar[]>([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  useEffect(() => {\r\n+    const fetchCar = async () => {\r\n+      if (!id) return;\r\n+      setLoading(true);\r\n+      try {\r\n+        // 1) Get selected car\r\n+        const apiCar = await getCarById(id);\r\n+        const uiCar = mapApiCarToUICar(apiCar);\r\n+        setCar(uiCar);\r\n+\r\n+        // 2) Get all cars and compute similar ones\r\n+        const allApiCars = await getAllCars();\r\n+        const allUiCars = allApiCars.map(mapApiCarToUICar);\r\n+        const similar = getSimilarCars(uiCar, allUiCars); // ✅ no any\r\n+        setSimilarCars(similar);\r\n+      } catch (error) {\r\n+        console.error(\"Error loading car details\", error);\r\n+      } finally {\r\n+        setLoading(false);\r\n+      }\r\n+    };\r\n+\r\n+    fetchCar();\r\n+  }, [id]);\r\n+\r\n+  const handleFavoriteClick = () => {\r\n+    if (car) {\r\n+      toggleFavorite(car.id);\r\n+      toast({\r\n+        title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n+      });\r\n+    }\r\n+  };\r\n+\r\n+  const handleComparisonClick = () => {\r\n+    if (!car) return;\r\n+\r\n+    if (isInComparison(car.id)) {\r\n+      removeFromComparison(car.id);\r\n+      toast({ title: \"Removed from comparison\" });\r\n+    } else {\r\n+      const added = addToComparison(car); // ✅ UICar now matches Car structurally\r\n+\r\n+      if (added) {\r\n+        toast({ title: \"Added to comparison\" });\r\n+      } else {\r\n+        toast({\r\n+          title: \"Comparison limit reached\",\r\n+          description: \"You can only compare up to 3 cars at a time.\",\r\n+          variant: \"destructive\",\r\n+        });\r\n+      }\r\n+    }\r\n+  };\r\n+\r\n+  if (loading) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">Loading car details...</h1>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  if (!car) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"mb-4 text-3xl font-bold\">Car Not Found</h1>\r\n+        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <Button\r\n+          variant=\"ghost\"\r\n+          onClick={() => navigate(\"/\")}\r\n+          className=\"mb-6 gap-2\"\r\n+        >\r\n+          <ArrowLeft className=\"h-4 w-4\" />\r\n+          Back to Listings\r\n+        </Button>\r\n+\r\n+        <div className=\"mb-6 flex gap-2\">\r\n+          <Button\r\n+            variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n+            onClick={handleFavoriteClick}\r\n+            className=\"gap-2\"\r\n+          >\r\n+            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n+            {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n+          </Button>\r\n+          <Button\r\n+            variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n+            onClick={handleComparisonClick}\r\n+            className=\"gap-2\"\r\n+          >\r\n+            <GitCompare className=\"h-4 w-4\" />\r\n+            {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"grid gap-8 lg:grid-cols-3\">\r\n+          {/* Main Content */}\r\n+          <div className=\"lg:col-span-2 space-y-6\">\r\n+            {/* Image Carousel */}\r\n+            <Card className=\"overflow-hidden\">\r\n+              <ImageCarousel images={car.images} alt={car.title} />\r\n+            </Card>\r\n+\r\n+            {/* Car Details */}\r\n+            <Card>\r\n+              <CardHeader>\r\n+                <div className=\"flex items-start justify-between\">\r\n+                  <div>\r\n+                    <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n+                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n+                      ${car.price.toLocaleString()}\r\n+                    </p>\r\n+                  </div>\r\n+                  <Badge\r\n+                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n+                    className=\"capitalize text-base px-4 py-1\"\r\n+                  >\r\n+                    {car.condition}\r\n+                  </Badge>\r\n+                </div>\r\n+              </CardHeader>\r\n+              <CardContent className=\"space-y-6\">\r\n+                <div className=\"grid grid-cols-2 gap-4 md:grid-cols-4\">\r\n+                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                    <Calendar className=\"h-5 w-5\" />\r\n+                    <div>\r\n+                      <p className=\"text-xs\">Year</p>\r\n+                      <p className=\"font-semibold text-foreground\">{car.year}</p>\r\n+                    </div>\r\n+                  </div>\r\n+                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                    <Gauge className=\"h-5 w-5\" />\r\n+                    <div>\r\n+                      <p className=\"text-xs\">Mileage</p>\r\n+                      <p className=\"font-semibold text-foreground\">\r\n+                        {car.mileage.toLocaleString()} mi\r\n+                      </p>\r\n+                    </div>\r\n+                  </div>\r\n+                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                    <MapPin className=\"h-5 w-5\" />\r\n+                    <div>\r\n+                      <p className=\"text-xs\">Location</p>\r\n+                      <p className=\"font-semibold text-foreground line-clamp-1\">\r\n+                        {car.location}\r\n+                      </p>\r\n+                    </div>\r\n+                  </div>\r\n+                  {car.fuelType && (\r\n+                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                      <Fuel className=\"h-5 w-5\" />\r\n+                      <div>\r\n+                        <p className=\"text-xs\">Fuel Type</p>\r\n+                        <p className=\"font-semibold text-foreground capitalize\">\r\n+                          {car.fuelType}\r\n+                        </p>\r\n+                      </div>\r\n+                    </div>\r\n+                  )}\r\n+                  {car.transmission && (\r\n+                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                      <Cog className=\"h-5 w-5\" />\r\n+                      <div>\r\n+                        <p className=\"text-xs\">Transmission</p>\r\n+                        <p className=\"font-semibold text-foreground capitalize\">\r\n+                          {car.transmission}\r\n+                        </p>\r\n+                      </div>\r\n+                    </div>\r\n+                  )}\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <div>\r\n+                  <h3 className=\"mb-3 text-lg font-semibold\">Description</h3>\r\n+                  <p className=\"text-muted-foreground leading-relaxed\">\r\n+                    {car.description}\r\n+                  </p>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <div>\r\n+                  <h3 className=\"mb-3 text-lg font-semibold\">Listed On</h3>\r\n+                  <div className=\"flex flex-wrap gap-2\">\r\n+                    {car.platform.map((platform, index) => (\r\n+                      <Badge\r\n+                        key={index}\r\n+                        variant=\"secondary\"\r\n+                        className=\"text-sm px-3 py-1\"\r\n+                      >\r\n+                        {platform.name}\r\n+                      </Badge>\r\n+                    ))}\r\n+                  </div>\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+\r\n+          {/* Sidebar */}\r\n+          <div className=\"lg:col-span-1 space-y-6\">\r\n+            <Card className=\"sticky top-24\">\r\n+              <CardHeader>\r\n+                <CardTitle>Seller Information</CardTitle>\r\n+              </CardHeader>\r\n+              <CardContent className=\"space-y-4\">\r\n+                <div className=\"flex items-center gap-3\">\r\n+                  <Avatar className=\"h-12 w-12\">\r\n+                    <AvatarFallback className=\"bg-primary text-primary-foreground text-lg\">\r\n+                      {car.seller.name.charAt(0).toUpperCase()}\r\n+                    </AvatarFallback>\r\n+                  </Avatar>\r\n+                  <div>\r\n+                    <p className=\"font-semibold\">{car.seller.name}</p>\r\n+                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n+                  </div>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <div className=\"space-y-3\">\r\n+                  <a\r\n+                    href={`mailto:${car.seller.email}`}\r\n+                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n+                  >\r\n+                    <Mail className=\"h-4 w-4\" />\r\n+                    {car.seller.email}\r\n+                  </a>\r\n+                  <a\r\n+                    href={`tel:${car.seller.phone || \"\"}`}\r\n+                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n+                  >\r\n+                    <Phone className=\"h-4 w-4\" />\r\n+                    {car.seller.phone || \"N/A\"}\r\n+                  </a>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <Button variant=\"default\" className=\"w-full\" size=\"lg\">\r\n+                  Contact Seller\r\n+                </Button>\r\n+              </CardContent>\r\n+            </Card>\r\n+\r\n+            <Card className=\"shadow-card\">\r\n+              <CardHeader>\r\n+                <CardTitle className=\"flex items-center gap-2\">\r\n+                  <MapPin className=\"h-5 w-5 text-primary\" />\r\n+                  Car Location\r\n+                </CardTitle>\r\n+              </CardHeader>\r\n+              <CardContent>\r\n+                <MapDisplay\r\n+                  lat={car.lat ?? 37.7749}\r\n+                  lng={car.lng ?? -122.4194}\r\n+                  title={car.title}\r\n+                />\r\n+                <p className=\"mt-3 text-sm text-muted-foreground flex items-center gap-2\">\r\n+                  <MapPin className=\"h-4 w-4\" />\r\n+                  {car.location}\r\n+                </p>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+\r\n+        {similarCars.length > 0 && (\r\n+          <section className=\"mt-12\">\r\n+            <h2 className=\"mb-6 text-2xl font-bold\">\r\n+              Similar Cars You May Like\r\n+            </h2>\r\n+            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n+              {similarCars.map((similarCar) => (\r\n+                <CarCard key={similarCar.id} car={similarCar} />\r\n+              ))}\r\n+            </div>\r\n+          </section>\r\n+        )}\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default CarDetail;\r\n"
                },
                {
                    "date": 1763631517124,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -336,379 +336,8 @@\n                   Car Location\r\n                 </CardTitle>\r\n               </CardHeader>\r\n               <CardContent>\r\n-                <MapDisplay\r\n-                  lat={car.lat ?? 37.7749}\r\n-                  lng={car.lng ?? -122.4194}\r\n-                  title={car.title}\r\n-                />\r\n-                <p className=\"mt-3 text-sm text-muted-foreground flex items-center gap-2\">\r\n-                  <MapPin className=\"h-4 w-4\" />\r\n-                  {car.location}\r\n-                </p>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-        </div>\r\n-\r\n-        {similarCars.length > 0 && (\r\n-          <section className=\"mt-12\">\r\n-            <h2 className=\"mb-6 text-2xl font-bold\">\r\n-              Similar Cars You May Like\r\n-            </h2>\r\n-            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n-              {similarCars.map((similarCar) => (\r\n-                <CarCard key={similarCar.id} car={similarCar} />\r\n-              ))}\r\n-            </div>\r\n-          </section>\r\n-        )}\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default CarDetail;\r\n-// src/pages/CarDetail.tsx\r\n-import { useParams, useNavigate } from \"react-router-dom\";\r\n-import { useEffect, useState } from \"react\";\r\n-import { getAllCars, getCarById, API_BASE_URL, ApiCar } from \"@/api/cars\";\r\n-import { getSimilarCars } from \"@/lib/filterUtils\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import {\r\n-  ArrowLeft,\r\n-  MapPin,\r\n-  Gauge,\r\n-  Calendar,\r\n-  Mail,\r\n-  Phone,\r\n-  Heart,\r\n-  GitCompare,\r\n-  Fuel,\r\n-  Cog,\r\n-} from \"lucide-react\";\r\n-import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-import ImageCarousel from \"@/components/ImageCarousel\";\r\n-import MapDisplay from \"@/components/MapDisplay\";\r\n-import CarCard from \"@/components/CarCard\";\r\n-import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { toast } from \"@/hooks/use-toast\";\r\n-import type { UICar } from \"./Dashboard\";\r\n-\r\n-// Map backend API car → UI car\r\n-const mapApiCarToUICar = (car: ApiCar): UICar => ({\r\n-  id: car._id,\r\n-  title: `${car.brand} ${car.model} ${car.year}`,\r\n-  brand: car.brand,\r\n-  model: car.model,\r\n-  year: car.year,\r\n-  price: car.price,\r\n-  mileage: car.mileage,\r\n-  condition: car.condition, // \"new\" | \"used\" | \"certified\"\r\n-  location: car.location,\r\n-  images: car.images.map((img) => `${API_BASE_URL}/uploads/${img}`),\r\n-  platform: (car.platforms || []).map((p) => ({\r\n-    name: p as\r\n-      | \"Edmunds\"\r\n-      | \"OLX\"\r\n-      | \"Facebook Marketplace\"\r\n-      | \"AutoTrader\"\r\n-      | \"Cars.com\",\r\n-  })),\r\n-  seller: {\r\n-    id: (car.seller && \"id\" in car.seller ? (car.seller as { id?: string }).id : undefined) || \"N/A\",\r\n-    name: car.seller?.name || \"Private Seller\",\r\n-    email: car.seller?.email || \"N/A\",\r\n-    phone: (car.seller && typeof car.seller === \"object\" && \"phone\" in car.seller)\r\n-      ? (car.seller as { phone?: string }).phone ?? \"N/A\"\r\n-      : \"N/A\",\r\n-  },\r\n-  description: car.description,\r\n-  createdAt: car.createdAt,\r\n-  fuelType: undefined,\r\n-  transmission: undefined,\r\n-  // lat: car.latitude,\r\n-  // lng: car.longitude,\r\n-});\r\n-\r\n-const CarDetail = () => {\r\n-  const { id } = useParams();\r\n-  const navigate = useNavigate();\r\n-  const { isFavorite, toggleFavorite } = useFavorites();\r\n-  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n-\r\n-  const [car, setCar] = useState<UICar | null>(null);\r\n-  const [similarCars, setSimilarCars] = useState<UICar[]>([]);\r\n-  const [loading, setLoading] = useState(true);\r\n-\r\n-  useEffect(() => {\r\n-    const fetchCar = async () => {\r\n-      if (!id) return;\r\n-      setLoading(true);\r\n-      try {\r\n-        // 1) Get selected car\r\n-        const apiCar = await getCarById(id);\r\n-        const uiCar = mapApiCarToUICar(apiCar);\r\n-        setCar(uiCar);\r\n-\r\n-        // 2) Get all cars and compute similar ones\r\n-        const allApiCars = await getAllCars();\r\n-        const allUiCars = allApiCars.map(mapApiCarToUICar);\r\n-        const similar = getSimilarCars(uiCar, allUiCars); // ✅ no any\r\n-        setSimilarCars(similar);\r\n-      } catch (error) {\r\n-        console.error(\"Error loading car details\", error);\r\n-      } finally {\r\n-        setLoading(false);\r\n-      }\r\n-    };\r\n-\r\n-    fetchCar();\r\n-  }, [id]);\r\n-\r\n-  const handleFavoriteClick = () => {\r\n-    if (car) {\r\n-      toggleFavorite(car.id);\r\n-      toast({\r\n-        title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n-      });\r\n-    }\r\n-  };\r\n-\r\n-  const handleComparisonClick = () => {\r\n-    if (!car) return;\r\n-\r\n-    if (isInComparison(car.id)) {\r\n-      removeFromComparison(car.id);\r\n-      toast({ title: \"Removed from comparison\" });\r\n-    } else {\r\n-      const added = addToComparison(car); // ✅ UICar now matches Car structurally\r\n-\r\n-      if (added) {\r\n-        toast({ title: \"Added to comparison\" });\r\n-      } else {\r\n-        toast({\r\n-          title: \"Comparison limit reached\",\r\n-          description: \"You can only compare up to 3 cars at a time.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-      }\r\n-    }\r\n-  };\r\n-\r\n-  if (loading) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">Loading car details...</h1>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  if (!car) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">Car Not Found</h1>\r\n-        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <Button\r\n-          variant=\"ghost\"\r\n-          onClick={() => navigate(\"/\")}\r\n-          className=\"mb-6 gap-2\"\r\n-        >\r\n-          <ArrowLeft className=\"h-4 w-4\" />\r\n-          Back to Listings\r\n-        </Button>\r\n-\r\n-        <div className=\"mb-6 flex gap-2\">\r\n-          <Button\r\n-            variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={handleFavoriteClick}\r\n-            className=\"gap-2\"\r\n-          >\r\n-            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n-            {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n-          </Button>\r\n-          <Button\r\n-            variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={handleComparisonClick}\r\n-            className=\"gap-2\"\r\n-          >\r\n-            <GitCompare className=\"h-4 w-4\" />\r\n-            {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"grid gap-8 lg:grid-cols-3\">\r\n-          {/* Main Content */}\r\n-          <div className=\"lg:col-span-2 space-y-6\">\r\n-            {/* Image Carousel */}\r\n-            <Card className=\"overflow-hidden\">\r\n-              <ImageCarousel images={car.images} alt={car.title} />\r\n-            </Card>\r\n-\r\n-            {/* Car Details */}\r\n-            <Card>\r\n-              <CardHeader>\r\n-                <div className=\"flex items-start justify-between\">\r\n-                  <div>\r\n-                    <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n-                      ${car.price.toLocaleString()}\r\n-                    </p>\r\n-                  </div>\r\n-                  <Badge\r\n-                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n-                    className=\"capitalize text-base px-4 py-1\"\r\n-                  >\r\n-                    {car.condition}\r\n-                  </Badge>\r\n-                </div>\r\n-              </CardHeader>\r\n-              <CardContent className=\"space-y-6\">\r\n-                <div className=\"grid grid-cols-2 gap-4 md:grid-cols-4\">\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Calendar className=\"h-5 w-5\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Year</p>\r\n-                      <p className=\"font-semibold text-foreground\">{car.year}</p>\r\n-                    </div>\r\n-                  </div>\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Gauge className=\"h-5 w-5\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold text-foreground\">\r\n-                        {car.mileage.toLocaleString()} mi\r\n-                      </p>\r\n-                    </div>\r\n-                  </div>\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <MapPin className=\"h-5 w-5\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Location</p>\r\n-                      <p className=\"font-semibold text-foreground line-clamp-1\">\r\n-                        {car.location}\r\n-                      </p>\r\n-                    </div>\r\n-                  </div>\r\n-                  {car.fuelType && (\r\n-                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                      <Fuel className=\"h-5 w-5\" />\r\n-                      <div>\r\n-                        <p className=\"text-xs\">Fuel Type</p>\r\n-                        <p className=\"font-semibold text-foreground capitalize\">\r\n-                          {car.fuelType}\r\n-                        </p>\r\n-                      </div>\r\n-                    </div>\r\n-                  )}\r\n-                  {car.transmission && (\r\n-                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                      <Cog className=\"h-5 w-5\" />\r\n-                      <div>\r\n-                        <p className=\"text-xs\">Transmission</p>\r\n-                        <p className=\"font-semibold text-foreground capitalize\">\r\n-                          {car.transmission}\r\n-                        </p>\r\n-                      </div>\r\n-                    </div>\r\n-                  )}\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <div>\r\n-                  <h3 className=\"mb-3 text-lg font-semibold\">Description</h3>\r\n-                  <p className=\"text-muted-foreground leading-relaxed\">\r\n-                    {car.description}\r\n-                  </p>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <div>\r\n-                  <h3 className=\"mb-3 text-lg font-semibold\">Listed On</h3>\r\n-                  <div className=\"flex flex-wrap gap-2\">\r\n-                    {car.platform.map((platform, index) => (\r\n-                      <Badge\r\n-                        key={index}\r\n-                        variant=\"secondary\"\r\n-                        className=\"text-sm px-3 py-1\"\r\n-                      >\r\n-                        {platform.name}\r\n-                      </Badge>\r\n-                    ))}\r\n-                  </div>\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-\r\n-          {/* Sidebar */}\r\n-          <div className=\"lg:col-span-1 space-y-6\">\r\n-            <Card className=\"sticky top-24\">\r\n-              <CardHeader>\r\n-                <CardTitle>Seller Information</CardTitle>\r\n-              </CardHeader>\r\n-              <CardContent className=\"space-y-4\">\r\n-                <div className=\"flex items-center gap-3\">\r\n-                  <Avatar className=\"h-12 w-12\">\r\n-                    <AvatarFallback className=\"bg-primary text-primary-foreground text-lg\">\r\n-                      {car.seller.name.charAt(0).toUpperCase()}\r\n-                    </AvatarFallback>\r\n-                  </Avatar>\r\n-                  <div>\r\n-                    <p className=\"font-semibold\">{car.seller.name}</p>\r\n-                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n-                  </div>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <div className=\"space-y-3\">\r\n-                  <a\r\n-                    href={`mailto:${car.seller.email}`}\r\n-                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n-                  >\r\n-                    <Mail className=\"h-4 w-4\" />\r\n-                    {car.seller.email}\r\n-                  </a>\r\n-                  <a\r\n-                    href={`tel:${car.seller.phone || \"\"}`}\r\n-                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n-                  >\r\n-                    <Phone className=\"h-4 w-4\" />\r\n-                    {car.seller.phone || \"N/A\"}\r\n-                  </a>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <Button variant=\"default\" className=\"w-full\" size=\"lg\">\r\n-                  Contact Seller\r\n-                </Button>\r\n-              </CardContent>\r\n-            </Card>\r\n-\r\n-            <Card className=\"shadow-card\">\r\n-              <CardHeader>\r\n-                <CardTitle className=\"flex items-center gap-2\">\r\n-                  <MapPin className=\"h-5 w-5 text-primary\" />\r\n-                  Car Location\r\n-                </CardTitle>\r\n-              </CardHeader>\r\n-              <CardContent>\r\n                 {/* <MapDisplay\r\n                   lat={car.lat ?? 37.7749}\r\n                   lng={car.lng ?? -122.4194}\r\n                   title={car.title}\r\n@@ -739,375 +368,4 @@\n   );\r\n };\r\n \r\n export default CarDetail;\r\n-// src/pages/CarDetail.tsx\r\n-import { useParams, useNavigate } from \"react-router-dom\";\r\n-import { useEffect, useState } from \"react\";\r\n-import { getAllCars, getCarById, API_BASE_URL, ApiCar } from \"@/api/cars\";\r\n-import { getSimilarCars } from \"@/lib/filterUtils\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import {\r\n-  ArrowLeft,\r\n-  MapPin,\r\n-  Gauge,\r\n-  Calendar,\r\n-  Mail,\r\n-  Phone,\r\n-  Heart,\r\n-  GitCompare,\r\n-  Fuel,\r\n-  Cog,\r\n-} from \"lucide-react\";\r\n-import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-import ImageCarousel from \"@/components/ImageCarousel\";\r\n-// import MapDisplay from \"@/components/MapDisplay\";\r\n-import CarCard from \"@/components/CarCard\";\r\n-import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { toast } from \"@/hooks/use-toast\";\r\n-import type { UICar } from \"./Dashboard\";\r\n-\r\n-// Map backend API car → UI car\r\n-const mapApiCarToUICar = (car: ApiCar): UICar => ({\r\n-  id: car._id,\r\n-  title: `${car.brand} ${car.model} ${car.year}`,\r\n-  brand: car.brand,\r\n-  model: car.model,\r\n-  year: car.year,\r\n-  price: car.price,\r\n-  mileage: car.mileage,\r\n-  condition: car.condition, // \"new\" | \"used\" | \"certified\"\r\n-  location: car.location,\r\n-  images: car.images.map((img) => `${API_BASE_URL}/uploads/${img}`),\r\n-  platform: (car.platforms || []).map((p) => ({\r\n-    name: p as\r\n-      | \"Edmunds\"\r\n-      | \"OLX\"\r\n-      | \"Facebook Marketplace\"\r\n-      | \"AutoTrader\"\r\n-      | \"Cars.com\",\r\n-  })),\r\n-  seller: {\r\n-    id: (car.seller && \"id\" in car.seller ? (car.seller as { id?: string }).id : undefined) || \"N/A\",\r\n-    name: car.seller?.name || \"Private Seller\",\r\n-    email: car.seller?.email || \"N/A\",\r\n-    phone: (car.seller && typeof car.seller === \"object\" && \"phone\" in car.seller)\r\n-      ? (car.seller as { phone?: string }).phone ?? \"N/A\"\r\n-      : \"N/A\",\r\n-  },\r\n-  description: car.description,\r\n-  createdAt: car.createdAt,\r\n-  fuelType: undefined,\r\n-  transmission: undefined,\r\n-  // lat: car.latitude,\r\n-  // lng: car.longitude,\r\n-});\r\n-\r\n-const CarDetail = () => {\r\n-  const { id } = useParams();\r\n-  const navigate = useNavigate();\r\n-  const { isFavorite, toggleFavorite } = useFavorites();\r\n-  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n-\r\n-  const [car, setCar] = useState<UICar | null>(null);\r\n-  const [similarCars, setSimilarCars] = useState<UICar[]>([]);\r\n-  const [loading, setLoading] = useState(true);\r\n-\r\n-  useEffect(() => {\r\n-    const fetchCar = async () => {\r\n-      if (!id) return;\r\n-      setLoading(true);\r\n-      try {\r\n-        // 1) Get selected car\r\n-        const apiCar = await getCarById(id);\r\n-        const uiCar = mapApiCarToUICar(apiCar);\r\n-        setCar(uiCar);\r\n-\r\n-        // 2) Get all cars and compute similar ones\r\n-        const allApiCars = await getAllCars();\r\n-        const allUiCars = allApiCars.map(mapApiCarToUICar);\r\n-        const similar = getSimilarCars(uiCar, allUiCars); // ✅ no any\r\n-        setSimilarCars(similar);\r\n-      } catch (error) {\r\n-        console.error(\"Error loading car details\", error);\r\n-      } finally {\r\n-        setLoading(false);\r\n-      }\r\n-    };\r\n-\r\n-    fetchCar();\r\n-  }, [id]);\r\n-\r\n-  const handleFavoriteClick = () => {\r\n-    if (car) {\r\n-      toggleFavorite(car.id);\r\n-      toast({\r\n-        title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n-      });\r\n-    }\r\n-  };\r\n-\r\n-  const handleComparisonClick = () => {\r\n-    if (!car) return;\r\n-\r\n-    if (isInComparison(car.id)) {\r\n-      removeFromComparison(car.id);\r\n-      toast({ title: \"Removed from comparison\" });\r\n-    } else {\r\n-      const added = addToComparison(car); // ✅ UICar now matches Car structurally\r\n-\r\n-      if (added) {\r\n-        toast({ title: \"Added to comparison\" });\r\n-      } else {\r\n-        toast({\r\n-          title: \"Comparison limit reached\",\r\n-          description: \"You can only compare up to 3 cars at a time.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-      }\r\n-    }\r\n-  };\r\n-\r\n-  if (loading) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">Loading car details...</h1>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  if (!car) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">Car Not Found</h1>\r\n-        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <Button\r\n-          variant=\"ghost\"\r\n-          onClick={() => navigate(\"/\")}\r\n-          className=\"mb-6 gap-2\"\r\n-        >\r\n-          <ArrowLeft className=\"h-4 w-4\" />\r\n-          Back to Listings\r\n-        </Button>\r\n-\r\n-        <div className=\"mb-6 flex gap-2\">\r\n-          <Button\r\n-            variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={handleFavoriteClick}\r\n-            className=\"gap-2\"\r\n-          >\r\n-            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n-            {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n-          </Button>\r\n-          <Button\r\n-            variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={handleComparisonClick}\r\n-            className=\"gap-2\"\r\n-          >\r\n-            <GitCompare className=\"h-4 w-4\" />\r\n-            {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"grid gap-8 lg:grid-cols-3\">\r\n-          {/* Main Content */}\r\n-          <div className=\"lg:col-span-2 space-y-6\">\r\n-            {/* Image Carousel */}\r\n-            <Card className=\"overflow-hidden\">\r\n-              <ImageCarousel images={car.images} alt={car.title} />\r\n-            </Card>\r\n-\r\n-            {/* Car Details */}\r\n-            <Card>\r\n-              <CardHeader>\r\n-                <div className=\"flex items-start justify-between\">\r\n-                  <div>\r\n-                    <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n-                      ${car.price.toLocaleString()}\r\n-                    </p>\r\n-                  </div>\r\n-                  <Badge\r\n-                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n-                    className=\"capitalize text-base px-4 py-1\"\r\n-                  >\r\n-                    {car.condition}\r\n-                  </Badge>\r\n-                </div>\r\n-              </CardHeader>\r\n-              <CardContent className=\"space-y-6\">\r\n-                <div className=\"grid grid-cols-2 gap-4 md:grid-cols-4\">\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Calendar className=\"h-5 w-5\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Year</p>\r\n-                      <p className=\"font-semibold text-foreground\">{car.year}</p>\r\n-                    </div>\r\n-                  </div>\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Gauge className=\"h-5 w-5\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold text-foreground\">\r\n-                        {car.mileage.toLocaleString()} mi\r\n-                      </p>\r\n-                    </div>\r\n-                  </div>\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <MapPin className=\"h-5 w-5\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Location</p>\r\n-                      <p className=\"font-semibold text-foreground line-clamp-1\">\r\n-                        {car.location}\r\n-                      </p>\r\n-                    </div>\r\n-                  </div>\r\n-                  {car.fuelType && (\r\n-                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                      <Fuel className=\"h-5 w-5\" />\r\n-                      <div>\r\n-                        <p className=\"text-xs\">Fuel Type</p>\r\n-                        <p className=\"font-semibold text-foreground capitalize\">\r\n-                          {car.fuelType}\r\n-                        </p>\r\n-                      </div>\r\n-                    </div>\r\n-                  )}\r\n-                  {car.transmission && (\r\n-                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                      <Cog className=\"h-5 w-5\" />\r\n-                      <div>\r\n-                        <p className=\"text-xs\">Transmission</p>\r\n-                        <p className=\"font-semibold text-foreground capitalize\">\r\n-                          {car.transmission}\r\n-                        </p>\r\n-                      </div>\r\n-                    </div>\r\n-                  )}\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <div>\r\n-                  <h3 className=\"mb-3 text-lg font-semibold\">Description</h3>\r\n-                  <p className=\"text-muted-foreground leading-relaxed\">\r\n-                    {car.description}\r\n-                  </p>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <div>\r\n-                  <h3 className=\"mb-3 text-lg font-semibold\">Listed On</h3>\r\n-                  <div className=\"flex flex-wrap gap-2\">\r\n-                    {car.platform.map((platform, index) => (\r\n-                      <Badge\r\n-                        key={index}\r\n-                        variant=\"secondary\"\r\n-                        className=\"text-sm px-3 py-1\"\r\n-                      >\r\n-                        {platform.name}\r\n-                      </Badge>\r\n-                    ))}\r\n-                  </div>\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-\r\n-          {/* Sidebar */}\r\n-          <div className=\"lg:col-span-1 space-y-6\">\r\n-            <Card className=\"sticky top-24\">\r\n-              <CardHeader>\r\n-                <CardTitle>Seller Information</CardTitle>\r\n-              </CardHeader>\r\n-              <CardContent className=\"space-y-4\">\r\n-                <div className=\"flex items-center gap-3\">\r\n-                  <Avatar className=\"h-12 w-12\">\r\n-                    <AvatarFallback className=\"bg-primary text-primary-foreground text-lg\">\r\n-                      {car.seller.name.charAt(0).toUpperCase()}\r\n-                    </AvatarFallback>\r\n-                  </Avatar>\r\n-                  <div>\r\n-                    <p className=\"font-semibold\">{car.seller.name}</p>\r\n-                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n-                  </div>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <div className=\"space-y-3\">\r\n-                  <a\r\n-                    href={`mailto:${car.seller.email}`}\r\n-                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n-                  >\r\n-                    <Mail className=\"h-4 w-4\" />\r\n-                    {car.seller.email}\r\n-                  </a>\r\n-                  <a\r\n-                    href={`tel:${car.seller.phone || \"\"}`}\r\n-                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n-                  >\r\n-                    <Phone className=\"h-4 w-4\" />\r\n-                    {car.seller.phone || \"N/A\"}\r\n-                  </a>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <Button variant=\"default\" className=\"w-full\" size=\"lg\">\r\n-                  Contact Seller\r\n-                </Button>\r\n-              </CardContent>\r\n-            </Card>\r\n-\r\n-            <Card className=\"shadow-card\">\r\n-              <CardHeader>\r\n-                <CardTitle className=\"flex items-center gap-2\">\r\n-                  <MapPin className=\"h-5 w-5 text-primary\" />\r\n-                  Car Location\r\n-                </CardTitle>\r\n-              </CardHeader>\r\n-              <CardContent>\r\n-                {/* <MapDisplay\r\n-                  lat={car.lat ?? 37.7749}\r\n-                  lng={car.lng ?? -122.4194}\r\n-                  title={car.title}\r\n-                /> */}\r\n-                <p className=\"mt-3 text-sm text-muted-foreground flex items-center gap-2\">\r\n-                  <MapPin className=\"h-4 w-4\" />\r\n-                  {car.location}\r\n-                </p>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-        </div>\r\n-\r\n-        {similarCars.length > 0 && (\r\n-          <section className=\"mt-12\">\r\n-            <h2 className=\"mb-6 text-2xl font-bold\">\r\n-              Similar Cars You May Like\r\n-            </h2>\r\n-            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n-              {similarCars.map((similarCar) => (\r\n-                <CarCard key={similarCar.id} car={similarCar} />\r\n-              ))}\r\n-            </div>\r\n-          </section>\r\n-        )}\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default CarDetail;\r\n"
                },
                {
                    "date": 1763631772055,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -336,13 +336,13 @@\n                   Car Location\r\n                 </CardTitle>\r\n               </CardHeader>\r\n               <CardContent>\r\n-                {/* <MapDisplay\r\n+                <MapDisplay\r\n                   lat={car.lat ?? 37.7749}\r\n                   lng={car.lng ?? -122.4194}\r\n                   title={car.title}\r\n-                /> */}\r\n+                />\r\n                 <p className=\"mt-3 text-sm text-muted-foreground flex items-center gap-2\">\r\n                   <MapPin className=\"h-4 w-4\" />\r\n                   {car.location}\r\n                 </p>\r\n"
                },
                {
                    "date": 1763631786118,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n } from \"lucide-react\";\r\n import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n import ImageCarousel from \"@/components/ImageCarousel\";\r\n-import MapDisplay from \"@/components/MapDisplay\";\r\n+// import MapDisplay from \"@/components/MapDisplay\";\r\n import CarCard from \"@/components/CarCard\";\r\n import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n@@ -336,13 +336,13 @@\n                   Car Location\r\n                 </CardTitle>\r\n               </CardHeader>\r\n               <CardContent>\r\n-                <MapDisplay\r\n+                {/* <MapDisplay\r\n                   lat={car.lat ?? 37.7749}\r\n                   lng={car.lng ?? -122.4194}\r\n                   title={car.title}\r\n-                />\r\n+                /> */}\r\n                 <p className=\"mt-3 text-sm text-muted-foreground flex items-center gap-2\">\r\n                   <MapPin className=\"h-4 w-4\" />\r\n                   {car.location}\r\n                 </p>\r\n"
                },
                {
                    "date": 1763632151480,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,9 @@\n   year: car.year,\r\n   price: car.price,\r\n   mileage: car.mileage,\r\n   condition: car.condition, // \"new\" | \"used\" | \"certified\"\r\n-  location: car.location,\r\n+  // location: car.location,\r\n   images: car.images.map((img) => `${API_BASE_URL}/uploads/${img}`),\r\n   platform: (car.platforms || []).map((p) => ({\r\n     name: p as\r\n       | \"Edmunds\"\r\n"
                },
                {
                    "date": 1763632247808,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,4 @@\n-// src/pages/CarDetail.tsx\r\n import { useParams, useNavigate } from \"react-router-dom\";\r\n import { useEffect, useState } from \"react\";\r\n import { getAllCars, getCarById, API_BASE_URL, ApiCar } from \"@/api/cars\";\r\n import { getSimilarCars } from \"@/lib/filterUtils\";\r\n@@ -7,9 +6,8 @@\n import { Badge } from \"@/components/ui/badge\";\r\n import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n import {\r\n   ArrowLeft,\r\n-  MapPin,\r\n   Gauge,\r\n   Calendar,\r\n   Mail,\r\n   Phone,\r\n@@ -20,49 +18,38 @@\n } from \"lucide-react\";\r\n import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n import ImageCarousel from \"@/components/ImageCarousel\";\r\n-// import MapDisplay from \"@/components/MapDisplay\";\r\n import CarCard from \"@/components/CarCard\";\r\n import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n import type { UICar } from \"./Dashboard\";\r\n \r\n-// Map backend API car → UI car\r\n+// ⬅️ UPDATED: Removed location & lat/lng\r\n const mapApiCarToUICar = (car: ApiCar): UICar => ({\r\n   id: car._id,\r\n   title: `${car.brand} ${car.model} ${car.year}`,\r\n   brand: car.brand,\r\n   model: car.model,\r\n   year: car.year,\r\n   price: car.price,\r\n   mileage: car.mileage,\r\n-  condition: car.condition, // \"new\" | \"used\" | \"certified\"\r\n-  // location: car.location,\r\n+  condition: car.condition,\r\n   images: car.images.map((img) => `${API_BASE_URL}/uploads/${img}`),\r\n   platform: (car.platforms || []).map((p) => ({\r\n-    name: p as\r\n-      | \"Edmunds\"\r\n-      | \"OLX\"\r\n-      | \"Facebook Marketplace\"\r\n-      | \"AutoTrader\"\r\n-      | \"Cars.com\",\r\n+    name: p,\r\n   })),\r\n   seller: {\r\n-    id: (car.seller && \"id\" in car.seller ? (car.seller as { id?: string }).id : undefined) || \"N/A\",\r\n+    id: \"\",\r\n     name: car.seller?.name || \"Private Seller\",\r\n     email: car.seller?.email || \"N/A\",\r\n-    phone: (car.seller && typeof car.seller === \"object\" && \"phone\" in car.seller)\r\n-      ? (car.seller as { phone?: string }).phone ?? \"N/A\"\r\n-      : \"N/A\",\r\n+    phone: \"N/A\",\r\n   },\r\n   description: car.description,\r\n   createdAt: car.createdAt,\r\n   fuelType: undefined,\r\n   transmission: undefined,\r\n-  lat: car.latitude,\r\n-  lng: car.longitude,\r\n });\r\n \r\n const CarDetail = () => {\r\n   const { id } = useParams();\r\n@@ -78,17 +65,15 @@\n     const fetchCar = async () => {\r\n       if (!id) return;\r\n       setLoading(true);\r\n       try {\r\n-        // 1) Get selected car\r\n         const apiCar = await getCarById(id);\r\n         const uiCar = mapApiCarToUICar(apiCar);\r\n         setCar(uiCar);\r\n \r\n-        // 2) Get all cars and compute similar ones\r\n         const allApiCars = await getAllCars();\r\n         const allUiCars = allApiCars.map(mapApiCarToUICar);\r\n-        const similar = getSimilarCars(uiCar, allUiCars); // ✅ no any\r\n+        const similar = getSimilarCars(uiCar, allUiCars);\r\n         setSimilarCars(similar);\r\n       } catch (error) {\r\n         console.error(\"Error loading car details\", error);\r\n       } finally {\r\n@@ -114,19 +99,12 @@\n     if (isInComparison(car.id)) {\r\n       removeFromComparison(car.id);\r\n       toast({ title: \"Removed from comparison\" });\r\n     } else {\r\n-      const added = addToComparison(car); // ✅ UICar now matches Car structurally\r\n-\r\n-      if (added) {\r\n-        toast({ title: \"Added to comparison\" });\r\n-      } else {\r\n-        toast({\r\n-          title: \"Comparison limit reached\",\r\n-          description: \"You can only compare up to 3 cars at a time.\",\r\n-          variant: \"destructive\",\r\n-        });\r\n-      }\r\n+      const added = addToComparison(car);\r\n+      toast({\r\n+        title: added ? \"Added to comparison\" : \"Comparison limit reached\",\r\n+      });\r\n     }\r\n   };\r\n \r\n   if (loading) {\r\n@@ -148,17 +126,15 @@\n \r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n-        <Button\r\n-          variant=\"ghost\"\r\n-          onClick={() => navigate(\"/\")}\r\n-          className=\"mb-6 gap-2\"\r\n-        >\r\n+        {/* Back */}\r\n+        <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"mb-6 gap-2\">\r\n           <ArrowLeft className=\"h-4 w-4\" />\r\n           Back to Listings\r\n         </Button>\r\n \r\n+        {/* Favorite & Compare */}\r\n         <div className=\"mb-6 flex gap-2\">\r\n           <Button\r\n             variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n             onClick={handleFavoriteClick}\r\n@@ -166,8 +142,9 @@\n           >\r\n             <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n             {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n           </Button>\r\n+\r\n           <Button\r\n             variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n             onClick={handleComparisonClick}\r\n             className=\"gap-2\"\r\n@@ -179,14 +156,12 @@\n \r\n         <div className=\"grid gap-8 lg:grid-cols-3\">\r\n           {/* Main Content */}\r\n           <div className=\"lg:col-span-2 space-y-6\">\r\n-            {/* Image Carousel */}\r\n             <Card className=\"overflow-hidden\">\r\n               <ImageCarousel images={car.images} alt={car.title} />\r\n             </Card>\r\n \r\n-            {/* Car Details */}\r\n             <Card>\r\n               <CardHeader>\r\n                 <div className=\"flex items-start justify-between\">\r\n                   <div>\r\n@@ -194,62 +169,52 @@\n                     <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n                       ${car.price.toLocaleString()}\r\n                     </p>\r\n                   </div>\r\n+\r\n                   <Badge\r\n                     variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n                     className=\"capitalize text-base px-4 py-1\"\r\n                   >\r\n                     {car.condition}\r\n                   </Badge>\r\n                 </div>\r\n               </CardHeader>\r\n+\r\n               <CardContent className=\"space-y-6\">\r\n                 <div className=\"grid grid-cols-2 gap-4 md:grid-cols-4\">\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Calendar className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Year</p>\r\n-                      <p className=\"font-semibold text-foreground\">{car.year}</p>\r\n+                      <p className=\"font-semibold\">{car.year}</p>\r\n                     </div>\r\n                   </div>\r\n+\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Gauge className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold text-foreground\">\r\n-                        {car.mileage.toLocaleString()} mi\r\n-                      </p>\r\n+                      <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n                     </div>\r\n                   </div>\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <MapPin className=\"h-5 w-5\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Location</p>\r\n-                      <p className=\"font-semibold text-foreground line-clamp-1\">\r\n-                        {car.location}\r\n-                      </p>\r\n-                    </div>\r\n-                  </div>\r\n+\r\n                   {car.fuelType && (\r\n                     <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                       <Fuel className=\"h-5 w-5\" />\r\n                       <div>\r\n                         <p className=\"text-xs\">Fuel Type</p>\r\n-                        <p className=\"font-semibold text-foreground capitalize\">\r\n-                          {car.fuelType}\r\n-                        </p>\r\n+                        <p className=\"font-semibold capitalize\">{car.fuelType}</p>\r\n                       </div>\r\n                     </div>\r\n                   )}\r\n+\r\n                   {car.transmission && (\r\n                     <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                       <Cog className=\"h-5 w-5\" />\r\n                       <div>\r\n                         <p className=\"text-xs\">Transmission</p>\r\n-                        <p className=\"font-semibold text-foreground capitalize\">\r\n-                          {car.transmission}\r\n-                        </p>\r\n+                        <p className=\"font-semibold capitalize\">{car.transmission}</p>\r\n                       </div>\r\n                     </div>\r\n                   )}\r\n                 </div>\r\n@@ -257,24 +222,18 @@\n                 <Separator />\r\n \r\n                 <div>\r\n                   <h3 className=\"mb-3 text-lg font-semibold\">Description</h3>\r\n-                  <p className=\"text-muted-foreground leading-relaxed\">\r\n-                    {car.description}\r\n-                  </p>\r\n+                  <p className=\"text-muted-foreground\">{car.description}</p>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n                 <div>\r\n                   <h3 className=\"mb-3 text-lg font-semibold\">Listed On</h3>\r\n                   <div className=\"flex flex-wrap gap-2\">\r\n                     {car.platform.map((platform, index) => (\r\n-                      <Badge\r\n-                        key={index}\r\n-                        variant=\"secondary\"\r\n-                        className=\"text-sm px-3 py-1\"\r\n-                      >\r\n+                      <Badge key={index} variant=\"secondary\" className=\"px-3 py-1 text-sm\">\r\n                         {platform.name}\r\n                       </Badge>\r\n                     ))}\r\n                   </div>\r\n@@ -282,9 +241,9 @@\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n-          {/* Sidebar */}\r\n+          {/* Sidebar: Seller */}\r\n           <div className=\"lg:col-span-1 space-y-6\">\r\n             <Card className=\"sticky top-24\">\r\n               <CardHeader>\r\n                 <CardTitle>Seller Information</CardTitle>\r\n@@ -306,16 +265,17 @@\n \r\n                 <div className=\"space-y-3\">\r\n                   <a\r\n                     href={`mailto:${car.seller.email}`}\r\n-                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n+                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground\"\r\n                   >\r\n                     <Mail className=\"h-4 w-4\" />\r\n                     {car.seller.email}\r\n                   </a>\r\n+\r\n                   <a\r\n                     href={`tel:${car.seller.phone || \"\"}`}\r\n-                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n+                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground\"\r\n                   >\r\n                     <Phone className=\"h-4 w-4\" />\r\n                     {car.seller.phone || \"N/A\"}\r\n                   </a>\r\n@@ -327,36 +287,15 @@\n                   Contact Seller\r\n                 </Button>\r\n               </CardContent>\r\n             </Card>\r\n-\r\n-            <Card className=\"shadow-card\">\r\n-              <CardHeader>\r\n-                <CardTitle className=\"flex items-center gap-2\">\r\n-                  <MapPin className=\"h-5 w-5 text-primary\" />\r\n-                  Car Location\r\n-                </CardTitle>\r\n-              </CardHeader>\r\n-              <CardContent>\r\n-                {/* <MapDisplay\r\n-                  lat={car.lat ?? 37.7749}\r\n-                  lng={car.lng ?? -122.4194}\r\n-                  title={car.title}\r\n-                /> */}\r\n-                <p className=\"mt-3 text-sm text-muted-foreground flex items-center gap-2\">\r\n-                  <MapPin className=\"h-4 w-4\" />\r\n-                  {car.location}\r\n-                </p>\r\n-              </CardContent>\r\n-            </Card>\r\n           </div>\r\n         </div>\r\n \r\n+        {/* Similar Cars */}\r\n         {similarCars.length > 0 && (\r\n           <section className=\"mt-12\">\r\n-            <h2 className=\"mb-6 text-2xl font-bold\">\r\n-              Similar Cars You May Like\r\n-            </h2>\r\n+            <h2 className=\"mb-6 text-2xl font-bold\">Similar Cars You May Like</h2>\r\n             <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n               {similarCars.map((similarCar) => (\r\n                 <CarCard key={similarCar.id} car={similarCar} />\r\n               ))}\r\n"
                },
                {
                    "date": 1763632388995,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,11 +35,9 @@\n   price: car.price,\r\n   mileage: car.mileage,\r\n   condition: car.condition,\r\n   images: car.images.map((img) => `${API_BASE_URL}/uploads/${img}`),\r\n-  platform: (car.platforms || []).map((p) => ({\r\n-    name: p,\r\n-  })),\r\n+  platform: (car.platforms || []).map((p) => ({ name: p as UICar[\"platform\"][number][\"name\"] })),\r\n   seller: {\r\n     id: \"\",\r\n     name: car.seller?.name || \"Private Seller\",\r\n     email: car.seller?.email || \"N/A\",\r\n"
                },
                {
                    "date": 1763632396546,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,11 @@\n   price: car.price,\r\n   mileage: car.mileage,\r\n   condition: car.condition,\r\n   images: car.images.map((img) => `${API_BASE_URL}/uploads/${img}`),\r\n-  platform: (car.platforms || []).map((p) => ({ name: p as UICar[\"platform\"][number][\"name\"] })),\r\n+  platform: (car.platforms || []).map((p) => ({\r\n+    name: p as \"Edmunds\" | \"OLX\" | \"Facebook Marketplace\" | \"AutoTrader\" | \"Cars.com\",\r\n+  })),\r\n   seller: {\r\n     id: \"\",\r\n     name: car.seller?.name || \"Private Seller\",\r\n     email: car.seller?.email || \"N/A\",\r\n"
                },
                {
                    "date": 1763632410166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,8 +48,9 @@\n   description: car.description,\r\n   createdAt: car.createdAt,\r\n   fuelType: undefined,\r\n   transmission: undefined,\r\n+  location: car.location || \"Not specified\",\r\n });\r\n \r\n const CarDetail = () => {\r\n   const { id } = useParams();\r\n"
                },
                {
                    "date": 1763632529855,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,5 @@\n+// src/pages/CarDetail.tsx\r\n import { useParams, useNavigate } from \"react-router-dom\";\r\n import { useEffect, useState } from \"react\";\r\n import { getAllCars, getCarById, API_BASE_URL, ApiCar } from \"@/api/cars\";\r\n import { getSimilarCars } from \"@/lib/filterUtils\";\r\n@@ -24,9 +25,10 @@\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n import type { UICar } from \"./Dashboard\";\r\n \r\n-// ⬅️ UPDATED: Removed location & lat/lng\r\n+\r\n+// 🔥 FIXED: No lat/lng, no map fields\r\n const mapApiCarToUICar = (car: ApiCar): UICar => ({\r\n   id: car._id,\r\n   title: `${car.brand} ${car.model} ${car.year}`,\r\n   brand: car.brand,\r\n@@ -34,25 +36,40 @@\n   year: car.year,\r\n   price: car.price,\r\n   mileage: car.mileage,\r\n   condition: car.condition,\r\n+  description: car.description,\r\n   images: car.images.map((img) => `${API_BASE_URL}/uploads/${img}`),\r\n+\r\n+  // platforms\r\n   platform: (car.platforms || []).map((p) => ({\r\n-    name: p as \"Edmunds\" | \"OLX\" | \"Facebook Marketplace\" | \"AutoTrader\" | \"Cars.com\",\r\n+    name: p as\r\n+      | \"Edmunds\"\r\n+      | \"OLX\"\r\n+      | \"Facebook Marketplace\"\r\n+      | \"AutoTrader\"\r\n+      | \"Cars.com\",\r\n   })),\r\n+\r\n+  // seller\r\n   seller: {\r\n     id: \"\",\r\n     name: car.seller?.name || \"Private Seller\",\r\n     email: car.seller?.email || \"N/A\",\r\n     phone: \"N/A\",\r\n   },\r\n-  description: car.description,\r\n+\r\n   createdAt: car.createdAt,\r\n+\r\n+  // optional fields\r\n   fuelType: undefined,\r\n   transmission: undefined,\r\n+\r\n+  // location only as string\r\n   location: car.location || \"Not specified\",\r\n });\r\n \r\n+\r\n const CarDetail = () => {\r\n   const { id } = useParams();\r\n   const navigate = useNavigate();\r\n   const { isFavorite, toggleFavorite } = useFavorites();\r\n@@ -65,36 +82,37 @@\n   useEffect(() => {\r\n     const fetchCar = async () => {\r\n       if (!id) return;\r\n       setLoading(true);\r\n+\r\n       try {\r\n         const apiCar = await getCarById(id);\r\n         const uiCar = mapApiCarToUICar(apiCar);\r\n         setCar(uiCar);\r\n \r\n-        const allApiCars = await getAllCars();\r\n-        const allUiCars = allApiCars.map(mapApiCarToUICar);\r\n-        const similar = getSimilarCars(uiCar, allUiCars);\r\n-        setSimilarCars(similar);\r\n-      } catch (error) {\r\n-        console.error(\"Error loading car details\", error);\r\n+        const allApi = await getAllCars();\r\n+        setSimilarCars(allApi.map(mapApiCarToUICar));\r\n+      } catch (err) {\r\n+        console.error(err);\r\n       } finally {\r\n         setLoading(false);\r\n       }\r\n     };\r\n \r\n     fetchCar();\r\n   }, [id]);\r\n \r\n+\r\n   const handleFavoriteClick = () => {\r\n-    if (car) {\r\n-      toggleFavorite(car.id);\r\n-      toast({\r\n-        title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n-      });\r\n-    }\r\n+    if (!car) return;\r\n+    toggleFavorite(car.id);\r\n+\r\n+    toast({\r\n+      title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n+    });\r\n   };\r\n \r\n+\r\n   const handleComparisonClick = () => {\r\n     if (!car) return;\r\n \r\n     if (isInComparison(car.id)) {\r\n@@ -107,35 +125,38 @@\n       });\r\n     }\r\n   };\r\n \r\n+\r\n   if (loading) {\r\n     return (\r\n       <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">Loading car details...</h1>\r\n+        <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n       </div>\r\n     );\r\n   }\r\n \r\n   if (!car) {\r\n     return (\r\n       <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"mb-4 text-3xl font-bold\">Car Not Found</h1>\r\n+        <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n         <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n       </div>\r\n     );\r\n   }\r\n \r\n+\r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n+\r\n         {/* Back */}\r\n         <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"mb-6 gap-2\">\r\n           <ArrowLeft className=\"h-4 w-4\" />\r\n           Back to Listings\r\n         </Button>\r\n \r\n-        {/* Favorite & Compare */}\r\n+        {/* Save + Compare */}\r\n         <div className=\"mb-6 flex gap-2\">\r\n           <Button\r\n             variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n             onClick={handleFavoriteClick}\r\n@@ -154,18 +175,23 @@\n             {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n           </Button>\r\n         </div>\r\n \r\n+\r\n         <div className=\"grid gap-8 lg:grid-cols-3\">\r\n-          {/* Main Content */}\r\n+\r\n+          {/* Main Section */}\r\n           <div className=\"lg:col-span-2 space-y-6\">\r\n+\r\n+            {/* Images */}\r\n             <Card className=\"overflow-hidden\">\r\n               <ImageCarousel images={car.images} alt={car.title} />\r\n             </Card>\r\n \r\n+            {/* Car Info */}\r\n             <Card>\r\n               <CardHeader>\r\n-                <div className=\"flex items-start justify-between\">\r\n+                <div className=\"flex justify-between items-start\">\r\n                   <div>\r\n                     <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n                     <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n                       ${car.price.toLocaleString()}\r\n@@ -181,9 +207,12 @@\n                 </div>\r\n               </CardHeader>\r\n \r\n               <CardContent className=\"space-y-6\">\r\n-                <div className=\"grid grid-cols-2 gap-4 md:grid-cols-4\">\r\n+\r\n+                {/* Specs */}\r\n+                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n+\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Calendar className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Year</p>\r\n@@ -194,17 +223,19 @@\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Gauge className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n+                      <p className=\"font-semibold\">\r\n+                        {car.mileage.toLocaleString()} mi\r\n+                      </p>\r\n                     </div>\r\n                   </div>\r\n \r\n                   {car.fuelType && (\r\n                     <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                       <Fuel className=\"h-5 w-5\" />\r\n                       <div>\r\n-                        <p className=\"text-xs\">Fuel Type</p>\r\n+                        <p className=\"text-xs\">Fuel</p>\r\n                         <p className=\"font-semibold capitalize\">{car.fuelType}</p>\r\n                       </div>\r\n                     </div>\r\n                   )}\r\n@@ -217,93 +248,96 @@\n                         <p className=\"font-semibold capitalize\">{car.transmission}</p>\r\n                       </div>\r\n                     </div>\r\n                   )}\r\n+\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n+                {/* Description */}\r\n                 <div>\r\n-                  <h3 className=\"mb-3 text-lg font-semibold\">Description</h3>\r\n+                  <h3 className=\"font-semibold text-lg mb-3\">Description</h3>\r\n                   <p className=\"text-muted-foreground\">{car.description}</p>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n+                {/* Platforms */}\r\n                 <div>\r\n-                  <h3 className=\"mb-3 text-lg font-semibold\">Listed On</h3>\r\n+                  <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n                   <div className=\"flex flex-wrap gap-2\">\r\n-                    {car.platform.map((platform, index) => (\r\n-                      <Badge key={index} variant=\"secondary\" className=\"px-3 py-1 text-sm\">\r\n-                        {platform.name}\r\n+                    {car.platform.map((p, i) => (\r\n+                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">\r\n+                        {p.name}\r\n                       </Badge>\r\n                     ))}\r\n                   </div>\r\n                 </div>\r\n+\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n-          {/* Sidebar: Seller */}\r\n+          {/* Seller */}\r\n           <div className=\"lg:col-span-1 space-y-6\">\r\n             <Card className=\"sticky top-24\">\r\n               <CardHeader>\r\n                 <CardTitle>Seller Information</CardTitle>\r\n               </CardHeader>\r\n+\r\n               <CardContent className=\"space-y-4\">\r\n                 <div className=\"flex items-center gap-3\">\r\n                   <Avatar className=\"h-12 w-12\">\r\n-                    <AvatarFallback className=\"bg-primary text-primary-foreground text-lg\">\r\n-                      {car.seller.name.charAt(0).toUpperCase()}\r\n+                    <AvatarFallback className=\"bg-primary text-primary-foreground\">\r\n+                      {car.seller.name.charAt(0)}\r\n                     </AvatarFallback>\r\n                   </Avatar>\r\n+\r\n                   <div>\r\n                     <p className=\"font-semibold\">{car.seller.name}</p>\r\n                     <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n                   </div>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                <div className=\"space-y-3\">\r\n-                  <a\r\n-                    href={`mailto:${car.seller.email}`}\r\n-                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground\"\r\n-                  >\r\n-                    <Mail className=\"h-4 w-4\" />\r\n-                    {car.seller.email}\r\n-                  </a>\r\n+                <a\r\n+                  href={`mailto:${car.seller.email}`}\r\n+                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n+                >\r\n+                  <Mail className=\"h-4 w-4\" />\r\n+                  {car.seller.email}\r\n+                </a>\r\n \r\n-                  <a\r\n-                    href={`tel:${car.seller.phone || \"\"}`}\r\n-                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground\"\r\n-                  >\r\n-                    <Phone className=\"h-4 w-4\" />\r\n-                    {car.seller.phone || \"N/A\"}\r\n-                  </a>\r\n-                </div>\r\n+                <a\r\n+                  href={`tel:${car.seller.phone || \"\"}`}\r\n+                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n+                >\r\n+                  <Phone className=\"h-4 w-4\" />\r\n+                  {car.seller.phone || \"N/A\"}\r\n+                </a>\r\n \r\n                 <Separator />\r\n \r\n-                <Button variant=\"default\" className=\"w-full\" size=\"lg\">\r\n-                  Contact Seller\r\n-                </Button>\r\n+                <Button className=\"w-full\">Contact Seller</Button>\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n         </div>\r\n \r\n         {/* Similar Cars */}\r\n         {similarCars.length > 0 && (\r\n           <section className=\"mt-12\">\r\n-            <h2 className=\"mb-6 text-2xl font-bold\">Similar Cars You May Like</h2>\r\n+            <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n             <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n-              {similarCars.map((similarCar) => (\r\n-                <CarCard key={similarCar.id} car={similarCar} />\r\n+              {similarCars.map((c) => (\r\n+                <CarCard key={c.id} car={c} />\r\n               ))}\r\n             </div>\r\n           </section>\r\n         )}\r\n+\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n"
                },
                {
                    "date": 1763632872275,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,8 @@\n // src/pages/CarDetail.tsx\r\n import { useParams, useNavigate } from \"react-router-dom\";\r\n import { useEffect, useState } from \"react\";\r\n import { getAllCars, getCarById, API_BASE_URL, ApiCar } from \"@/api/cars\";\r\n-import { getSimilarCars } from \"@/lib/filterUtils\";\r\n import { Button } from \"@/components/ui/button\";\r\n import { Badge } from \"@/components/ui/badge\";\r\n import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n import {\r\n@@ -23,12 +22,29 @@\n import CarCard from \"@/components/CarCard\";\r\n import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n-import type { UICar } from \"./Dashboard\";\r\n \r\n+// Type for UI Car (no location)\r\n+export interface UICar {\r\n+  id: string;\r\n+  title: string;\r\n+  brand: string;\r\n+  model: string;\r\n+  year: number;\r\n+  price: number;\r\n+  mileage: number;\r\n+  condition: string;\r\n+  description: string;\r\n+  images: string[];\r\n+  platform: { name: string }[];\r\n+  seller: { id: string; name: string; email: string; phone: string };\r\n+  createdAt: string;\r\n+  fuelType?: string;\r\n+  transmission?: string;\r\n+}\r\n \r\n-// 🔥 FIXED: No lat/lng, no map fields\r\n+// Map API response to UI Car\r\n const mapApiCarToUICar = (car: ApiCar): UICar => ({\r\n   id: car._id,\r\n   title: `${car.brand} ${car.model} ${car.year}`,\r\n   brand: car.brand,\r\n@@ -38,38 +54,18 @@\n   mileage: car.mileage,\r\n   condition: car.condition,\r\n   description: car.description,\r\n   images: car.images.map((img) => `${API_BASE_URL}/uploads/${img}`),\r\n-\r\n-  // platforms\r\n-  platform: (car.platforms || []).map((p) => ({\r\n-    name: p as\r\n-      | \"Edmunds\"\r\n-      | \"OLX\"\r\n-      | \"Facebook Marketplace\"\r\n-      | \"AutoTrader\"\r\n-      | \"Cars.com\",\r\n-  })),\r\n-\r\n-  // seller\r\n+  platform: (car.platforms || []).map((p) => ({ name: p })),\r\n   seller: {\r\n-    id: \"\",\r\n+    id: car.seller?._id || \"\",\r\n     name: car.seller?.name || \"Private Seller\",\r\n     email: car.seller?.email || \"N/A\",\r\n     phone: \"N/A\",\r\n   },\r\n-\r\n   createdAt: car.createdAt,\r\n-\r\n-  // optional fields\r\n-  fuelType: undefined,\r\n-  transmission: undefined,\r\n-\r\n-  // location only as string\r\n-  location: car.location || \"Not specified\",\r\n });\r\n \r\n-\r\n const CarDetail = () => {\r\n   const { id } = useParams();\r\n   const navigate = useNavigate();\r\n   const { isFavorite, toggleFavorite } = useFavorites();\r\n@@ -82,9 +78,8 @@\n   useEffect(() => {\r\n     const fetchCar = async () => {\r\n       if (!id) return;\r\n       setLoading(true);\r\n-\r\n       try {\r\n         const apiCar = await getCarById(id);\r\n         const uiCar = mapApiCarToUICar(apiCar);\r\n         setCar(uiCar);\r\n@@ -96,67 +91,50 @@\n       } finally {\r\n         setLoading(false);\r\n       }\r\n     };\r\n-\r\n     fetchCar();\r\n   }, [id]);\r\n \r\n-\r\n   const handleFavoriteClick = () => {\r\n     if (!car) return;\r\n     toggleFavorite(car.id);\r\n-\r\n     toast({\r\n       title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n     });\r\n   };\r\n \r\n-\r\n   const handleComparisonClick = () => {\r\n     if (!car) return;\r\n-\r\n     if (isInComparison(car.id)) {\r\n       removeFromComparison(car.id);\r\n       toast({ title: \"Removed from comparison\" });\r\n     } else {\r\n       const added = addToComparison(car);\r\n-      toast({\r\n-        title: added ? \"Added to comparison\" : \"Comparison limit reached\",\r\n-      });\r\n+      toast({ title: added ? \"Added to comparison\" : \"Comparison limit reached\" });\r\n     }\r\n   };\r\n \r\n+  if (loading) return (\r\n+    <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+      <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n+    </div>\r\n+  );\r\n \r\n-  if (loading) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n-      </div>\r\n-    );\r\n-  }\r\n+  if (!car) return (\r\n+    <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+      <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n+      <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n+    </div>\r\n+  );\r\n \r\n-  if (!car) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n-        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-\r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n-\r\n-        {/* Back */}\r\n         <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"mb-6 gap-2\">\r\n-          <ArrowLeft className=\"h-4 w-4\" />\r\n-          Back to Listings\r\n+          <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n         </Button>\r\n \r\n-        {/* Save + Compare */}\r\n         <div className=\"mb-6 flex gap-2\">\r\n           <Button\r\n             variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n             onClick={handleFavoriteClick}\r\n@@ -175,30 +153,21 @@\n             {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n           </Button>\r\n         </div>\r\n \r\n-\r\n         <div className=\"grid gap-8 lg:grid-cols-3\">\r\n-\r\n-          {/* Main Section */}\r\n           <div className=\"lg:col-span-2 space-y-6\">\r\n-\r\n-            {/* Images */}\r\n             <Card className=\"overflow-hidden\">\r\n               <ImageCarousel images={car.images} alt={car.title} />\r\n             </Card>\r\n \r\n-            {/* Car Info */}\r\n             <Card>\r\n               <CardHeader>\r\n                 <div className=\"flex justify-between items-start\">\r\n                   <div>\r\n                     <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n-                      ${car.price.toLocaleString()}\r\n-                    </p>\r\n+                    <p className=\"mt-2 text-2xl font-bold text-primary\">${car.price.toLocaleString()}</p>\r\n                   </div>\r\n-\r\n                   <Badge\r\n                     variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n                     className=\"capitalize text-base px-4 py-1\"\r\n                   >\r\n@@ -207,12 +176,9 @@\n                 </div>\r\n               </CardHeader>\r\n \r\n               <CardContent className=\"space-y-6\">\r\n-\r\n-                {/* Specs */}\r\n                 <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n-\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Calendar className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Year</p>\r\n@@ -223,11 +189,9 @@\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Gauge className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold\">\r\n-                        {car.mileage.toLocaleString()} mi\r\n-                      </p>\r\n+                      <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n                     </div>\r\n                   </div>\r\n \r\n                   {car.fuelType && (\r\n@@ -248,38 +212,31 @@\n                         <p className=\"font-semibold capitalize\">{car.transmission}</p>\r\n                       </div>\r\n                     </div>\r\n                   )}\r\n-\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                {/* Description */}\r\n                 <div>\r\n                   <h3 className=\"font-semibold text-lg mb-3\">Description</h3>\r\n                   <p className=\"text-muted-foreground\">{car.description}</p>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                {/* Platforms */}\r\n                 <div>\r\n                   <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n                   <div className=\"flex flex-wrap gap-2\">\r\n                     {car.platform.map((p, i) => (\r\n-                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">\r\n-                        {p.name}\r\n-                      </Badge>\r\n+                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">{p.name}</Badge>\r\n                     ))}\r\n                   </div>\r\n                 </div>\r\n-\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n-          {/* Seller */}\r\n           <div className=\"lg:col-span-1 space-y-6\">\r\n             <Card className=\"sticky top-24\">\r\n               <CardHeader>\r\n                 <CardTitle>Seller Information</CardTitle>\r\n@@ -291,31 +248,22 @@\n                     <AvatarFallback className=\"bg-primary text-primary-foreground\">\r\n                       {car.seller.name.charAt(0)}\r\n                     </AvatarFallback>\r\n                   </Avatar>\r\n-\r\n                   <div>\r\n                     <p className=\"font-semibold\">{car.seller.name}</p>\r\n                     <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n                   </div>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                <a\r\n-                  href={`mailto:${car.seller.email}`}\r\n-                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n-                >\r\n-                  <Mail className=\"h-4 w-4\" />\r\n-                  {car.seller.email}\r\n+                <a href={`mailto:${car.seller.email}`} className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\">\r\n+                  <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n                 </a>\r\n \r\n-                <a\r\n-                  href={`tel:${car.seller.phone || \"\"}`}\r\n-                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n-                >\r\n-                  <Phone className=\"h-4 w-4\" />\r\n-                  {car.seller.phone || \"N/A\"}\r\n+                <a href={`tel:${car.seller.phone}`} className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\">\r\n+                  <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n                 </a>\r\n \r\n                 <Separator />\r\n \r\n@@ -324,9 +272,8 @@\n             </Card>\r\n           </div>\r\n         </div>\r\n \r\n-        {/* Similar Cars */}\r\n         {similarCars.length > 0 && (\r\n           <section className=\"mt-12\">\r\n             <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n             <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n@@ -335,9 +282,8 @@\n               ))}\r\n             </div>\r\n           </section>\r\n         )}\r\n-\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n"
                },
                {
                    "date": 1763634944166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,250 @@\n+// src/pages/CarDetail.tsx\r\n+import { useParams, useNavigate } from \"react-router-dom\";\r\n+import { useEffect, useState } from \"react\";\r\n+import { getAllCars, getCarById } from \"@/api/cars\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import {\r\n+  ArrowLeft,\r\n+  Gauge,\r\n+  Calendar,\r\n+  Mail,\r\n+  Phone,\r\n+  Heart,\r\n+  GitCompare,\r\n+  Fuel,\r\n+  Cog,\r\n+} from \"lucide-react\";\r\n+import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+import ImageCarousel from \"@/components/ImageCarousel\";\r\n+import CarCard from \"@/components/CarCard\";\r\n+import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { toast } from \"@/hooks/use-toast\";\r\n+import type { Car as CarType } from \"@/types/car\";\r\n+\r\n+const CarDetail = () => {\r\n+  const { id } = useParams();\r\n+  const navigate = useNavigate();\r\n+  const { isFavorite, toggleFavorite } = useFavorites();\r\n+  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n+\r\n+  const [car, setCar] = useState<CarType | null>(null);\r\n+  const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  useEffect(() => {\r\n+    const fetchCar = async () => {\r\n+      if (!id) return;\r\n+      setLoading(true);\r\n+      try {\r\n+        const apiCar = await getCarById(id);\r\n+        setCar(apiCar); // use API response directly\r\n+\r\n+        const allCars = await getAllCars();\r\n+        setSimilarCars(allCars);\r\n+      } catch (err) {\r\n+        console.error(err);\r\n+      } finally {\r\n+        setLoading(false);\r\n+      }\r\n+    };\r\n+    fetchCar();\r\n+  }, [id]);\r\n+\r\n+  const handleFavoriteClick = () => {\r\n+    if (!car) return;\r\n+    toggleFavorite(car.id);\r\n+    toast({\r\n+      title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n+    });\r\n+  };\r\n+\r\n+  const handleComparisonClick = () => {\r\n+    if (!car) return;\r\n+    if (isInComparison(car.id)) {\r\n+      removeFromComparison(car.id);\r\n+      toast({ title: \"Removed from comparison\" });\r\n+    } else {\r\n+      const added = addToComparison(car);\r\n+      toast({ title: added ? \"Added to comparison\" : \"Comparison limit reached\" });\r\n+    }\r\n+  };\r\n+\r\n+  if (loading) return (\r\n+    <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+      <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n+    </div>\r\n+  );\r\n+\r\n+  if (!car) return (\r\n+    <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+      <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n+      <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n+    </div>\r\n+  );\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"mb-6 gap-2\">\r\n+          <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n+        </Button>\r\n+\r\n+        <div className=\"mb-6 flex gap-2\">\r\n+          <Button\r\n+            variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n+            onClick={handleFavoriteClick}\r\n+            className=\"gap-2\"\r\n+          >\r\n+            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n+            {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n+          </Button>\r\n+\r\n+          <Button\r\n+            variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n+            onClick={handleComparisonClick}\r\n+            className=\"gap-2\"\r\n+          >\r\n+            <GitCompare className=\"h-4 w-4\" />\r\n+            {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"grid gap-8 lg:grid-cols-3\">\r\n+          <div className=\"lg:col-span-2 space-y-6\">\r\n+            <Card className=\"overflow-hidden\">\r\n+              <ImageCarousel images={car.images} alt={car.title} />\r\n+            </Card>\r\n+\r\n+            <Card>\r\n+              <CardHeader>\r\n+                <div className=\"flex justify-between items-start\">\r\n+                  <div>\r\n+                    <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n+                    <p className=\"mt-2 text-2xl font-bold text-primary\">${car.price.toLocaleString()}</p>\r\n+                  </div>\r\n+                  <Badge\r\n+                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n+                    className=\"capitalize text-base px-4 py-1\"\r\n+                  >\r\n+                    {car.condition}\r\n+                  </Badge>\r\n+                </div>\r\n+              </CardHeader>\r\n+\r\n+              <CardContent className=\"space-y-6\">\r\n+                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n+                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                    <Calendar className=\"h-5 w-5\" />\r\n+                    <div>\r\n+                      <p className=\"text-xs\">Year</p>\r\n+                      <p className=\"font-semibold\">{car.year}</p>\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                    <Gauge className=\"h-5 w-5\" />\r\n+                    <div>\r\n+                      <p className=\"text-xs\">Mileage</p>\r\n+                      <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  {car.fuelType && (\r\n+                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                      <Fuel className=\"h-5 w-5\" />\r\n+                      <div>\r\n+                        <p className=\"text-xs\">Fuel</p>\r\n+                        <p className=\"font-semibold capitalize\">{car.fuelType}</p>\r\n+                      </div>\r\n+                    </div>\r\n+                  )}\r\n+\r\n+                  {car.transmission && (\r\n+                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                      <Cog className=\"h-5 w-5\" />\r\n+                      <div>\r\n+                        <p className=\"text-xs\">Transmission</p>\r\n+                        <p className=\"font-semibold capitalize\">{car.transmission}</p>\r\n+                      </div>\r\n+                    </div>\r\n+                  )}\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <div>\r\n+                  <h3 className=\"font-semibold text-lg mb-3\">Description</h3>\r\n+                  <p className=\"text-muted-foreground\">{car.description}</p>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <div>\r\n+                  <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n+                  <div className=\"flex flex-wrap gap-2\">\r\n+                    {car.platform.map((p, i) => (\r\n+                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">{p.name}</Badge>\r\n+                    ))}\r\n+                  </div>\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+\r\n+          <div className=\"lg:col-span-1 space-y-6\">\r\n+            <Card className=\"sticky top-24\">\r\n+              <CardHeader>\r\n+                <CardTitle>Seller Information</CardTitle>\r\n+              </CardHeader>\r\n+\r\n+              <CardContent className=\"space-y-4\">\r\n+                <div className=\"flex items-center gap-3\">\r\n+                  <Avatar className=\"h-12 w-12\">\r\n+                    <AvatarFallback className=\"bg-primary text-primary-foreground\">\r\n+                      {car.seller.name.charAt(0)}\r\n+                    </AvatarFallback>\r\n+                  </Avatar>\r\n+                  <div>\r\n+                    <p className=\"font-semibold\">{car.seller.name}</p>\r\n+                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n+                  </div>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <a href={`mailto:${car.seller.email}`} className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\">\r\n+                  <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n+                </a>\r\n+\r\n+                <a href={`tel:${car.seller.phone}`} className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\">\r\n+                  <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n+                </a>\r\n+\r\n+                <Separator />\r\n+\r\n+                <Button className=\"w-full\">Contact Seller</Button>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+\r\n+        {similarCars.length > 0 && (\r\n+          <section className=\"mt-12\">\r\n+            <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n+            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n+              {similarCars.map((c) => (\r\n+                <CarCard key={c.id} car={c} />\r\n+              ))}\r\n+            </div>\r\n+          </section>\r\n+        )}\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default CarDetail;\r\n"
                },
                {
                    "date": 1763634987717,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,319 +33,30 @@\n \r\n   const [car, setCar] = useState<CarType | null>(null);\r\n   const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n   const [loading, setLoading] = useState(true);\r\n+const [car, setCar] = useState<ApiCar | null>(null);\r\n+const [similarCars, setSimilarCars] = useState<ApiCar[]>([]);\r\n \r\n-  useEffect(() => {\r\n-    const fetchCar = async () => {\r\n-      if (!id) return;\r\n-      setLoading(true);\r\n-      try {\r\n-        const apiCar = await getCarById(id);\r\n-        setCar(apiCar); // use API response directly\r\n+useEffect(() => {\r\n+  const fetchCar = async () => {\r\n+    if (!id) return;\r\n+    setLoading(true);\r\n+    try {\r\n+      const apiCar = await getCarById(id);\r\n+      setCar(apiCar); // now type matches ApiCar\r\n \r\n-        const allCars = await getAllCars();\r\n-        setSimilarCars(allCars);\r\n-      } catch (err) {\r\n-        console.error(err);\r\n-      } finally {\r\n-        setLoading(false);\r\n-      }\r\n-    };\r\n-    fetchCar();\r\n-  }, [id]);\r\n-\r\n-  const handleFavoriteClick = () => {\r\n-    if (!car) return;\r\n-    toggleFavorite(car.id);\r\n-    toast({\r\n-      title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n-    });\r\n-  };\r\n-\r\n-  const handleComparisonClick = () => {\r\n-    if (!car) return;\r\n-    if (isInComparison(car.id)) {\r\n-      removeFromComparison(car.id);\r\n-      toast({ title: \"Removed from comparison\" });\r\n-    } else {\r\n-      const added = addToComparison(car);\r\n-      toast({ title: added ? \"Added to comparison\" : \"Comparison limit reached\" });\r\n+      const allCars = await getAllCars();\r\n+      setSimilarCars(allCars);\r\n+    } catch (err) {\r\n+      console.error(err);\r\n+    } finally {\r\n+      setLoading(false);\r\n     }\r\n   };\r\n+  fetchCar();\r\n+}, [id]);\r\n \r\n-  if (loading) return (\r\n-    <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-      <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n-    </div>\r\n-  );\r\n-\r\n-  if (!car) return (\r\n-    <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-      <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n-      <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n-    </div>\r\n-  );\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"mb-6 gap-2\">\r\n-          <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n-        </Button>\r\n-\r\n-        <div className=\"mb-6 flex gap-2\">\r\n-          <Button\r\n-            variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={handleFavoriteClick}\r\n-            className=\"gap-2\"\r\n-          >\r\n-            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n-            {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n-          </Button>\r\n-\r\n-          <Button\r\n-            variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={handleComparisonClick}\r\n-            className=\"gap-2\"\r\n-          >\r\n-            <GitCompare className=\"h-4 w-4\" />\r\n-            {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"grid gap-8 lg:grid-cols-3\">\r\n-          <div className=\"lg:col-span-2 space-y-6\">\r\n-            <Card className=\"overflow-hidden\">\r\n-              <ImageCarousel images={car.images} alt={car.title} />\r\n-            </Card>\r\n-\r\n-            <Card>\r\n-              <CardHeader>\r\n-                <div className=\"flex justify-between items-start\">\r\n-                  <div>\r\n-                    <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-2 text-2xl font-bold text-primary\">${car.price.toLocaleString()}</p>\r\n-                  </div>\r\n-                  <Badge\r\n-                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n-                    className=\"capitalize text-base px-4 py-1\"\r\n-                  >\r\n-                    {car.condition}\r\n-                  </Badge>\r\n-                </div>\r\n-              </CardHeader>\r\n-\r\n-              <CardContent className=\"space-y-6\">\r\n-                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Calendar className=\"h-5 w-5\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Year</p>\r\n-                      <p className=\"font-semibold\">{car.year}</p>\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Gauge className=\"h-5 w-5\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  {car.fuelType && (\r\n-                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                      <Fuel className=\"h-5 w-5\" />\r\n-                      <div>\r\n-                        <p className=\"text-xs\">Fuel</p>\r\n-                        <p className=\"font-semibold capitalize\">{car.fuelType}</p>\r\n-                      </div>\r\n-                    </div>\r\n-                  )}\r\n-\r\n-                  {car.transmission && (\r\n-                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                      <Cog className=\"h-5 w-5\" />\r\n-                      <div>\r\n-                        <p className=\"text-xs\">Transmission</p>\r\n-                        <p className=\"font-semibold capitalize\">{car.transmission}</p>\r\n-                      </div>\r\n-                    </div>\r\n-                  )}\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <div>\r\n-                  <h3 className=\"font-semibold text-lg mb-3\">Description</h3>\r\n-                  <p className=\"text-muted-foreground\">{car.description}</p>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <div>\r\n-                  <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n-                  <div className=\"flex flex-wrap gap-2\">\r\n-                    {car.platform.map((p, i) => (\r\n-                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">{p.name}</Badge>\r\n-                    ))}\r\n-                  </div>\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-\r\n-          <div className=\"lg:col-span-1 space-y-6\">\r\n-            <Card className=\"sticky top-24\">\r\n-              <CardHeader>\r\n-                <CardTitle>Seller Information</CardTitle>\r\n-              </CardHeader>\r\n-\r\n-              <CardContent className=\"space-y-4\">\r\n-                <div className=\"flex items-center gap-3\">\r\n-                  <Avatar className=\"h-12 w-12\">\r\n-                    <AvatarFallback className=\"bg-primary text-primary-foreground\">\r\n-                      {car.seller.name.charAt(0)}\r\n-                    </AvatarFallback>\r\n-                  </Avatar>\r\n-                  <div>\r\n-                    <p className=\"font-semibold\">{car.seller.name}</p>\r\n-                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n-                  </div>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <a href={`mailto:${car.seller.email}`} className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\">\r\n-                  <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n-                </a>\r\n-\r\n-                <a href={`tel:${car.seller.phone}`} className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\">\r\n-                  <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n-                </a>\r\n-\r\n-                <Separator />\r\n-\r\n-                <Button className=\"w-full\">Contact Seller</Button>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-        </div>\r\n-\r\n-        {similarCars.length > 0 && (\r\n-          <section className=\"mt-12\">\r\n-            <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n-            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n-              {similarCars.map((c) => (\r\n-                <CarCard key={c.id} car={c} />\r\n-              ))}\r\n-            </div>\r\n-          </section>\r\n-        )}\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default CarDetail;\r\n-// src/pages/CarDetail.tsx\r\n-import { useParams, useNavigate } from \"react-router-dom\";\r\n-import { useEffect, useState } from \"react\";\r\n-import { getAllCars, getCarById, API_BASE_URL, ApiCar } from \"@/api/cars\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import {\r\n-  ArrowLeft,\r\n-  Gauge,\r\n-  Calendar,\r\n-  Mail,\r\n-  Phone,\r\n-  Heart,\r\n-  GitCompare,\r\n-  Fuel,\r\n-  Cog,\r\n-} from \"lucide-react\";\r\n-import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-import ImageCarousel from \"@/components/ImageCarousel\";\r\n-import CarCard from \"@/components/CarCard\";\r\n-import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { toast } from \"@/hooks/use-toast\";\r\n-\r\n-// Type for UI Car (no location)\r\n-export interface UICar {\r\n-  id: string;\r\n-  title: string;\r\n-  brand: string;\r\n-  model: string;\r\n-  year: number;\r\n-  price: number;\r\n-  mileage: number;\r\n-  condition: string;\r\n-  description: string;\r\n-  images: string[];\r\n-  platform: { name: string }[];\r\n-  seller: { id: string; name: string; email: string; phone: string };\r\n-  createdAt: string;\r\n-  fuelType?: string;\r\n-  transmission?: string;\r\n-}\r\n-\r\n-// Map API response to UI Car\r\n-const mapApiCarToUICar = (car: ApiCar): UICar => ({\r\n-  id: car._id,\r\n-  title: `${car.brand} ${car.model} ${car.year}`,\r\n-  brand: car.brand,\r\n-  model: car.model,\r\n-  year: car.year,\r\n-  price: car.price,\r\n-  mileage: car.mileage,\r\n-  condition: car.condition,\r\n-  description: car.description,\r\n-  images: car.images.map((img) => `${API_BASE_URL}/uploads/${img}`),\r\n-  platform: (car.platforms || []).map((p) => ({ name: p })),\r\n-  seller: {\r\n-    id: car.seller?._id || \"\",\r\n-    name: car.seller?.name || \"Private Seller\",\r\n-    email: car.seller?.email || \"N/A\",\r\n-    phone: \"N/A\",\r\n-  },\r\n-  createdAt: car.createdAt,\r\n-});\r\n-\r\n-const CarDetail = () => {\r\n-  const { id } = useParams();\r\n-  const navigate = useNavigate();\r\n-  const { isFavorite, toggleFavorite } = useFavorites();\r\n-  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n-\r\n-  const [car, setCar] = useState<UICar | null>(null);\r\n-  const [similarCars, setSimilarCars] = useState<UICar[]>([]);\r\n-  const [loading, setLoading] = useState(true);\r\n-\r\n-  useEffect(() => {\r\n-    const fetchCar = async () => {\r\n-      if (!id) return;\r\n-      setLoading(true);\r\n-      try {\r\n-        const apiCar = await getCarById(id);\r\n-        const uiCar = mapApiCarToUICar(apiCar);\r\n-        setCar(uiCar);\r\n-\r\n-        const allApi = await getAllCars();\r\n-        setSimilarCars(allApi.map(mapApiCarToUICar));\r\n-      } catch (err) {\r\n-        console.error(err);\r\n-      } finally {\r\n-        setLoading(false);\r\n-      }\r\n-    };\r\n-    fetchCar();\r\n-  }, [id]);\r\n-\r\n   const handleFavoriteClick = () => {\r\n     if (!car) return;\r\n     toggleFavorite(car.id);\r\n     toast({\r\n"
                },
                {
                    "date": 1763635000621,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,12 +33,10 @@\n \r\n   const [car, setCar] = useState<CarType | null>(null);\r\n   const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n   const [loading, setLoading] = useState(true);\r\n-const [car, setCar] = useState<ApiCar | null>(null);\r\n-const [similarCars, setSimilarCars] = useState<ApiCar[]>([]);\r\n \r\n-useEffect(() => {\r\n+  useEffect(() => {\r\n   const fetchCar = async () => {\r\n     if (!id) return;\r\n     setLoading(true);\r\n     try {\r\n"
                },
                {
                    "date": 1763650532312,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,8 +23,9 @@\n import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n import type { Car as CarType } from \"@/types/car\";\r\n+import { mapApiCarToCar } from \"@/utils/mapApiCarToCar\";\r\n \r\n const CarDetail = () => {\r\n   const { id } = useParams();\r\n   const navigate = useNavigate();\r\n"
                },
                {
                    "date": 1763650541214,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,18 +35,18 @@\n   const [car, setCar] = useState<CarType | null>(null);\r\n   const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n   const [loading, setLoading] = useState(true);\r\n \r\n-  useEffect(() => {\r\n+ useEffect(() => {\r\n   const fetchCar = async () => {\r\n     if (!id) return;\r\n     setLoading(true);\r\n     try {\r\n       const apiCar = await getCarById(id);\r\n-      setCar(apiCar); // now type matches ApiCar\r\n+      setCar(mapApiCarToCar(apiCar)); // ✅ fix\r\n \r\n-      const allCars = await getAllCars();\r\n-      setSimilarCars(allCars);\r\n+      const allApiCars = await getAllCars();\r\n+      setSimilarCars(allApiCars.map(mapApiCarToCar)); // ✅ fix\r\n     } catch (err) {\r\n       console.error(err);\r\n     } finally {\r\n       setLoading(false);\r\n"
                },
                {
                    "date": 1763929983083,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,100 +14,145 @@\n   Heart,\r\n   GitCompare,\r\n   Fuel,\r\n   Cog,\r\n+  Edit,\r\n+  Trash2,\r\n } from \"lucide-react\";\r\n import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n import ImageCarousel from \"@/components/ImageCarousel\";\r\n import CarCard from \"@/components/CarCard\";\r\n import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n+import { useAuth } from \"@/contexts/AuthContext\";\r\n import type { Car as CarType } from \"@/types/car\";\r\n import { mapApiCarToCar } from \"@/utils/mapApiCarToCar\";\r\n+import axios from \"axios\";\r\n \r\n const CarDetail = () => {\r\n   const { id } = useParams();\r\n   const navigate = useNavigate();\r\n+  const { user } = useAuth();\r\n+\r\n   const { isFavorite, toggleFavorite } = useFavorites();\r\n-  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n+  const { isInComparison, addToComparison, removeFromComparison } =\r\n+    useComparison();\r\n \r\n   const [car, setCar] = useState<CarType | null>(null);\r\n   const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n   const [loading, setLoading] = useState(true);\r\n \r\n- useEffect(() => {\r\n-  const fetchCar = async () => {\r\n-    if (!id) return;\r\n-    setLoading(true);\r\n-    try {\r\n-      const apiCar = await getCarById(id);\r\n-      setCar(mapApiCarToCar(apiCar)); // ✅ fix\r\n+  const isOwner = user && car?.seller.id === user._id;\r\n \r\n-      const allApiCars = await getAllCars();\r\n-      setSimilarCars(allApiCars.map(mapApiCarToCar)); // ✅ fix\r\n-    } catch (err) {\r\n-      console.error(err);\r\n-    } finally {\r\n+  useEffect(() => {\r\n+    const fetchCar = async () => {\r\n+      if (!id) return;\r\n+      setLoading(true);\r\n+\r\n+      try {\r\n+        const apiCar = await getCarById(id);\r\n+        setCar(mapApiCarToCar(apiCar));\r\n+\r\n+        const allCars = await getAllCars();\r\n+        setSimilarCars(allCars.map(mapApiCarToCar));\r\n+      } catch (err) {\r\n+        console.error(err);\r\n+      }\r\n+\r\n       setLoading(false);\r\n-    }\r\n-  };\r\n-  fetchCar();\r\n-}, [id]);\r\n+    };\r\n \r\n-  const handleFavoriteClick = () => {\r\n-    if (!car) return;\r\n-    toggleFavorite(car.id);\r\n-    toast({\r\n-      title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n-    });\r\n-  };\r\n+    fetchCar();\r\n+  }, [id]);\r\n \r\n-  const handleComparisonClick = () => {\r\n-    if (!car) return;\r\n-    if (isInComparison(car.id)) {\r\n-      removeFromComparison(car.id);\r\n-      toast({ title: \"Removed from comparison\" });\r\n-    } else {\r\n-      const added = addToComparison(car);\r\n-      toast({ title: added ? \"Added to comparison\" : \"Comparison limit reached\" });\r\n+  const handleDelete = async () => {\r\n+    if (!user || !car) return;\r\n+\r\n+    if (!confirm(\"Are you sure you want to delete this listing?\")) return;\r\n+\r\n+    try {\r\n+      await axios.delete(`http://127.0.0.1:5000/api/cars/${car.id}`, {\r\n+        headers: { Authorization: `Bearer ${user.token}` },\r\n+      });\r\n+\r\n+      toast({ title: \"Car deleted successfully\" });\r\n+      navigate(\"/profile\");\r\n+    } catch (err: any) {\r\n+      toast({\r\n+        title: \"Error deleting car\",\r\n+        description: err?.response?.data?.message || \"Something went wrong.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n     }\r\n   };\r\n \r\n-  if (loading) return (\r\n-    <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-      <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n-    </div>\r\n-  );\r\n+  if (loading)\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n+      </div>\r\n+    );\r\n \r\n-  if (!car) return (\r\n-    <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-      <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n-      <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n-    </div>\r\n-  );\r\n+  if (!car)\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n+        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n+      </div>\r\n+    );\r\n \r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n         <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"mb-6 gap-2\">\r\n           <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n         </Button>\r\n \r\n+        {/* OWNER ACTIONS */}\r\n+        {isOwner && (\r\n+          <div className=\"flex gap-2 mb-4\">\r\n+            <Button onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-2\">\r\n+              <Edit className=\"h-4 w-4\" /> Edit Listing\r\n+            </Button>\r\n+\r\n+            <Button variant=\"destructive\" onClick={handleDelete} className=\"gap-2\">\r\n+              <Trash2 className=\"h-4 w-4\" /> Delete Listing\r\n+            </Button>\r\n+          </div>\r\n+        )}\r\n+\r\n         <div className=\"mb-6 flex gap-2\">\r\n           <Button\r\n             variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={handleFavoriteClick}\r\n+            onClick={() => {\r\n+              toggleFavorite(car.id);\r\n+              toast({\r\n+                title: isFavorite(car.id)\r\n+                  ? \"Removed from favorites\"\r\n+                  : \"Added to favorites\",\r\n+              });\r\n+            }}\r\n             className=\"gap-2\"\r\n           >\r\n             <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n             {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n           </Button>\r\n \r\n           <Button\r\n             variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={handleComparisonClick}\r\n+            onClick={() => {\r\n+              if (isInComparison(car.id)) {\r\n+                removeFromComparison(car.id);\r\n+                toast({ title: \"Removed from comparison\" });\r\n+              } else {\r\n+                const added = addToComparison(car);\r\n+                toast({\r\n+                  title: added ? \"Added to comparison\" : \"Comparison limit reached\",\r\n+                });\r\n+              }\r\n+            }}\r\n             className=\"gap-2\"\r\n           >\r\n             <GitCompare className=\"h-4 w-4\" />\r\n             {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n@@ -124,9 +169,11 @@\n               <CardHeader>\r\n                 <div className=\"flex justify-between items-start\">\r\n                   <div>\r\n                     <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-2 text-2xl font-bold text-primary\">${car.price.toLocaleString()}</p>\r\n+                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n+                      ${car.price.toLocaleString()}\r\n+                    </p>\r\n                   </div>\r\n                   <Badge\r\n                     variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n                     className=\"capitalize text-base px-4 py-1\"\r\n@@ -136,8 +183,9 @@\n                 </div>\r\n               </CardHeader>\r\n \r\n               <CardContent className=\"space-y-6\">\r\n+                {/* SPECS */}\r\n                 <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Calendar className=\"h-5 w-5\" />\r\n                     <div>\r\n@@ -149,31 +197,13 @@\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Gauge className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n+                      <p className=\"font-semibold\">\r\n+                        {car.mileage.toLocaleString()} mi\r\n+                      </p>\r\n                     </div>\r\n                   </div>\r\n-\r\n-                  {car.fuelType && (\r\n-                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                      <Fuel className=\"h-5 w-5\" />\r\n-                      <div>\r\n-                        <p className=\"text-xs\">Fuel</p>\r\n-                        <p className=\"font-semibold capitalize\">{car.fuelType}</p>\r\n-                      </div>\r\n-                    </div>\r\n-                  )}\r\n-\r\n-                  {car.transmission && (\r\n-                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                      <Cog className=\"h-5 w-5\" />\r\n-                      <div>\r\n-                        <p className=\"text-xs\">Transmission</p>\r\n-                        <p className=\"font-semibold capitalize\">{car.transmission}</p>\r\n-                      </div>\r\n-                    </div>\r\n-                  )}\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n@@ -187,16 +217,19 @@\n                 <div>\r\n                   <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n                   <div className=\"flex flex-wrap gap-2\">\r\n                     {car.platform.map((p, i) => (\r\n-                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">{p.name}</Badge>\r\n+                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">\r\n+                        {p.name}\r\n+                      </Badge>\r\n                     ))}\r\n                   </div>\r\n                 </div>\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n+          {/* SELLER INFO */}\r\n           <div className=\"lg:col-span-1 space-y-6\">\r\n             <Card className=\"sticky top-24\">\r\n               <CardHeader>\r\n                 <CardTitle>Seller Information</CardTitle>\r\n@@ -216,13 +249,19 @@\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                <a href={`mailto:${car.seller.email}`} className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\">\r\n+                <a\r\n+                  href={`mailto:${car.seller.email}`}\r\n+                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n+                >\r\n                   <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n                 </a>\r\n \r\n-                <a href={`tel:${car.seller.phone}`} className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\">\r\n+                <a\r\n+                  href={`tel:${car.seller.phone}`}\r\n+                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n+                >\r\n                   <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n                 </a>\r\n \r\n                 <Separator />\r\n@@ -232,8 +271,9 @@\n             </Card>\r\n           </div>\r\n         </div>\r\n \r\n+        {/* SIMILAR CARS */}\r\n         {similarCars.length > 0 && (\r\n           <section className=\"mt-12\">\r\n             <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n             <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n"
                },
                {
                    "date": 1763930005769,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,145 +14,100 @@\n   Heart,\r\n   GitCompare,\r\n   Fuel,\r\n   Cog,\r\n-  Edit,\r\n-  Trash2,\r\n } from \"lucide-react\";\r\n import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n import ImageCarousel from \"@/components/ImageCarousel\";\r\n import CarCard from \"@/components/CarCard\";\r\n import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n-import { useAuth } from \"@/contexts/AuthContext\";\r\n import type { Car as CarType } from \"@/types/car\";\r\n import { mapApiCarToCar } from \"@/utils/mapApiCarToCar\";\r\n-import axios from \"axios\";\r\n \r\n const CarDetail = () => {\r\n   const { id } = useParams();\r\n   const navigate = useNavigate();\r\n-  const { user } = useAuth();\r\n-\r\n   const { isFavorite, toggleFavorite } = useFavorites();\r\n-  const { isInComparison, addToComparison, removeFromComparison } =\r\n-    useComparison();\r\n+  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n \r\n   const [car, setCar] = useState<CarType | null>(null);\r\n   const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n   const [loading, setLoading] = useState(true);\r\n \r\n-  const isOwner = user && car?.seller.id === user._id;\r\n+ useEffect(() => {\r\n+  const fetchCar = async () => {\r\n+    if (!id) return;\r\n+    setLoading(true);\r\n+    try {\r\n+      const apiCar = await getCarById(id);\r\n+      setCar(mapApiCarToCar(apiCar)); // ✅ fix\r\n \r\n-  useEffect(() => {\r\n-    const fetchCar = async () => {\r\n-      if (!id) return;\r\n-      setLoading(true);\r\n-\r\n-      try {\r\n-        const apiCar = await getCarById(id);\r\n-        setCar(mapApiCarToCar(apiCar));\r\n-\r\n-        const allCars = await getAllCars();\r\n-        setSimilarCars(allCars.map(mapApiCarToCar));\r\n-      } catch (err) {\r\n-        console.error(err);\r\n-      }\r\n-\r\n+      const allApiCars = await getAllCars();\r\n+      setSimilarCars(allApiCars.map(mapApiCarToCar)); // ✅ fix\r\n+    } catch (err) {\r\n+      console.error(err);\r\n+    } finally {\r\n       setLoading(false);\r\n-    };\r\n+    }\r\n+  };\r\n+  fetchCar();\r\n+}, [id]);\r\n \r\n-    fetchCar();\r\n-  }, [id]);\r\n+  const handleFavoriteClick = () => {\r\n+    if (!car) return;\r\n+    toggleFavorite(car.id);\r\n+    toast({\r\n+      title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n+    });\r\n+  };\r\n \r\n-  const handleDelete = async () => {\r\n-    if (!user || !car) return;\r\n-\r\n-    if (!confirm(\"Are you sure you want to delete this listing?\")) return;\r\n-\r\n-    try {\r\n-      await axios.delete(`http://127.0.0.1:5000/api/cars/${car.id}`, {\r\n-        headers: { Authorization: `Bearer ${user.token}` },\r\n-      });\r\n-\r\n-      toast({ title: \"Car deleted successfully\" });\r\n-      navigate(\"/profile\");\r\n-    } catch (err: any) {\r\n-      toast({\r\n-        title: \"Error deleting car\",\r\n-        description: err?.response?.data?.message || \"Something went wrong.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n+  const handleComparisonClick = () => {\r\n+    if (!car) return;\r\n+    if (isInComparison(car.id)) {\r\n+      removeFromComparison(car.id);\r\n+      toast({ title: \"Removed from comparison\" });\r\n+    } else {\r\n+      const added = addToComparison(car);\r\n+      toast({ title: added ? \"Added to comparison\" : \"Comparison limit reached\" });\r\n     }\r\n   };\r\n \r\n-  if (loading)\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n-      </div>\r\n-    );\r\n+  if (loading) return (\r\n+    <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+      <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n+    </div>\r\n+  );\r\n \r\n-  if (!car)\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n-        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n-      </div>\r\n-    );\r\n+  if (!car) return (\r\n+    <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+      <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n+      <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n+    </div>\r\n+  );\r\n \r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n         <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"mb-6 gap-2\">\r\n           <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n         </Button>\r\n \r\n-        {/* OWNER ACTIONS */}\r\n-        {isOwner && (\r\n-          <div className=\"flex gap-2 mb-4\">\r\n-            <Button onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-2\">\r\n-              <Edit className=\"h-4 w-4\" /> Edit Listing\r\n-            </Button>\r\n-\r\n-            <Button variant=\"destructive\" onClick={handleDelete} className=\"gap-2\">\r\n-              <Trash2 className=\"h-4 w-4\" /> Delete Listing\r\n-            </Button>\r\n-          </div>\r\n-        )}\r\n-\r\n         <div className=\"mb-6 flex gap-2\">\r\n           <Button\r\n             variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={() => {\r\n-              toggleFavorite(car.id);\r\n-              toast({\r\n-                title: isFavorite(car.id)\r\n-                  ? \"Removed from favorites\"\r\n-                  : \"Added to favorites\",\r\n-              });\r\n-            }}\r\n+            onClick={handleFavoriteClick}\r\n             className=\"gap-2\"\r\n           >\r\n             <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n             {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n           </Button>\r\n \r\n           <Button\r\n             variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={() => {\r\n-              if (isInComparison(car.id)) {\r\n-                removeFromComparison(car.id);\r\n-                toast({ title: \"Removed from comparison\" });\r\n-              } else {\r\n-                const added = addToComparison(car);\r\n-                toast({\r\n-                  title: added ? \"Added to comparison\" : \"Comparison limit reached\",\r\n-                });\r\n-              }\r\n-            }}\r\n+            onClick={handleComparisonClick}\r\n             className=\"gap-2\"\r\n           >\r\n             <GitCompare className=\"h-4 w-4\" />\r\n             {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n@@ -169,11 +124,9 @@\n               <CardHeader>\r\n                 <div className=\"flex justify-between items-start\">\r\n                   <div>\r\n                     <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n-                      ${car.price.toLocaleString()}\r\n-                    </p>\r\n+                    <p className=\"mt-2 text-2xl font-bold text-primary\">${car.price.toLocaleString()}</p>\r\n                   </div>\r\n                   <Badge\r\n                     variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n                     className=\"capitalize text-base px-4 py-1\"\r\n@@ -183,9 +136,8 @@\n                 </div>\r\n               </CardHeader>\r\n \r\n               <CardContent className=\"space-y-6\">\r\n-                {/* SPECS */}\r\n                 <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Calendar className=\"h-5 w-5\" />\r\n                     <div>\r\n@@ -197,13 +149,31 @@\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Gauge className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold\">\r\n-                        {car.mileage.toLocaleString()} mi\r\n-                      </p>\r\n+                      <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n                     </div>\r\n                   </div>\r\n+\r\n+                  {car.fuelType && (\r\n+                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                      <Fuel className=\"h-5 w-5\" />\r\n+                      <div>\r\n+                        <p className=\"text-xs\">Fuel</p>\r\n+                        <p className=\"font-semibold capitalize\">{car.fuelType}</p>\r\n+                      </div>\r\n+                    </div>\r\n+                  )}\r\n+\r\n+                  {car.transmission && (\r\n+                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                      <Cog className=\"h-5 w-5\" />\r\n+                      <div>\r\n+                        <p className=\"text-xs\">Transmission</p>\r\n+                        <p className=\"font-semibold capitalize\">{car.transmission}</p>\r\n+                      </div>\r\n+                    </div>\r\n+                  )}\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n@@ -217,19 +187,16 @@\n                 <div>\r\n                   <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n                   <div className=\"flex flex-wrap gap-2\">\r\n                     {car.platform.map((p, i) => (\r\n-                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">\r\n-                        {p.name}\r\n-                      </Badge>\r\n+                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">{p.name}</Badge>\r\n                     ))}\r\n                   </div>\r\n                 </div>\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n-          {/* SELLER INFO */}\r\n           <div className=\"lg:col-span-1 space-y-6\">\r\n             <Card className=\"sticky top-24\">\r\n               <CardHeader>\r\n                 <CardTitle>Seller Information</CardTitle>\r\n@@ -249,19 +216,13 @@\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                <a\r\n-                  href={`mailto:${car.seller.email}`}\r\n-                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n-                >\r\n+                <a href={`mailto:${car.seller.email}`} className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\">\r\n                   <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n                 </a>\r\n \r\n-                <a\r\n-                  href={`tel:${car.seller.phone}`}\r\n-                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n-                >\r\n+                <a href={`tel:${car.seller.phone}`} className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\">\r\n                   <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n                 </a>\r\n \r\n                 <Separator />\r\n@@ -271,9 +232,8 @@\n             </Card>\r\n           </div>\r\n         </div>\r\n \r\n-        {/* SIMILAR CARS */}\r\n         {similarCars.length > 0 && (\r\n           <section className=\"mt-12\">\r\n             <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n             <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n"
                },
                {
                    "date": 1763930021610,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,100 +14,145 @@\n   Heart,\r\n   GitCompare,\r\n   Fuel,\r\n   Cog,\r\n+  Edit,\r\n+  Trash2,\r\n } from \"lucide-react\";\r\n import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n import ImageCarousel from \"@/components/ImageCarousel\";\r\n import CarCard from \"@/components/CarCard\";\r\n import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n import { useComparison } from \"@/contexts/ComparisonContext\";\r\n import { toast } from \"@/hooks/use-toast\";\r\n+import { useAuth } from \"@/contexts/AuthContext\";\r\n import type { Car as CarType } from \"@/types/car\";\r\n import { mapApiCarToCar } from \"@/utils/mapApiCarToCar\";\r\n+import axios from \"axios\";\r\n \r\n const CarDetail = () => {\r\n   const { id } = useParams();\r\n   const navigate = useNavigate();\r\n+  const { user } = useAuth();\r\n+\r\n   const { isFavorite, toggleFavorite } = useFavorites();\r\n-  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n+  const { isInComparison, addToComparison, removeFromComparison } =\r\n+    useComparison();\r\n \r\n   const [car, setCar] = useState<CarType | null>(null);\r\n   const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n   const [loading, setLoading] = useState(true);\r\n \r\n- useEffect(() => {\r\n-  const fetchCar = async () => {\r\n-    if (!id) return;\r\n-    setLoading(true);\r\n-    try {\r\n-      const apiCar = await getCarById(id);\r\n-      setCar(mapApiCarToCar(apiCar)); // ✅ fix\r\n+  const isOwner = user && car?.seller.id === user._id;\r\n \r\n-      const allApiCars = await getAllCars();\r\n-      setSimilarCars(allApiCars.map(mapApiCarToCar)); // ✅ fix\r\n-    } catch (err) {\r\n-      console.error(err);\r\n-    } finally {\r\n+  useEffect(() => {\r\n+    const fetchCar = async () => {\r\n+      if (!id) return;\r\n+      setLoading(true);\r\n+\r\n+      try {\r\n+        const apiCar = await getCarById(id);\r\n+        setCar(mapApiCarToCar(apiCar));\r\n+\r\n+        const allCars = await getAllCars();\r\n+        setSimilarCars(allCars.map(mapApiCarToCar));\r\n+      } catch (err) {\r\n+        console.error(err);\r\n+      }\r\n+\r\n       setLoading(false);\r\n-    }\r\n-  };\r\n-  fetchCar();\r\n-}, [id]);\r\n+    };\r\n \r\n-  const handleFavoriteClick = () => {\r\n-    if (!car) return;\r\n-    toggleFavorite(car.id);\r\n-    toast({\r\n-      title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n-    });\r\n-  };\r\n+    fetchCar();\r\n+  }, [id]);\r\n \r\n-  const handleComparisonClick = () => {\r\n-    if (!car) return;\r\n-    if (isInComparison(car.id)) {\r\n-      removeFromComparison(car.id);\r\n-      toast({ title: \"Removed from comparison\" });\r\n-    } else {\r\n-      const added = addToComparison(car);\r\n-      toast({ title: added ? \"Added to comparison\" : \"Comparison limit reached\" });\r\n+  const handleDelete = async () => {\r\n+    if (!user || !car) return;\r\n+\r\n+    if (!confirm(\"Are you sure you want to delete this listing?\")) return;\r\n+\r\n+    try {\r\n+      await axios.delete(`http://127.0.0.1:5000/api/cars/${car.id}`, {\r\n+        headers: { Authorization: `Bearer ${user.token}` },\r\n+      });\r\n+\r\n+      toast({ title: \"Car deleted successfully\" });\r\n+      navigate(\"/profile\");\r\n+    } catch (err: any) {\r\n+      toast({\r\n+        title: \"Error deleting car\",\r\n+        description: err?.response?.data?.message || \"Something went wrong.\",\r\n+        variant: \"destructive\",\r\n+      });\r\n     }\r\n   };\r\n \r\n-  if (loading) return (\r\n-    <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-      <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n-    </div>\r\n-  );\r\n+  if (loading)\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n+      </div>\r\n+    );\r\n \r\n-  if (!car) return (\r\n-    <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-      <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n-      <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n-    </div>\r\n-  );\r\n+  if (!car)\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n+        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n+      </div>\r\n+    );\r\n \r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n         <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"mb-6 gap-2\">\r\n           <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n         </Button>\r\n \r\n+        {/* OWNER ACTIONS */}\r\n+        {isOwner && (\r\n+          <div className=\"flex gap-2 mb-4\">\r\n+            <Button onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-2\">\r\n+              <Edit className=\"h-4 w-4\" /> Edit Listing\r\n+            </Button>\r\n+\r\n+            <Button variant=\"destructive\" onClick={handleDelete} className=\"gap-2\">\r\n+              <Trash2 className=\"h-4 w-4\" /> Delete Listing\r\n+            </Button>\r\n+          </div>\r\n+        )}\r\n+\r\n         <div className=\"mb-6 flex gap-2\">\r\n           <Button\r\n             variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={handleFavoriteClick}\r\n+            onClick={() => {\r\n+              toggleFavorite(car.id);\r\n+              toast({\r\n+                title: isFavorite(car.id)\r\n+                  ? \"Removed from favorites\"\r\n+                  : \"Added to favorites\",\r\n+              });\r\n+            }}\r\n             className=\"gap-2\"\r\n           >\r\n             <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n             {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n           </Button>\r\n \r\n           <Button\r\n             variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={handleComparisonClick}\r\n+            onClick={() => {\r\n+              if (isInComparison(car.id)) {\r\n+                removeFromComparison(car.id);\r\n+                toast({ title: \"Removed from comparison\" });\r\n+              } else {\r\n+                const added = addToComparison(car);\r\n+                toast({\r\n+                  title: added ? \"Added to comparison\" : \"Comparison limit reached\",\r\n+                });\r\n+              }\r\n+            }}\r\n             className=\"gap-2\"\r\n           >\r\n             <GitCompare className=\"h-4 w-4\" />\r\n             {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n@@ -124,9 +169,11 @@\n               <CardHeader>\r\n                 <div className=\"flex justify-between items-start\">\r\n                   <div>\r\n                     <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-2 text-2xl font-bold text-primary\">${car.price.toLocaleString()}</p>\r\n+                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n+                      ${car.price.toLocaleString()}\r\n+                    </p>\r\n                   </div>\r\n                   <Badge\r\n                     variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n                     className=\"capitalize text-base px-4 py-1\"\r\n@@ -136,8 +183,9 @@\n                 </div>\r\n               </CardHeader>\r\n \r\n               <CardContent className=\"space-y-6\">\r\n+                {/* SPECS */}\r\n                 <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Calendar className=\"h-5 w-5\" />\r\n                     <div>\r\n@@ -149,31 +197,13 @@\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Gauge className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n+                      <p className=\"font-semibold\">\r\n+                        {car.mileage.toLocaleString()} mi\r\n+                      </p>\r\n                     </div>\r\n                   </div>\r\n-\r\n-                  {car.fuelType && (\r\n-                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                      <Fuel className=\"h-5 w-5\" />\r\n-                      <div>\r\n-                        <p className=\"text-xs\">Fuel</p>\r\n-                        <p className=\"font-semibold capitalize\">{car.fuelType}</p>\r\n-                      </div>\r\n-                    </div>\r\n-                  )}\r\n-\r\n-                  {car.transmission && (\r\n-                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                      <Cog className=\"h-5 w-5\" />\r\n-                      <div>\r\n-                        <p className=\"text-xs\">Transmission</p>\r\n-                        <p className=\"font-semibold capitalize\">{car.transmission}</p>\r\n-                      </div>\r\n-                    </div>\r\n-                  )}\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n@@ -187,16 +217,19 @@\n                 <div>\r\n                   <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n                   <div className=\"flex flex-wrap gap-2\">\r\n                     {car.platform.map((p, i) => (\r\n-                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">{p.name}</Badge>\r\n+                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">\r\n+                        {p.name}\r\n+                      </Badge>\r\n                     ))}\r\n                   </div>\r\n                 </div>\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n+          {/* SELLER INFO */}\r\n           <div className=\"lg:col-span-1 space-y-6\">\r\n             <Card className=\"sticky top-24\">\r\n               <CardHeader>\r\n                 <CardTitle>Seller Information</CardTitle>\r\n@@ -216,13 +249,19 @@\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                <a href={`mailto:${car.seller.email}`} className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\">\r\n+                <a\r\n+                  href={`mailto:${car.seller.email}`}\r\n+                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n+                >\r\n                   <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n                 </a>\r\n \r\n-                <a href={`tel:${car.seller.phone}`} className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\">\r\n+                <a\r\n+                  href={`tel:${car.seller.phone}`}\r\n+                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n+                >\r\n                   <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n                 </a>\r\n \r\n                 <Separator />\r\n@@ -232,8 +271,9 @@\n             </Card>\r\n           </div>\r\n         </div>\r\n \r\n+        {/* SIMILAR CARS */}\r\n         {similarCars.length > 0 && (\r\n           <section className=\"mt-12\">\r\n             <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n             <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n"
                },
                {
                    "date": 1763930874416,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,9 +77,9 @@\n       });\r\n \r\n       toast({ title: \"Car deleted successfully\" });\r\n       navigate(\"/profile\");\r\n-    } catch (err: any) {\r\n+    } catch (err: unknown) {\r\n       toast({\r\n         title: \"Error deleting car\",\r\n         description: err?.response?.data?.message || \"Something went wrong.\",\r\n         variant: \"destructive\",\r\n"
                },
                {
                    "date": 1763930943536,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,16 +78,20 @@\n \r\n       toast({ title: \"Car deleted successfully\" });\r\n       navigate(\"/profile\");\r\n     } catch (err: unknown) {\r\n-      toast({\r\n-        title: \"Error deleting car\",\r\n-        description: err?.response?.data?.message || \"Something went wrong.\",\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-  };\r\n+  const message =\r\n+    err && typeof err === \"object\" && \"response\" in err\r\n+      ? (err as { response?: { data?: { message?: string } } }).response?.data?.message\r\n+      : \"Something went wrong.\";\r\n \r\n+  toast({\r\n+    title: \"Error deleting car\",\r\n+    description: message,\r\n+    variant: \"destructive\",\r\n+  });\r\n+}\r\n+\r\n   if (loading)\r\n     return (\r\n       <div className=\"container mx-auto px-4 py-20 text-center\">\r\n         <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n"
                },
                {
                    "date": 1763930981189,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,296 @@\n+// src/pages/CarDetail.tsx\r\n+import { useParams, useNavigate } from \"react-router-dom\";\r\n+import { useEffect, useState } from \"react\";\r\n+import { getAllCars, getCarById } from \"@/api/cars\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import {\r\n+  ArrowLeft,\r\n+  Gauge,\r\n+  Calendar,\r\n+  Mail,\r\n+  Phone,\r\n+  Heart,\r\n+  GitCompare,\r\n+  Fuel,\r\n+  Cog,\r\n+  Edit,\r\n+  Trash2,\r\n+} from \"lucide-react\";\r\n+import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+import ImageCarousel from \"@/components/ImageCarousel\";\r\n+import CarCard from \"@/components/CarCard\";\r\n+import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { toast } from \"@/hooks/use-toast\";\r\n+import { useAuth } from \"@/contexts/AuthContext\";\r\n+import type { Car as CarType } from \"@/types/car\";\r\n+import { mapApiCarToCar } from \"@/utils/mapApiCarToCar\";\r\n+import axios from \"axios\";\r\n+\r\n+const CarDetail = () => {\r\n+  const { id } = useParams();\r\n+  const navigate = useNavigate();\r\n+  const { user } = useAuth();\r\n+\r\n+  const { isFavorite, toggleFavorite } = useFavorites();\r\n+  const { isInComparison, addToComparison, removeFromComparison } =\r\n+    useComparison();\r\n+\r\n+  const [car, setCar] = useState<CarType | null>(null);\r\n+  const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  const isOwner = user && car?.seller.id === user._id;\r\n+\r\n+  useEffect(() => {\r\n+    const fetchCar = async () => {\r\n+      if (!id) return;\r\n+      setLoading(true);\r\n+\r\n+      try {\r\n+        const apiCar = await getCarById(id);\r\n+        setCar(mapApiCarToCar(apiCar));\r\n+\r\n+        const allCars = await getAllCars();\r\n+        setSimilarCars(allCars.map(mapApiCarToCar));\r\n+      } catch (err) {\r\n+        console.error(err);\r\n+      }\r\n+\r\n+      setLoading(false);\r\n+    };\r\n+\r\n+    fetchCar();\r\n+  }, [id]);\r\n+\r\n+  const handleDelete = async () => {\r\n+    if (!user || !car) return;\r\n+\r\n+    if (!confirm(\"Are you sure you want to delete this listing?\")) return;\r\n+\r\n+    try {\r\n+      await axios.delete(`http://127.0.0.1:5000/api/cars/${car.id}`, {\r\n+        headers: { Authorization: `Bearer ${user.token}` },\r\n+      });\r\n+\r\n+      toast({ title: \"Car deleted successfully\" });\r\n+      navigate(\"/profile\");\r\n+    } catch (err: unknown) {\r\n+  const message =\r\n+    err && typeof err === \"object\" && \"response\" in err\r\n+      ? (err as { response?: { data?: { message?: string } } }).response?.data?.message\r\n+      : \"Something went wrong.\";\r\n+\r\n+  toast({\r\n+    title: \"Error deleting car\",\r\n+    description: message,\r\n+    variant: \"destructive\",\r\n+  });\r\n+}\r\n+\r\n+  if (loading)\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n+      </div>\r\n+    );\r\n+\r\n+  if (!car)\r\n+    return (\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n+        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n+      </div>\r\n+    );\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"mb-6 gap-2\">\r\n+          <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n+        </Button>\r\n+\r\n+        {/* OWNER ACTIONS */}\r\n+        {isOwner && (\r\n+          <div className=\"flex gap-2 mb-4\">\r\n+            <Button onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-2\">\r\n+              <Edit className=\"h-4 w-4\" /> Edit Listing\r\n+            </Button>\r\n+\r\n+            <Button variant=\"destructive\" onClick={handleDelete} className=\"gap-2\">\r\n+              <Trash2 className=\"h-4 w-4\" /> Delete Listing\r\n+            </Button>\r\n+          </div>\r\n+        )}\r\n+\r\n+        <div className=\"mb-6 flex gap-2\">\r\n+          <Button\r\n+            variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n+            onClick={() => {\r\n+              toggleFavorite(car.id);\r\n+              toast({\r\n+                title: isFavorite(car.id)\r\n+                  ? \"Removed from favorites\"\r\n+                  : \"Added to favorites\",\r\n+              });\r\n+            }}\r\n+            className=\"gap-2\"\r\n+          >\r\n+            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n+            {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n+          </Button>\r\n+\r\n+          <Button\r\n+            variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n+            onClick={() => {\r\n+              if (isInComparison(car.id)) {\r\n+                removeFromComparison(car.id);\r\n+                toast({ title: \"Removed from comparison\" });\r\n+              } else {\r\n+                const added = addToComparison(car);\r\n+                toast({\r\n+                  title: added ? \"Added to comparison\" : \"Comparison limit reached\",\r\n+                });\r\n+              }\r\n+            }}\r\n+            className=\"gap-2\"\r\n+          >\r\n+            <GitCompare className=\"h-4 w-4\" />\r\n+            {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"grid gap-8 lg:grid-cols-3\">\r\n+          <div className=\"lg:col-span-2 space-y-6\">\r\n+            <Card className=\"overflow-hidden\">\r\n+              <ImageCarousel images={car.images} alt={car.title} />\r\n+            </Card>\r\n+\r\n+            <Card>\r\n+              <CardHeader>\r\n+                <div className=\"flex justify-between items-start\">\r\n+                  <div>\r\n+                    <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n+                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n+                      ${car.price.toLocaleString()}\r\n+                    </p>\r\n+                  </div>\r\n+                  <Badge\r\n+                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n+                    className=\"capitalize text-base px-4 py-1\"\r\n+                  >\r\n+                    {car.condition}\r\n+                  </Badge>\r\n+                </div>\r\n+              </CardHeader>\r\n+\r\n+              <CardContent className=\"space-y-6\">\r\n+                {/* SPECS */}\r\n+                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n+                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                    <Calendar className=\"h-5 w-5\" />\r\n+                    <div>\r\n+                      <p className=\"text-xs\">Year</p>\r\n+                      <p className=\"font-semibold\">{car.year}</p>\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                    <Gauge className=\"h-5 w-5\" />\r\n+                    <div>\r\n+                      <p className=\"text-xs\">Mileage</p>\r\n+                      <p className=\"font-semibold\">\r\n+                        {car.mileage.toLocaleString()} mi\r\n+                      </p>\r\n+                    </div>\r\n+                  </div>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <div>\r\n+                  <h3 className=\"font-semibold text-lg mb-3\">Description</h3>\r\n+                  <p className=\"text-muted-foreground\">{car.description}</p>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <div>\r\n+                  <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n+                  <div className=\"flex flex-wrap gap-2\">\r\n+                    {car.platform.map((p, i) => (\r\n+                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">\r\n+                        {p.name}\r\n+                      </Badge>\r\n+                    ))}\r\n+                  </div>\r\n+                </div>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+\r\n+          {/* SELLER INFO */}\r\n+          <div className=\"lg:col-span-1 space-y-6\">\r\n+            <Card className=\"sticky top-24\">\r\n+              <CardHeader>\r\n+                <CardTitle>Seller Information</CardTitle>\r\n+              </CardHeader>\r\n+\r\n+              <CardContent className=\"space-y-4\">\r\n+                <div className=\"flex items-center gap-3\">\r\n+                  <Avatar className=\"h-12 w-12\">\r\n+                    <AvatarFallback className=\"bg-primary text-primary-foreground\">\r\n+                      {car.seller.name.charAt(0)}\r\n+                    </AvatarFallback>\r\n+                  </Avatar>\r\n+                  <div>\r\n+                    <p className=\"font-semibold\">{car.seller.name}</p>\r\n+                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n+                  </div>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <a\r\n+                  href={`mailto:${car.seller.email}`}\r\n+                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n+                >\r\n+                  <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n+                </a>\r\n+\r\n+                <a\r\n+                  href={`tel:${car.seller.phone}`}\r\n+                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n+                >\r\n+                  <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n+                </a>\r\n+\r\n+                <Separator />\r\n+\r\n+                <Button className=\"w-full\">Contact Seller</Button>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+\r\n+        {/* SIMILAR CARS */}\r\n+        {similarCars.length > 0 && (\r\n+          <section className=\"mt-12\">\r\n+            <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n+            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n+              {similarCars.map((c) => (\r\n+                <CarCard key={c.id} car={c} />\r\n+              ))}\r\n+            </div>\r\n+          </section>\r\n+        )}\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+}\r\n+};\r\n+\r\n+export default CarDetail;\r\n"
                },
                {
                    "date": 1763931827100,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,10 +12,8 @@\n   Mail,\r\n   Phone,\r\n   Heart,\r\n   GitCompare,\r\n-  Fuel,\r\n-  Cog,\r\n   Edit,\r\n   Trash2,\r\n } from \"lucide-react\";\r\n import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n@@ -67,9 +65,8 @@\n   }, [id]);\r\n \r\n   const handleDelete = async () => {\r\n     if (!user || !car) return;\r\n-\r\n     if (!confirm(\"Are you sure you want to delete this listing?\")) return;\r\n \r\n     try {\r\n       await axios.delete(`http://127.0.0.1:5000/api/cars/${car.id}`, {\r\n@@ -78,55 +75,72 @@\n \r\n       toast({ title: \"Car deleted successfully\" });\r\n       navigate(\"/profile\");\r\n     } catch (err: unknown) {\r\n-  const message =\r\n-    err && typeof err === \"object\" && \"response\" in err\r\n-      ? (err as { response?: { data?: { message?: string } } }).response?.data?.message\r\n-      : \"Something went wrong.\";\r\n+      const message =\r\n+        err && typeof err === \"object\" && \"response\" in err\r\n+          ? (err as { response?: { data?: { message?: string } } }).response\r\n+              ?.data?.message\r\n+          : \"Something went wrong.\";\r\n \r\n-  toast({\r\n-    title: \"Error deleting car\",\r\n-    description: message,\r\n-    variant: \"destructive\",\r\n-  });\r\n-}\r\n+      toast({\r\n+        title: \"Error deleting car\",\r\n+        description: message,\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+  };\r\n \r\n+  // ---------- LOADING ----------\r\n   if (loading)\r\n     return (\r\n       <div className=\"container mx-auto px-4 py-20 text-center\">\r\n         <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n       </div>\r\n     );\r\n \r\n+  // ---------- CAR NOT FOUND ----------\r\n   if (!car)\r\n     return (\r\n       <div className=\"container mx-auto px-4 py-20 text-center\">\r\n         <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n         <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n       </div>\r\n     );\r\n \r\n+  // ---------- MAIN JSX ----------\r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n-        <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"mb-6 gap-2\">\r\n+        <Button\r\n+          variant=\"ghost\"\r\n+          onClick={() => navigate(\"/\")}\r\n+          className=\"mb-6 gap-2\"\r\n+        >\r\n           <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n         </Button>\r\n \r\n         {/* OWNER ACTIONS */}\r\n         {isOwner && (\r\n           <div className=\"flex gap-2 mb-4\">\r\n-            <Button onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-2\">\r\n+            <Button\r\n+              onClick={() => navigate(`/edit-car/${car.id}`)}\r\n+              className=\"gap-2\"\r\n+            >\r\n               <Edit className=\"h-4 w-4\" /> Edit Listing\r\n             </Button>\r\n \r\n-            <Button variant=\"destructive\" onClick={handleDelete} className=\"gap-2\">\r\n+            <Button\r\n+              variant=\"destructive\"\r\n+              onClick={handleDelete}\r\n+              className=\"gap-2\"\r\n+            >\r\n               <Trash2 className=\"h-4 w-4\" /> Delete Listing\r\n             </Button>\r\n           </div>\r\n         )}\r\n \r\n+        {/* FAVORITES + COMPARISON BUTTONS */}\r\n         <div className=\"mb-6 flex gap-2\">\r\n           <Button\r\n             variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n             onClick={() => {\r\n@@ -138,9 +152,13 @@\n               });\r\n             }}\r\n             className=\"gap-2\"\r\n           >\r\n-            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n+            <Heart\r\n+              className={`h-4 w-4 ${\r\n+                isFavorite(car.id) ? \"fill-current\" : \"\"\r\n+              }`}\r\n+            />\r\n             {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n           </Button>\r\n \r\n           <Button\r\n@@ -151,9 +169,11 @@\n                 toast({ title: \"Removed from comparison\" });\r\n               } else {\r\n                 const added = addToComparison(car);\r\n                 toast({\r\n-                  title: added ? \"Added to comparison\" : \"Comparison limit reached\",\r\n+                  title: added\r\n+                    ? \"Added to comparison\"\r\n+                    : \"Comparison limit reached\",\r\n                 });\r\n               }\r\n             }}\r\n             className=\"gap-2\"\r\n@@ -163,8 +183,9 @@\n           </Button>\r\n         </div>\r\n \r\n         <div className=\"grid gap-8 lg:grid-cols-3\">\r\n+          {/* IMAGES + MAIN INFO */}\r\n           <div className=\"lg:col-span-2 space-y-6\">\r\n             <Card className=\"overflow-hidden\">\r\n               <ImageCarousel images={car.images} alt={car.title} />\r\n             </Card>\r\n@@ -178,9 +199,11 @@\n                       ${car.price.toLocaleString()}\r\n                     </p>\r\n                   </div>\r\n                   <Badge\r\n-                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n+                    variant={\r\n+                      car.condition === \"new\" ? \"default\" : \"outline\"\r\n+                    }\r\n                     className=\"capitalize text-base px-4 py-1\"\r\n                   >\r\n                     {car.condition}\r\n                   </Badge>\r\n@@ -221,9 +244,13 @@\n                 <div>\r\n                   <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n                   <div className=\"flex flex-wrap gap-2\">\r\n                     {car.platform.map((p, i) => (\r\n-                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">\r\n+                      <Badge\r\n+                        key={i}\r\n+                        variant=\"secondary\"\r\n+                        className=\"px-3 py-1\"\r\n+                      >\r\n                         {p.name}\r\n                       </Badge>\r\n                     ))}\r\n                   </div>\r\n@@ -231,9 +258,9 @@\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n-          {/* SELLER INFO */}\r\n+          {/* SELLER INFORMATION */}\r\n           <div className=\"lg:col-span-1 space-y-6\">\r\n             <Card className=\"sticky top-24\">\r\n               <CardHeader>\r\n                 <CardTitle>Seller Information</CardTitle>\r\n@@ -247,310 +274,16 @@\n                     </AvatarFallback>\r\n                   </Avatar>\r\n                   <div>\r\n                     <p className=\"font-semibold\">{car.seller.name}</p>\r\n-                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n-                  </div>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <a\r\n-                  href={`mailto:${car.seller.email}`}\r\n-                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n-                >\r\n-                  <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n-                </a>\r\n-\r\n-                <a\r\n-                  href={`tel:${car.seller.phone}`}\r\n-                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n-                >\r\n-                  <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n-                </a>\r\n-\r\n-                <Separator />\r\n-\r\n-                <Button className=\"w-full\">Contact Seller</Button>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-        </div>\r\n-\r\n-        {/* SIMILAR CARS */}\r\n-        {similarCars.length > 0 && (\r\n-          <section className=\"mt-12\">\r\n-            <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n-            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n-              {similarCars.map((c) => (\r\n-                <CarCard key={c.id} car={c} />\r\n-              ))}\r\n-            </div>\r\n-          </section>\r\n-        )}\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-}\r\n-};\r\n-\r\n-export default CarDetail;\r\n-// src/pages/CarDetail.tsx\r\n-import { useParams, useNavigate } from \"react-router-dom\";\r\n-import { useEffect, useState } from \"react\";\r\n-import { getAllCars, getCarById } from \"@/api/cars\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import {\r\n-  ArrowLeft,\r\n-  Gauge,\r\n-  Calendar,\r\n-  Mail,\r\n-  Phone,\r\n-  Heart,\r\n-  GitCompare,\r\n-  Fuel,\r\n-  Cog,\r\n-  Edit,\r\n-  Trash2,\r\n-} from \"lucide-react\";\r\n-import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-import ImageCarousel from \"@/components/ImageCarousel\";\r\n-import CarCard from \"@/components/CarCard\";\r\n-import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { toast } from \"@/hooks/use-toast\";\r\n-import { useAuth } from \"@/contexts/AuthContext\";\r\n-import type { Car as CarType } from \"@/types/car\";\r\n-import { mapApiCarToCar } from \"@/utils/mapApiCarToCar\";\r\n-import axios from \"axios\";\r\n-\r\n-const CarDetail = () => {\r\n-  const { id } = useParams();\r\n-  const navigate = useNavigate();\r\n-  const { user } = useAuth();\r\n-\r\n-  const { isFavorite, toggleFavorite } = useFavorites();\r\n-  const { isInComparison, addToComparison, removeFromComparison } =\r\n-    useComparison();\r\n-\r\n-  const [car, setCar] = useState<CarType | null>(null);\r\n-  const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n-  const [loading, setLoading] = useState(true);\r\n-\r\n-  const isOwner = user && car?.seller.id === user._id;\r\n-\r\n-  useEffect(() => {\r\n-    const fetchCar = async () => {\r\n-      if (!id) return;\r\n-      setLoading(true);\r\n-\r\n-      try {\r\n-        const apiCar = await getCarById(id);\r\n-        setCar(mapApiCarToCar(apiCar));\r\n-\r\n-        const allCars = await getAllCars();\r\n-        setSimilarCars(allCars.map(mapApiCarToCar));\r\n-      } catch (err) {\r\n-        console.error(err);\r\n-      }\r\n-\r\n-      setLoading(false);\r\n-    };\r\n-\r\n-    fetchCar();\r\n-  }, [id]);\r\n-\r\n-  const handleDelete = async () => {\r\n-    if (!user || !car) return;\r\n-\r\n-    if (!confirm(\"Are you sure you want to delete this listing?\")) return;\r\n-\r\n-    try {\r\n-      await axios.delete(`http://127.0.0.1:5000/api/cars/${car.id}`, {\r\n-        headers: { Authorization: `Bearer ${user.token}` },\r\n-      });\r\n-\r\n-      toast({ title: \"Car deleted successfully\" });\r\n-      navigate(\"/profile\");\r\n-    } catch (err: unknown) {\r\n-  const message =\r\n-    err && typeof err === \"object\" && \"response\" in err\r\n-      ? (err as { response?: { data?: { message?: string } } }).response?.data?.message\r\n-      : \"Something went wrong.\";\r\n-\r\n-  toast({\r\n-    title: \"Error deleting car\",\r\n-    description: message,\r\n-    variant: \"destructive\",\r\n-  });\r\n-}\r\n-\r\n-  if (loading)\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n-      </div>\r\n-    );\r\n-\r\n-  if (!car)\r\n-    return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n-        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n-      </div>\r\n-    );\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n-        <Button variant=\"ghost\" onClick={() => navigate(\"/\")} className=\"mb-6 gap-2\">\r\n-          <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n-        </Button>\r\n-\r\n-        {/* OWNER ACTIONS */}\r\n-        {isOwner && (\r\n-          <div className=\"flex gap-2 mb-4\">\r\n-            <Button onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-2\">\r\n-              <Edit className=\"h-4 w-4\" /> Edit Listing\r\n-            </Button>\r\n-\r\n-            <Button variant=\"destructive\" onClick={handleDelete} className=\"gap-2\">\r\n-              <Trash2 className=\"h-4 w-4\" /> Delete Listing\r\n-            </Button>\r\n-          </div>\r\n-        )}\r\n-\r\n-        <div className=\"mb-6 flex gap-2\">\r\n-          <Button\r\n-            variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={() => {\r\n-              toggleFavorite(car.id);\r\n-              toast({\r\n-                title: isFavorite(car.id)\r\n-                  ? \"Removed from favorites\"\r\n-                  : \"Added to favorites\",\r\n-              });\r\n-            }}\r\n-            className=\"gap-2\"\r\n-          >\r\n-            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n-            {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n-          </Button>\r\n-\r\n-          <Button\r\n-            variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={() => {\r\n-              if (isInComparison(car.id)) {\r\n-                removeFromComparison(car.id);\r\n-                toast({ title: \"Removed from comparison\" });\r\n-              } else {\r\n-                const added = addToComparison(car);\r\n-                toast({\r\n-                  title: added ? \"Added to comparison\" : \"Comparison limit reached\",\r\n-                });\r\n-              }\r\n-            }}\r\n-            className=\"gap-2\"\r\n-          >\r\n-            <GitCompare className=\"h-4 w-4\" />\r\n-            {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"grid gap-8 lg:grid-cols-3\">\r\n-          <div className=\"lg:col-span-2 space-y-6\">\r\n-            <Card className=\"overflow-hidden\">\r\n-              <ImageCarousel images={car.images} alt={car.title} />\r\n-            </Card>\r\n-\r\n-            <Card>\r\n-              <CardHeader>\r\n-                <div className=\"flex justify-between items-start\">\r\n-                  <div>\r\n-                    <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n-                      ${car.price.toLocaleString()}\r\n+                    <p className=\"text-sm text-muted-foreground\">\r\n+                      Private Seller\r\n                     </p>\r\n                   </div>\r\n-                  <Badge\r\n-                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n-                    className=\"capitalize text-base px-4 py-1\"\r\n-                  >\r\n-                    {car.condition}\r\n-                  </Badge>\r\n                 </div>\r\n-              </CardHeader>\r\n \r\n-              <CardContent className=\"space-y-6\">\r\n-                {/* SPECS */}\r\n-                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Calendar className=\"h-5 w-5\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Year</p>\r\n-                      <p className=\"font-semibold\">{car.year}</p>\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Gauge className=\"h-5 w-5\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold\">\r\n-                        {car.mileage.toLocaleString()} mi\r\n-                      </p>\r\n-                    </div>\r\n-                  </div>\r\n-                </div>\r\n-\r\n                 <Separator />\r\n \r\n-                <div>\r\n-                  <h3 className=\"font-semibold text-lg mb-3\">Description</h3>\r\n-                  <p className=\"text-muted-foreground\">{car.description}</p>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <div>\r\n-                  <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n-                  <div className=\"flex flex-wrap gap-2\">\r\n-                    {car.platform.map((p, i) => (\r\n-                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">\r\n-                        {p.name}\r\n-                      </Badge>\r\n-                    ))}\r\n-                  </div>\r\n-                </div>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-\r\n-          {/* SELLER INFO */}\r\n-          <div className=\"lg:col-span-1 space-y-6\">\r\n-            <Card className=\"sticky top-24\">\r\n-              <CardHeader>\r\n-                <CardTitle>Seller Information</CardTitle>\r\n-              </CardHeader>\r\n-\r\n-              <CardContent className=\"space-y-4\">\r\n-                <div className=\"flex items-center gap-3\">\r\n-                  <Avatar className=\"h-12 w-12\">\r\n-                    <AvatarFallback className=\"bg-primary text-primary-foreground\">\r\n-                      {car.seller.name.charAt(0)}\r\n-                    </AvatarFallback>\r\n-                  </Avatar>\r\n-                  <div>\r\n-                    <p className=\"font-semibold\">{car.seller.name}</p>\r\n-                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n-                  </div>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n                 <a\r\n                   href={`mailto:${car.seller.email}`}\r\n                   className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n                 >\r\n@@ -574,9 +307,11 @@\n \r\n         {/* SIMILAR CARS */}\r\n         {similarCars.length > 0 && (\r\n           <section className=\"mt-12\">\r\n-            <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n+            <h2 className=\"text-2xl font-bold mb-6\">\r\n+              Similar Cars You May Like\r\n+            </h2>\r\n             <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n               {similarCars.map((c) => (\r\n                 <CarCard key={c.id} car={c} />\r\n               ))}\r\n"
                },
                {
                    "date": 1763933461063,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,7 @@\n-// src/pages/CarDetail.tsx\r\n import { useParams, useNavigate } from \"react-router-dom\";\r\n import { useEffect, useState } from \"react\";\r\n-import { getAllCars, getCarById } from \"@/api/cars\";\r\n+import { getAllCars, getCarById, deleteCar } from \"@/api/cars\";\r\n import { Button } from \"@/components/ui/button\";\r\n import { Badge } from \"@/components/ui/badge\";\r\n import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n import {\r\n@@ -25,41 +24,46 @@\n import { toast } from \"@/hooks/use-toast\";\r\n import { useAuth } from \"@/contexts/AuthContext\";\r\n import type { Car as CarType } from \"@/types/car\";\r\n import { mapApiCarToCar } from \"@/utils/mapApiCarToCar\";\r\n-import axios from \"axios\";\r\n \r\n+function getAxiosMessage(err: unknown, fallback = \"Something went wrong.\") {\r\n+  if (err && typeof err === \"object\" && \"response\" in err) {\r\n+    const e = err as { response?: { data?: { message?: string } } };\r\n+    return e.response?.data?.message ?? fallback;\r\n+  }\r\n+  return fallback;\r\n+}\r\n+\r\n const CarDetail = () => {\r\n   const { id } = useParams();\r\n   const navigate = useNavigate();\r\n   const { user } = useAuth();\r\n \r\n   const { isFavorite, toggleFavorite } = useFavorites();\r\n-  const { isInComparison, addToComparison, removeFromComparison } =\r\n-    useComparison();\r\n+  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n \r\n   const [car, setCar] = useState<CarType | null>(null);\r\n   const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n   const [loading, setLoading] = useState(true);\r\n \r\n-  const isOwner = user && car?.seller.id === user._id;\r\n+  const isOwner = !!user && car?.seller.id === user._id;\r\n \r\n   useEffect(() => {\r\n     const fetchCar = async () => {\r\n       if (!id) return;\r\n       setLoading(true);\r\n-\r\n       try {\r\n         const apiCar = await getCarById(id);\r\n         setCar(mapApiCarToCar(apiCar));\r\n \r\n         const allCars = await getAllCars();\r\n         setSimilarCars(allCars.map(mapApiCarToCar));\r\n       } catch (err) {\r\n         console.error(err);\r\n+      } finally {\r\n+        setLoading(false);\r\n       }\r\n-\r\n-      setLoading(false);\r\n     };\r\n \r\n     fetchCar();\r\n   }, [id]);\r\n@@ -68,47 +72,37 @@\n     if (!user || !car) return;\r\n     if (!confirm(\"Are you sure you want to delete this listing?\")) return;\r\n \r\n     try {\r\n-      await axios.delete(`http://127.0.0.1:5000/api/cars/${car.id}`, {\r\n-        headers: { Authorization: `Bearer ${user.token}` },\r\n-      });\r\n-\r\n+      await deleteCar(car.id, user.token);\r\n       toast({ title: \"Car deleted successfully\" });\r\n       navigate(\"/profile\");\r\n     } catch (err: unknown) {\r\n-      const message =\r\n-        err && typeof err === \"object\" && \"response\" in err\r\n-          ? (err as { response?: { data?: { message?: string } } }).response\r\n-              ?.data?.message\r\n-          : \"Something went wrong.\";\r\n-\r\n       toast({\r\n         title: \"Error deleting car\",\r\n-        description: message,\r\n+        description: getAxiosMessage(err),\r\n         variant: \"destructive\",\r\n       });\r\n     }\r\n   };\r\n \r\n-  // ---------- LOADING ----------\r\n-  if (loading)\r\n+  if (loading) {\r\n     return (\r\n       <div className=\"container mx-auto px-4 py-20 text-center\">\r\n         <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n       </div>\r\n     );\r\n+  }\r\n \r\n-  // ---------- CAR NOT FOUND ----------\r\n-  if (!car)\r\n+  if (!car) {\r\n     return (\r\n       <div className=\"container mx-auto px-4 py-20 text-center\">\r\n         <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n         <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n       </div>\r\n     );\r\n+  }\r\n \r\n-  // ---------- MAIN JSX ----------\r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n         <Button\r\n@@ -118,29 +112,20 @@\n         >\r\n           <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n         </Button>\r\n \r\n-        {/* OWNER ACTIONS */}\r\n+        {/* ✅ OWNER ACTIONS */}\r\n         {isOwner && (\r\n           <div className=\"flex gap-2 mb-4\">\r\n-            <Button\r\n-              onClick={() => navigate(`/edit-car/${car.id}`)}\r\n-              className=\"gap-2\"\r\n-            >\r\n+            <Button onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-2\">\r\n               <Edit className=\"h-4 w-4\" /> Edit Listing\r\n             </Button>\r\n-\r\n-            <Button\r\n-              variant=\"destructive\"\r\n-              onClick={handleDelete}\r\n-              className=\"gap-2\"\r\n-            >\r\n+            <Button variant=\"destructive\" onClick={handleDelete} className=\"gap-2\">\r\n               <Trash2 className=\"h-4 w-4\" /> Delete Listing\r\n             </Button>\r\n           </div>\r\n         )}\r\n \r\n-        {/* FAVORITES + COMPARISON BUTTONS */}\r\n         <div className=\"mb-6 flex gap-2\">\r\n           <Button\r\n             variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n             onClick={() => {\r\n@@ -152,13 +137,9 @@\n               });\r\n             }}\r\n             className=\"gap-2\"\r\n           >\r\n-            <Heart\r\n-              className={`h-4 w-4 ${\r\n-                isFavorite(car.id) ? \"fill-current\" : \"\"\r\n-              }`}\r\n-            />\r\n+            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n             {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n           </Button>\r\n \r\n           <Button\r\n@@ -169,11 +150,9 @@\n                 toast({ title: \"Removed from comparison\" });\r\n               } else {\r\n                 const added = addToComparison(car);\r\n                 toast({\r\n-                  title: added\r\n-                    ? \"Added to comparison\"\r\n-                    : \"Comparison limit reached\",\r\n+                  title: added ? \"Added to comparison\" : \"Comparison limit reached\",\r\n                 });\r\n               }\r\n             }}\r\n             className=\"gap-2\"\r\n@@ -183,9 +162,8 @@\n           </Button>\r\n         </div>\r\n \r\n         <div className=\"grid gap-8 lg:grid-cols-3\">\r\n-          {/* IMAGES + MAIN INFO */}\r\n           <div className=\"lg:col-span-2 space-y-6\">\r\n             <Card className=\"overflow-hidden\">\r\n               <ImageCarousel images={car.images} alt={car.title} />\r\n             </Card>\r\n@@ -199,20 +177,17 @@\n                       ${car.price.toLocaleString()}\r\n                     </p>\r\n                   </div>\r\n                   <Badge\r\n-                    variant={\r\n-                      car.condition === \"new\" ? \"default\" : \"outline\"\r\n-                    }\r\n+                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n                     className=\"capitalize text-base px-4 py-1\"\r\n                   >\r\n                     {car.condition}\r\n                   </Badge>\r\n                 </div>\r\n               </CardHeader>\r\n \r\n               <CardContent className=\"space-y-6\">\r\n-                {/* SPECS */}\r\n                 <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Calendar className=\"h-5 w-5\" />\r\n                     <div>\r\n@@ -224,11 +199,9 @@\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Gauge className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold\">\r\n-                        {car.mileage.toLocaleString()} mi\r\n-                      </p>\r\n+                      <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n                     </div>\r\n                   </div>\r\n                 </div>\r\n \r\n@@ -244,13 +217,9 @@\n                 <div>\r\n                   <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n                   <div className=\"flex flex-wrap gap-2\">\r\n                     {car.platform.map((p, i) => (\r\n-                      <Badge\r\n-                        key={i}\r\n-                        variant=\"secondary\"\r\n-                        className=\"px-3 py-1\"\r\n-                      >\r\n+                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">\r\n                         {p.name}\r\n                       </Badge>\r\n                     ))}\r\n                   </div>\r\n@@ -258,9 +227,8 @@\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n-          {/* SELLER INFORMATION */}\r\n           <div className=\"lg:col-span-1 space-y-6\">\r\n             <Card className=\"sticky top-24\">\r\n               <CardHeader>\r\n                 <CardTitle>Seller Information</CardTitle>\r\n@@ -274,11 +242,9 @@\n                     </AvatarFallback>\r\n                   </Avatar>\r\n                   <div>\r\n                     <p className=\"font-semibold\">{car.seller.name}</p>\r\n-                    <p className=\"text-sm text-muted-foreground\">\r\n-                      Private Seller\r\n-                    </p>\r\n+                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n                   </div>\r\n                 </div>\r\n \r\n                 <Separator />\r\n@@ -304,14 +270,11 @@\n             </Card>\r\n           </div>\r\n         </div>\r\n \r\n-        {/* SIMILAR CARS */}\r\n         {similarCars.length > 0 && (\r\n           <section className=\"mt-12\">\r\n-            <h2 className=\"text-2xl font-bold mb-6\">\r\n-              Similar Cars You May Like\r\n-            </h2>\r\n+            <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n             <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n               {similarCars.map((c) => (\r\n                 <CarCard key={c.id} car={c} />\r\n               ))}\r\n"
                },
                {
                    "date": 1764594143745,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,9 +39,10 @@\n   const navigate = useNavigate();\r\n   const { user } = useAuth();\r\n \r\n   const { isFavorite, toggleFavorite } = useFavorites();\r\n-  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n+  const { isInComparison, addToComparison, removeFromComparison } =\r\n+    useComparison();\r\n \r\n   const [car, setCar] = useState<CarType | null>(null);\r\n   const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n   const [loading, setLoading] = useState(true);\r\n@@ -63,9 +64,8 @@\n       } finally {\r\n         setLoading(false);\r\n       }\r\n     };\r\n-\r\n     fetchCar();\r\n   }, [id]);\r\n \r\n   const handleDelete = async () => {\r\n@@ -86,48 +86,54 @@\n   };\r\n \r\n   if (loading) {\r\n     return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n+      <div className=\"container mx-auto px-3 py-20 text-center\">\r\n+        <h1 className=\"text-xl font-bold\">Loading car details...</h1>\r\n       </div>\r\n     );\r\n   }\r\n \r\n   if (!car) {\r\n     return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n-        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n+      <div className=\"container mx-auto px-3 py-20 text-center\">\r\n+        <h1 className=\"text-xl font-bold\">Car Not Found</h1>\r\n+        <Button size=\"sm\" onClick={() => navigate(\"/\")}>\r\n+          Back to Dashboard\r\n+        </Button>\r\n       </div>\r\n     );\r\n   }\r\n \r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n+      <div className=\"container mx-auto px-3 py-6\">\r\n+\r\n         <Button\r\n           variant=\"ghost\"\r\n+          size=\"sm\"\r\n           onClick={() => navigate(\"/\")}\r\n-          className=\"mb-6 gap-2\"\r\n+          className=\"mb-4 gap-1 text-sm\"\r\n         >\r\n-          <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n+          <ArrowLeft className=\"h-4 w-4\" /> Back\r\n         </Button>\r\n \r\n-        {/* ✅ OWNER ACTIONS */}\r\n+        {/* OWNER ACTIONS */}\r\n         {isOwner && (\r\n           <div className=\"flex gap-2 mb-4\">\r\n-            <Button onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-2\">\r\n-              <Edit className=\"h-4 w-4\" /> Edit Listing\r\n+            <Button size=\"sm\" onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-1 text-sm\">\r\n+              <Edit className=\"h-4 w-4\" /> Edit\r\n             </Button>\r\n-            <Button variant=\"destructive\" onClick={handleDelete} className=\"gap-2\">\r\n-              <Trash2 className=\"h-4 w-4\" /> Delete Listing\r\n+            <Button size=\"sm\" variant=\"destructive\" onClick={handleDelete} className=\"gap-1 text-sm\">\r\n+              <Trash2 className=\"h-4 w-4\" /> Delete\r\n             </Button>\r\n           </div>\r\n         )}\r\n \r\n-        <div className=\"mb-6 flex gap-2\">\r\n+        {/* ACTION BUTTONS */}\r\n+        <div className=\"mb-4 flex gap-2\">\r\n           <Button\r\n+            size=\"sm\"\r\n             variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n             onClick={() => {\r\n               toggleFavorite(car.id);\r\n               toast({\r\n@@ -135,70 +141,73 @@\n                   ? \"Removed from favorites\"\r\n                   : \"Added to favorites\",\r\n               });\r\n             }}\r\n-            className=\"gap-2\"\r\n+            className=\"gap-2 text-xs\"\r\n           >\r\n-            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n+            <Heart className=\"h-4 w-4\" />\r\n             {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n           </Button>\r\n \r\n           <Button\r\n+            size=\"sm\"\r\n             variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n             onClick={() => {\r\n               if (isInComparison(car.id)) {\r\n                 removeFromComparison(car.id);\r\n                 toast({ title: \"Removed from comparison\" });\r\n               } else {\r\n                 const added = addToComparison(car);\r\n                 toast({\r\n-                  title: added ? \"Added to comparison\" : \"Comparison limit reached\",\r\n+                  title: added ? \"Added to comparison\" : \"Comparison full\",\r\n                 });\r\n               }\r\n             }}\r\n-            className=\"gap-2\"\r\n+            className=\"gap-2 text-xs\"\r\n           >\r\n             <GitCompare className=\"h-4 w-4\" />\r\n             {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n           </Button>\r\n         </div>\r\n \r\n-        <div className=\"grid gap-8 lg:grid-cols-3\">\r\n-          <div className=\"lg:col-span-2 space-y-6\">\r\n+        <div className=\"grid gap-6 lg:grid-cols-3\">\r\n+          {/* LEFT SIDE */}\r\n+          <div className=\"lg:col-span-2 space-y-4\">\r\n             <Card className=\"overflow-hidden\">\r\n-              <ImageCarousel images={car.images} alt={car.title} />\r\n+              <ImageCarousel images={car.images} alt={car.title} height=\"250px\" />\r\n             </Card>\r\n \r\n             <Card>\r\n               <CardHeader>\r\n                 <div className=\"flex justify-between items-start\">\r\n                   <div>\r\n-                    <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n+                    <CardTitle className=\"text-xl\">{car.title}</CardTitle>\r\n+                    <p className=\"mt-1 text-lg font-bold text-primary\">\r\n                       ${car.price.toLocaleString()}\r\n                     </p>\r\n                   </div>\r\n                   <Badge\r\n                     variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n-                    className=\"capitalize text-base px-4 py-1\"\r\n+                    className=\"capitalize text-xs px-2 py-1\"\r\n                   >\r\n                     {car.condition}\r\n                   </Badge>\r\n                 </div>\r\n               </CardHeader>\r\n \r\n-              <CardContent className=\"space-y-6\">\r\n-                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n+              <CardContent className=\"space-y-4 text-sm\">\r\n+\r\n+                <div className=\"grid grid-cols-2 gap-4\">\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Calendar className=\"h-5 w-5\" />\r\n+                    <Calendar className=\"h-4 w-4\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Year</p>\r\n                       <p className=\"font-semibold\">{car.year}</p>\r\n                     </div>\r\n                   </div>\r\n \r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Gauge className=\"h-5 w-5\" />\r\n+                    <Gauge className=\"h-4 w-4\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Mileage</p>\r\n                       <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n                     </div>\r\n@@ -207,81 +216,85 @@\n \r\n                 <Separator />\r\n \r\n                 <div>\r\n-                  <h3 className=\"font-semibold text-lg mb-3\">Description</h3>\r\n-                  <p className=\"text-muted-foreground\">{car.description}</p>\r\n+                  <h3 className=\"font-semibold text-base mb-2\">Description</h3>\r\n+                  <p className=\"text-muted-foreground text-sm\">{car.description}</p>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n                 <div>\r\n-                  <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n-                  <div className=\"flex flex-wrap gap-2\">\r\n+                  <h3 className=\"font-semibold text-base mb-2\">Listed On</h3>\r\n+                  <div className=\"flex flex-wrap gap-1\">\r\n                     {car.platform.map((p, i) => (\r\n-                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">\r\n+                      <Badge key={i} variant=\"secondary\" className=\"px-2 py-1 text-xs\">\r\n                         {p.name}\r\n                       </Badge>\r\n                     ))}\r\n                   </div>\r\n                 </div>\r\n+\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n-          <div className=\"lg:col-span-1 space-y-6\">\r\n-            <Card className=\"sticky top-24\">\r\n+          {/* RIGHT SIDE: SELLER CARD */}\r\n+          <div className=\"lg:col-span-1 space-y-4\">\r\n+            <Card className=\"sticky top-20\">\r\n               <CardHeader>\r\n-                <CardTitle>Seller Information</CardTitle>\r\n+                <CardTitle className=\"text-base\">Seller Information</CardTitle>\r\n               </CardHeader>\r\n \r\n-              <CardContent className=\"space-y-4\">\r\n+              <CardContent className=\"space-y-4 text-sm\">\r\n                 <div className=\"flex items-center gap-3\">\r\n-                  <Avatar className=\"h-12 w-12\">\r\n+                  <Avatar className=\"h-10 w-10\">\r\n                     <AvatarFallback className=\"bg-primary text-primary-foreground\">\r\n                       {car.seller.name.charAt(0)}\r\n                     </AvatarFallback>\r\n                   </Avatar>\r\n                   <div>\r\n-                    <p className=\"font-semibold\">{car.seller.name}</p>\r\n-                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n+                    <p className=\"font-semibold text-sm\">{car.seller.name}</p>\r\n+                    <p className=\"text-xs text-muted-foreground\">Private Seller</p>\r\n                   </div>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n                 <a\r\n                   href={`mailto:${car.seller.email}`}\r\n-                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n+                  className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground\"\r\n                 >\r\n                   <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n                 </a>\r\n \r\n                 <a\r\n                   href={`tel:${car.seller.phone}`}\r\n-                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n+                  className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground\"\r\n                 >\r\n                   <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n                 </a>\r\n \r\n                 <Separator />\r\n \r\n-                <Button className=\"w-full\">Contact Seller</Button>\r\n+                <Button size=\"sm\" className=\"w-full text-sm\">Contact Seller</Button>\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n         </div>\r\n \r\n+        {/* SIMILAR CARS */}\r\n         {similarCars.length > 0 && (\r\n-          <section className=\"mt-12\">\r\n-            <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n-            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n+          <section className=\"mt-10\">\r\n+            <h2 className=\"text-xl font-bold mb-4\">Similar Cars</h2>\r\n+            <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n               {similarCars.map((c) => (\r\n-                <CarCard key={c.id} car={c} />\r\n+                <CarCard key={c.id} car={c} compact />\r\n               ))}\r\n             </div>\r\n           </section>\r\n         )}\r\n+\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n"
                },
                {
                    "date": 1764594174069,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,10 +39,9 @@\n   const navigate = useNavigate();\r\n   const { user } = useAuth();\r\n \r\n   const { isFavorite, toggleFavorite } = useFavorites();\r\n-  const { isInComparison, addToComparison, removeFromComparison } =\r\n-    useComparison();\r\n+  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n \r\n   const [car, setCar] = useState<CarType | null>(null);\r\n   const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n   const [loading, setLoading] = useState(true);\r\n@@ -64,8 +63,9 @@\n       } finally {\r\n         setLoading(false);\r\n       }\r\n     };\r\n+\r\n     fetchCar();\r\n   }, [id]);\r\n \r\n   const handleDelete = async () => {\r\n@@ -86,54 +86,48 @@\n   };\r\n \r\n   if (loading) {\r\n     return (\r\n-      <div className=\"container mx-auto px-3 py-20 text-center\">\r\n-        <h1 className=\"text-xl font-bold\">Loading car details...</h1>\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n       </div>\r\n     );\r\n   }\r\n \r\n   if (!car) {\r\n     return (\r\n-      <div className=\"container mx-auto px-3 py-20 text-center\">\r\n-        <h1 className=\"text-xl font-bold\">Car Not Found</h1>\r\n-        <Button size=\"sm\" onClick={() => navigate(\"/\")}>\r\n-          Back to Dashboard\r\n-        </Button>\r\n+      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n+        <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n+        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n       </div>\r\n     );\r\n   }\r\n \r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-3 py-6\">\r\n-\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n         <Button\r\n           variant=\"ghost\"\r\n-          size=\"sm\"\r\n           onClick={() => navigate(\"/\")}\r\n-          className=\"mb-4 gap-1 text-sm\"\r\n+          className=\"mb-6 gap-2\"\r\n         >\r\n-          <ArrowLeft className=\"h-4 w-4\" /> Back\r\n+          <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n         </Button>\r\n \r\n-        {/* OWNER ACTIONS */}\r\n+        {/* ✅ OWNER ACTIONS */}\r\n         {isOwner && (\r\n           <div className=\"flex gap-2 mb-4\">\r\n-            <Button size=\"sm\" onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-1 text-sm\">\r\n-              <Edit className=\"h-4 w-4\" /> Edit\r\n+            <Button onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-2\">\r\n+              <Edit className=\"h-4 w-4\" /> Edit Listing\r\n             </Button>\r\n-            <Button size=\"sm\" variant=\"destructive\" onClick={handleDelete} className=\"gap-1 text-sm\">\r\n-              <Trash2 className=\"h-4 w-4\" /> Delete\r\n+            <Button variant=\"destructive\" onClick={handleDelete} className=\"gap-2\">\r\n+              <Trash2 className=\"h-4 w-4\" /> Delete Listing\r\n             </Button>\r\n           </div>\r\n         )}\r\n \r\n-        {/* ACTION BUTTONS */}\r\n-        <div className=\"mb-4 flex gap-2\">\r\n+        <div className=\"mb-6 flex gap-2\">\r\n           <Button\r\n-            size=\"sm\"\r\n             variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n             onClick={() => {\r\n               toggleFavorite(car.id);\r\n               toast({\r\n@@ -141,73 +135,70 @@\n                   ? \"Removed from favorites\"\r\n                   : \"Added to favorites\",\r\n               });\r\n             }}\r\n-            className=\"gap-2 text-xs\"\r\n+            className=\"gap-2\"\r\n           >\r\n-            <Heart className=\"h-4 w-4\" />\r\n+            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n             {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n           </Button>\r\n \r\n           <Button\r\n-            size=\"sm\"\r\n             variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n             onClick={() => {\r\n               if (isInComparison(car.id)) {\r\n                 removeFromComparison(car.id);\r\n                 toast({ title: \"Removed from comparison\" });\r\n               } else {\r\n                 const added = addToComparison(car);\r\n                 toast({\r\n-                  title: added ? \"Added to comparison\" : \"Comparison full\",\r\n+                  title: added ? \"Added to comparison\" : \"Comparison limit reached\",\r\n                 });\r\n               }\r\n             }}\r\n-            className=\"gap-2 text-xs\"\r\n+            className=\"gap-2\"\r\n           >\r\n             <GitCompare className=\"h-4 w-4\" />\r\n             {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n           </Button>\r\n         </div>\r\n \r\n-        <div className=\"grid gap-6 lg:grid-cols-3\">\r\n-          {/* LEFT SIDE */}\r\n-          <div className=\"lg:col-span-2 space-y-4\">\r\n+        <div className=\"grid gap-8 lg:grid-cols-3\">\r\n+          <div className=\"lg:col-span-2 space-y-6\">\r\n             <Card className=\"overflow-hidden\">\r\n-              <ImageCarousel images={car.images} alt={car.title} height=\"250px\" />\r\n+              <ImageCarousel images={car.images} alt={car.title} />\r\n             </Card>\r\n \r\n             <Card>\r\n               <CardHeader>\r\n                 <div className=\"flex justify-between items-start\">\r\n                   <div>\r\n-                    <CardTitle className=\"text-xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-1 text-lg font-bold text-primary\">\r\n+                    <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n+                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n                       ${car.price.toLocaleString()}\r\n                     </p>\r\n                   </div>\r\n                   <Badge\r\n                     variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n-                    className=\"capitalize text-xs px-2 py-1\"\r\n+                    className=\"capitalize text-base px-4 py-1\"\r\n                   >\r\n                     {car.condition}\r\n                   </Badge>\r\n                 </div>\r\n               </CardHeader>\r\n \r\n-              <CardContent className=\"space-y-4 text-sm\">\r\n-\r\n-                <div className=\"grid grid-cols-2 gap-4\">\r\n+              <CardContent className=\"space-y-6\">\r\n+                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Calendar className=\"h-4 w-4\" />\r\n+                    <Calendar className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Year</p>\r\n                       <p className=\"font-semibold\">{car.year}</p>\r\n                     </div>\r\n                   </div>\r\n \r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Gauge className=\"h-4 w-4\" />\r\n+                    <Gauge className=\"h-5 w-5\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Mileage</p>\r\n                       <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n                     </div>\r\n@@ -216,85 +207,81 @@\n \r\n                 <Separator />\r\n \r\n                 <div>\r\n-                  <h3 className=\"font-semibold text-base mb-2\">Description</h3>\r\n-                  <p className=\"text-muted-foreground text-sm\">{car.description}</p>\r\n+                  <h3 className=\"font-semibold text-lg mb-3\">Description</h3>\r\n+                  <p className=\"text-muted-foreground\">{car.description}</p>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n                 <div>\r\n-                  <h3 className=\"font-semibold text-base mb-2\">Listed On</h3>\r\n-                  <div className=\"flex flex-wrap gap-1\">\r\n+                  <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n+                  <div className=\"flex flex-wrap gap-2\">\r\n                     {car.platform.map((p, i) => (\r\n-                      <Badge key={i} variant=\"secondary\" className=\"px-2 py-1 text-xs\">\r\n+                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">\r\n                         {p.name}\r\n                       </Badge>\r\n                     ))}\r\n                   </div>\r\n                 </div>\r\n-\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n-          {/* RIGHT SIDE: SELLER CARD */}\r\n-          <div className=\"lg:col-span-1 space-y-4\">\r\n-            <Card className=\"sticky top-20\">\r\n+          <div className=\"lg:col-span-1 space-y-6\">\r\n+            <Card className=\"sticky top-24\">\r\n               <CardHeader>\r\n-                <CardTitle className=\"text-base\">Seller Information</CardTitle>\r\n+                <CardTitle>Seller Information</CardTitle>\r\n               </CardHeader>\r\n \r\n-              <CardContent className=\"space-y-4 text-sm\">\r\n+              <CardContent className=\"space-y-4\">\r\n                 <div className=\"flex items-center gap-3\">\r\n-                  <Avatar className=\"h-10 w-10\">\r\n+                  <Avatar className=\"h-12 w-12\">\r\n                     <AvatarFallback className=\"bg-primary text-primary-foreground\">\r\n                       {car.seller.name.charAt(0)}\r\n                     </AvatarFallback>\r\n                   </Avatar>\r\n                   <div>\r\n-                    <p className=\"font-semibold text-sm\">{car.seller.name}</p>\r\n-                    <p className=\"text-xs text-muted-foreground\">Private Seller</p>\r\n+                    <p className=\"font-semibold\">{car.seller.name}</p>\r\n+                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n                   </div>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n                 <a\r\n                   href={`mailto:${car.seller.email}`}\r\n-                  className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground\"\r\n+                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n                 >\r\n                   <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n                 </a>\r\n \r\n                 <a\r\n                   href={`tel:${car.seller.phone}`}\r\n-                  className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground\"\r\n+                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n                 >\r\n                   <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n                 </a>\r\n \r\n                 <Separator />\r\n \r\n-                <Button size=\"sm\" className=\"w-full text-sm\">Contact Seller</Button>\r\n+                <Button className=\"w-full\">Contact Seller</Button>\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n         </div>\r\n \r\n-        {/* SIMILAR CARS */}\r\n         {similarCars.length > 0 && (\r\n-          <section className=\"mt-10\">\r\n-            <h2 className=\"text-xl font-bold mb-4\">Similar Cars</h2>\r\n-            <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n+          <section className=\"mt-12\">\r\n+            <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n+            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n               {similarCars.map((c) => (\r\n-                <CarCard key={c.id} car={c} compact />\r\n+                <CarCard key={c.id} car={c} />\r\n               ))}\r\n             </div>\r\n           </section>\r\n         )}\r\n-\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n"
                },
                {
                    "date": 1764594181256,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,9 +39,10 @@\n   const navigate = useNavigate();\r\n   const { user } = useAuth();\r\n \r\n   const { isFavorite, toggleFavorite } = useFavorites();\r\n-  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n+  const { isInComparison, addToComparison, removeFromComparison } =\r\n+    useComparison();\r\n \r\n   const [car, setCar] = useState<CarType | null>(null);\r\n   const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n   const [loading, setLoading] = useState(true);\r\n@@ -63,9 +64,8 @@\n       } finally {\r\n         setLoading(false);\r\n       }\r\n     };\r\n-\r\n     fetchCar();\r\n   }, [id]);\r\n \r\n   const handleDelete = async () => {\r\n@@ -86,48 +86,54 @@\n   };\r\n \r\n   if (loading) {\r\n     return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"text-3xl font-bold\">Loading car details...</h1>\r\n+      <div className=\"container mx-auto px-3 py-20 text-center\">\r\n+        <h1 className=\"text-xl font-bold\">Loading car details...</h1>\r\n       </div>\r\n     );\r\n   }\r\n \r\n   if (!car) {\r\n     return (\r\n-      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n-        <h1 className=\"text-3xl font-bold\">Car Not Found</h1>\r\n-        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n+      <div className=\"container mx-auto px-3 py-20 text-center\">\r\n+        <h1 className=\"text-xl font-bold\">Car Not Found</h1>\r\n+        <Button size=\"sm\" onClick={() => navigate(\"/\")}>\r\n+          Back to Dashboard\r\n+        </Button>\r\n       </div>\r\n     );\r\n   }\r\n \r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-4 py-8\">\r\n+      <div className=\"container mx-auto px-3 py-6\">\r\n+\r\n         <Button\r\n           variant=\"ghost\"\r\n+          size=\"sm\"\r\n           onClick={() => navigate(\"/\")}\r\n-          className=\"mb-6 gap-2\"\r\n+          className=\"mb-4 gap-1 text-sm\"\r\n         >\r\n-          <ArrowLeft className=\"h-4 w-4\" /> Back to Listings\r\n+          <ArrowLeft className=\"h-4 w-4\" /> Back\r\n         </Button>\r\n \r\n-        {/* ✅ OWNER ACTIONS */}\r\n+        {/* OWNER ACTIONS */}\r\n         {isOwner && (\r\n           <div className=\"flex gap-2 mb-4\">\r\n-            <Button onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-2\">\r\n-              <Edit className=\"h-4 w-4\" /> Edit Listing\r\n+            <Button size=\"sm\" onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-1 text-sm\">\r\n+              <Edit className=\"h-4 w-4\" /> Edit\r\n             </Button>\r\n-            <Button variant=\"destructive\" onClick={handleDelete} className=\"gap-2\">\r\n-              <Trash2 className=\"h-4 w-4\" /> Delete Listing\r\n+            <Button size=\"sm\" variant=\"destructive\" onClick={handleDelete} className=\"gap-1 text-sm\">\r\n+              <Trash2 className=\"h-4 w-4\" /> Delete\r\n             </Button>\r\n           </div>\r\n         )}\r\n \r\n-        <div className=\"mb-6 flex gap-2\">\r\n+        {/* ACTION BUTTONS */}\r\n+        <div className=\"mb-4 flex gap-2\">\r\n           <Button\r\n+            size=\"sm\"\r\n             variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n             onClick={() => {\r\n               toggleFavorite(car.id);\r\n               toast({\r\n@@ -135,70 +141,73 @@\n                   ? \"Removed from favorites\"\r\n                   : \"Added to favorites\",\r\n               });\r\n             }}\r\n-            className=\"gap-2\"\r\n+            className=\"gap-2 text-xs\"\r\n           >\r\n-            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n+            <Heart className=\"h-4 w-4\" />\r\n             {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n           </Button>\r\n \r\n           <Button\r\n+            size=\"sm\"\r\n             variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n             onClick={() => {\r\n               if (isInComparison(car.id)) {\r\n                 removeFromComparison(car.id);\r\n                 toast({ title: \"Removed from comparison\" });\r\n               } else {\r\n                 const added = addToComparison(car);\r\n                 toast({\r\n-                  title: added ? \"Added to comparison\" : \"Comparison limit reached\",\r\n+                  title: added ? \"Added to comparison\" : \"Comparison full\",\r\n                 });\r\n               }\r\n             }}\r\n-            className=\"gap-2\"\r\n+            className=\"gap-2 text-xs\"\r\n           >\r\n             <GitCompare className=\"h-4 w-4\" />\r\n             {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n           </Button>\r\n         </div>\r\n \r\n-        <div className=\"grid gap-8 lg:grid-cols-3\">\r\n-          <div className=\"lg:col-span-2 space-y-6\">\r\n+        <div className=\"grid gap-6 lg:grid-cols-3\">\r\n+          {/* LEFT SIDE */}\r\n+          <div className=\"lg:col-span-2 space-y-4\">\r\n             <Card className=\"overflow-hidden\">\r\n-              <ImageCarousel images={car.images} alt={car.title} />\r\n+              <ImageCarousel images={car.images} alt={car.title} height=\"250px\" />\r\n             </Card>\r\n \r\n             <Card>\r\n               <CardHeader>\r\n                 <div className=\"flex justify-between items-start\">\r\n                   <div>\r\n-                    <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n+                    <CardTitle className=\"text-xl\">{car.title}</CardTitle>\r\n+                    <p className=\"mt-1 text-lg font-bold text-primary\">\r\n                       ${car.price.toLocaleString()}\r\n                     </p>\r\n                   </div>\r\n                   <Badge\r\n                     variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n-                    className=\"capitalize text-base px-4 py-1\"\r\n+                    className=\"capitalize text-xs px-2 py-1\"\r\n                   >\r\n                     {car.condition}\r\n                   </Badge>\r\n                 </div>\r\n               </CardHeader>\r\n \r\n-              <CardContent className=\"space-y-6\">\r\n-                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n+              <CardContent className=\"space-y-4 text-sm\">\r\n+\r\n+                <div className=\"grid grid-cols-2 gap-4\">\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Calendar className=\"h-5 w-5\" />\r\n+                    <Calendar className=\"h-4 w-4\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Year</p>\r\n                       <p className=\"font-semibold\">{car.year}</p>\r\n                     </div>\r\n                   </div>\r\n \r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Gauge className=\"h-5 w-5\" />\r\n+                    <Gauge className=\"h-4 w-4\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Mileage</p>\r\n                       <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n                     </div>\r\n@@ -207,81 +216,85 @@\n \r\n                 <Separator />\r\n \r\n                 <div>\r\n-                  <h3 className=\"font-semibold text-lg mb-3\">Description</h3>\r\n-                  <p className=\"text-muted-foreground\">{car.description}</p>\r\n+                  <h3 className=\"font-semibold text-base mb-2\">Description</h3>\r\n+                  <p className=\"text-muted-foreground text-sm\">{car.description}</p>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n                 <div>\r\n-                  <h3 className=\"font-semibold text-lg mb-3\">Listed On</h3>\r\n-                  <div className=\"flex flex-wrap gap-2\">\r\n+                  <h3 className=\"font-semibold text-base mb-2\">Listed On</h3>\r\n+                  <div className=\"flex flex-wrap gap-1\">\r\n                     {car.platform.map((p, i) => (\r\n-                      <Badge key={i} variant=\"secondary\" className=\"px-3 py-1\">\r\n+                      <Badge key={i} variant=\"secondary\" className=\"px-2 py-1 text-xs\">\r\n                         {p.name}\r\n                       </Badge>\r\n                     ))}\r\n                   </div>\r\n                 </div>\r\n+\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n-          <div className=\"lg:col-span-1 space-y-6\">\r\n-            <Card className=\"sticky top-24\">\r\n+          {/* RIGHT SIDE: SELLER CARD */}\r\n+          <div className=\"lg:col-span-1 space-y-4\">\r\n+            <Card className=\"sticky top-20\">\r\n               <CardHeader>\r\n-                <CardTitle>Seller Information</CardTitle>\r\n+                <CardTitle className=\"text-base\">Seller Information</CardTitle>\r\n               </CardHeader>\r\n \r\n-              <CardContent className=\"space-y-4\">\r\n+              <CardContent className=\"space-y-4 text-sm\">\r\n                 <div className=\"flex items-center gap-3\">\r\n-                  <Avatar className=\"h-12 w-12\">\r\n+                  <Avatar className=\"h-10 w-10\">\r\n                     <AvatarFallback className=\"bg-primary text-primary-foreground\">\r\n                       {car.seller.name.charAt(0)}\r\n                     </AvatarFallback>\r\n                   </Avatar>\r\n                   <div>\r\n-                    <p className=\"font-semibold\">{car.seller.name}</p>\r\n-                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n+                    <p className=\"font-semibold text-sm\">{car.seller.name}</p>\r\n+                    <p className=\"text-xs text-muted-foreground\">Private Seller</p>\r\n                   </div>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n                 <a\r\n                   href={`mailto:${car.seller.email}`}\r\n-                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n+                  className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground\"\r\n                 >\r\n                   <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n                 </a>\r\n \r\n                 <a\r\n                   href={`tel:${car.seller.phone}`}\r\n-                  className=\"flex items-center gap-2 text-muted-foreground text-sm hover:text-foreground\"\r\n+                  className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground\"\r\n                 >\r\n                   <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n                 </a>\r\n \r\n                 <Separator />\r\n \r\n-                <Button className=\"w-full\">Contact Seller</Button>\r\n+                <Button size=\"sm\" className=\"w-full text-sm\">Contact Seller</Button>\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n         </div>\r\n \r\n+        {/* SIMILAR CARS */}\r\n         {similarCars.length > 0 && (\r\n-          <section className=\"mt-12\">\r\n-            <h2 className=\"text-2xl font-bold mb-6\">Similar Cars You May Like</h2>\r\n-            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n+          <section className=\"mt-10\">\r\n+            <h2 className=\"text-xl font-bold mb-4\">Similar Cars</h2>\r\n+            <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n               {similarCars.map((c) => (\r\n-                <CarCard key={c.id} car={c} />\r\n+                <CarCard key={c.id} car={c} compact />\r\n               ))}\r\n             </div>\r\n           </section>\r\n         )}\r\n+\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n"
                },
                {
                    "date": 1764594188982,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -287,9 +287,9 @@\n           <section className=\"mt-10\">\r\n             <h2 className=\"text-xl font-bold mb-4\">Similar Cars</h2>\r\n             <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n               {similarCars.map((c) => (\r\n-                <CarCard key={c.id} car={c} compact />\r\n+                <CarCard key={c.id} car={c}  />\r\n               ))}\r\n             </div>\r\n           </section>\r\n         )}\r\n"
                },
                {
                    "date": 1764594582886,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -287,9 +287,9 @@\n           <section className=\"mt-10\">\r\n             <h2 className=\"text-xl font-bold mb-4\">Similar Cars</h2>\r\n             <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n               {similarCars.map((c) => (\r\n-                <CarCard key={c.id} car={c}  />\r\n+                <CarCard key={c.id} car={c} compact />\r\n               ))}\r\n             </div>\r\n           </section>\r\n         )}\r\n"
                },
                {
                    "date": 1764594592071,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,302 @@\n+import { useParams, useNavigate } from \"react-router-dom\";\r\n+import { useEffect, useState } from \"react\";\r\n+import { getAllCars, getCarById, deleteCar } from \"@/api/cars\";\r\n+import { Button } from \"@/components/ui/button\";\r\n+import { Badge } from \"@/components/ui/badge\";\r\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n+import {\r\n+  ArrowLeft,\r\n+  Gauge,\r\n+  Calendar,\r\n+  Mail,\r\n+  Phone,\r\n+  Heart,\r\n+  GitCompare,\r\n+  Edit,\r\n+  Trash2,\r\n+} from \"lucide-react\";\r\n+import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n+import { Separator } from \"@/components/ui/separator\";\r\n+import ImageCarousel from \"@/components/ImageCarousel\";\r\n+import CarCard from \"@/components/CarCard\";\r\n+import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n+import { useComparison } from \"@/contexts/ComparisonContext\";\r\n+import { toast } from \"@/hooks/use-toast\";\r\n+import { useAuth } from \"@/contexts/AuthContext\";\r\n+import type { Car as CarType } from \"@/types/car\";\r\n+import { mapApiCarToCar } from \"@/utils/mapApiCarToCar\";\r\n+\r\n+function getAxiosMessage(err: unknown, fallback = \"Something went wrong.\") {\r\n+  if (err && typeof err === \"object\" && \"response\" in err) {\r\n+    const e = err as { response?: { data?: { message?: string } } };\r\n+    return e.response?.data?.message ?? fallback;\r\n+  }\r\n+  return fallback;\r\n+}\r\n+\r\n+const CarDetail = () => {\r\n+  const { id } = useParams();\r\n+  const navigate = useNavigate();\r\n+  const { user } = useAuth();\r\n+\r\n+  const { isFavorite, toggleFavorite } = useFavorites();\r\n+  const { isInComparison, addToComparison, removeFromComparison } =\r\n+    useComparison();\r\n+\r\n+  const [car, setCar] = useState<CarType | null>(null);\r\n+  const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  const isOwner = !!user && car?.seller.id === user._id;\r\n+\r\n+  useEffect(() => {\r\n+    const fetchCar = async () => {\r\n+      if (!id) return;\r\n+      setLoading(true);\r\n+      try {\r\n+        const apiCar = await getCarById(id);\r\n+        setCar(mapApiCarToCar(apiCar));\r\n+\r\n+        const allCars = await getAllCars();\r\n+        setSimilarCars(allCars.map(mapApiCarToCar));\r\n+      } catch (err) {\r\n+        console.error(err);\r\n+      } finally {\r\n+        setLoading(false);\r\n+      }\r\n+    };\r\n+    fetchCar();\r\n+  }, [id]);\r\n+\r\n+  const handleDelete = async () => {\r\n+    if (!user || !car) return;\r\n+    if (!confirm(\"Are you sure you want to delete this listing?\")) return;\r\n+\r\n+    try {\r\n+      await deleteCar(car.id, user.token);\r\n+      toast({ title: \"Car deleted successfully\" });\r\n+      navigate(\"/profile\");\r\n+    } catch (err: unknown) {\r\n+      toast({\r\n+        title: \"Error deleting car\",\r\n+        description: getAxiosMessage(err),\r\n+        variant: \"destructive\",\r\n+      });\r\n+    }\r\n+  };\r\n+\r\n+  if (loading) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-3 py-20 text-center\">\r\n+        <h1 className=\"text-xl font-bold\">Loading car details...</h1>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  if (!car) {\r\n+    return (\r\n+      <div className=\"container mx-auto px-3 py-20 text-center\">\r\n+        <h1 className=\"text-xl font-bold\">Car Not Found</h1>\r\n+        <Button size=\"sm\" onClick={() => navigate(\"/\")}>\r\n+          Back to Dashboard\r\n+        </Button>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  return (\r\n+    <div className=\"min-h-screen bg-background\">\r\n+      <div className=\"container mx-auto px-3 py-6\">\r\n+\r\n+        <Button\r\n+          variant=\"ghost\"\r\n+          size=\"sm\"\r\n+          onClick={() => navigate(\"/\")}\r\n+          className=\"mb-4 gap-1 text-sm\"\r\n+        >\r\n+          <ArrowLeft className=\"h-4 w-4\" /> Back\r\n+        </Button>\r\n+\r\n+        {/* OWNER ACTIONS */}\r\n+        {isOwner && (\r\n+          <div className=\"flex gap-2 mb-4\">\r\n+            <Button size=\"sm\" onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-1 text-sm\">\r\n+              <Edit className=\"h-4 w-4\" /> Edit\r\n+            </Button>\r\n+            <Button size=\"sm\" variant=\"destructive\" onClick={handleDelete} className=\"gap-1 text-sm\">\r\n+              <Trash2 className=\"h-4 w-4\" /> Delete\r\n+            </Button>\r\n+          </div>\r\n+        )}\r\n+\r\n+        {/* ACTION BUTTONS */}\r\n+        <div className=\"mb-4 flex gap-2\">\r\n+          <Button\r\n+            size=\"sm\"\r\n+            variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n+            onClick={() => {\r\n+              toggleFavorite(car.id);\r\n+              toast({\r\n+                title: isFavorite(car.id)\r\n+                  ? \"Removed from favorites\"\r\n+                  : \"Added to favorites\",\r\n+              });\r\n+            }}\r\n+            className=\"gap-2 text-xs\"\r\n+          >\r\n+            <Heart className=\"h-4 w-4\" />\r\n+            {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n+          </Button>\r\n+\r\n+          <Button\r\n+            size=\"sm\"\r\n+            variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n+            onClick={() => {\r\n+              if (isInComparison(car.id)) {\r\n+                removeFromComparison(car.id);\r\n+                toast({ title: \"Removed from comparison\" });\r\n+              } else {\r\n+                const added = addToComparison(car);\r\n+                toast({\r\n+                  title: added ? \"Added to comparison\" : \"Comparison full\",\r\n+                });\r\n+              }\r\n+            }}\r\n+            className=\"gap-2 text-xs\"\r\n+          >\r\n+            <GitCompare className=\"h-4 w-4\" />\r\n+            {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n+          </Button>\r\n+        </div>\r\n+\r\n+        <div className=\"grid gap-6 lg:grid-cols-3\">\r\n+          {/* LEFT SIDE */}\r\n+          <div className=\"lg:col-span-2 space-y-4\">\r\n+            <Card className=\"overflow-hidden\">\r\n+              <ImageCarousel images={car.images} alt={car.title} height=\"250px\" />\r\n+            </Card>\r\n+\r\n+            <Card>\r\n+              <CardHeader>\r\n+                <div className=\"flex justify-between items-start\">\r\n+                  <div>\r\n+                    <CardTitle className=\"text-xl\">{car.title}</CardTitle>\r\n+                    <p className=\"mt-1 text-lg font-bold text-primary\">\r\n+                      ${car.price.toLocaleString()}\r\n+                    </p>\r\n+                  </div>\r\n+                  <Badge\r\n+                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n+                    className=\"capitalize text-xs px-2 py-1\"\r\n+                  >\r\n+                    {car.condition}\r\n+                  </Badge>\r\n+                </div>\r\n+              </CardHeader>\r\n+\r\n+              <CardContent className=\"space-y-4 text-sm\">\r\n+\r\n+                <div className=\"grid grid-cols-2 gap-4\">\r\n+                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                    <Calendar className=\"h-4 w-4\" />\r\n+                    <div>\r\n+                      <p className=\"text-xs\">Year</p>\r\n+                      <p className=\"font-semibold\">{car.year}</p>\r\n+                    </div>\r\n+                  </div>\r\n+\r\n+                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n+                    <Gauge className=\"h-4 w-4\" />\r\n+                    <div>\r\n+                      <p className=\"text-xs\">Mileage</p>\r\n+                      <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n+                    </div>\r\n+                  </div>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <div>\r\n+                  <h3 className=\"font-semibold text-base mb-2\">Description</h3>\r\n+                  <p className=\"text-muted-foreground text-sm\">{car.description}</p>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <div>\r\n+                  <h3 className=\"font-semibold text-base mb-2\">Listed On</h3>\r\n+                  <div className=\"flex flex-wrap gap-1\">\r\n+                    {car.platform.map((p, i) => (\r\n+                      <Badge key={i} variant=\"secondary\" className=\"px-2 py-1 text-xs\">\r\n+                        {p.name}\r\n+                      </Badge>\r\n+                    ))}\r\n+                  </div>\r\n+                </div>\r\n+\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+\r\n+          {/* RIGHT SIDE: SELLER CARD */}\r\n+          <div className=\"lg:col-span-1 space-y-4\">\r\n+            <Card className=\"sticky top-20\">\r\n+              <CardHeader>\r\n+                <CardTitle className=\"text-base\">Seller Information</CardTitle>\r\n+              </CardHeader>\r\n+\r\n+              <CardContent className=\"space-y-4 text-sm\">\r\n+                <div className=\"flex items-center gap-3\">\r\n+                  <Avatar className=\"h-10 w-10\">\r\n+                    <AvatarFallback className=\"bg-primary text-primary-foreground\">\r\n+                      {car.seller.name.charAt(0)}\r\n+                    </AvatarFallback>\r\n+                  </Avatar>\r\n+                  <div>\r\n+                    <p className=\"font-semibold text-sm\">{car.seller.name}</p>\r\n+                    <p className=\"text-xs text-muted-foreground\">Private Seller</p>\r\n+                  </div>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                <a\r\n+                  href={`mailto:${car.seller.email}`}\r\n+                  className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground\"\r\n+                >\r\n+                  <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n+                </a>\r\n+\r\n+                <a\r\n+                  href={`tel:${car.seller.phone}`}\r\n+                  className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground\"\r\n+                >\r\n+                  <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n+                </a>\r\n+\r\n+                <Separator />\r\n+\r\n+                <Button size=\"sm\" className=\"w-full text-sm\">Contact Seller</Button>\r\n+              </CardContent>\r\n+            </Card>\r\n+          </div>\r\n+        </div>\r\n+\r\n+        {/* SIMILAR CARS */}\r\n+        {similarCars.length > 0 && (\r\n+          <section className=\"mt-10\">\r\n+            <h2 className=\"text-xl font-bold mb-4\">Similar Cars</h2>\r\n+            <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n+              {similarCars.map((c) => (\r\n+                <CarCard key={c.id} car={c} compact />\r\n+              ))}\r\n+            </div>\r\n+          </section>\r\n+        )}\r\n+\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default CarDetail;\r\n"
                },
                {
                    "date": 1764594599082,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -172,9 +172,9 @@\n         <div className=\"grid gap-6 lg:grid-cols-3\">\r\n           {/* LEFT SIDE */}\r\n           <div className=\"lg:col-span-2 space-y-4\">\r\n             <Card className=\"overflow-hidden\">\r\n-              <ImageCarousel images={car.images} alt={car.title} height=\"250px\" />\r\n+              <ImageCarousel images={car.images} alt={car.title} />\r\n             </Card>\r\n \r\n             <Card>\r\n               <CardHeader>\r\n@@ -287,9 +287,9 @@\n           <section className=\"mt-10\">\r\n             <h2 className=\"text-xl font-bold mb-4\">Similar Cars</h2>\r\n             <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n               {similarCars.map((c) => (\r\n-                <CarCard key={c.id} car={c} compact />\r\n+                <CarCard key={c.id} car={c}  />\r\n               ))}\r\n             </div>\r\n           </section>\r\n         )}\r\n@@ -299,306 +299,4 @@\n   );\r\n };\r\n \r\n export default CarDetail;\r\n-import { useParams, useNavigate } from \"react-router-dom\";\r\n-import { useEffect, useState } from \"react\";\r\n-import { getAllCars, getCarById, deleteCar } from \"@/api/cars\";\r\n-import { Button } from \"@/components/ui/button\";\r\n-import { Badge } from \"@/components/ui/badge\";\r\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n-import {\r\n-  ArrowLeft,\r\n-  Gauge,\r\n-  Calendar,\r\n-  Mail,\r\n-  Phone,\r\n-  Heart,\r\n-  GitCompare,\r\n-  Edit,\r\n-  Trash2,\r\n-} from \"lucide-react\";\r\n-import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n-import { Separator } from \"@/components/ui/separator\";\r\n-import ImageCarousel from \"@/components/ImageCarousel\";\r\n-import CarCard from \"@/components/CarCard\";\r\n-import { useFavorites } from \"@/contexts/FavoritesContext\";\r\n-import { useComparison } from \"@/contexts/ComparisonContext\";\r\n-import { toast } from \"@/hooks/use-toast\";\r\n-import { useAuth } from \"@/contexts/AuthContext\";\r\n-import type { Car as CarType } from \"@/types/car\";\r\n-import { mapApiCarToCar } from \"@/utils/mapApiCarToCar\";\r\n-\r\n-function getAxiosMessage(err: unknown, fallback = \"Something went wrong.\") {\r\n-  if (err && typeof err === \"object\" && \"response\" in err) {\r\n-    const e = err as { response?: { data?: { message?: string } } };\r\n-    return e.response?.data?.message ?? fallback;\r\n-  }\r\n-  return fallback;\r\n-}\r\n-\r\n-const CarDetail = () => {\r\n-  const { id } = useParams();\r\n-  const navigate = useNavigate();\r\n-  const { user } = useAuth();\r\n-\r\n-  const { isFavorite, toggleFavorite } = useFavorites();\r\n-  const { isInComparison, addToComparison, removeFromComparison } =\r\n-    useComparison();\r\n-\r\n-  const [car, setCar] = useState<CarType | null>(null);\r\n-  const [similarCars, setSimilarCars] = useState<CarType[]>([]);\r\n-  const [loading, setLoading] = useState(true);\r\n-\r\n-  const isOwner = !!user && car?.seller.id === user._id;\r\n-\r\n-  useEffect(() => {\r\n-    const fetchCar = async () => {\r\n-      if (!id) return;\r\n-      setLoading(true);\r\n-      try {\r\n-        const apiCar = await getCarById(id);\r\n-        setCar(mapApiCarToCar(apiCar));\r\n-\r\n-        const allCars = await getAllCars();\r\n-        setSimilarCars(allCars.map(mapApiCarToCar));\r\n-      } catch (err) {\r\n-        console.error(err);\r\n-      } finally {\r\n-        setLoading(false);\r\n-      }\r\n-    };\r\n-    fetchCar();\r\n-  }, [id]);\r\n-\r\n-  const handleDelete = async () => {\r\n-    if (!user || !car) return;\r\n-    if (!confirm(\"Are you sure you want to delete this listing?\")) return;\r\n-\r\n-    try {\r\n-      await deleteCar(car.id, user.token);\r\n-      toast({ title: \"Car deleted successfully\" });\r\n-      navigate(\"/profile\");\r\n-    } catch (err: unknown) {\r\n-      toast({\r\n-        title: \"Error deleting car\",\r\n-        description: getAxiosMessage(err),\r\n-        variant: \"destructive\",\r\n-      });\r\n-    }\r\n-  };\r\n-\r\n-  if (loading) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-3 py-20 text-center\">\r\n-        <h1 className=\"text-xl font-bold\">Loading car details...</h1>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  if (!car) {\r\n-    return (\r\n-      <div className=\"container mx-auto px-3 py-20 text-center\">\r\n-        <h1 className=\"text-xl font-bold\">Car Not Found</h1>\r\n-        <Button size=\"sm\" onClick={() => navigate(\"/\")}>\r\n-          Back to Dashboard\r\n-        </Button>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-background\">\r\n-      <div className=\"container mx-auto px-3 py-6\">\r\n-\r\n-        <Button\r\n-          variant=\"ghost\"\r\n-          size=\"sm\"\r\n-          onClick={() => navigate(\"/\")}\r\n-          className=\"mb-4 gap-1 text-sm\"\r\n-        >\r\n-          <ArrowLeft className=\"h-4 w-4\" /> Back\r\n-        </Button>\r\n-\r\n-        {/* OWNER ACTIONS */}\r\n-        {isOwner && (\r\n-          <div className=\"flex gap-2 mb-4\">\r\n-            <Button size=\"sm\" onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-1 text-sm\">\r\n-              <Edit className=\"h-4 w-4\" /> Edit\r\n-            </Button>\r\n-            <Button size=\"sm\" variant=\"destructive\" onClick={handleDelete} className=\"gap-1 text-sm\">\r\n-              <Trash2 className=\"h-4 w-4\" /> Delete\r\n-            </Button>\r\n-          </div>\r\n-        )}\r\n-\r\n-        {/* ACTION BUTTONS */}\r\n-        <div className=\"mb-4 flex gap-2\">\r\n-          <Button\r\n-            size=\"sm\"\r\n-            variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={() => {\r\n-              toggleFavorite(car.id);\r\n-              toast({\r\n-                title: isFavorite(car.id)\r\n-                  ? \"Removed from favorites\"\r\n-                  : \"Added to favorites\",\r\n-              });\r\n-            }}\r\n-            className=\"gap-2 text-xs\"\r\n-          >\r\n-            <Heart className=\"h-4 w-4\" />\r\n-            {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n-          </Button>\r\n-\r\n-          <Button\r\n-            size=\"sm\"\r\n-            variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n-            onClick={() => {\r\n-              if (isInComparison(car.id)) {\r\n-                removeFromComparison(car.id);\r\n-                toast({ title: \"Removed from comparison\" });\r\n-              } else {\r\n-                const added = addToComparison(car);\r\n-                toast({\r\n-                  title: added ? \"Added to comparison\" : \"Comparison full\",\r\n-                });\r\n-              }\r\n-            }}\r\n-            className=\"gap-2 text-xs\"\r\n-          >\r\n-            <GitCompare className=\"h-4 w-4\" />\r\n-            {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n-          </Button>\r\n-        </div>\r\n-\r\n-        <div className=\"grid gap-6 lg:grid-cols-3\">\r\n-          {/* LEFT SIDE */}\r\n-          <div className=\"lg:col-span-2 space-y-4\">\r\n-            <Card className=\"overflow-hidden\">\r\n-              <ImageCarousel images={car.images} alt={car.title} height=\"250px\" />\r\n-            </Card>\r\n-\r\n-            <Card>\r\n-              <CardHeader>\r\n-                <div className=\"flex justify-between items-start\">\r\n-                  <div>\r\n-                    <CardTitle className=\"text-xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-1 text-lg font-bold text-primary\">\r\n-                      ${car.price.toLocaleString()}\r\n-                    </p>\r\n-                  </div>\r\n-                  <Badge\r\n-                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n-                    className=\"capitalize text-xs px-2 py-1\"\r\n-                  >\r\n-                    {car.condition}\r\n-                  </Badge>\r\n-                </div>\r\n-              </CardHeader>\r\n-\r\n-              <CardContent className=\"space-y-4 text-sm\">\r\n-\r\n-                <div className=\"grid grid-cols-2 gap-4\">\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Calendar className=\"h-4 w-4\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Year</p>\r\n-                      <p className=\"font-semibold\">{car.year}</p>\r\n-                    </div>\r\n-                  </div>\r\n-\r\n-                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n-                    <Gauge className=\"h-4 w-4\" />\r\n-                    <div>\r\n-                      <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n-                    </div>\r\n-                  </div>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <div>\r\n-                  <h3 className=\"font-semibold text-base mb-2\">Description</h3>\r\n-                  <p className=\"text-muted-foreground text-sm\">{car.description}</p>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <div>\r\n-                  <h3 className=\"font-semibold text-base mb-2\">Listed On</h3>\r\n-                  <div className=\"flex flex-wrap gap-1\">\r\n-                    {car.platform.map((p, i) => (\r\n-                      <Badge key={i} variant=\"secondary\" className=\"px-2 py-1 text-xs\">\r\n-                        {p.name}\r\n-                      </Badge>\r\n-                    ))}\r\n-                  </div>\r\n-                </div>\r\n-\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-\r\n-          {/* RIGHT SIDE: SELLER CARD */}\r\n-          <div className=\"lg:col-span-1 space-y-4\">\r\n-            <Card className=\"sticky top-20\">\r\n-              <CardHeader>\r\n-                <CardTitle className=\"text-base\">Seller Information</CardTitle>\r\n-              </CardHeader>\r\n-\r\n-              <CardContent className=\"space-y-4 text-sm\">\r\n-                <div className=\"flex items-center gap-3\">\r\n-                  <Avatar className=\"h-10 w-10\">\r\n-                    <AvatarFallback className=\"bg-primary text-primary-foreground\">\r\n-                      {car.seller.name.charAt(0)}\r\n-                    </AvatarFallback>\r\n-                  </Avatar>\r\n-                  <div>\r\n-                    <p className=\"font-semibold text-sm\">{car.seller.name}</p>\r\n-                    <p className=\"text-xs text-muted-foreground\">Private Seller</p>\r\n-                  </div>\r\n-                </div>\r\n-\r\n-                <Separator />\r\n-\r\n-                <a\r\n-                  href={`mailto:${car.seller.email}`}\r\n-                  className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground\"\r\n-                >\r\n-                  <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n-                </a>\r\n-\r\n-                <a\r\n-                  href={`tel:${car.seller.phone}`}\r\n-                  className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground\"\r\n-                >\r\n-                  <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n-                </a>\r\n-\r\n-                <Separator />\r\n-\r\n-                <Button size=\"sm\" className=\"w-full text-sm\">Contact Seller</Button>\r\n-              </CardContent>\r\n-            </Card>\r\n-          </div>\r\n-        </div>\r\n-\r\n-        {/* SIMILAR CARS */}\r\n-        {similarCars.length > 0 && (\r\n-          <section className=\"mt-10\">\r\n-            <h2 className=\"text-xl font-bold mb-4\">Similar Cars</h2>\r\n-            <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n-              {similarCars.map((c) => (\r\n-                <CarCard key={c.id} car={c} compact />\r\n-              ))}\r\n-            </div>\r\n-          </section>\r\n-        )}\r\n-\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default CarDetail;\r\n"
                },
                {
                    "date": 1764682794664,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,5 @@\n+// src/pages/CarDetail.tsx\r\n import { useParams, useNavigate } from \"react-router-dom\";\r\n import { useEffect, useState } from \"react\";\r\n import { getAllCars, getCarById, deleteCar } from \"@/api/cars\";\r\n import { Button } from \"@/components/ui/button\";\r\n@@ -13,8 +14,11 @@\n   Heart,\r\n   GitCompare,\r\n   Edit,\r\n   Trash2,\r\n+  Fuel,\r\n+  Car,\r\n+  Settings,\r\n } from \"lucide-react\";\r\n import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n import ImageCarousel from \"@/components/ImageCarousel\";\r\n@@ -103,8 +107,11 @@\n       </div>\r\n     );\r\n   }\r\n \r\n+  // -----------------------------\r\n+  // UI\r\n+  // -----------------------------\r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-3 py-6\">\r\n \r\n@@ -116,21 +123,29 @@\n         >\r\n           <ArrowLeft className=\"h-4 w-4\" /> Back\r\n         </Button>\r\n \r\n-        {/* OWNER ACTIONS */}\r\n         {isOwner && (\r\n           <div className=\"flex gap-2 mb-4\">\r\n-            <Button size=\"sm\" onClick={() => navigate(`/edit-car/${car.id}`)} className=\"gap-1 text-sm\">\r\n+            <Button\r\n+              size=\"sm\"\r\n+              onClick={() => navigate(`/edit-car/${car.id}`)}\r\n+              className=\"gap-1 text-sm\"\r\n+            >\r\n               <Edit className=\"h-4 w-4\" /> Edit\r\n             </Button>\r\n-            <Button size=\"sm\" variant=\"destructive\" onClick={handleDelete} className=\"gap-1 text-sm\">\r\n+            <Button\r\n+              size=\"sm\"\r\n+              variant=\"destructive\"\r\n+              onClick={handleDelete}\r\n+              className=\"gap-1 text-sm\"\r\n+            >\r\n               <Trash2 className=\"h-4 w-4\" /> Delete\r\n             </Button>\r\n           </div>\r\n         )}\r\n \r\n-        {/* ACTION BUTTONS */}\r\n+        {/* SAVE + COMPARE */}\r\n         <div className=\"mb-4 flex gap-2\">\r\n           <Button\r\n             size=\"sm\"\r\n             variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n@@ -155,12 +170,9 @@\n               if (isInComparison(car.id)) {\r\n                 removeFromComparison(car.id);\r\n                 toast({ title: \"Removed from comparison\" });\r\n               } else {\r\n-                const added = addToComparison(car);\r\n-                toast({\r\n-                  title: added ? \"Added to comparison\" : \"Comparison full\",\r\n-                });\r\n+                addToComparison(car);\r\n               }\r\n             }}\r\n             className=\"gap-2 text-xs\"\r\n           >\r\n@@ -169,9 +181,9 @@\n           </Button>\r\n         </div>\r\n \r\n         <div className=\"grid gap-6 lg:grid-cols-3\">\r\n-          {/* LEFT SIDE */}\r\n+          {/* LEFT */}\r\n           <div className=\"lg:col-span-2 space-y-4\">\r\n             <Card className=\"overflow-hidden\">\r\n               <ImageCarousel images={car.images} alt={car.title} />\r\n             </Card>\r\n@@ -195,8 +207,9 @@\n               </CardHeader>\r\n \r\n               <CardContent className=\"space-y-4 text-sm\">\r\n \r\n+                {/* YEAR + MILEAGE */}\r\n                 <div className=\"grid grid-cols-2 gap-4\">\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Calendar className=\"h-4 w-4\" />\r\n                     <div>\r\n@@ -208,23 +221,65 @@\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Gauge className=\"h-4 w-4\" />\r\n                     <div>\r\n                       <p className=\"text-xs\">Mileage</p>\r\n-                      <p className=\"font-semibold\">{car.mileage.toLocaleString()} mi</p>\r\n+                      <p className=\"font-semibold\">\r\n+                        {car.mileage.toLocaleString()} mi\r\n+                      </p>\r\n                     </div>\r\n                   </div>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n+                {/* DESCRIPTION */}\r\n                 <div>\r\n                   <h3 className=\"font-semibold text-base mb-2\">Description</h3>\r\n-                  <p className=\"text-muted-foreground text-sm\">{car.description}</p>\r\n+                  <p className=\"text-muted-foreground text-sm\">\r\n+                    {car.description}\r\n+                  </p>\r\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n+                {/* ------------------------------ */}\r\n+                {/* NEW SPECIFICATIONS SECTION 👇 */}\r\n+                {/* ------------------------------ */}\r\n                 <div>\r\n+                  <h3 className=\"font-semibold text-base mb-2\">Specifications</h3>\r\n+\r\n+                  <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n+                    {car.fuelType && (\r\n+                      <p><strong>Fuel:</strong> {car.fuelType}</p>\r\n+                    )}\r\n+                    {car.transmission && (\r\n+                      <p><strong>Transmission:</strong> {car.transmission}</p>\r\n+                    )}\r\n+                    {car.color && (\r\n+                      <p><strong>Color:</strong> {car.color}</p>\r\n+                    )}\r\n+                    {car.engineSize && (\r\n+                      <p><strong>Engine Size:</strong> {car.engineSize}</p>\r\n+                    )}\r\n+                    {car.doors !== undefined && (\r\n+                      <p><strong>Doors:</strong> {car.doors}</p>\r\n+                    )}\r\n+                    {car.cylinders !== undefined && (\r\n+                      <p><strong>Cylinders:</strong> {car.cylinders}</p>\r\n+                    )}\r\n+                    {car.drivetrain && (\r\n+                      <p><strong>Drivetrain:</strong> {car.drivetrain}</p>\r\n+                    )}\r\n+                    {car.bodyType && (\r\n+                      <p><strong>Body Type:</strong> {car.bodyType}</p>\r\n+                    )}\r\n+                  </div>\r\n+                </div>\r\n+\r\n+                <Separator />\r\n+\r\n+                {/* LISTED ON */}\r\n+                <div>\r\n                   <h3 className=\"font-semibold text-base mb-2\">Listed On</h3>\r\n                   <div className=\"flex flex-wrap gap-1\">\r\n                     {car.platform.map((p, i) => (\r\n                       <Badge key={i} variant=\"secondary\" className=\"px-2 py-1 text-xs\">\r\n@@ -237,9 +292,9 @@\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n-          {/* RIGHT SIDE: SELLER CARD */}\r\n+          {/* RIGHT: SELLER */}\r\n           <div className=\"lg:col-span-1 space-y-4\">\r\n             <Card className=\"sticky top-20\">\r\n               <CardHeader>\r\n                 <CardTitle className=\"text-base\">Seller Information</CardTitle>\r\n@@ -253,9 +308,8 @@\n                     </AvatarFallback>\r\n                   </Avatar>\r\n                   <div>\r\n                     <p className=\"font-semibold text-sm\">{car.seller.name}</p>\r\n-                    <p className=\"text-xs text-muted-foreground\">Private Seller</p>\r\n                   </div>\r\n                 </div>\r\n \r\n                 <Separator />\r\n@@ -275,9 +329,11 @@\n                 </a>\r\n \r\n                 <Separator />\r\n \r\n-                <Button size=\"sm\" className=\"w-full text-sm\">Contact Seller</Button>\r\n+                <Button size=\"sm\" className=\"w-full text-sm\">\r\n+                  Contact Seller\r\n+                </Button>\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n         </div>\r\n@@ -287,9 +343,9 @@\n           <section className=\"mt-10\">\r\n             <h2 className=\"text-xl font-bold mb-4\">Similar Cars</h2>\r\n             <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n               {similarCars.map((c) => (\r\n-                <CarCard key={c.id} car={c}  />\r\n+                <CarCard key={c.id} car={c} />\r\n               ))}\r\n             </div>\r\n           </section>\r\n         )}\r\n"
                },
                {
                    "date": 1764685554914,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,11 +14,9 @@\n   Heart,\r\n   GitCompare,\r\n   Edit,\r\n   Trash2,\r\n-  Fuel,\r\n-  Car,\r\n-  Settings,\r\n+  MessageCircle,\r\n } from \"lucide-react\";\r\n import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\n import { Separator } from \"@/components/ui/separator\";\r\n import ImageCarousel from \"@/components/ImageCarousel\";\r\n@@ -88,8 +86,16 @@\n       });\r\n     }\r\n   };\r\n \r\n+  const buildWhatsAppLink = (phoneRaw: string, car: CarType) => {\r\n+    const digits = phoneRaw.replace(/\\D/g, \"\");\r\n+    if (!digits) return \"#\";\r\n+\r\n+    const text = `Hi ${car.seller.name}, I'm interested in your ${car.title} listed for $${car.price.toLocaleString()}. Is it still available?`;\r\n+    return `https://wa.me/${digits}?text=${encodeURIComponent(text)}`;\r\n+  };\r\n+\r\n   if (loading) {\r\n     return (\r\n       <div className=\"container mx-auto px-3 py-20 text-center\">\r\n         <h1 className=\"text-xl font-bold\">Loading car details...</h1>\r\n@@ -113,9 +119,8 @@\n   // -----------------------------\r\n   return (\r\n     <div className=\"min-h-screen bg-background\">\r\n       <div className=\"container mx-auto px-3 py-6\">\r\n-\r\n         <Button\r\n           variant=\"ghost\"\r\n           size=\"sm\"\r\n           onClick={() => navigate(\"/\")}\r\n@@ -206,9 +211,8 @@\n                 </div>\r\n               </CardHeader>\r\n \r\n               <CardContent className=\"space-y-4 text-sm\">\r\n-\r\n                 {/* YEAR + MILEAGE */}\r\n                 <div className=\"grid grid-cols-2 gap-4\">\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                     <Calendar className=\"h-4 w-4\" />\r\n@@ -240,38 +244,54 @@\n                 </div>\r\n \r\n                 <Separator />\r\n \r\n-                {/* ------------------------------ */}\r\n-                {/* NEW SPECIFICATIONS SECTION 👇 */}\r\n-                {/* ------------------------------ */}\r\n+                {/* SPECIFICATIONS */}\r\n                 <div>\r\n-                  <h3 className=\"font-semibold text-base mb-2\">Specifications</h3>\r\n+                  <h3 className=\"font-semibold text-base mb-2\">\r\n+                    Specifications\r\n+                  </h3>\r\n \r\n                   <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                     {car.fuelType && (\r\n-                      <p><strong>Fuel:</strong> {car.fuelType}</p>\r\n+                      <p>\r\n+                        <strong>Fuel:</strong> {car.fuelType}\r\n+                      </p>\r\n                     )}\r\n                     {car.transmission && (\r\n-                      <p><strong>Transmission:</strong> {car.transmission}</p>\r\n+                      <p>\r\n+                        <strong>Transmission:</strong> {car.transmission}\r\n+                      </p>\r\n                     )}\r\n                     {car.color && (\r\n-                      <p><strong>Color:</strong> {car.color}</p>\r\n+                      <p>\r\n+                        <strong>Color:</strong> {car.color}\r\n+                      </p>\r\n                     )}\r\n                     {car.engineSize && (\r\n-                      <p><strong>Engine Size:</strong> {car.engineSize}</p>\r\n+                      <p>\r\n+                        <strong>Engine Size:</strong> {car.engineSize}\r\n+                      </p>\r\n                     )}\r\n                     {car.doors !== undefined && (\r\n-                      <p><strong>Doors:</strong> {car.doors}</p>\r\n+                      <p>\r\n+                        <strong>Doors:</strong> {car.doors}\r\n+                      </p>\r\n                     )}\r\n                     {car.cylinders !== undefined && (\r\n-                      <p><strong>Cylinders:</strong> {car.cylinders}</p>\r\n+                      <p>\r\n+                        <strong>Cylinders:</strong> {car.cylinders}\r\n+                      </p>\r\n                     )}\r\n                     {car.drivetrain && (\r\n-                      <p><strong>Drivetrain:</strong> {car.drivetrain}</p>\r\n+                      <p>\r\n+                        <strong>Drivetrain:</strong> {car.drivetrain}\r\n+                      </p>\r\n                     )}\r\n                     {car.bodyType && (\r\n-                      <p><strong>Body Type:</strong> {car.bodyType}</p>\r\n+                      <p>\r\n+                        <strong>Body Type:</strong> {car.bodyType}\r\n+                      </p>\r\n                     )}\r\n                   </div>\r\n                 </div>\r\n \r\n@@ -281,24 +301,29 @@\n                 <div>\r\n                   <h3 className=\"font-semibold text-base mb-2\">Listed On</h3>\r\n                   <div className=\"flex flex-wrap gap-1\">\r\n                     {car.platform.map((p, i) => (\r\n-                      <Badge key={i} variant=\"secondary\" className=\"px-2 py-1 text-xs\">\r\n+                      <Badge\r\n+                        key={i}\r\n+                        variant=\"secondary\"\r\n+                        className=\"px-2 py-1 text-xs\"\r\n+                      >\r\n                         {p.name}\r\n                       </Badge>\r\n                     ))}\r\n                   </div>\r\n                 </div>\r\n-\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n \r\n           {/* RIGHT: SELLER */}\r\n           <div className=\"lg:col-span-1 space-y-4\">\r\n             <Card className=\"sticky top-20\">\r\n               <CardHeader>\r\n-                <CardTitle className=\"text-base\">Seller Information</CardTitle>\r\n+                <CardTitle className=\"text-base\">\r\n+                  Seller Information\r\n+                </CardTitle>\r\n               </CardHeader>\r\n \r\n               <CardContent className=\"space-y-4 text-sm\">\r\n                 <div className=\"flex items-center gap-3\">\r\n@@ -320,20 +345,50 @@\n                 >\r\n                   <Mail className=\"h-4 w-4\" /> {car.seller.email}\r\n                 </a>\r\n \r\n-                <a\r\n-                  href={`tel:${car.seller.phone}`}\r\n-                  className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground\"\r\n-                >\r\n-                  <Phone className=\"h-4 w-4\" /> {car.seller.phone || \"N/A\"}\r\n-                </a>\r\n+                {car.seller.phone && (\r\n+                  <a\r\n+                    href={`tel:${car.seller.phone}`}\r\n+                    className=\"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground\"\r\n+                  >\r\n+                    <Phone className=\"h-4 w-4\" /> {car.seller.phone}\r\n+                  </a>\r\n+                )}\r\n \r\n                 <Separator />\r\n \r\n-                <Button size=\"sm\" className=\"w-full text-sm\">\r\n-                  Contact Seller\r\n-                </Button>\r\n+                {car.seller.phone && (\r\n+                  <div className=\"space-y-2\">\r\n+                    <Button asChild size=\"sm\" className=\"w-full text-sm\">\r\n+                      <a href={`tel:${car.seller.phone}`}>\r\n+                        <Phone className=\"h-4 w-4 mr-2\" />\r\n+                        Call\r\n+                      </a>\r\n+                    </Button>\r\n+\r\n+                    <Button\r\n+                      asChild\r\n+                      size=\"sm\"\r\n+                      className=\"w-full text-sm\"\r\n+                    >\r\n+                      <a\r\n+                        href={buildWhatsAppLink(car.seller.phone, car)}\r\n+                        target=\"_blank\"\r\n+                        rel=\"noopener noreferrer\"\r\n+                      >\r\n+                        <MessageCircle className=\"h-4 w-4 mr-2\" />\r\n+                        WhatsApp\r\n+                      </a>\r\n+                    </Button>\r\n+                  </div>\r\n+                )}\r\n+\r\n+                {!car.seller.phone && (\r\n+                  <p className=\"text-xs text-muted-foreground\">\r\n+                    No phone number provided for this listing.\r\n+                  </p>\r\n+                )}\r\n               </CardContent>\r\n             </Card>\r\n           </div>\r\n         </div>\r\n@@ -348,9 +403,8 @@\n               ))}\r\n             </div>\r\n           </section>\r\n         )}\r\n-\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n"
                },
                {
                    "date": 1764685893925,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -194,24 +194,73 @@\n             </Card>\r\n \r\n             <Card>\r\n               <CardHeader>\r\n-                <div className=\"flex justify-between items-start\">\r\n-                  <div>\r\n-                    <CardTitle className=\"text-xl\">{car.title}</CardTitle>\r\n-                    <p className=\"mt-1 text-lg font-bold text-primary\">\r\n-                      ${car.price.toLocaleString()}\r\n-                    </p>\r\n-                  </div>\r\n-                  <Badge\r\n-                    variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n-                    className=\"capitalize text-xs px-2 py-1\"\r\n-                  >\r\n-                    {car.condition}\r\n-                  </Badge>\r\n-                </div>\r\n-              </CardHeader>\r\n+  <div className=\"flex justify-between items-start\">\r\n+    <div>\r\n+      <CardTitle className=\"text-xl\">{car.title}</CardTitle>\r\n \r\n+      <p className=\"mt-1 text-lg font-bold text-primary\">\r\n+        ${car.price.toLocaleString()}\r\n+      </p>\r\n+\r\n+      {/* ⭐ NEW: PHONE + WHATSAPP BUTTONS HERE */}\r\n+      {car.seller.phone && (\r\n+        <div className=\"flex gap-2 mt-2\">\r\n+          {/* CALL BUTTON */}\r\n+          <Button\r\n+            asChild\r\n+            size=\"sm\"\r\n+            variant=\"outline\"\r\n+            className=\"flex items-center gap-2\"\r\n+          >\r\n+            <a href={`tel:${car.seller.phone}`}>\r\n+              <Phone className=\"h-4 w-4\" />\r\n+              {car.seller.phone}\r\n+            </a>\r\n+          </Button>\r\n+\r\n+          {/* WHATSAPP BUTTON */}\r\n+          <Button\r\n+            asChild\r\n+            size=\"sm\"\r\n+            className=\"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white\"\r\n+          >\r\n+            <a\r\n+              href={`https://wa.me/${car.seller.phone.replace(/\\D/g, \"\")}?text=${encodeURIComponent(\r\n+                `Hi, I'm interested in your ${car.title} listed for $${car.price.toLocaleString()}.`\r\n+              )}`}\r\n+              target=\"_blank\"\r\n+            >\r\n+              <svg\r\n+                xmlns=\"http://www.w3.org/2000/svg\"\r\n+                height=\"18\"\r\n+                viewBox=\"0 0 32 32\"\r\n+                width=\"18\"\r\n+              >\r\n+                <path\r\n+                  fill=\"white\"\r\n+                  d=\"M16.04 6.005c-5.52 0-10 4.48-10 10 0 1.76.47 3.48 1.37 5.02l-1.45 5.32 5.46-1.42c1.48.8 3.15 1.22 4.64 1.22h.01c5.52 0 10-4.48 10-10s-4.49-10.14-10.03-10.14zm5.88 14.34c-.25.7-1.47 1.35-2.05 1.43-.53.08-1.21.11-1.95-.12-.45-.14-1.03-.33-1.77-.65-3.12-1.34-5.15-4.46-5.31-4.67-.15-.21-1.27-1.7-1.27-3.25 0-1.55.79-2.32 1.07-2.63.28-.31.62-.39.83-.39.21 0 .41 0 .59.01.19.01.44-.07.69.53.25.6.85 2.07.92 2.22.07.15.11.32.02.52-.08.2-.13.33-.25.51-.13.18-.27.4-.39.54-.13.14-.27.3-.12.59.14.29.63 1.04 1.36 1.68.94.84 1.74 1.1 2.03 1.22.29.12.46.1.63-.06.17-.17.73-.85.93-1.14.21-.29.42-.24.69-.14.28.1 1.76.83 2.06.98.3.15.5.23.57.36.08.14.08.81-.17 1.51z\"\r\n+                />\r\n+              </svg>\r\n+              WhatsApp\r\n+            </a>\r\n+          </Button>\r\n+        </div>\r\n+      )}\r\n+      {/* END NEW SECTION */}\r\n+    </div>\r\n+\r\n+    <Badge\r\n+      variant={car.condition === \"new\" ? \"default\" : \"outline\"}\r\n+      className=\"capitalize text-xs px-2 py-1\"\r\n+    >\r\n+      {car.condition}\r\n+    </Badge>\r\n+  </div>\r\n+</CardHeader>\r\n+\r\n+\r\n               <CardContent className=\"space-y-4 text-sm\">\r\n                 {/* YEAR + MILEAGE */}\r\n                 <div className=\"grid grid-cols-2 gap-4\">\r\n                   <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n"
                },
                {
                    "date": 1764777660767,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -188,12 +188,22 @@\n \r\n         <div className=\"grid gap-6 lg:grid-cols-3\">\r\n           {/* LEFT */}\r\n           <div className=\"lg:col-span-2 space-y-4\">\r\n-            <Card className=\"overflow-hidden\">\r\n-              <ImageCarousel images={car.images} alt={car.title} />\r\n-            </Card>\r\n+          <Card className=\"relative overflow-hidden\">\r\n+  {/* ⭐ SOLD BADGE OVER IMAGE */}\r\n+  {car.sold && (\r\n+    <div className=\"absolute inset-0 bg-black/40 z-20 flex items-center justify-center\">\r\n+      <span className=\"bg-red-700 text-white px-6 py-2 text-3xl font-extrabold rounded-md shadow-lg rotate-[-10deg]\">\r\n+        SOLD\r\n+      </span>\r\n+    </div>\r\n+  )}\r\n \r\n+  <ImageCarousel images={car.images} alt={car.title} />\r\n+</Card>\r\n+\r\n+\r\n             <Card>\r\n               <CardHeader>\r\n   <div className=\"flex justify-between items-start\">\r\n     <div>\r\n"
                }
            ],
            "date": 1759428015711,
            "name": "Commit-0",
            "content": "import { useParams, useNavigate } from \"react-router-dom\";\r\nimport { mockCars } from \"@/lib/mockData\";\r\nimport { getSimilarCars } from \"@/lib/filterUtils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { ArrowLeft, MapPin, Gauge, Calendar, Mail, Phone, Heart, GitCompare, Fuel, Cog } from \"lucide-react\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport ImageCarousel from \"@/components/ImageCarousel\";\r\nimport CarCard from \"@/components/CarCard\";\r\nimport { useFavorites } from \"@/contexts/FavoritesContext\";\r\nimport { useComparison } from \"@/contexts/ComparisonContext\";\r\nimport { toast } from \"@/hooks/use-toast\";\r\n\r\nconst CarDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { isFavorite, toggleFavorite } = useFavorites();\r\n  const { isInComparison, addToComparison, removeFromComparison } = useComparison();\r\n  \r\n  const car = mockCars.find((c) => c.id === id);\r\n  const similarCars = car ? getSimilarCars(car, mockCars) : [];\r\n\r\n  const handleFavoriteClick = () => {\r\n    if (car) {\r\n      toggleFavorite(car.id);\r\n      toast({\r\n        title: isFavorite(car.id) ? \"Removed from favorites\" : \"Added to favorites\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleComparisonClick = () => {\r\n    if (!car) return;\r\n    if (isInComparison(car.id)) {\r\n      removeFromComparison(car.id);\r\n      toast({ title: \"Removed from comparison\" });\r\n    } else {\r\n      const added = addToComparison(car);\r\n      if (added) {\r\n        toast({ title: \"Added to comparison\" });\r\n      } else {\r\n        toast({\r\n          title: \"Comparison limit reached\",\r\n          description: \"You can only compare up to 3 cars at a time.\",\r\n          variant: \"destructive\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!car) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-20 text-center\">\r\n        <h1 className=\"mb-4 text-3xl font-bold\">Car Not Found</h1>\r\n        <Button onClick={() => navigate(\"/\")}>Back to Dashboard</Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <Button\r\n          variant=\"ghost\"\r\n          onClick={() => navigate(\"/\")}\r\n          className=\"mb-6 gap-2\"\r\n        >\r\n          <ArrowLeft className=\"h-4 w-4\" />\r\n          Back to Listings\r\n        </Button>\r\n\r\n        <div className=\"mb-6 flex gap-2\">\r\n          <Button\r\n            variant={isFavorite(car.id) ? \"default\" : \"outline\"}\r\n            onClick={handleFavoriteClick}\r\n            className=\"gap-2\"\r\n          >\r\n            <Heart className={`h-4 w-4 ${isFavorite(car.id) ? \"fill-current\" : \"\"}`} />\r\n            {isFavorite(car.id) ? \"Saved\" : \"Save\"}\r\n          </Button>\r\n          <Button\r\n            variant={isInComparison(car.id) ? \"default\" : \"outline\"}\r\n            onClick={handleComparisonClick}\r\n            className=\"gap-2\"\r\n          >\r\n            <GitCompare className=\"h-4 w-4\" />\r\n            {isInComparison(car.id) ? \"In Comparison\" : \"Compare\"}\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"grid gap-8 lg:grid-cols-3\">\r\n          {/* Main Content */}\r\n          <div className=\"lg:col-span-2 space-y-6\">\r\n            {/* Image Carousel */}\r\n            <Card className=\"overflow-hidden\">\r\n              <ImageCarousel images={car.images} alt={car.title} />\r\n            </Card>\r\n\r\n            {/* Car Details */}\r\n            <Card>\r\n              <CardHeader>\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div>\r\n                    <CardTitle className=\"text-3xl\">{car.title}</CardTitle>\r\n                    <p className=\"mt-2 text-2xl font-bold text-primary\">\r\n                      ${car.price.toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                  <Badge variant={car.condition === \"new\" ? \"default\" : \"outline\"} className=\"capitalize text-base px-4 py-1\">\r\n                    {car.condition}\r\n                  </Badge>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-6\">\r\n                <div className=\"grid grid-cols-2 gap-4 md:grid-cols-4\">\r\n                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                    <Calendar className=\"h-5 w-5\" />\r\n                    <div>\r\n                      <p className=\"text-xs\">Year</p>\r\n                      <p className=\"font-semibold text-foreground\">{car.year}</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                    <Gauge className=\"h-5 w-5\" />\r\n                    <div>\r\n                      <p className=\"text-xs\">Mileage</p>\r\n                      <p className=\"font-semibold text-foreground\">{car.mileage.toLocaleString()} mi</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                    <MapPin className=\"h-5 w-5\" />\r\n                    <div>\r\n                      <p className=\"text-xs\">Location</p>\r\n                      <p className=\"font-semibold text-foreground line-clamp-1\">{car.location}</p>\r\n                    </div>\r\n                  </div>\r\n                  {car.fuelType && (\r\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                      <Fuel className=\"h-5 w-5\" />\r\n                      <div>\r\n                        <p className=\"text-xs\">Fuel Type</p>\r\n                        <p className=\"font-semibold text-foreground capitalize\">{car.fuelType}</p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  {car.transmission && (\r\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n                      <Cog className=\"h-5 w-5\" />\r\n                      <div>\r\n                        <p className=\"text-xs\">Transmission</p>\r\n                        <p className=\"font-semibold text-foreground capitalize\">{car.transmission}</p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <Separator />\r\n\r\n                <div>\r\n                  <h3 className=\"mb-3 text-lg font-semibold\">Description</h3>\r\n                  <p className=\"text-muted-foreground leading-relaxed\">{car.description}</p>\r\n                </div>\r\n\r\n                <Separator />\r\n\r\n                <div>\r\n                  <h3 className=\"mb-3 text-lg font-semibold\">Listed On</h3>\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {car.platform.map((platform, index) => (\r\n                      <Badge key={index} variant=\"secondary\" className=\"text-sm px-3 py-1\">\r\n                        {platform.name}\r\n                      </Badge>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Sidebar - Seller Info */}\r\n          <div className=\"lg:col-span-1\">\r\n            <Card className=\"sticky top-24\">\r\n              <CardHeader>\r\n                <CardTitle>Seller Information</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Avatar className=\"h-12 w-12\">\r\n                    <AvatarFallback className=\"bg-primary text-primary-foreground text-lg\">\r\n                      {car.seller.name.charAt(0).toUpperCase()}\r\n                    </AvatarFallback>\r\n                  </Avatar>\r\n                  <div>\r\n                    <p className=\"font-semibold\">{car.seller.name}</p>\r\n                    <p className=\"text-sm text-muted-foreground\">Private Seller</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <Separator />\r\n\r\n                <div className=\"space-y-3\">\r\n                  <a\r\n                    href={`mailto:${car.seller.email}`}\r\n                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n                  >\r\n                    <Mail className=\"h-4 w-4\" />\r\n                    {car.seller.email}\r\n                  </a>\r\n                  <a\r\n                    href={`tel:${car.seller.phone}`}\r\n                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-smooth\"\r\n                  >\r\n                    <Phone className=\"h-4 w-4\" />\r\n                    {car.seller.phone}\r\n                  </a>\r\n                </div>\r\n\r\n                <Separator />\r\n\r\n                <Button variant=\"accent\" className=\"w-full\" size=\"lg\">\r\n                  Contact Seller\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Similar Cars */}\r\n        {similarCars.length > 0 && (\r\n          <section className=\"mt-12\">\r\n            <h2 className=\"mb-6 text-2xl font-bold\">Similar Cars You May Like</h2>\r\n            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n              {similarCars.map((similarCar) => (\r\n                <CarCard key={similarCar.id} car={similarCar} />\r\n              ))}\r\n            </div>\r\n          </section>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CarDetail;\r\n"
        }
    ]
}